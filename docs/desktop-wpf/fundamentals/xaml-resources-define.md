---
title: 定義 XAML 資源
description: 瞭解適用于 .NET Core 的 WPF 中的 XAML 資源。 瞭解 XAML 資源的類型，並瞭解如何定義 XAML 資源。
author: adegeo
ms.author: adegeo
ms.date: 08/21/2019
ms.openlocfilehash: f8eaf3fd931aa6804b0b9a9c19c6bcc042678ebf
ms.sourcegitcommit: dc2feef0794cf41dbac1451a13b8183258566c0e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/24/2020
ms.locfileid: "85325716"
---
# <a name="overview-of-xaml-resources"></a><span data-ttu-id="7cf6c-104">XAML 資源的總覽</span><span class="sxs-lookup"><span data-stu-id="7cf6c-104">Overview of XAML resources</span></span>

<span data-ttu-id="7cf6c-105">資源是可以在應用程式中的不同位置重複使用的物件。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-105">A resource is an object that can be reused in different places in your app.</span></span> <span data-ttu-id="7cf6c-106">資源的範例包括筆刷和樣式。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-106">Examples of resources include brushes and styles.</span></span> <span data-ttu-id="7cf6c-107">本總覽說明如何使用 Extensible Application Markup Language （XAML）中的資源。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-107">This overview describes how to use resources in Extensible Application Markup Language (XAML).</span></span> <span data-ttu-id="7cf6c-108">您也可以使用程式碼來建立和存取資源。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-108">You can also create and access resources by using code.</span></span>

> [!NOTE]
> <span data-ttu-id="7cf6c-109">本文所述的 XAML 資源與應用程式*資源*不同，通常是新增至應用程式的檔案，例如內容、資料或內嵌檔案。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-109">XAML resources described in this article are different from *app resources* which are generally files added to an app, such as content, data, or embedded files.</span></span>

<!-- TODO: File redirect from docs\framework\wpf\advanced\xaml-resources.md -->

[!INCLUDE [desktop guide under construction](../../../includes/desktop-guide-preview-note.md)]

## <a name="using-resources-in-xaml"></a><span data-ttu-id="7cf6c-110">在 XAML 中使用資源</span><span class="sxs-lookup"><span data-stu-id="7cf6c-110">Using resources in XAML</span></span>

<span data-ttu-id="7cf6c-111">下列範例會將定義 <xref:System.Windows.Media.SolidColorBrush> 為頁面根項目上的資源。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-111">The following example defines a <xref:System.Windows.Media.SolidColorBrush> as a resource on the root element of a page.</span></span> <span data-ttu-id="7cf6c-112">然後，此範例會參考資源，並使用它來設定數個子項目的屬性，包括 <xref:System.Windows.Shapes.Ellipse> 、 <xref:System.Windows.Controls.TextBlock> 和 <xref:System.Windows.Controls.Button> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-112">The example then references the resource and uses it to set properties of several child elements, including an <xref:System.Windows.Shapes.Ellipse>, a <xref:System.Windows.Controls.TextBlock>, and a <xref:System.Windows.Controls.Button>.</span></span>

[!code-xaml[FEResourceSH_snip#XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page1.xaml#xaml)]

<span data-ttu-id="7cf6c-113">每個架構層級專案（ <xref:System.Windows.FrameworkElement> 或 <xref:System.Windows.FrameworkContentElement> ）都有一個 <xref:System.Windows.FrameworkElement.Resources%2A> 屬性，其為 <xref:System.Windows.ResourceDictionary> 包含已定義資源的類型。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-113">Every framework-level element (<xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>) has a <xref:System.Windows.FrameworkElement.Resources%2A> property, which is a <xref:System.Windows.ResourceDictionary> type that contains defined resources.</span></span> <span data-ttu-id="7cf6c-114">您可以在任何元素上定義資源，例如 <xref:System.Windows.Controls.Button> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-114">You can define resources on any element, such as a <xref:System.Windows.Controls.Button>.</span></span> <span data-ttu-id="7cf6c-115">不過，資源最常定義在根項目上， <xref:System.Windows.Controls.Page> 在此範例中為。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-115">However, resources are most often defined on the root element, which is <xref:System.Windows.Controls.Page> in the example.</span></span>

<span data-ttu-id="7cf6c-116">資源字典中的每個資源都必須有唯一索引鍵。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-116">Each resource in a resource dictionary must have a unique key.</span></span> <span data-ttu-id="7cf6c-117">當您在標記中定義資源時，您可以透過[x：Key](../xaml-services/xkey-directive.md)指示詞指派唯一索引鍵。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-117">When you define resources in markup, you assign the unique key through the [x:Key Directive](../xaml-services/xkey-directive.md).</span></span> <span data-ttu-id="7cf6c-118">索引鍵通常是字串；不過，您也可以使用適當的標記延伸，將它設定為其他物件類型。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-118">Typically, the key is a string; however, you can also set it to other object types by using the appropriate markup extensions.</span></span> <span data-ttu-id="7cf6c-119">WPF 中的特定功能區域會使用資源的非字串索引鍵，特別是針對樣式、元件資源和資料樣式。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-119">Non-string keys for resources are used by certain feature areas in WPF, notably for styles, component resources, and data styling.</span></span>

<span data-ttu-id="7cf6c-120">您可以使用定義的資源搭配資源標記延伸語法，以指定資源的索引鍵名稱。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-120">You can use a defined resource with the resource markup extension syntax that specifies the key name of the resource.</span></span> <span data-ttu-id="7cf6c-121">例如，使用資源作為另一個元素上的屬性值。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-121">For example, use the resource as the value of a property on another element.</span></span>

[!code-xaml[FEResourceSH_snip#KeyNameUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#keynameusage)]

<span data-ttu-id="7cf6c-122">在上述範例中，當 XAML 載入器處理上屬性的值時 `{StaticResource MyBrush}` <xref:System.Windows.Controls.Control.Background%2A> <xref:System.Windows.Controls.Button> ，資源查閱邏輯會先檢查元素的資源字典 <xref:System.Windows.Controls.Button> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-122">In the preceding example, when the XAML loader processes the value `{StaticResource MyBrush}` for the <xref:System.Windows.Controls.Control.Background%2A> property on <xref:System.Windows.Controls.Button>, the resource lookup logic first checks the resource dictionary for the <xref:System.Windows.Controls.Button> element.</span></span> <span data-ttu-id="7cf6c-123">如果 <xref:System.Windows.Controls.Button> 沒有資源索引鍵的定義 `MyBrush` （在此範例中，它不是，它的資源集合是空的），則查閱接下來會檢查的父元素 <xref:System.Windows.Controls.Button> ，也就是 <xref:System.Windows.Controls.Page> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-123">If <xref:System.Windows.Controls.Button> doesn't have a definition of the resource key `MyBrush` (in that example it doesn't; its resource collection is empty), the lookup next checks the parent element of <xref:System.Windows.Controls.Button>, which is <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="7cf6c-124">如果您在根項目上定義資源，則的 <xref:System.Windows.Controls.Page> 邏輯樹狀結構中的所有元素都 <xref:System.Windows.Controls.Page> 可以存取它。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-124">If you define a resource on the <xref:System.Windows.Controls.Page> root element, all the elements in the logical tree of the <xref:System.Windows.Controls.Page> can access it.</span></span> <span data-ttu-id="7cf6c-125">而且，您可以重複使用相同的資源來設定接受資源所代表之相同類型的任何屬性值。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-125">And you can reuse the same resource for setting the value of any property that accepts the same type that the resource represents.</span></span> <span data-ttu-id="7cf6c-126">在上述範例中，相同的 `MyBrush` 資源會設定兩個不同的屬性：的 <xref:System.Windows.Controls.Control.Background%2A> <xref:System.Windows.Controls.Button> 、和 <xref:System.Windows.Shapes.Shape.Fill%2A> 的 <xref:System.Windows.Shapes.Rectangle> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-126">In the previous example, the same `MyBrush` resource sets two different properties: the <xref:System.Windows.Controls.Control.Background%2A> of a <xref:System.Windows.Controls.Button>, and the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle>.</span></span>

## <a name="static-and-dynamic-resources"></a><span data-ttu-id="7cf6c-127">靜態和動態資源</span><span class="sxs-lookup"><span data-stu-id="7cf6c-127">Static and dynamic resources</span></span>

<span data-ttu-id="7cf6c-128">可以將資源當做靜態或動態來參考。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-128">A resource can be referenced as either static or dynamic.</span></span> <span data-ttu-id="7cf6c-129">您可以使用[StaticResource 標記延伸](../../framework/wpf/advanced/staticresource-markup-extension.md)或[DynamicResource 標記延伸](../../framework/wpf/advanced/dynamicresource-markup-extension.md)來建立參考。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-129">References are created by using either the [StaticResource Markup Extension](../../framework/wpf/advanced/staticresource-markup-extension.md) or the [DynamicResource Markup Extension](../../framework/wpf/advanced/dynamicresource-markup-extension.md).</span></span> <span data-ttu-id="7cf6c-130">標記延伸是一種 XAML 功能，可讓標記延伸處理屬性字串，並將物件傳回至 XAML 載入器，藉此指定物件參考。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-130">A markup extension is a XAML feature that lets you specify an object reference by having the markup extension process the attribute string and return the object to a XAML loader.</span></span> <span data-ttu-id="7cf6c-131">如需標記延伸行為的詳細資訊，請參閱[標記延伸和 WPF XAML](../../framework/wpf/advanced/markup-extensions-and-wpf-xaml.md)。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-131">For more information about markup extension behavior, see [Markup Extensions and WPF XAML](../../framework/wpf/advanced/markup-extensions-and-wpf-xaml.md).</span></span>

<span data-ttu-id="7cf6c-132">當您使用標記延伸時，通常會以特定標記延伸所處理的字串格式提供一或多個參數。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-132">When you use a markup extension, you typically provide one or more parameters in string form that are processed by that particular markup extension.</span></span> <span data-ttu-id="7cf6c-133">[StaticResource 標記延伸](../../framework/wpf/advanced/staticresource-markup-extension.md)會在所有可用的資源字典中查閱該索引鍵的值，藉此處理索引鍵。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-133">The [StaticResource Markup Extension](../../framework/wpf/advanced/staticresource-markup-extension.md) processes a key by looking up the value for that key in all available resource dictionaries.</span></span> <span data-ttu-id="7cf6c-134">處理會在載入期間進行，這是載入進程需要指派屬性值的時候。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-134">Processing happens during load, which is when the loading process needs to assign the property value.</span></span> <span data-ttu-id="7cf6c-135">[DynamicResource 標記延伸](../../framework/wpf/advanced/dynamicresource-markup-extension.md)會改為藉由建立運算式來處理索引鍵，而且該運算式會在應用程式執行之前維持未評估狀態，此時運算式會進行評估並提供值。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-135">The [DynamicResource Markup Extension](../../framework/wpf/advanced/dynamicresource-markup-extension.md) instead processes a key by creating an expression, and that expression remains unevaluated until the app runs, at which time the expression is evaluated and provides a value.</span></span>

<span data-ttu-id="7cf6c-136">當您參考資源時，下列考量可能會影響您使用靜態資源參考或動態資源參考：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-136">When you reference a resource, the following considerations can influence whether you use a static resource reference or a dynamic resource reference:</span></span>

- <span data-ttu-id="7cf6c-137">當您決定如何為應用程式建立資源的整體設計（每頁、在應用程式中、在鬆散 XAML 中，或在僅限資源的元件中）時，請考慮下列事項：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-137">When determining the overall design of how you create the resources for your app (per page, in the app, in loose XAML, or in a resource-only assembly), consider the following:</span></span>

- <span data-ttu-id="7cf6c-138">應用程式的功能。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-138">The app's functionality.</span></span> <span data-ttu-id="7cf6c-139">您的應用程式需求即時更新資源嗎？</span><span class="sxs-lookup"><span data-stu-id="7cf6c-139">Are updating resources in real-time part of your app requirements?</span></span>
- <span data-ttu-id="7cf6c-140">該資源參考型別的相關查閱行為。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-140">The respective lookup behavior of that resource reference type.</span></span>
- <span data-ttu-id="7cf6c-141">特定屬性或資源類型，以及這些類型的原生行為。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-141">The particular property or resource type, and the native behavior of those types.</span></span>

## <a name="static-resources"></a><span data-ttu-id="7cf6c-142">靜態資源</span><span class="sxs-lookup"><span data-stu-id="7cf6c-142">Static resources</span></span>

<span data-ttu-id="7cf6c-143">靜態資源參考最適用於下列情況：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-143">Static resource references work best for the following circumstances:</span></span>

- <span data-ttu-id="7cf6c-144">您的應用程式設計將大部分的資源集中在頁面或應用層級的資源字典中。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-144">Your app design concentrates most of its resources into page or application-level resource dictionaries.</span></span> <span data-ttu-id="7cf6c-145">靜態資源參考不會根據執行時間行為重新評估，例如重載頁面。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-145">Static resource references aren't reevaluated based on runtime behaviors, such as reloading a page.</span></span> <span data-ttu-id="7cf6c-146">因此，根據您的資源和應用程式設計，避免大量動態資源參考時，可能會有一些效能上的好處。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-146">So there can be some performance benefit to avoiding large numbers of dynamic resource references when they aren't necessary based on your resource and app design.</span></span>

- <span data-ttu-id="7cf6c-147">您要設定的屬性值不在 <xref:System.Windows.DependencyObject> 或上 <xref:System.Windows.Freezable> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-147">You're setting the value of a property that isn't on a <xref:System.Windows.DependencyObject> or a <xref:System.Windows.Freezable>.</span></span>

- <span data-ttu-id="7cf6c-148">您所建立的資源字典將會編譯成 DLL，並封裝為應用程式的一部分，或在應用程式之間共用。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-148">You're creating a resource dictionary that will be compiled into a DLL and packaged as part of the app or shared between apps.</span></span>

- <span data-ttu-id="7cf6c-149">您正在建立自訂控制項的主題，並定義在主題中使用的資源。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-149">You're creating a theme for a custom control and are defining resources that are used within the themes.</span></span> <span data-ttu-id="7cf6c-150">在此情況下，您通常不想要動態資源參考查閱行為;您會想要有靜態資源參考行為，讓查閱可預測，並獨立于主題中。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-150">For this case, you typically do not want the dynamic resource reference lookup behavior; you instead want the static resource reference behavior so that the lookup is predictable and self-contained to the theme.</span></span> <span data-ttu-id="7cf6c-151">使用動態資源參考，即使在執行時間之前，還是會將主題內的參考保持為未評估狀態。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-151">With a dynamic resource reference, even a reference within a theme is left unevaluated until run-time.</span></span> <span data-ttu-id="7cf6c-152">而且有可能會在套用主題時，部分本機專案會重新定義您的主題嘗試參考的索引鍵，而本機元素會在查詢中的主題本身之前繼續進行。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-152">and there is a chance that when the theme is applied, some local element will redefine a key that your theme is trying to reference, and the local element will fall prior to the theme itself in the lookup.</span></span> <span data-ttu-id="7cf6c-153">如果發生這種情況，您的主題將無法如預期般運作。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-153">If that happens, your theme will not behave as expected.</span></span>

- <span data-ttu-id="7cf6c-154">您要使用資源來設定大量相依性屬性。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-154">You're using resources to set large numbers of dependency properties.</span></span> <span data-ttu-id="7cf6c-155">相依性屬性具有由屬性系統啟用的有效值快取，因此，如果您提供可在載入時評估之相依性屬性的值，則相依性屬性不需要檢查重新評估的運算式，而且可以傳回最後一個有效值。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-155">Dependency properties have effective value caching as enabled by the property system, so if you provide a value for a dependency property that can be evaluated at load time, the dependency property doesn't have to check for a reevaluated expression and can return the last effective value.</span></span> <span data-ttu-id="7cf6c-156">這項技術可能會提升效能。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-156">This technique can be a performance benefit.</span></span>

- <span data-ttu-id="7cf6c-157">您想要變更所有取用者的基礎資源，或您想要使用[X:Shared 屬性](../xaml-services/xshared-attribute.md)為每個取用者維護不同的可寫入實例。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-157">You want to change the underlying resource for all consumers, or you want to maintain separate writable instances for each consumer by using the [x:Shared Attribute](../xaml-services/xshared-attribute.md).</span></span>

### <a name="static-resource-lookup-behavior"></a><span data-ttu-id="7cf6c-158">靜態資源查閱行為</span><span class="sxs-lookup"><span data-stu-id="7cf6c-158">Static resource lookup behavior</span></span>

<span data-ttu-id="7cf6c-159">以下描述當屬性或專案參考靜態資源時，會自動發生的查閱程式：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-159">The following describes the lookup process that automatically happens when a static resource is referenced by a property or element:</span></span>

01. <span data-ttu-id="7cf6c-160">查閱程序會檢查設定屬性之項目所定義的資源字典內，是否有要求的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-160">The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.</span></span>

01. <span data-ttu-id="7cf6c-161">查閱程式接著會將邏輯樹狀結構向上移至父元素和其資源字典。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-161">The lookup process then traverses the logical tree upward to the parent element and its resource dictionary.</span></span> <span data-ttu-id="7cf6c-162">此程式會繼續進行，直到達到根項目為止。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-162">This process continues until the root element is reached.</span></span>

01. <span data-ttu-id="7cf6c-163">已檢查應用程式資源。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-163">App resources are checked.</span></span> <span data-ttu-id="7cf6c-164">應用程式資源是資源字典中的資源，由 <xref:System.Windows.Application> WPF 應用程式的物件所定義。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-164">App resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your WPF app.</span></span>

<span data-ttu-id="7cf6c-165">資源字典內的靜態資源參考必須參考資源參考之前已在語彙上定義的資源。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-165">Static resource references from within a resource dictionary must reference a resource that has already been defined lexically before the resource reference.</span></span> <span data-ttu-id="7cf6c-166">靜態資源參考無法解析向前參考。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-166">Forward references cannot be resolved by a static resource reference.</span></span> <span data-ttu-id="7cf6c-167">基於這個理由，請設計您的資源字典結構，以便在每個個別資源字典的開頭或附近定義資源。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-167">For this reason, design your resource dictionary structure such that resources are defined at or near the beginning of each respective resource dictionary.</span></span>

<span data-ttu-id="7cf6c-168">靜態資源查閱可以延伸到主題或系統資源，但只有在 XAML 載入器延遲要求時，才支援此查詢。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-168">Static resource lookup can extend into themes or into system resources, but this lookup is supported only because the XAML loader defers the request.</span></span> <span data-ttu-id="7cf6c-169">延遲是必要的，如此一來，當頁面載入時，執行時間主題才會適當地套用至應用程式。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-169">The deferral is necessary so that the runtime theme at the time the page loads applies properly to the app.</span></span> <span data-ttu-id="7cf6c-170">不過，不建議只存在於主題中或做為系統資源的索引鍵的靜態資源參考，因為使用者會即時變更該主題，因此不會重新評估這類參考。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-170">However, static resource references to keys that are known to only exist in themes or as system resources aren't recommended, because such references aren't reevaluated if the theme is changed by the user in real time.</span></span> <span data-ttu-id="7cf6c-171">當您要求佈景主題或系統資源時，動態資源參考會更可靠。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-171">A dynamic resource reference is more reliable when you request theme or system resources.</span></span> <span data-ttu-id="7cf6c-172">但佈景主題項目本身要求另一個資源時則例外。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-172">The exception is when a theme element itself requests another resource.</span></span> <span data-ttu-id="7cf6c-173">這些參考應該是靜態資源參考，原因如前所述。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-173">These references should be static resource references, for the reasons mentioned earlier.</span></span>

<span data-ttu-id="7cf6c-174">如果找不到靜態資源參考，就會發生例外狀況的情況。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-174">The exception behavior if a static resource reference isn't found varies.</span></span> <span data-ttu-id="7cf6c-175">如果已延遲資源，則會在執行階段發生例外狀況。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-175">If the resource was deferred, then the exception occurs at runtime.</span></span> <span data-ttu-id="7cf6c-176">如果未延遲資源，則會在載入時發生例外狀況。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-176">If the resource was not deferred, the exception occurs at load time.</span></span>

## <a name="dynamic-resources"></a><span data-ttu-id="7cf6c-177">動態資源</span><span class="sxs-lookup"><span data-stu-id="7cf6c-177">Dynamic resources</span></span>

<span data-ttu-id="7cf6c-178">動態資源的最佳使用時機：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-178">Dynamic resources work best when:</span></span>

- <span data-ttu-id="7cf6c-179">資源的值（包括系統資源）或其他可供使用者設定的資源，取決於執行時間之前不知道的條件。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-179">The value of the resource, including system resources, or resources that are otherwise user settable, depends on conditions that aren't known until runtime.</span></span> <span data-ttu-id="7cf6c-180">例如，您可以建立 setter 值，參考、或公開的系統屬性 <xref:System.Windows.SystemColors> <xref:System.Windows.SystemFonts> <xref:System.Windows.SystemParameters> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-180">For example, you can create setter values that refer to system properties as exposed by <xref:System.Windows.SystemColors>, <xref:System.Windows.SystemFonts>, or <xref:System.Windows.SystemParameters>.</span></span> <span data-ttu-id="7cf6c-181">由於這些值最終是來自使用者和作業系統的執行階段環境，因此是真正動態的。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-181">These values are truly dynamic because they ultimately come from the runtime environment of the user and operating system.</span></span> <span data-ttu-id="7cf6c-182">您也可能有會變更的應用程式層級佈景主題，其中的頁面層級資源存取也必須擷取該變更。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-182">You might also have application-level themes that can change, where page-level resource access must also capture the change.</span></span>

- <span data-ttu-id="7cf6c-183">您正在建立或參考自訂控制項的主題樣式。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-183">You're creating or referencing theme styles for a custom control.</span></span>

- <span data-ttu-id="7cf6c-184">您想要 <xref:System.Windows.ResourceDictionary> 在應用程式存留期間調整的內容。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-184">You intend to adjust the contents of a <xref:System.Windows.ResourceDictionary> during an app lifetime.</span></span>

- <span data-ttu-id="7cf6c-185">您有內含相互依存性的複雜資源結構，可能需要向前參考。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-185">You have a complicated resource structure that has interdependencies, where a forward reference may be required.</span></span> <span data-ttu-id="7cf6c-186">靜態資源參考不支援向前參考，但動態資源參考會支援它們，因為在執行時間之前，不需要評估資源，而向前參考則不是相關的概念。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-186">Static resource references do not support forward references, but dynamic resource references do support them because the resource doesn't need to be evaluated until runtime, and forward references are therefore not a relevant concept.</span></span>

- <span data-ttu-id="7cf6c-187">您從編譯或工作集的觀點來參考的資源很大，而且當頁面載入時，資源可能不會立即使用。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-187">You're referencing a resource that is large from the perspective of a compile or working set, and the resource might not be used immediately when the page loads.</span></span> <span data-ttu-id="7cf6c-188">靜態資源參考一律會在頁面載入時從 XAML 載入。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-188">Static resource references always load from XAML when the page loads.</span></span> <span data-ttu-id="7cf6c-189">不過，動態資源參考在使用之前不會載入。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-189">However, a dynamic resource reference doesn't load until it's used.</span></span>

- <span data-ttu-id="7cf6c-190">您正在建立一個樣式，其中 setter 值可能來自其他會受到主題或其他使用者設定影響的值。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-190">You're creating a style where setter values might come from other values that are influenced by themes or other user settings.</span></span>

- <span data-ttu-id="7cf6c-191">您要將資源套用至在應用程式存留期間可能會在邏輯樹狀結構中重設父代的元素。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-191">You're applying resources to elements that might be reparented in the logical tree during app lifetime.</span></span> <span data-ttu-id="7cf6c-192">變更父代也可能會變更資源查閱範圍，因此如果您想要根據新範圍重新評估重設父代項目的資源，請一律使用動態資源參考。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-192">Changing the parent also potentially changes the resource lookup scope, so if you want the resource for a reparented element to be reevaluated based on the new scope, always use a dynamic resource reference.</span></span>

### <a name="dynamic-resource-lookup-behavior"></a><span data-ttu-id="7cf6c-193">動態資源查閱行為</span><span class="sxs-lookup"><span data-stu-id="7cf6c-193">Dynamic resource lookup behavior</span></span>

<span data-ttu-id="7cf6c-194">如果您呼叫或，動態資源參考的資源查閱行為會與您程式碼中的查閱行為類似 <xref:System.Windows.FrameworkElement.FindResource%2A> <xref:System.Windows.FrameworkElement.SetResourceReference%2A> ：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-194">Resource lookup behavior for a dynamic resource reference parallels the lookup behavior in your code if you call <xref:System.Windows.FrameworkElement.FindResource%2A> or <xref:System.Windows.FrameworkElement.SetResourceReference%2A>:</span></span>

01. <span data-ttu-id="7cf6c-195">Lookup 會在設定屬性的元素所定義的資源字典中，檢查所要求的索引鍵：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-195">The lookup checks for the requested key within the resource dictionary defined by the element that sets the property:</span></span>

    - <span data-ttu-id="7cf6c-196">如果元素定義 <xref:System.Windows.FrameworkElement.Style%2A> 屬性，則專案的會 <xref:System.Windows.FrameworkElement.Style?displayProperty=fullName> 核取其 <xref:System.Windows.Style.Resources> 字典。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-196">If the element defines a <xref:System.Windows.FrameworkElement.Style%2A> property, the <xref:System.Windows.FrameworkElement.Style?displayProperty=fullName> of the element has its <xref:System.Windows.Style.Resources> dictionary checked.</span></span>

    - <span data-ttu-id="7cf6c-197">如果元素定義 <xref:System.Windows.Controls.Control.Template%2A> 屬性，則 <xref:System.Windows.FrameworkTemplate.Resources?displayProperty=fullName> 會檢查項目的字典。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-197">If the element defines a <xref:System.Windows.Controls.Control.Template%2A> property, the <xref:System.Windows.FrameworkTemplate.Resources?displayProperty=fullName> dictionary of the element is checked.</span></span>

01. <span data-ttu-id="7cf6c-198">查閱會將邏輯樹狀結構向上移至父元素和其資源字典。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-198">The lookup traverses the logical tree upward to the parent element and its resource dictionary.</span></span> <span data-ttu-id="7cf6c-199">此程式會繼續進行，直到達到根項目為止。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-199">This process continues until the root element is reached.</span></span>

01. <span data-ttu-id="7cf6c-200">已檢查應用程式資源。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-200">App resources are checked.</span></span> <span data-ttu-id="7cf6c-201">應用程式資源是資源字典中的資源，由 <xref:System.Windows.Application> WPF 應用程式的物件所定義。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-201">App resources are those resources within the resource dictionary that are defined by the <xref:System.Windows.Application> object for your WPF app.</span></span>

01. <span data-ttu-id="7cf6c-202">針對目前作用中的主題，會檢查主題資源字典。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-202">The theme resource dictionary is checked for the currently active theme.</span></span> <span data-ttu-id="7cf6c-203">如果佈景主題在執行階段變更，則會重新評估其值。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-203">If the theme changes at runtime, the value is reevaluated.</span></span>

01. <span data-ttu-id="7cf6c-204">檢查系統資源。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-204">System resources are checked.</span></span>

<span data-ttu-id="7cf6c-205">例外狀況行為 (如果有的話) 則有所不同：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-205">Exception behavior (if any) varies:</span></span>

- <span data-ttu-id="7cf6c-206">如果資源是由呼叫所要求， <xref:System.Windows.FrameworkElement.FindResource%2A> 而且找不到，則會擲回例外狀況。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-206">If a resource was requested by a <xref:System.Windows.FrameworkElement.FindResource%2A> call and was not found, an exception is thrown.</span></span>

- <span data-ttu-id="7cf6c-207">如果資源是由呼叫所要求， <xref:System.Windows.FrameworkElement.TryFindResource%2A> 而且找不到，則不會擲回任何例外狀況，且傳回的值為 `null` 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-207">If a resource was requested by a <xref:System.Windows.FrameworkElement.TryFindResource%2A> call and was not found, no exception is thrown, and the returned value is `null`.</span></span> <span data-ttu-id="7cf6c-208">如果要設定的屬性不接受 `null` ，則根據所設定的個別屬性，仍然可能會擲回更深入的例外狀況。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-208">If the property being set doesn't accept `null`, then it's still possible that a deeper exception will be thrown, depending on the individual property being set.</span></span>

- <span data-ttu-id="7cf6c-209">如果資源是由 XAML 中的動態資源參考所要求，而且找不到，則行為取決於一般屬性系統。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-209">If a resource was requested by a dynamic resource reference in XAML and was not found, then the behavior depends on the general property system.</span></span> <span data-ttu-id="7cf6c-210">一般行為就如同資源所在的層級上沒有發生屬性設定作業一樣。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-210">The general behavior is as if no property setting operation occurred at the level where the resource exists.</span></span> <span data-ttu-id="7cf6c-211">比方說，如果您嘗試使用無法評估的資源來設定個別按鈕元素的背景，則沒有任何值設定結果，但有效值仍然可以來自屬性系統和值優先順序的其他參與者。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-211">For instance, if you attempt to set the background on an individual button element using a resource that could not be evaluated, then no value set results, but the effective value can still come from other participants in the property system and value precedence.</span></span> <span data-ttu-id="7cf6c-212">例如，背景值仍然可能來自本機定義的按鈕樣式或主題樣式。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-212">For instance, the background value might still come from a locally defined button style or from the theme style.</span></span> <span data-ttu-id="7cf6c-213">對於未由主題樣式定義的屬性，失敗資源評估之後的有效值可能來自屬性中繼資料中的預設值。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-213">For properties that aren't defined by theme styles, the effective value after a failed resource evaluation might come from the default value in the property metadata.</span></span>

### <a name="restrictions"></a><span data-ttu-id="7cf6c-214">限制</span><span class="sxs-lookup"><span data-stu-id="7cf6c-214">Restrictions</span></span>

<span data-ttu-id="7cf6c-215">動態資源參考有一些值得注意的限制。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-215">Dynamic resource references have some notable restrictions.</span></span> <span data-ttu-id="7cf6c-216">至少必須有下列其中一項條件成立：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-216">At least one of the following conditions must be true:</span></span>

- <span data-ttu-id="7cf6c-217">要設定的屬性必須是或上的屬性 <xref:System.Windows.FrameworkElement> <xref:System.Windows.FrameworkContentElement> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-217">The property being set must be a property on a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="7cf6c-218">該屬性必須由所支援 <xref:System.Windows.DependencyProperty> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-218">That property must be backed by a <xref:System.Windows.DependencyProperty>.</span></span>

- <span data-ttu-id="7cf6c-219">參考適用于中的值 `StyleSetter` 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-219">The reference is for a value within a `StyleSetter`.</span></span>

- <span data-ttu-id="7cf6c-220">要設定的屬性必須是上的屬性 <xref:System.Windows.Freezable> ，它是以 <xref:System.Windows.FrameworkElement> 或屬性的值 <xref:System.Windows.FrameworkContentElement> 或值的形式提供 <xref:System.Windows.Setter> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-220">The property being set must be a property on a <xref:System.Windows.Freezable> that is provided as a value of either a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> property, or a <xref:System.Windows.Setter> value.</span></span>

<span data-ttu-id="7cf6c-221">因為所設定的屬性必須是 <xref:System.Windows.DependencyProperty> 或 <xref:System.Windows.Freezable> 屬性，所以大部分的屬性變更都可以傳播至 UI，因為屬性系統會通知屬性變更（變更的動態資源值）。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-221">Because the property being set must be a <xref:System.Windows.DependencyProperty> or <xref:System.Windows.Freezable> property, most property changes can propagate to the UI because a property change (the changed dynamic resource value) is acknowledged by the property system.</span></span> <span data-ttu-id="7cf6c-222">大部分的控制項都包含邏輯，會在變更時強制控制項的另一個版面配置， <xref:System.Windows.DependencyProperty> 而該屬性可能會影響版面配置。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-222">Most controls include logic that will force another layout of a control if a <xref:System.Windows.DependencyProperty> changes and that property might affect layout.</span></span> <span data-ttu-id="7cf6c-223">不過，並非所有具有[DynamicResource 標記延伸](../../framework/wpf/advanced/dynamicresource-markup-extension.md)作為其值的屬性，都保證會在 UI 中提供即時更新。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-223">However, not all properties that have a [DynamicResource Markup Extension](../../framework/wpf/advanced/dynamicresource-markup-extension.md) as their value are guaranteed to provide real time updates in the UI.</span></span> <span data-ttu-id="7cf6c-224">該功能仍然可能因屬性而異，並取決於擁有屬性的類型，或甚至是應用程式的邏輯結構。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-224">That functionality still might vary depending on the property, as well as depending on the type that owns the property, or even the logical structure of your app.</span></span>

## <a name="styles-datatemplates-and-implicit-keys"></a><span data-ttu-id="7cf6c-225">樣式、DataTemplates 和隱含索引鍵</span><span class="sxs-lookup"><span data-stu-id="7cf6c-225">Styles, DataTemplates, and implicit keys</span></span>

<span data-ttu-id="7cf6c-226">雖然中的所有專案都 <xref:System.Windows.ResourceDictionary> 必須有索引鍵，但這並不表示所有資源都必須具有明確的 `x:Key` 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-226">Although all items in a <xref:System.Windows.ResourceDictionary> must have a key, that doesn't mean that all resources must have an explicit `x:Key`.</span></span> <span data-ttu-id="7cf6c-227">有幾種物件類型會在定義為資源時支援隱含索引鍵，其中索引鍵值會繫結至另一個屬性的值。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-227">Several object types support an implicit key when defined as a resource, where the key value is tied to the value of another property.</span></span> <span data-ttu-id="7cf6c-228">這種類型的索引鍵稱為隱含索引鍵，而 `x:Key` 屬性則是明確的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-228">This type of key is known as an implicit key, whereas an `x:Key` attribute is an explicit key.</span></span> <span data-ttu-id="7cf6c-229">您可以藉由指定明確索引鍵，來覆寫任何隱含索引鍵。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-229">You can overwrite any implicit key by specifying an explicit key.</span></span>

<span data-ttu-id="7cf6c-230">當您定義時，資源的其中一個重要案例是 <xref:System.Windows.Style> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-230">One important scenario for resources is when you define a <xref:System.Windows.Style>.</span></span> <span data-ttu-id="7cf6c-231">事實上， <xref:System.Windows.Style> 幾乎一律會定義為資源字典中的專案，因為樣式原本就是要重複使用。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-231">In fact, a <xref:System.Windows.Style> is almost always defined as an entry in a resource dictionary, because styles are inherently intended for reuse.</span></span> <span data-ttu-id="7cf6c-232">如需樣式的詳細資訊，請參閱設定樣式[和範本](styles-templates-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-232">For more information about styles, see [Styling and Templating](styles-templates-overview.md).</span></span>

<span data-ttu-id="7cf6c-233">控制項的樣式可以透過隱含索引鍵來建立及參考。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-233">Styles for controls can be both created with and referenced with an implicit key.</span></span> <span data-ttu-id="7cf6c-234">定義預設控制項外觀的佈景主題樣式會依賴此隱含索引鍵。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-234">The theme styles that define the default appearance of a control rely on this implicit key.</span></span> <span data-ttu-id="7cf6c-235">從要求它的觀點來看，隱含索引鍵是 <xref:System.Type> 控制項本身的。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-235">From the standpoint of requesting it, the implicit key is the <xref:System.Type> of the control itself.</span></span> <span data-ttu-id="7cf6c-236">從定義資源的觀點來看，隱含索引鍵是 <xref:System.Windows.Style.TargetType%2A> 樣式的。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-236">From the standpoint of defining the resources, the implicit key is the <xref:System.Windows.Style.TargetType%2A> of the style.</span></span> <span data-ttu-id="7cf6c-237">因此，如果您要建立自訂控制項的主題，或建立與現有主題樣式互動的樣式，就不需要為該指定[x：Key](../xaml-services/xkey-directive.md)指示詞 <xref:System.Windows.Style> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-237">Therefore, if you're creating themes for custom controls or creating styles that interact with existing theme styles, you do not need to specify an [x:Key Directive](../xaml-services/xkey-directive.md) for that <xref:System.Windows.Style>.</span></span> <span data-ttu-id="7cf6c-238">此外，如果您想要使用佈景主題樣式，則完全不需要指定任何樣式。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-238">And if you want to use the themed styles, you do not need to specify any style at all.</span></span> <span data-ttu-id="7cf6c-239">例如，下列樣式定義的運作方式，雖然 <xref:System.Windows.Style> 資源似乎沒有索引鍵：</span><span class="sxs-lookup"><span data-stu-id="7cf6c-239">For instance, the following style definition works, even though the <xref:System.Windows.Style> resource doesn't appear to have a key:</span></span>

[!code-xaml[FEResourceSH_snip#ImplicitStyle](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#implicitstyle)]

<span data-ttu-id="7cf6c-240">該樣式的確有一個索引鍵：隱含索引鍵 `typeof(System.Windows.Controls.Button)` 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-240">That style really does have a key: the implicit key `typeof(System.Windows.Controls.Button)`.</span></span> <span data-ttu-id="7cf6c-241">在標記中，您可以將 <xref:System.Windows.Style.TargetType%2A> 直接指定為類型名稱（或者，您可以選擇性地使用[{x:Type...}](../xaml-services/xtype-markup-extension.md)</span><span class="sxs-lookup"><span data-stu-id="7cf6c-241">In markup, you can specify a <xref:System.Windows.Style.TargetType%2A> directly as the type name (or you can optionally use [{x:Type...}](../xaml-services/xtype-markup-extension.md)</span></span> <span data-ttu-id="7cf6c-242">傳回 <xref:System.Type> 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-242">to return a <xref:System.Type>.</span></span>

<span data-ttu-id="7cf6c-243">透過 WPF 使用的預設主題樣式機制，該樣式會套用為頁面上的執行時間樣式 <xref:System.Windows.Controls.Button> ，即使 <xref:System.Windows.Controls.Button> 本身不會嘗試指定其 <xref:System.Windows.FrameworkElement.Style%2A> 屬性或樣式的特定資源參考也一樣。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-243">Through the default theme style mechanisms used by WPF, that style is applied as the runtime style of a <xref:System.Windows.Controls.Button> on the page, even though the <xref:System.Windows.Controls.Button> itself doesn't attempt to specify its <xref:System.Windows.FrameworkElement.Style%2A> property or a specific resource reference to the style.</span></span> <span data-ttu-id="7cf6c-244">您在頁面中所定義的樣式，會與主題字典樣式所擁有的相同索引鍵，在查閱序列中找到。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-244">Your style defined in the page is found earlier in the lookup sequence than the theme dictionary style, using the same key that the theme dictionary style has.</span></span> <span data-ttu-id="7cf6c-245">您可以只指定 `<Button>Hello</Button>` 頁面中的任何位置，而您使用定義的 <xref:System.Windows.Style.TargetType%2A> 樣式 `Button` 會套用至該按鈕。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-245">You could just specify `<Button>Hello</Button>` anywhere in the page, and the style you defined with <xref:System.Windows.Style.TargetType%2A> of `Button` would apply to that button.</span></span> <span data-ttu-id="7cf6c-246">如果您想要的話，仍然可以使用與標記相同的型別值來明確地為樣式索引鍵 <xref:System.Windows.Style.TargetType%2A> ，但這是選擇性的。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-246">If you want, you can still explicitly key the style with the same type value as <xref:System.Windows.Style.TargetType%2A> for clarity in your markup, but that is optional.</span></span>

<span data-ttu-id="7cf6c-247">如果為，則樣式的隱含索引鍵不適用於控制項 <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> `true` 。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-247">Implicit keys for styles do not apply on a control if <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> is `true`.</span></span> <span data-ttu-id="7cf6c-248">（也請注意， <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> 可能會設定為控制項類別的原生行為的一部分，而不是明確地在控制項的實例上）。此外，為了支援衍生類別案例的隱含索引鍵，控制項必須覆寫 <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> （WPF 中提供的所有現有控制項都包含此覆寫）。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-248">(Also note that <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> might be set as part of native behavior for the control class, rather than explicitly on an instance of the control.) Also, in order to support implicit keys for derived class scenarios, the control must override <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> (all existing controls provided as part of WPF include this override).</span></span> <span data-ttu-id="7cf6c-249">如需樣式、主題和控制項設計的詳細資訊，請參閱[設計可設定樣式控制項的方針](../../framework/wpf/controls/guidelines-for-designing-stylable-controls.md)。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-249">For more information about styles, themes, and control design, see [Guidelines for Designing Stylable Controls](../../framework/wpf/controls/guidelines-for-designing-stylable-controls.md).</span></span>

<span data-ttu-id="7cf6c-250"><xref:System.Windows.DataTemplate>也有隱含的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-250"><xref:System.Windows.DataTemplate> also has an implicit key.</span></span> <span data-ttu-id="7cf6c-251">的隱含索引鍵 <xref:System.Windows.DataTemplate> 是 <xref:System.Windows.DataTemplate.DataType%2A> 屬性值。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-251">The implicit key for a <xref:System.Windows.DataTemplate> is the <xref:System.Windows.DataTemplate.DataType%2A> property value.</span></span> <span data-ttu-id="7cf6c-252"><xref:System.Windows.DataTemplate.DataType%2A>也可以指定為類型的名稱，而不是明確地使用[{x:Type...}](../xaml-services/xtype-markup-extension.md)。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-252"><xref:System.Windows.DataTemplate.DataType%2A> can also be specified as the name of the type rather than explicitly using [{x:Type...}](../xaml-services/xtype-markup-extension.md).</span></span> <span data-ttu-id="7cf6c-253">如需詳細資訊，請參閱[資料範本化總覽](../../framework/wpf/data/data-templating-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="7cf6c-253">For details, see [Data Templating Overview](../../framework/wpf/data/data-templating-overview.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="7cf6c-254">另請參閱</span><span class="sxs-lookup"><span data-stu-id="7cf6c-254">See also</span></span>

- <xref:System.Windows.ResourceDictionary>
- [<span data-ttu-id="7cf6c-255">應用程式資源</span><span class="sxs-lookup"><span data-stu-id="7cf6c-255">Application resources</span></span>](../../framework/wpf/advanced/optimizing-performance-application-resources.md)
- [<span data-ttu-id="7cf6c-256">資源和程式碼</span><span class="sxs-lookup"><span data-stu-id="7cf6c-256">Resources and code</span></span>](../../framework/wpf/advanced/resources-and-code.md)
- [<span data-ttu-id="7cf6c-257">定義和參考資源</span><span class="sxs-lookup"><span data-stu-id="7cf6c-257">Define and reference a resource</span></span>](../../framework/wpf/advanced/how-to-define-and-reference-a-resource.md)
- [<span data-ttu-id="7cf6c-258">應用程式管理總覽</span><span class="sxs-lookup"><span data-stu-id="7cf6c-258">Application management overview</span></span>](../../framework/wpf/app-development/application-management-overview.md)
- [<span data-ttu-id="7cf6c-259">x:Type 標記延伸</span><span class="sxs-lookup"><span data-stu-id="7cf6c-259">x:Type markup extension</span></span>](../xaml-services/xtype-markup-extension.md)
- [<span data-ttu-id="7cf6c-260">StaticResource 標記延伸</span><span class="sxs-lookup"><span data-stu-id="7cf6c-260">StaticResource markup extension</span></span>](../../framework/wpf/advanced/staticresource-markup-extension.md)
- [<span data-ttu-id="7cf6c-261">DynamicResource 標記延伸</span><span class="sxs-lookup"><span data-stu-id="7cf6c-261">DynamicResource markup extension</span></span>](../../framework/wpf/advanced/dynamicresource-markup-extension.md)
