---
title: 推斷簡單型別的規則
ms.date: 03/30/2017
ms.technology: dotnet-standard
ms.assetid: 394624d6-4da0-430a-8a88-46efe40f14de
ms.openlocfilehash: 571019d13433312a5d31f581c3527aae901bbba7
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/02/2020
ms.locfileid: "84289066"
---
# <a name="rules-for-inferring-simple-types"></a><span data-ttu-id="523a7-102">推斷簡單型別的規則</span><span class="sxs-lookup"><span data-stu-id="523a7-102">Rules for Inferring Simple Types</span></span>
<span data-ttu-id="523a7-103">說明 <xref:System.Xml.Schema.XmlSchemaInference> 類別如何推斷屬性和項目的資料型別。</span><span class="sxs-lookup"><span data-stu-id="523a7-103">Describes how the <xref:System.Xml.Schema.XmlSchemaInference> class infers the data type for attributes and elements.</span></span>  
  
 <span data-ttu-id="523a7-104"><xref:System.Xml.Schema.XmlSchemaInference> 類別會將屬性和項目的資料型別推斷為簡單型別。</span><span class="sxs-lookup"><span data-stu-id="523a7-104">The <xref:System.Xml.Schema.XmlSchemaInference> class infers the data type for attributes and elements as simple types.</span></span> <span data-ttu-id="523a7-105">本節將說明可能的推斷型別、多種不同的值如何調節為單一型別，以及如何處理結構描述定義的 `xsi` 屬性。</span><span class="sxs-lookup"><span data-stu-id="523a7-105">This section describes the potential inferred types, how multiple differing values are reconciled to a single type, and how schema-defining `xsi` attributes are handled.</span></span>  
  
## <a name="inferred-types"></a><span data-ttu-id="523a7-106">推斷的型別</span><span class="sxs-lookup"><span data-stu-id="523a7-106">Inferred Types</span></span>  
 <span data-ttu-id="523a7-107"><xref:System.Xml.Schema.XmlSchemaInference> 類別會將項目和屬性值推斷為簡單型別，並在產生的結構描述內包含型別屬性。</span><span class="sxs-lookup"><span data-stu-id="523a7-107">The <xref:System.Xml.Schema.XmlSchemaInference> class infers element and attribute values as simple types and includes a type attribute in the resulting schema.</span></span> <span data-ttu-id="523a7-108">所有推斷的型別皆為簡單型別。</span><span class="sxs-lookup"><span data-stu-id="523a7-108">All inferred types are simple types.</span></span> <span data-ttu-id="523a7-109">基底型別或 Facet 都不會納入結果結構描述中。</span><span class="sxs-lookup"><span data-stu-id="523a7-109">No base types or facets are included as part of the resulting schema.</span></span>  
  
 <span data-ttu-id="523a7-110">在 XML 文件中發現的值會個別進行檢查。</span><span class="sxs-lookup"><span data-stu-id="523a7-110">Values are examined individually as they are encountered in the XML document.</span></span> <span data-ttu-id="523a7-111">對某個值進行檢查時，即會推斷其型別。</span><span class="sxs-lookup"><span data-stu-id="523a7-111">The type is inferred for a value at the time it is examined.</span></span> <span data-ttu-id="523a7-112">若在推斷屬性或項目的型別後，發現該屬性或項目的值不符合目前推斷的型別，<xref:System.Xml.Schema.XmlSchemaInference> 類別就會針對每組規則提升型別。</span><span class="sxs-lookup"><span data-stu-id="523a7-112">If a type has been inferred for an attribute or element, and a value for the attribute or element is encountered that does not match the currently inferred type, the <xref:System.Xml.Schema.XmlSchemaInference> class promotes the type for each of a set of rules.</span></span> <span data-ttu-id="523a7-113">這些規則將在本主題稍後的＜型別提升＞一節中討論。</span><span class="sxs-lookup"><span data-stu-id="523a7-113">These rules are discussed in the Type Promotion section, later in this topic.</span></span>  
  
 <span data-ttu-id="523a7-114">下列表格列出可能出現在結果結構描述中的推斷型別。</span><span class="sxs-lookup"><span data-stu-id="523a7-114">The following table lists the possible inferred types for the resulting schema.</span></span>  
  
|<span data-ttu-id="523a7-115">簡單型別</span><span class="sxs-lookup"><span data-stu-id="523a7-115">Simple Type</span></span>|<span data-ttu-id="523a7-116">描述</span><span class="sxs-lookup"><span data-stu-id="523a7-116">Description</span></span>|  
|-----------------|-----------------|  
|<span data-ttu-id="523a7-117">boolean</span><span class="sxs-lookup"><span data-stu-id="523a7-117">boolean</span></span>|<span data-ttu-id="523a7-118">True、False、0、1。</span><span class="sxs-lookup"><span data-stu-id="523a7-118">True, false, 0, 1.</span></span>|  
|<span data-ttu-id="523a7-119">byte</span><span class="sxs-lookup"><span data-stu-id="523a7-119">byte</span></span>|<span data-ttu-id="523a7-120">介於 -128 與 127 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="523a7-120">Integers in the range of –128 to 127.</span></span>|  
|<span data-ttu-id="523a7-121">unsignedByte</span><span class="sxs-lookup"><span data-stu-id="523a7-121">unsignedByte</span></span>|<span data-ttu-id="523a7-122">介於 0 與 255 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="523a7-122">Integers in the range of 0 to 255.</span></span>|  
|<span data-ttu-id="523a7-123">short</span><span class="sxs-lookup"><span data-stu-id="523a7-123">short</span></span>|<span data-ttu-id="523a7-124">介於 -32768 與 32767 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="523a7-124">Integers in the range of –32768 to 32767.</span></span>|  
|<span data-ttu-id="523a7-125">unsignedShort</span><span class="sxs-lookup"><span data-stu-id="523a7-125">unsignedShort</span></span>|<span data-ttu-id="523a7-126">介於 0 與 65535 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="523a7-126">Integers in the range of 0 to 65535.</span></span>|  
|<span data-ttu-id="523a7-127">int</span><span class="sxs-lookup"><span data-stu-id="523a7-127">int</span></span>|<span data-ttu-id="523a7-128">介於 -2147483648 與 2147483647 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="523a7-128">Integers in the range of –2147483648 to 2147483647.</span></span>|  
|<span data-ttu-id="523a7-129">unsignedInt</span><span class="sxs-lookup"><span data-stu-id="523a7-129">unsignedInt</span></span>|<span data-ttu-id="523a7-130">介於 0 與 4294967295 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="523a7-130">Integers in the range of 0 to 4294967295.</span></span>|  
|<span data-ttu-id="523a7-131">long</span><span class="sxs-lookup"><span data-stu-id="523a7-131">long</span></span>|<span data-ttu-id="523a7-132">介於 -9223372036854775808 與 9223372036854775807 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="523a7-132">Integers in the range of –9223372036854775808 to 9223372036854775807.</span></span>|  
|<span data-ttu-id="523a7-133">unsignedLong</span><span class="sxs-lookup"><span data-stu-id="523a7-133">unsignedLong</span></span>|<span data-ttu-id="523a7-134">介於 0 與 18446744073709551615 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="523a7-134">Integers in the range of 0 to 18446744073709551615.</span></span>|  
|<span data-ttu-id="523a7-135">integer</span><span class="sxs-lookup"><span data-stu-id="523a7-135">integer</span></span>|<span data-ttu-id="523a7-136">可能會以 "-" 開頭的有限數值。</span><span class="sxs-lookup"><span data-stu-id="523a7-136">A finite number of digits possibly prefixed with "-".</span></span>|  
|<span data-ttu-id="523a7-137">decimal</span><span class="sxs-lookup"><span data-stu-id="523a7-137">decimal</span></span>|<span data-ttu-id="523a7-138">含有 0 至 28 位精準度的數值。</span><span class="sxs-lookup"><span data-stu-id="523a7-138">Numerical values that contain from 0 to 28 digits of precision.</span></span>|  
|<span data-ttu-id="523a7-139">FLOAT</span><span class="sxs-lookup"><span data-stu-id="523a7-139">float</span></span>|<span data-ttu-id="523a7-140">其後可以為 "E" 或 "e" 的十進位數，最後再接上代表指數的整數值。</span><span class="sxs-lookup"><span data-stu-id="523a7-140">Decimals optionally followed by "E" or "e" followed by an integer value representing the exponent.</span></span> <span data-ttu-id="523a7-141">十進位值可介於 -16777216 與 16777216 之間。</span><span class="sxs-lookup"><span data-stu-id="523a7-141">Decimal values can be in the range of -16777216 to 16777216.</span></span> <span data-ttu-id="523a7-142">指數值可介於 –149 與 104 之間。</span><span class="sxs-lookup"><span data-stu-id="523a7-142">Exponent values can be in the range of –149 to 104.</span></span><br /><br /> <span data-ttu-id="523a7-143">浮點數允許用特殊的值代表無限值與非數字值。</span><span class="sxs-lookup"><span data-stu-id="523a7-143">Float allows for special values to represent infinity and non-numeric values.</span></span> <span data-ttu-id="523a7-144">浮點數的特殊值包括：0, -0, INF, -INF, NaN。</span><span class="sxs-lookup"><span data-stu-id="523a7-144">Special values for float are: 0, -0, INF, -INF, NaN.</span></span>|  
|<span data-ttu-id="523a7-145">double</span><span class="sxs-lookup"><span data-stu-id="523a7-145">double</span></span>|<span data-ttu-id="523a7-146">與浮點數相同，不同之處在於十進位值可介於 -9007199254740992 與 9007199254740992 之間，而指數值可介於 –1075 與 970 之間。</span><span class="sxs-lookup"><span data-stu-id="523a7-146">The same as float except decimal values can be in the range of -9007199254740992 to 9007199254740992, and exponent values can be in the range of –1075 to 970.</span></span><br /><br /> <span data-ttu-id="523a7-147">雙精度浮點數允許用特殊的值代表無限值與非數字值。</span><span class="sxs-lookup"><span data-stu-id="523a7-147">Double allows for special values to represent infinity and non-numeric values.</span></span> <span data-ttu-id="523a7-148">浮點數的特殊值包括：0, -0, INF, -INF, NaN。</span><span class="sxs-lookup"><span data-stu-id="523a7-148">Special values for float are: 0, -0, INF, -INF, NaN.</span></span>|  
|<span data-ttu-id="523a7-149">duration</span><span class="sxs-lookup"><span data-stu-id="523a7-149">duration</span></span>|<span data-ttu-id="523a7-150">W3C 期間格式。</span><span class="sxs-lookup"><span data-stu-id="523a7-150">The W3C duration format.</span></span>|  
|<span data-ttu-id="523a7-151">dateTime</span><span class="sxs-lookup"><span data-stu-id="523a7-151">dateTime</span></span>|<span data-ttu-id="523a7-152">W3C 日期時間格式。</span><span class="sxs-lookup"><span data-stu-id="523a7-152">The W3C dateTime format.</span></span>|  
|<span data-ttu-id="523a7-153">time</span><span class="sxs-lookup"><span data-stu-id="523a7-153">time</span></span>|<span data-ttu-id="523a7-154">W3C 時間格式。</span><span class="sxs-lookup"><span data-stu-id="523a7-154">The W3C time format.</span></span>|  
|<span data-ttu-id="523a7-155">date</span><span class="sxs-lookup"><span data-stu-id="523a7-155">date</span></span>|<span data-ttu-id="523a7-156">年份值限定於 0001 與 9999 之間。</span><span class="sxs-lookup"><span data-stu-id="523a7-156">Year values are restricted from 0001 to 9999.</span></span>|  
|<span data-ttu-id="523a7-157">gYearMonth</span><span class="sxs-lookup"><span data-stu-id="523a7-157">gYearMonth</span></span>|<span data-ttu-id="523a7-158">W3C 的西曆月份與年份格式。</span><span class="sxs-lookup"><span data-stu-id="523a7-158">The W3C Gregorian month and year format.</span></span>|  
|<span data-ttu-id="523a7-159">字串</span><span class="sxs-lookup"><span data-stu-id="523a7-159">string</span></span>|<span data-ttu-id="523a7-160">一或多個 Unicode 字元。</span><span class="sxs-lookup"><span data-stu-id="523a7-160">One or more Unicode characters.</span></span>|  
  
## <a name="type-promotion"></a><span data-ttu-id="523a7-161">類型提升</span><span class="sxs-lookup"><span data-stu-id="523a7-161">Type Promotion</span></span>  
 <span data-ttu-id="523a7-162"><xref:System.Xml.Schema.XmlSchemaInference> 類別會逐一檢查屬性與項目的值。</span><span class="sxs-lookup"><span data-stu-id="523a7-162">The <xref:System.Xml.Schema.XmlSchemaInference> class examines attribute and element values one at a time.</span></span> <span data-ttu-id="523a7-163">若發現任何值，就會推斷最嚴格且不帶正負號的型別。</span><span class="sxs-lookup"><span data-stu-id="523a7-163">As values are encountered, the most restrictive, unsigned type is inferred.</span></span> <span data-ttu-id="523a7-164">若在推斷屬性或項目的型別後，發現新的值不符合目前推斷的型別，則推斷的型別會提升為目前推斷型別與新值均適用的新型別。</span><span class="sxs-lookup"><span data-stu-id="523a7-164">If a type has been inferred for an attribute or element, and a new value is encountered that does not match the currently inferred type, the inferred type is promoted to a new type that applies to both the currently inferred type and the new value.</span></span> <span data-ttu-id="523a7-165"><xref:System.Xml.Schema.XmlSchemaInference> 類別在提升推斷的型別時，會考量先前的值。</span><span class="sxs-lookup"><span data-stu-id="523a7-165">The <xref:System.Xml.Schema.XmlSchemaInference> class does consider previous values when promoting the inferred type.</span></span>  
  
 <span data-ttu-id="523a7-166">例如，請考量下列兩份 XML 文件中的 XML 片段：</span><span class="sxs-lookup"><span data-stu-id="523a7-166">For example, consider the following XML fragments from two XML documents:</span></span>  
  
 `<MyElement1 attr1="12" />`  
  
 `<MyElement1 attr1="52344" />`  
  
 <span data-ttu-id="523a7-167">當發現第一個 `attr1` 值時，會根據 `attr1` 的值將 `unsignedByte` 的型別推斷為 `12`。</span><span class="sxs-lookup"><span data-stu-id="523a7-167">When the first `attr1` value is encountered, the type of `attr1` is inferred as `unsignedByte` based on the value `12`.</span></span> <span data-ttu-id="523a7-168">當發現第二個 `attr1` 時，其型別會根據目前推斷型別 `unsignedShort` 與目前的 `unsignedByte` 值被提升為 `52344`。</span><span class="sxs-lookup"><span data-stu-id="523a7-168">When the second `attr1` is encountered, the type is promoted to `unsignedShort` based on the currently inferred type of `unsignedByte` and the current value `52344`.</span></span>  
  
 <span data-ttu-id="523a7-169">此時，請考量下列兩份 XML 文件中的 XML：</span><span class="sxs-lookup"><span data-stu-id="523a7-169">Now, consider the following XML from two XML documents:</span></span>  
  
 `<MyElement2 attr2="0" />`  
  
 `<MyElement2 attr2="true" />`  
  
 <span data-ttu-id="523a7-170">當發現第一個 `attr2` 值時，會根據 `attr2` 的值將 `unsignedByte` 的型別推斷為 `0`。</span><span class="sxs-lookup"><span data-stu-id="523a7-170">When the first `attr2` value is encountered, the type of `attr2` is inferred as `unsignedByte` based on the value `0`.</span></span> <span data-ttu-id="523a7-171">當發現第二個 `attr2` 時，此型別會根據目前推斷型別 `string` 和目前的 `unsignedByte` 值提升為 `true`，因為在提升推斷型別時，<xref:System.Xml.Schema.XmlSchemaInference> 類別會考量之前的值。</span><span class="sxs-lookup"><span data-stu-id="523a7-171">When the second `attr2` is encountered, the type is promoted to `string` based on the currently inferred type of `unsignedByte` and the current value `true` because the <xref:System.Xml.Schema.XmlSchemaInference> class does consider previous values when promoting the inferred type.</span></span> <span data-ttu-id="523a7-172">然而，若不是像上述範例一樣在兩個不同的 XML 文件中發現兩個 `attr2`，而是在相同的 XML 文件中發現時，`attr2` 將會被推斷為 `boolean`。</span><span class="sxs-lookup"><span data-stu-id="523a7-172">However, if both instances of `attr2` were encountered in the same XML document and not in two different XML documents as illustrated above, `attr2` would have been inferred as `boolean`.</span></span>  
  
### <a name="ignored-attributes-from-the-httpswwww3org2001xmlschema-instance-namespace"></a><span data-ttu-id="523a7-173"><https://www.w3.org/2001/XMLSchema-instance> \(英文\) 命名空間的被忽略屬性</span><span class="sxs-lookup"><span data-stu-id="523a7-173">Ignored attributes from the <https://www.w3.org/2001/XMLSchema-instance> namespace</span></span>

<span data-ttu-id="523a7-174">下列結構描述定義的屬性會在結構描述推斷期間遭到忽略。</span><span class="sxs-lookup"><span data-stu-id="523a7-174">The following are schema-defining attributes that are ignored during schema inference.</span></span>  
  
|<span data-ttu-id="523a7-175">屬性</span><span class="sxs-lookup"><span data-stu-id="523a7-175">Attribute</span></span>|<span data-ttu-id="523a7-176">描述</span><span class="sxs-lookup"><span data-stu-id="523a7-176">Description</span></span>|  
|---------------|-----------------|  
|`xsi:type`|<span data-ttu-id="523a7-177">若發現項目指定了 `xsi:type`，則 `xsi:type` 將被忽略。</span><span class="sxs-lookup"><span data-stu-id="523a7-177">If an element is encountered with `xsi:type` specified, the `xsi:type` is ignored.</span></span>|  
|`xsi:nil`|<span data-ttu-id="523a7-178">若發現項目具有 `xsi:nil` 屬性，表示其推斷結構描述中的項目宣告具有 `nillable="true"` 值。</span><span class="sxs-lookup"><span data-stu-id="523a7-178">If an element with an `xsi:nil` attribute is encountered, its element declaration in the inferred schema has the value of `nillable="true"`.</span></span> <span data-ttu-id="523a7-179">將 `xsi:nil` 屬性設為 `true` 的項目不能有子項目。</span><span class="sxs-lookup"><span data-stu-id="523a7-179">An element with an `xsi:nil` attribute set to `true` cannot have child elements.</span></span>|  
|`xsi:schemaLocation`|<span data-ttu-id="523a7-180">如果發現 `xsi:schemaLocation`，則會加以忽略。</span><span class="sxs-lookup"><span data-stu-id="523a7-180">If `xsi:schemaLocation` is encountered, it is ignored.</span></span>|  
|`xsi:noNamespaceSchemaLocation`|<span data-ttu-id="523a7-181">如果發現 `xsi:noNamespaceSchemaLocation`，則會加以忽略。</span><span class="sxs-lookup"><span data-stu-id="523a7-181">If `xsi:noNamespaceSchemaLocation` is encountered, it is ignored.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="523a7-182">另請參閱</span><span class="sxs-lookup"><span data-stu-id="523a7-182">See also</span></span>

- [<span data-ttu-id="523a7-183">XML 結構描述物件模型 (SOM)</span><span class="sxs-lookup"><span data-stu-id="523a7-183">XML Schema Object Model (SOM)</span></span>](xml-schema-object-model-som.md)
- [<span data-ttu-id="523a7-184">從 XML 文件推斷結構描述</span><span class="sxs-lookup"><span data-stu-id="523a7-184">Inferring Schemas from XML Documents</span></span>](inferring-schemas-from-xml-documents.md)
- [<span data-ttu-id="523a7-185">推斷結構描述節點型別與結構的規則</span><span class="sxs-lookup"><span data-stu-id="523a7-185">Rules for Inferring Schema Node Types and Structure</span></span>](rules-for-inferring-schema-node-types-and-structure.md)
