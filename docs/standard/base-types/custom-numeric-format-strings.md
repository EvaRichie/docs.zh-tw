---
title: 自訂數值格式字串
ms.date: 06/25/2018
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- numeric format strings [.NET Framework]
- formatting [.NET Framework], numbers
- format strings
- custom numeric format strings
- numbers [.NET Framework], formatting
- format specifiers, numeric
- formatting numbers [.NET Framework]
- format specifiers, custom numeric format strings
ms.assetid: 6f74fd32-6c6b-48ed-8241-3c2b86dea5f4
ms.openlocfilehash: bc2ace5a068a49f19db55c6fcc3cfc7287b6f618
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/02/2020
ms.locfileid: "84278956"
---
# <a name="custom-numeric-format-strings"></a><span data-ttu-id="9997a-102">自訂數值格式字串</span><span class="sxs-lookup"><span data-stu-id="9997a-102">Custom numeric format strings</span></span>

<span data-ttu-id="9997a-103">您可以建立由一個或多個自訂數值規範所組成的自訂數值格式字串，以定義如何格式化數值資料。</span><span class="sxs-lookup"><span data-stu-id="9997a-103">You can create a custom numeric format string, which consists of one or more custom numeric specifiers, to define how to format numeric data.</span></span> <span data-ttu-id="9997a-104">自訂數值格式字串為任何非 [標準數值格式字串](standard-numeric-format-strings.md)的格式字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-104">A custom numeric format string is any format string that is not a [standard numeric format string](standard-numeric-format-strings.md).</span></span>

<span data-ttu-id="9997a-105">所有數字類型的 `ToString` 方法的一些多載可支援自訂數值格式字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-105">Custom numeric format strings are supported by some overloads of the `ToString` method of all numeric types.</span></span> <span data-ttu-id="9997a-106">例如，您可以提供數值格式字串給 <xref:System.Int32.ToString%28System.String%29> 類型的 <xref:System.Int32.ToString%28System.String%2CSystem.IFormatProvider%29> 和 <xref:System.Int32> 方法。</span><span class="sxs-lookup"><span data-stu-id="9997a-106">For example, you can supply a numeric format string to the <xref:System.Int32.ToString%28System.String%29> and <xref:System.Int32.ToString%28System.String%2CSystem.IFormatProvider%29> methods of the <xref:System.Int32> type.</span></span> <span data-ttu-id="9997a-107">.NET 的[複合格式功能](composite-formatting.md)也支援自訂數值格式字串，此功能會由 <xref:System.Console> 與 <xref:System.IO.StreamWriter> 類別的一些 `Write` 和 `WriteLine` 方法，以及 <xref:System.String.Format%2A?displayProperty=nameWithType> 方法和 <xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType> 方法所使用。</span><span class="sxs-lookup"><span data-stu-id="9997a-107">Custom numeric format strings are also supported by the .NET [composite formatting feature](composite-formatting.md), which is used by some `Write` and `WriteLine` methods of the <xref:System.Console> and <xref:System.IO.StreamWriter> classes, the <xref:System.String.Format%2A?displayProperty=nameWithType> method, and the <xref:System.Text.StringBuilder.AppendFormat%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="9997a-108">[字串內插補點](../../csharp/language-reference/tokens/interpolated.md)功能也支援自訂數值格式字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-108">[String interpolation](../../csharp/language-reference/tokens/interpolated.md) feature also supports custom numeric format strings.</span></span>

> [!TIP]
> <span data-ttu-id="9997a-109">您可以下載**格式化公用程式**，這個 .NET Core Windows Forms 應用程式可讓您將格式字串套用至數值或日期和時間值，並顯示結果字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-109">You can download the **Formatting Utility**, a .NET Core Windows Forms application that lets you apply format strings to either numeric or date and time values and displays the result string.</span></span> <span data-ttu-id="9997a-110">提供 [C#](https://docs.microsoft.com/samples/dotnet/samples/windowsforms-formatting-utility-cs) 和 [Visual Basic](https://docs.microsoft.com/samples/dotnet/samples/windowsforms-formatting-utility-vb) 的原始程式碼。</span><span class="sxs-lookup"><span data-stu-id="9997a-110">Source code is available for [C#](https://docs.microsoft.com/samples/dotnet/samples/windowsforms-formatting-utility-cs) and [Visual Basic](https://docs.microsoft.com/samples/dotnet/samples/windowsforms-formatting-utility-vb).</span></span>

<a name="table"></a> <span data-ttu-id="9997a-111">下表說明自訂數值格式規範，並顯示每個格式範例所產生的範例輸出。</span><span class="sxs-lookup"><span data-stu-id="9997a-111">The following table describes the custom numeric format specifiers and displays sample output produced by each format specifier.</span></span> <span data-ttu-id="9997a-112">如需使用自訂數值格式字串的詳細資訊，請參閱 [注意](#NotesCustomFormatting) 一節，如需其用法的完整解說，請參閱 [範例](#example) 一節。</span><span class="sxs-lookup"><span data-stu-id="9997a-112">See the [Notes](#NotesCustomFormatting) section for additional information about using custom numeric format strings, and the [Example](#example) section for a comprehensive illustration of their use.</span></span>

|<span data-ttu-id="9997a-113">格式規範</span><span class="sxs-lookup"><span data-stu-id="9997a-113">Format specifier</span></span>|<span data-ttu-id="9997a-114">Name</span><span class="sxs-lookup"><span data-stu-id="9997a-114">Name</span></span>|<span data-ttu-id="9997a-115">描述</span><span class="sxs-lookup"><span data-stu-id="9997a-115">Description</span></span>|<span data-ttu-id="9997a-116">範例</span><span class="sxs-lookup"><span data-stu-id="9997a-116">Examples</span></span>|
|----------------------|----------|-----------------|--------------|
|<span data-ttu-id="9997a-117">"0"</span><span class="sxs-lookup"><span data-stu-id="9997a-117">"0"</span></span>|<span data-ttu-id="9997a-118">零值預留位置</span><span class="sxs-lookup"><span data-stu-id="9997a-118">Zero placeholder</span></span>|<span data-ttu-id="9997a-119">以對應的數字 (如果有的話) 取代零，否則結果字串中會出現零。</span><span class="sxs-lookup"><span data-stu-id="9997a-119">Replaces the zero with the corresponding digit if one is present; otherwise, zero appears in the result string.</span></span><br /><br /> <span data-ttu-id="9997a-120">詳細資訊： ["0" 自訂規範](#Specifier0)。</span><span class="sxs-lookup"><span data-stu-id="9997a-120">More information: [The "0" Custom Specifier](#Specifier0).</span></span>|<span data-ttu-id="9997a-121">1234.5678 ("00000") -> 01235</span><span class="sxs-lookup"><span data-stu-id="9997a-121">1234.5678 ("00000") -> 01235</span></span><br /><br /> <span data-ttu-id="9997a-122">0.45678 ("0.00", en-US) -> 0.46</span><span class="sxs-lookup"><span data-stu-id="9997a-122">0.45678 ("0.00", en-US) -> 0.46</span></span><br /><br /> <span data-ttu-id="9997a-123">0.45678 ("0.00", fr-FR) -> 0,46</span><span class="sxs-lookup"><span data-stu-id="9997a-123">0.45678 ("0.00", fr-FR) -> 0,46</span></span>|
|<span data-ttu-id="9997a-124">"#"</span><span class="sxs-lookup"><span data-stu-id="9997a-124">"#"</span></span>|<span data-ttu-id="9997a-125">數字預留位置</span><span class="sxs-lookup"><span data-stu-id="9997a-125">Digit placeholder</span></span>|<span data-ttu-id="9997a-126">將 "#" 符號取代為對應的數字 (如果有的話)，否則結果字串中不會出現任何數字。</span><span class="sxs-lookup"><span data-stu-id="9997a-126">Replaces the "#" symbol with the corresponding digit if one is present; otherwise, no digit appears in the result string.</span></span><br /><br /> <span data-ttu-id="9997a-127">請注意，如果輸入字串中對應的數字是不重要的 0，結果字串中就不會顯示任何數字。</span><span class="sxs-lookup"><span data-stu-id="9997a-127">Note that no digit appears in the result string if the corresponding digit in the input string is a non-significant 0.</span></span> <span data-ttu-id="9997a-128">例如，0003 ("####") -> 3。</span><span class="sxs-lookup"><span data-stu-id="9997a-128">For example, 0003 ("####") -> 3.</span></span><br /><br /> <span data-ttu-id="9997a-129">詳細資訊： ["#" 自訂規範](#SpecifierD)。</span><span class="sxs-lookup"><span data-stu-id="9997a-129">More information: [The "#" Custom Specifier](#SpecifierD).</span></span>|<span data-ttu-id="9997a-130">1234.5678 ("#####") -> 1235</span><span class="sxs-lookup"><span data-stu-id="9997a-130">1234.5678 ("#####") -> 1235</span></span><br /><br /> <span data-ttu-id="9997a-131">0.45678 ("#.##", en-US) -> .46</span><span class="sxs-lookup"><span data-stu-id="9997a-131">0.45678 ("#.##", en-US) -> .46</span></span><br /><br /> <span data-ttu-id="9997a-132">0.45678 ("#.##", fr-FR) -> ,46</span><span class="sxs-lookup"><span data-stu-id="9997a-132">0.45678 ("#.##", fr-FR) -> ,46</span></span>|
|<span data-ttu-id="9997a-133">"."</span><span class="sxs-lookup"><span data-stu-id="9997a-133">"."</span></span>|<span data-ttu-id="9997a-134">小數點</span><span class="sxs-lookup"><span data-stu-id="9997a-134">Decimal point</span></span>|<span data-ttu-id="9997a-135">決定結果字串中小數點的位置。</span><span class="sxs-lookup"><span data-stu-id="9997a-135">Determines the location of the decimal separator in the result string.</span></span><br /><br /> <span data-ttu-id="9997a-136">詳細資訊： ["."自訂規範](#SpecifierPt)。</span><span class="sxs-lookup"><span data-stu-id="9997a-136">More information: [The "." Custom Specifier](#SpecifierPt).</span></span>|<span data-ttu-id="9997a-137">0.45678 ("0.00", en-US) -> 0.46</span><span class="sxs-lookup"><span data-stu-id="9997a-137">0.45678 ("0.00", en-US) -> 0.46</span></span><br /><br /> <span data-ttu-id="9997a-138">0.45678 ("0.00", fr-FR) -> 0,46</span><span class="sxs-lookup"><span data-stu-id="9997a-138">0.45678 ("0.00", fr-FR) -> 0,46</span></span>|
|<span data-ttu-id="9997a-139">","</span><span class="sxs-lookup"><span data-stu-id="9997a-139">","</span></span>|<span data-ttu-id="9997a-140">群組分隔符號和數值範圍</span><span class="sxs-lookup"><span data-stu-id="9997a-140">Group separator and number scaling</span></span>|<span data-ttu-id="9997a-141">同時做為群組分隔符號和數值縮放規範。</span><span class="sxs-lookup"><span data-stu-id="9997a-141">Serves as both a group separator and a number scaling specifier.</span></span> <span data-ttu-id="9997a-142">如果做為群組分隔符號，則會在每個群組之間插入當地語系化群組分隔符號字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-142">As a group separator, it inserts a localized group separator character between each group.</span></span> <span data-ttu-id="9997a-143">做為數值縮放規範時，每指定一個逗號就會將數字除以 1000。</span><span class="sxs-lookup"><span data-stu-id="9997a-143">As a number scaling specifier, it divides a number by 1000 for each comma specified.</span></span><br /><br /> <span data-ttu-id="9997a-144">詳細資訊： ["，" 自訂規範](#SpecifierTh)。</span><span class="sxs-lookup"><span data-stu-id="9997a-144">More information: [The "," Custom Specifier](#SpecifierTh).</span></span>|<span data-ttu-id="9997a-145">群組分隔符號規範：</span><span class="sxs-lookup"><span data-stu-id="9997a-145">Group separator specifier:</span></span><br /><br /> <span data-ttu-id="9997a-146">2147483647 ("##,#", en-US) -> 2,147,483,647</span><span class="sxs-lookup"><span data-stu-id="9997a-146">2147483647 ("##,#", en-US) -> 2,147,483,647</span></span><br /><br /> <span data-ttu-id="9997a-147">2147483647 ("##,#", es-ES) -> 2.147.483.647</span><span class="sxs-lookup"><span data-stu-id="9997a-147">2147483647 ("##,#", es-ES) -> 2.147.483.647</span></span><br /><br /> <span data-ttu-id="9997a-148">縮放規範：</span><span class="sxs-lookup"><span data-stu-id="9997a-148">Scaling specifier:</span></span><br /><br /> <span data-ttu-id="9997a-149">2147483647 ("#,#,,", en-US) -> 2,147</span><span class="sxs-lookup"><span data-stu-id="9997a-149">2147483647 ("#,#,,", en-US) -> 2,147</span></span><br /><br /> <span data-ttu-id="9997a-150">2147483647 ("#,#,,", es-ES) -> 2.147</span><span class="sxs-lookup"><span data-stu-id="9997a-150">2147483647 ("#,#,,", es-ES) -> 2.147</span></span>|
|<span data-ttu-id="9997a-151">"%"</span><span class="sxs-lookup"><span data-stu-id="9997a-151">"%"</span></span>|<span data-ttu-id="9997a-152">百分比預留位置</span><span class="sxs-lookup"><span data-stu-id="9997a-152">Percentage placeholder</span></span>|<span data-ttu-id="9997a-153">將數字乘以 100，並在結果字串中插入當地語系化的百分比符號。</span><span class="sxs-lookup"><span data-stu-id="9997a-153">Multiplies a number by 100 and inserts a localized percentage symbol in the result string.</span></span><br /><br /> <span data-ttu-id="9997a-154">詳細資訊： ["%" 自訂規範](#SpecifierPct)。</span><span class="sxs-lookup"><span data-stu-id="9997a-154">More information: [The "%" Custom Specifier](#SpecifierPct).</span></span>|<span data-ttu-id="9997a-155">0.3697 ("%#0.00", en-US) -> %36.97</span><span class="sxs-lookup"><span data-stu-id="9997a-155">0.3697 ("%#0.00", en-US) -> %36.97</span></span><br /><br /> <span data-ttu-id="9997a-156">0.3697 ("%#0.00", el-GR) -> %36,97</span><span class="sxs-lookup"><span data-stu-id="9997a-156">0.3697 ("%#0.00", el-GR) -> %36,97</span></span><br /><br /> <span data-ttu-id="9997a-157">0.3697 ("##.0 %", en-US) -> 37.0 %</span><span class="sxs-lookup"><span data-stu-id="9997a-157">0.3697 ("##.0 %", en-US) -> 37.0 %</span></span><br /><br /> <span data-ttu-id="9997a-158">0.3697 ("##.0 %", el-GR) -> 37,0 %</span><span class="sxs-lookup"><span data-stu-id="9997a-158">0.3697 ("##.0 %", el-GR) -> 37,0 %</span></span>|
|<span data-ttu-id="9997a-159">"‰"</span><span class="sxs-lookup"><span data-stu-id="9997a-159">"‰"</span></span>|<span data-ttu-id="9997a-160">千分之一符號預留位置</span><span class="sxs-lookup"><span data-stu-id="9997a-160">Per mille placeholder</span></span>|<span data-ttu-id="9997a-161">將數字乘以 1000，並在結果字串中插入當地語系化的千分比符號。</span><span class="sxs-lookup"><span data-stu-id="9997a-161">Multiplies a number by 1000 and inserts a localized per mille symbol in the result string.</span></span><br /><br /> <span data-ttu-id="9997a-162">詳細資訊： ["‰" 自訂規範](#SpecifierPerMille)。</span><span class="sxs-lookup"><span data-stu-id="9997a-162">More information: [The "‰" Custom Specifier](#SpecifierPerMille).</span></span>|<span data-ttu-id="9997a-163">0.03697 ("#0.00‰", en-US) -> 36.97‰</span><span class="sxs-lookup"><span data-stu-id="9997a-163">0.03697 ("#0.00‰", en-US) -> 36.97‰</span></span><br /><br /> <span data-ttu-id="9997a-164">0.03697 ("#0.00‰", ru-RU) -> 36,97‰</span><span class="sxs-lookup"><span data-stu-id="9997a-164">0.03697 ("#0.00‰", ru-RU) -> 36,97‰</span></span>|
|<span data-ttu-id="9997a-165">"E0"</span><span class="sxs-lookup"><span data-stu-id="9997a-165">"E0"</span></span><br /><br /> <span data-ttu-id="9997a-166">"E+0"</span><span class="sxs-lookup"><span data-stu-id="9997a-166">"E+0"</span></span><br /><br /> <span data-ttu-id="9997a-167">"E-0"</span><span class="sxs-lookup"><span data-stu-id="9997a-167">"E-0"</span></span><br /><br /> <span data-ttu-id="9997a-168">"E0"</span><span class="sxs-lookup"><span data-stu-id="9997a-168">"e0"</span></span><br /><br /> <span data-ttu-id="9997a-169">"E+0"</span><span class="sxs-lookup"><span data-stu-id="9997a-169">"e+0"</span></span><br /><br /> <span data-ttu-id="9997a-170">"E-0"</span><span class="sxs-lookup"><span data-stu-id="9997a-170">"e-0"</span></span>|<span data-ttu-id="9997a-171">指數標記法</span><span class="sxs-lookup"><span data-stu-id="9997a-171">Exponential notation</span></span>|<span data-ttu-id="9997a-172">如果後面至少接著一個 0 (零)，則使用指數標記法來格式化結果。</span><span class="sxs-lookup"><span data-stu-id="9997a-172">If followed by at least one 0 (zero), formats the result using exponential notation.</span></span> <span data-ttu-id="9997a-173">大小寫 "E" 或 "e" 表示結果字串中指數符號的大小寫。</span><span class="sxs-lookup"><span data-stu-id="9997a-173">The case of "E" or "e" indicates the case of the exponent symbol in the result string.</span></span> <span data-ttu-id="9997a-174">接在 "E" 或 "e" 字元後面的零個數決定指數中的最少位數。</span><span class="sxs-lookup"><span data-stu-id="9997a-174">The number of zeros following the "E" or "e" character determines the minimum number of digits in the exponent.</span></span> <span data-ttu-id="9997a-175">加號 (+) 表示指數前面一律加上正負號字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-175">A plus sign (+) indicates that a sign character always precedes the exponent.</span></span> <span data-ttu-id="9997a-176">減號 (-) 表示只在負指數前面才加上正負號字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-176">A minus sign (-) indicates that a sign character precedes only negative exponents.</span></span><br /><br /> <span data-ttu-id="9997a-177">詳細資訊： ["E" 和 "e" 自訂規範](#SpecifierExponent)。</span><span class="sxs-lookup"><span data-stu-id="9997a-177">More information: [The "E" and "e" Custom Specifiers](#SpecifierExponent).</span></span>|<span data-ttu-id="9997a-178">987654 ("#0.0e0") -> 98.8e4</span><span class="sxs-lookup"><span data-stu-id="9997a-178">987654 ("#0.0e0") -> 98.8e4</span></span><br /><br /> <span data-ttu-id="9997a-179">1503.92311 ("0.0##e+00") -> 1.504e+03</span><span class="sxs-lookup"><span data-stu-id="9997a-179">1503.92311 ("0.0##e+00") -> 1.504e+03</span></span><br /><br /> <span data-ttu-id="9997a-180">1.8901385E-16 ("0.0e+00") -> 1.9e-16</span><span class="sxs-lookup"><span data-stu-id="9997a-180">1.8901385E-16 ("0.0e+00") -> 1.9e-16</span></span>|
|<span data-ttu-id="9997a-181">"\\"</span><span class="sxs-lookup"><span data-stu-id="9997a-181">"\\"</span></span>|<span data-ttu-id="9997a-182">逸出字元</span><span class="sxs-lookup"><span data-stu-id="9997a-182">Escape character</span></span>|<span data-ttu-id="9997a-183">將下一個字元解譯為常值，而不是自訂格式規範。</span><span class="sxs-lookup"><span data-stu-id="9997a-183">Causes the next character to be interpreted as a literal rather than as a custom format specifier.</span></span><br /><br /> <span data-ttu-id="9997a-184">詳細資訊：["\\" 逸出字元](#SpecifierEscape)。</span><span class="sxs-lookup"><span data-stu-id="9997a-184">More information: [The "\\" Escape Character](#SpecifierEscape).</span></span>|<span data-ttu-id="9997a-185">987654 ("\\###00\\#") -> #987654#</span><span class="sxs-lookup"><span data-stu-id="9997a-185">987654 ("\\###00\\#") -> #987654#</span></span>|
|<span data-ttu-id="9997a-186">'*字串*'</span><span class="sxs-lookup"><span data-stu-id="9997a-186">'*string*'</span></span><br /><br /> <span data-ttu-id="9997a-187">"*string*"</span><span class="sxs-lookup"><span data-stu-id="9997a-187">"*string*"</span></span>|<span data-ttu-id="9997a-188">常值字串分隔符號</span><span class="sxs-lookup"><span data-stu-id="9997a-188">Literal string delimiter</span></span>|<span data-ttu-id="9997a-189">表示應該將所括住的字元原封不動地複製到結果字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-189">Indicates that the enclosed characters should be copied to the result string unchanged.</span></span><br/><br/><span data-ttu-id="9997a-190">詳細資訊︰[字元常值](#character-literals)。</span><span class="sxs-lookup"><span data-stu-id="9997a-190">More information: [Character literals](#character-literals).</span></span>|<span data-ttu-id="9997a-191">68 ("# 'degrees'") -> 68 degrees</span><span class="sxs-lookup"><span data-stu-id="9997a-191">68 ("# 'degrees'") -> 68 degrees</span></span><br /><br /> <span data-ttu-id="9997a-192">68 ("# ' degrees'") -> 68  degrees</span><span class="sxs-lookup"><span data-stu-id="9997a-192">68 ("#' degrees'") -> 68 degrees</span></span>|
|<span data-ttu-id="9997a-193">;</span><span class="sxs-lookup"><span data-stu-id="9997a-193">;</span></span>|<span data-ttu-id="9997a-194">區段分隔符號</span><span class="sxs-lookup"><span data-stu-id="9997a-194">Section separator</span></span>|<span data-ttu-id="9997a-195">以個別格式字串來定義正數、負數和零值的區段。</span><span class="sxs-lookup"><span data-stu-id="9997a-195">Defines sections with separate format strings for positive, negative, and zero numbers.</span></span><br /><br /> <span data-ttu-id="9997a-196">詳細資訊： [";" 區段分隔符號](#SectionSeparator)。</span><span class="sxs-lookup"><span data-stu-id="9997a-196">More information: [The ";" Section Separator](#SectionSeparator).</span></span>|<span data-ttu-id="9997a-197">12.345 ("#0.0#;(#0.0#);-\0-") -> 12.35</span><span class="sxs-lookup"><span data-stu-id="9997a-197">12.345 ("#0.0#;(#0.0#);-\0-") -> 12.35</span></span><br /><br /> <span data-ttu-id="9997a-198">0 ("#0.0#;(#0.0#);-\0-") -> -0-</span><span class="sxs-lookup"><span data-stu-id="9997a-198">0 ("#0.0#;(#0.0#);-\0-") -> -0-</span></span><br /><br /> <span data-ttu-id="9997a-199">-12.345 ("#0.0#;(#0.0#);-\0-") -> (12.35)</span><span class="sxs-lookup"><span data-stu-id="9997a-199">-12.345 ("#0.0#;(#0.0#);-\0-") -> (12.35)</span></span><br /><br /> <span data-ttu-id="9997a-200">12.345 ("#0.0#;(#0.0#)") -> 12.35</span><span class="sxs-lookup"><span data-stu-id="9997a-200">12.345 ("#0.0#;(#0.0#)") -> 12.35</span></span><br /><br /> <span data-ttu-id="9997a-201">0 ("#0.0#;(#0.0#)") -> 0.0</span><span class="sxs-lookup"><span data-stu-id="9997a-201">0 ("#0.0#;(#0.0#)") -> 0.0</span></span><br /><br /> <span data-ttu-id="9997a-202">-12.345 ("#0.0#;(#0.0#)") -> (12.35)</span><span class="sxs-lookup"><span data-stu-id="9997a-202">-12.345 ("#0.0#;(#0.0#)") -> (12.35)</span></span>|
|<span data-ttu-id="9997a-203">其他</span><span class="sxs-lookup"><span data-stu-id="9997a-203">Other</span></span>|<span data-ttu-id="9997a-204">所有其他字元</span><span class="sxs-lookup"><span data-stu-id="9997a-204">All other characters</span></span>|<span data-ttu-id="9997a-205">字元會原封不動地複製到結果字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-205">The character is copied to the result string unchanged.</span></span><br/><br/><span data-ttu-id="9997a-206">詳細資訊︰[字元常值](#character-literals)。</span><span class="sxs-lookup"><span data-stu-id="9997a-206">More information: [Character literals](#character-literals).</span></span>|<span data-ttu-id="9997a-207">68 ("# °") -> 68 °</span><span class="sxs-lookup"><span data-stu-id="9997a-207">68 ("# °") -> 68 °</span></span>|

<span data-ttu-id="9997a-208">下列各節提供每個自訂數值格式規範的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="9997a-208">The following sections provide detailed information about each of the custom numeric format specifiers.</span></span>

[!INCLUDE[C# interactive-note](~/includes/csharp-interactive-partial-note.md)]

<a name="Specifier0"></a>

## <a name="the-0-custom-specifier"></a><span data-ttu-id="9997a-209">"0" 自訂規範</span><span class="sxs-lookup"><span data-stu-id="9997a-209">The "0" custom specifier</span></span>

<span data-ttu-id="9997a-210">"0" 自訂格式規範是當做零預留位置符號。</span><span class="sxs-lookup"><span data-stu-id="9997a-210">The "0" custom format specifier serves as a zero-placeholder symbol.</span></span> <span data-ttu-id="9997a-211">如果正在格式化的值有數字位於格式字串中出現零的位置上，則該數字會複製到結果字串，否則結果字串中會出現零。</span><span class="sxs-lookup"><span data-stu-id="9997a-211">If the value that is being formatted has a digit in the position where the zero appears in the format string, that digit is copied to the result string; otherwise, a zero appears in the result string.</span></span> <span data-ttu-id="9997a-212">小數點前最左邊的零和小數點後最右邊的零位置，決定要一直在輸出字串中出現的位數範圍。</span><span class="sxs-lookup"><span data-stu-id="9997a-212">The position of the leftmost zero before the decimal point and the rightmost zero after the decimal point determines the range of digits that are always present in the result string.</span></span>

<span data-ttu-id="9997a-213">"00" 規範會造成數值捨入至最接近的小數點前面數值，而其中永遠使用遠離零的捨入方式。</span><span class="sxs-lookup"><span data-stu-id="9997a-213">The "00" specifier causes the value to be rounded to the nearest digit preceding the decimal, where rounding away from zero is always used.</span></span> <span data-ttu-id="9997a-214">例如，使用 "00" 格式化 34.5 將會得到值 35。</span><span class="sxs-lookup"><span data-stu-id="9997a-214">For example, formatting 34.5 with "00" would result in the value 35.</span></span>

<span data-ttu-id="9997a-215">下列範例顯示使用包含零預留位置的自訂格式字串來格式化的幾個值。</span><span class="sxs-lookup"><span data-stu-id="9997a-215">The following example displays several values that are formatted by using custom format strings that include zero placeholders.</span></span>

[!code-cpp[Formatting.Numeric.Custom#1](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#1)]
[!code-csharp[Formatting.Numeric.Custom#1](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#1)]
[!code-vb[Formatting.Numeric.Custom#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#1)]

[<span data-ttu-id="9997a-216">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-216">Back to table</span></span>](#table)

<a name="SpecifierD"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="9997a-217">"#" 自訂規範</span><span class="sxs-lookup"><span data-stu-id="9997a-217">The "#" custom specifier</span></span>

<span data-ttu-id="9997a-218">"#" 自訂格式規範是當做數字預留位置符號。</span><span class="sxs-lookup"><span data-stu-id="9997a-218">The "#" custom format specifier serves as a digit-placeholder symbol.</span></span> <span data-ttu-id="9997a-219">如果正在格式化的值有數字位於格式字串中出現 "#" 符號的位置上，則該數字會複製到輸出字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-219">If the value that is being formatted has a digit in the position where the "#" symbol appears in the format string, that digit is copied to the result string.</span></span> <span data-ttu-id="9997a-220">否則，沒有東西會存放在結果字串中的那個位置。</span><span class="sxs-lookup"><span data-stu-id="9997a-220">Otherwise, nothing is stored in that position in the result string.</span></span>

<span data-ttu-id="9997a-221">請注意，這個規範永遠不會顯示不是有效位數的零，即使字串中只有零這個數字也一樣。</span><span class="sxs-lookup"><span data-stu-id="9997a-221">Note that this specifier never displays a zero that is not a significant digit, even if zero is the only digit in the string.</span></span> <span data-ttu-id="9997a-222">只有當零在所顯示的數字中是有效位數時，才會顯示零。</span><span class="sxs-lookup"><span data-stu-id="9997a-222">It will display zero only if it is a significant digit in the number that is being displayed.</span></span>

<span data-ttu-id="9997a-223">"##" 格式字串會造成數值捨入至最接近的小數點前面數值，而其中永遠使用遠離零的捨入方式。</span><span class="sxs-lookup"><span data-stu-id="9997a-223">The "##" format string causes the value to be rounded to the nearest digit preceding the decimal, where rounding away from zero is always used.</span></span> <span data-ttu-id="9997a-224">例如，使用 "##" 格式化 34.5 將會得到值 35。</span><span class="sxs-lookup"><span data-stu-id="9997a-224">For example, formatting 34.5 with "##" would result in the value 35.</span></span>

<span data-ttu-id="9997a-225">下列範例顯示使用包含數字預留位置的自訂格式字串來格式化的幾個值。</span><span class="sxs-lookup"><span data-stu-id="9997a-225">The following example displays several values that are formatted by using custom format strings that include digit placeholders.</span></span>

[!code-cpp[Formatting.Numeric.Custom#2](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#2)]
[!code-csharp[Formatting.Numeric.Custom#2](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#2)]
[!code-vb[Formatting.Numeric.Custom#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#2)]

<span data-ttu-id="9997a-226">若要傳回結果字串，以空格取代不存在的數字或前置零，請使用 [複合格式功能](composite-formatting.md) 並指定欄位寬度，如下列範例所示。</span><span class="sxs-lookup"><span data-stu-id="9997a-226">To return a result string in which absent digits or leading zeroes are replaced by spaces, use the [composite formatting feature](composite-formatting.md) and specify a field width, as the following example illustrates.</span></span>

[!code-cpp[Formatting.Numeric.Custom#12](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/SpaceOrDigit1.cpp#12)]
[!code-csharp[Formatting.Numeric.Custom#12](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/SpaceOrDigit1.cs#12)]
[!code-vb[Formatting.Numeric.Custom#12](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/SpaceOrDigit1.vb#12)]

[<span data-ttu-id="9997a-227">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-227">Back to table</span></span>](#table)

<a name="SpecifierPt"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="9997a-228">"." 自訂規範</span><span class="sxs-lookup"><span data-stu-id="9997a-228">The "." custom specifier</span></span>

<span data-ttu-id="9997a-229">"." 自訂格式規範會將當地語系化的十進位分隔符號插入結果字串中。</span><span class="sxs-lookup"><span data-stu-id="9997a-229">The "." custom format specifier inserts a localized decimal separator into the result string.</span></span> <span data-ttu-id="9997a-230">格式字串中第一個點決定所格式化值中的小數分隔符號位置；任何其他點將被忽略。</span><span class="sxs-lookup"><span data-stu-id="9997a-230">The first period in the format string determines the location of the decimal separator in the formatted value; any additional periods are ignored.</span></span>

<span data-ttu-id="9997a-231">結果字串中當做小數分隔符號的字元不一定是點，而是由控制格式設定的 <xref:System.Globalization.NumberFormatInfo.NumberDecimalSeparator%2A> 物件的 <xref:System.Globalization.NumberFormatInfo> 屬性來決定。</span><span class="sxs-lookup"><span data-stu-id="9997a-231">The character that is used as the decimal separator in the result string is not always a period; it is determined by the <xref:System.Globalization.NumberFormatInfo.NumberDecimalSeparator%2A> property of the <xref:System.Globalization.NumberFormatInfo> object that controls formatting.</span></span>

<span data-ttu-id="9997a-232">下列範例使用 "." 格式規範來定義幾個結果字串中小數點的位置。</span><span class="sxs-lookup"><span data-stu-id="9997a-232">The following example uses the "." format specifier to define the location of the decimal point in several result strings.</span></span>

[!code-cpp[Formatting.Numeric.Custom#3](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#3)]
[!code-csharp[Formatting.Numeric.Custom#3](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#3)]
[!code-vb[Formatting.Numeric.Custom#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#3)]

[<span data-ttu-id="9997a-233">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-233">Back to table</span></span>](#table)

<a name="SpecifierTh"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="9997a-234">"," 自訂規範</span><span class="sxs-lookup"><span data-stu-id="9997a-234">The "," custom specifier</span></span>

<span data-ttu-id="9997a-235">"," 字元同時當做群組分隔符號和數值縮放規範。</span><span class="sxs-lookup"><span data-stu-id="9997a-235">The "," character serves as both a group separator and a number scaling specifier.</span></span>

- <span data-ttu-id="9997a-236">群組分隔符號：如果在用於格式化數字整數位數的兩個數字預留位置 (0 或 #) 之間指定一個或多個逗號，則會在輸出的整數部分中在每個數字群組之間插入群組分隔符號字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-236">Group separator: If one or more commas are specified between two digit placeholders (0 or #) that format the integral digits of a number, a group separator character is inserted between each number group in the integral part of the output.</span></span>

  <span data-ttu-id="9997a-237">目前 <xref:System.Globalization.NumberFormatInfo.NumberGroupSeparator%2A> 物件的 <xref:System.Globalization.NumberFormatInfo.NumberGroupSizes%2A> 和 <xref:System.Globalization.NumberFormatInfo> 屬性會判斷當做數字群組分隔符號使用的字元，以及每個數字群組的大小。</span><span class="sxs-lookup"><span data-stu-id="9997a-237">The <xref:System.Globalization.NumberFormatInfo.NumberGroupSeparator%2A> and <xref:System.Globalization.NumberFormatInfo.NumberGroupSizes%2A> properties of the current <xref:System.Globalization.NumberFormatInfo> object determine the character used as the number group separator and the size of each number group.</span></span> <span data-ttu-id="9997a-238">例如，如果使用字串 "#,#" 和不變的文化特性來格式化數字 1000，則輸出為 "1,000"。</span><span class="sxs-lookup"><span data-stu-id="9997a-238">For example, if the string "#,#" and the invariant culture are used to format the number 1000, the output is "1,000".</span></span>

- <span data-ttu-id="9997a-239">數值縮放規範：如果在明確或隱含小數點的左側緊接著指定一個或多個逗號，則每指定一個逗號就會將要格式化的數字除以 1000。</span><span class="sxs-lookup"><span data-stu-id="9997a-239">Number scaling specifier: If one or more commas are specified immediately to the left of the explicit or implicit decimal point, the number to be formatted is divided by 1000 for each comma.</span></span> <span data-ttu-id="9997a-240">例如，如果使用字串 "0,," 來格式化數字 1 億，則其輸出為 "100"。</span><span class="sxs-lookup"><span data-stu-id="9997a-240">For example, if the string "0,," is used to format the number 100 million, the output is "100".</span></span>

<span data-ttu-id="9997a-241">您可以在相同的格式字串內使用群組分隔符號和數值縮放規範。</span><span class="sxs-lookup"><span data-stu-id="9997a-241">You can use group separator and number scaling specifiers in the same format string.</span></span> <span data-ttu-id="9997a-242">例如，如果使用字串 "#,0,," 和不變的文化特性來格式化數字 10 億，則輸出為 "1,000"。</span><span class="sxs-lookup"><span data-stu-id="9997a-242">For example, if the string "#,0,," and the invariant culture are used to format the number one billion, the output is "1,000".</span></span>

<span data-ttu-id="9997a-243">下列範例示範使用逗號做為群組分隔符號。</span><span class="sxs-lookup"><span data-stu-id="9997a-243">The following example illustrates the use of the comma as a group separator.</span></span>

[!code-cpp[Formatting.Numeric.Custom#4](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#4)]
[!code-csharp[Formatting.Numeric.Custom#4](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#4)]
[!code-vb[Formatting.Numeric.Custom#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#4)]

<span data-ttu-id="9997a-244">下列範例示範使用逗點做為數值縮放的規範。</span><span class="sxs-lookup"><span data-stu-id="9997a-244">The following example illustrates the use of the comma as a specifier for number scaling.</span></span>

[!code-cpp[Formatting.Numeric.Custom#5](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#5)]
[!code-csharp[Formatting.Numeric.Custom#5](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#5)]
[!code-vb[Formatting.Numeric.Custom#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#5)]

[<span data-ttu-id="9997a-245">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-245">Back to table</span></span>](#table)

<a name="SpecifierPct"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="9997a-246">"%" 自訂規範</span><span class="sxs-lookup"><span data-stu-id="9997a-246">The "%" custom specifier</span></span>

<span data-ttu-id="9997a-247">格式字串中的百分比符號 (%) 會使得數字在格式化之前先乘以 100。</span><span class="sxs-lookup"><span data-stu-id="9997a-247">A percent sign (%) in a format string causes a number to be multiplied by 100 before it is formatted.</span></span> <span data-ttu-id="9997a-248">數字中會根據格式字串中出現 % 的位置，插入當地語系化百分比符號。</span><span class="sxs-lookup"><span data-stu-id="9997a-248">The localized percent symbol is inserted in the number at the location where the % appears in the format string.</span></span> <span data-ttu-id="9997a-249">使用的百分比字元由目前 <xref:System.Globalization.NumberFormatInfo.PercentSymbol%2A> 物件的 <xref:System.Globalization.NumberFormatInfo> 屬性所定義。</span><span class="sxs-lookup"><span data-stu-id="9997a-249">The percent character used is defined by the <xref:System.Globalization.NumberFormatInfo.PercentSymbol%2A> property of the current <xref:System.Globalization.NumberFormatInfo> object.</span></span>

<span data-ttu-id="9997a-250">下列範例會定義幾個包含 "%" 自訂規範的自訂格式字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-250">The following example defines several custom format strings that include the "%" custom specifier.</span></span>

[!code-cpp[Formatting.Numeric.Custom#6](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#6)]
[!code-csharp[Formatting.Numeric.Custom#6](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#6)]
[!code-vb[Formatting.Numeric.Custom#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#6)]

[<span data-ttu-id="9997a-251">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-251">Back to table</span></span>](#table)

<a name="SpecifierPerMille"></a>

## <a name="the--custom-specifier"></a><span data-ttu-id="9997a-252">"‰" 自訂規範</span><span class="sxs-lookup"><span data-stu-id="9997a-252">The "‰" custom specifier</span></span>

<span data-ttu-id="9997a-253">格式字串中的千分比字元 (‰ 或 \u2030) 會使得數字在格式化之前先乘以 1000。</span><span class="sxs-lookup"><span data-stu-id="9997a-253">A per mille character (‰ or \u2030) in a format string causes a number to be multiplied by 1000 before it is formatted.</span></span> <span data-ttu-id="9997a-254">傳回的字串中會根據格式字串中出現 ‰ 符號的位置，插入適當的千分比符號。</span><span class="sxs-lookup"><span data-stu-id="9997a-254">The appropriate per mille symbol is inserted in the returned string at the location where the ‰ symbol appears in the format string.</span></span> <span data-ttu-id="9997a-255">使用的千分之一符號字元是由提供文化特性特定格式資訊之物件的 <xref:System.Globalization.NumberFormatInfo.PerMilleSymbol%2A?displayProperty=nameWithType> 屬性定義的。</span><span class="sxs-lookup"><span data-stu-id="9997a-255">The per mille character used is defined by the <xref:System.Globalization.NumberFormatInfo.PerMilleSymbol%2A?displayProperty=nameWithType> property of the object that provides culture-specific formatting information.</span></span>

<span data-ttu-id="9997a-256">下列範例會定義包含 "‰" 自訂規範的自訂格式字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-256">The following example defines a custom format string that includes the "‰" custom specifier.</span></span>

[!code-cpp[Formatting.Numeric.Custom#9](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#9)]
[!code-csharp[Formatting.Numeric.Custom#9](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#9)]
[!code-vb[Formatting.Numeric.Custom#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#9)]

[<span data-ttu-id="9997a-257">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-257">Back to table</span></span>](#table)

<a name="SpecifierExponent"></a>

## <a name="the-e-and-e-custom-specifiers"></a><span data-ttu-id="9997a-258">"E" 和 "e" 自訂規範</span><span class="sxs-lookup"><span data-stu-id="9997a-258">The "E" and "e" custom specifiers</span></span>

<span data-ttu-id="9997a-259">如果 "E"、"E+"、"E-"、"e"、"e+" 或 "e-" 中的任何一個字串出現在格式字串中，且後面至少緊接著一個零，則會使用科學標記法來格式化數字，並在數字和指數之間插入 "E" 或 "e"。</span><span class="sxs-lookup"><span data-stu-id="9997a-259">If any of the strings "E", "E+", "E-", "e", "e+", or "e-" are present in the format string and are followed immediately by at least one zero, the number is formatted by using scientific notation with an "E" or "e" inserted between the number and the exponent.</span></span> <span data-ttu-id="9997a-260">接在科學標記法指標之後的零個數決定要在指數部分輸出的最少位數。</span><span class="sxs-lookup"><span data-stu-id="9997a-260">The number of zeros following the scientific notation indicator determines the minimum number of digits to output for the exponent.</span></span> <span data-ttu-id="9997a-261">"E+" 和 "e+" 格式表示指數前面應該一律加上加號或減號。</span><span class="sxs-lookup"><span data-stu-id="9997a-261">The "E+" and "e+" formats indicate that a plus sign or minus sign should always precede the exponent.</span></span> <span data-ttu-id="9997a-262">"E"、"E-"、"e" 或 "e-" 格式表示只應該在負數指數前面加上正負號字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-262">The "E", "E-", "e", or "e-" formats indicate that a sign character should precede only negative exponents.</span></span>

<span data-ttu-id="9997a-263">下列範例使用科學記號規範來格式化幾個數值。</span><span class="sxs-lookup"><span data-stu-id="9997a-263">The following example formats several numeric values using the specifiers for scientific notation.</span></span>

[!code-cpp[Formatting.Numeric.Custom#7](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#7)]
[!code-csharp[Formatting.Numeric.Custom#7](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#7)]
[!code-vb[Formatting.Numeric.Custom#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#7)]

[<span data-ttu-id="9997a-264">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-264">Back to table</span></span>](#table)

<a name="SpecifierEscape"></a>

## <a name="the--escape-character"></a><span data-ttu-id="9997a-265">"\\" 逸出字元</span><span class="sxs-lookup"><span data-stu-id="9997a-265">The "\\" escape character</span></span>

<span data-ttu-id="9997a-266">格式字串中的 "#"、"0"、"."、","、"%" 和 "‰" 符號會解譯為格式規範，而不是常值字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-266">The "#", "0", ".", ",", "%", and "‰" symbols in a format string are interpreted as format specifiers rather than as literal characters.</span></span> <span data-ttu-id="9997a-267">大寫和小寫 "E" 以及 + 和 - 符號視其在自訂格式字串中的位置而定，也有可能會解譯為格式規範。</span><span class="sxs-lookup"><span data-stu-id="9997a-267">Depending on their position in a custom format string, the uppercase and lowercase "E" as well as the + and - symbols may also be interpreted as format specifiers.</span></span>

<span data-ttu-id="9997a-268">若要避免將字元解譯為格式規範，您可以在前面加上反斜線，這是逸出字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-268">To prevent a character from being interpreted as a format specifier, you can precede it with a backslash, which is the escape character.</span></span> <span data-ttu-id="9997a-269">逸出字元表示接下來的字元是字元常值，應該原封不動地放入結果字串中。</span><span class="sxs-lookup"><span data-stu-id="9997a-269">The escape character signifies that the following character is a character literal that should be included in the result string unchanged.</span></span>

<span data-ttu-id="9997a-270">若要在結果字串中加上反斜線，您必須再加上一個反斜線 (變成`\\`)，才能將反斜線解譯為常值。</span><span class="sxs-lookup"><span data-stu-id="9997a-270">To include a backslash in a result string, you must escape it with another backslash (`\\`).</span></span>

> [!NOTE]
> <span data-ttu-id="9997a-271">某些編譯器 (例如 C++ 和 C# 編譯器) 也可能會將單一反斜線字元解譯為逸出字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-271">Some compilers, such as the C++ and C# compilers, may also interpret a single backslash character as an escape character.</span></span> <span data-ttu-id="9997a-272">為了確保字串在格式化時能夠正確獲得解譯，您可以在 C# 中的字串前面加上逐字字串常值字元 (@ 字元)，或在 C# 和 C++ 中的每個反斜線前面再加上一個反斜線字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-272">To ensure that a string is interpreted correctly when formatting, you can use the verbatim string literal character (the @ character) before the string in C#, or add another backslash character before each backslash in C# and C++.</span></span> <span data-ttu-id="9997a-273">下列 C# 範例示範這兩種做法。</span><span class="sxs-lookup"><span data-stu-id="9997a-273">The following C# example illustrates both approaches.</span></span>

<span data-ttu-id="9997a-274">下列範例會使用逸出字元，以避免格式化作業將 "#"、"0" 和 "\\" 字元解譯為逸出字元或格式規範。</span><span class="sxs-lookup"><span data-stu-id="9997a-274">The following example uses the escape character to prevent the formatting operation from interpreting the "#", "0", and "\\" characters as either escape characters or format specifiers.</span></span> <span data-ttu-id="9997a-275">C# 範例會多使用一個反斜線，以確保反斜線會解譯為常值字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-275">The C# examples uses an additional backslash to ensure that a backslash is interpreted as a literal character.</span></span>

[!code-cpp[Formatting.Numeric.Custom#11](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/escape1.cpp#11)]
[!code-csharp-interactive[Formatting.Numeric.Custom#11](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/escape1.cs#11)]
[!code-vb[Formatting.Numeric.Custom#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/escape1.vb#11)]

[<span data-ttu-id="9997a-276">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-276">Back to table</span></span>](#table)

<a name="SectionSeparator"></a>

## <a name="the--section-separator"></a><span data-ttu-id="9997a-277">";" 區段分隔符號</span><span class="sxs-lookup"><span data-stu-id="9997a-277">The ";" section separator</span></span>

<span data-ttu-id="9997a-278">冒號 (;) 是條件式格式規範，這個規範會根據數字的值是正數、負數還是零，將不同的格式套用至數字。</span><span class="sxs-lookup"><span data-stu-id="9997a-278">The semicolon (;) is a conditional format specifier that applies different formatting to a number depending on whether its value is positive, negative, or zero.</span></span> <span data-ttu-id="9997a-279">若要產生這個行為，自訂格式字串可以包含多達三個以分號分隔的區段，</span><span class="sxs-lookup"><span data-stu-id="9997a-279">To produce this behavior, a custom format string can contain up to three sections separated by semicolons.</span></span> <span data-ttu-id="9997a-280">下表將說明這些區段。</span><span class="sxs-lookup"><span data-stu-id="9997a-280">These sections are described in the following table.</span></span>

|<span data-ttu-id="9997a-281">區段數</span><span class="sxs-lookup"><span data-stu-id="9997a-281">Number of sections</span></span>|<span data-ttu-id="9997a-282">描述</span><span class="sxs-lookup"><span data-stu-id="9997a-282">Description</span></span>|
|------------------------|-----------------|
|<span data-ttu-id="9997a-283">一個區段</span><span class="sxs-lookup"><span data-stu-id="9997a-283">One section</span></span>|<span data-ttu-id="9997a-284">此格式字串適用於所有的值。</span><span class="sxs-lookup"><span data-stu-id="9997a-284">The format string applies to all values.</span></span>|
|<span data-ttu-id="9997a-285">兩個區段</span><span class="sxs-lookup"><span data-stu-id="9997a-285">Two sections</span></span>|<span data-ttu-id="9997a-286">第一個區段適用於正數值及零值，第二個區段適用於負數值。</span><span class="sxs-lookup"><span data-stu-id="9997a-286">The first section applies to positive values and zeros, and the second section applies to negative values.</span></span><br /><br /> <span data-ttu-id="9997a-287">如果要格式化的數字為負數，但依照第二個區段的格式四捨五入之後成為零，則產生的零會依照第一個區段來格式化。</span><span class="sxs-lookup"><span data-stu-id="9997a-287">If the number to be formatted is negative, but becomes zero after rounding according to the format in the second section, the resulting zero is formatted according to the first section.</span></span>|
|<span data-ttu-id="9997a-288">三個區段</span><span class="sxs-lookup"><span data-stu-id="9997a-288">Three sections</span></span>|<span data-ttu-id="9997a-289">第一個區段適用於正數值，第二個區段適用於負數值，而第三個區段則適用於零值。</span><span class="sxs-lookup"><span data-stu-id="9997a-289">The first section applies to positive values, the second section applies to negative values, and the third section applies to zeros.</span></span><br /><br /> <span data-ttu-id="9997a-290">第二個區段可留白 (分號之間沒有任何內容)，此時第一個區段將套用到所有非零值。</span><span class="sxs-lookup"><span data-stu-id="9997a-290">The second section can be left empty (by having nothing between the semicolons), in which case the first section applies to all nonzero values.</span></span><br /><br /> <span data-ttu-id="9997a-291">如果要格式化的數字不是零，但依照第一個或第二個區段的格式四捨五入之後成為零，則產生的零會依照第三個區段來格式化。</span><span class="sxs-lookup"><span data-stu-id="9997a-291">If the number to be formatted is nonzero, but becomes zero after rounding according to the format in the first or second section, the resulting zero is formatted according to the third section.</span></span>|

<span data-ttu-id="9997a-292">區段分隔符號會在最終值已格式化時，忽略任何事先存在而與數值相關的格式。</span><span class="sxs-lookup"><span data-stu-id="9997a-292">Section separators ignore any preexisting formatting associated with a number when the final value is formatted.</span></span> <span data-ttu-id="9997a-293">例如，負數值在使用區段分隔符號時永遠不以負號來顯示。</span><span class="sxs-lookup"><span data-stu-id="9997a-293">For example, negative values are always displayed without a minus sign when section separators are used.</span></span> <span data-ttu-id="9997a-294">如果您想要最終的格式化值具有負號，您應該明確包含負號做為自訂格式規範的一部分。</span><span class="sxs-lookup"><span data-stu-id="9997a-294">If you want the final formatted value to have a minus sign, you should explicitly include the minus sign as part of the custom format specifier.</span></span>

<span data-ttu-id="9997a-295">下列範例會使用 ";" 格式規範，以不同方式格式化正數、負數和零。</span><span class="sxs-lookup"><span data-stu-id="9997a-295">The following example uses the ";" format specifier to format positive, negative, and zero numbers differently.</span></span>

[!code-cpp[Formatting.Numeric.Custom#8](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/custom.cpp#8)]
[!code-csharp-interactive[Formatting.Numeric.Custom#8](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/custom.cs#8)]
[!code-vb[Formatting.Numeric.Custom#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/Custom.vb#8)]

[<span data-ttu-id="9997a-296">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-296">Back to table</span></span>](#table)

## <a name="character-literals"></a><span data-ttu-id="9997a-297">字元常值</span><span class="sxs-lookup"><span data-stu-id="9997a-297">Character literals</span></span>

<span data-ttu-id="9997a-298">自訂數值格式字串中出現的格式規範一律會解譯為格式字元，永遠不會解譯為常值字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-298">Format specifiers that appear in a custom numeric format string are always interpreted as formatting characters and never as literal characters.</span></span> <span data-ttu-id="9997a-299">這包含下列字元：</span><span class="sxs-lookup"><span data-stu-id="9997a-299">This includes the following characters:</span></span>

- [<span data-ttu-id="9997a-300">0</span><span class="sxs-lookup"><span data-stu-id="9997a-300">0</span></span>](#Specifier0)
- [\#](#SpecifierD)
- [%](#SpecifierPct)
- [<span data-ttu-id="9997a-301">‰</span><span class="sxs-lookup"><span data-stu-id="9997a-301">‰</span></span>](#SpecifierPerMille)
- <span data-ttu-id="9997a-302">'</span><span class="sxs-lookup"><span data-stu-id="9997a-302">'</span></span>
- [\\](#SpecifierEscape)
- [<span data-ttu-id="9997a-303">.</span><span class="sxs-lookup"><span data-stu-id="9997a-303">.</span></span>](#SpecifierPt)
- [<span data-ttu-id="9997a-304">,</span><span class="sxs-lookup"><span data-stu-id="9997a-304">,</span></span>](#SpecifierTh)
- <span data-ttu-id="9997a-305">[E 或 e](#SpecifierExponent)，取決於在格式字串中的位置。</span><span class="sxs-lookup"><span data-stu-id="9997a-305">[E or e](#SpecifierExponent), depending on its position in the format string.</span></span>

<span data-ttu-id="9997a-306">所有其他字元一律會解譯為字元常值，並在格式化作業中，原封不動地包含在結果字串中。</span><span class="sxs-lookup"><span data-stu-id="9997a-306">All other characters are always interpreted as character literals and, in a formatting operation, are included in the result string unchanged.</span></span>  <span data-ttu-id="9997a-307">在剖析作業中，它們必須完全符合輸入字串中的字元；這項比較會區分大小寫。</span><span class="sxs-lookup"><span data-stu-id="9997a-307">In a parsing operation, they must match the characters in the input string exactly; the comparison is case-sensitive.</span></span>

<span data-ttu-id="9997a-308">下列範例說明常值字元單位 (在此案例中為千分位) 的一個常見用法：</span><span class="sxs-lookup"><span data-stu-id="9997a-308">The following example illustrates one common use of literal character units (in this case, thousands):</span></span>

[!code-csharp-interactive[literal characters](~/samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/literal2.cs#1)]
[!code-vb[literal characters](~/samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/literal2.vb#1)]

<span data-ttu-id="9997a-309">您可以使用兩種方式來指定將字元解譯為常值字元，而不是格式字元，以便包含在結果字串中，或在輸入字串中成功剖析：</span><span class="sxs-lookup"><span data-stu-id="9997a-309">There are two ways to indicate that characters are to be interpreted as literal characters and not as formatting characters, so that they can be included in a result string or successfully parsed in an input string:</span></span>

- <span data-ttu-id="9997a-310">逸出格式字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-310">By escaping a formatting character.</span></span> <span data-ttu-id="9997a-311">如需詳細資訊，請參閱 ["\\" 逸出字元](#SpecifierEscape)。</span><span class="sxs-lookup"><span data-stu-id="9997a-311">For more information, see [The "\\" escape character](#SpecifierEscape).</span></span>

- <span data-ttu-id="9997a-312">以引號括住整個常值字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-312">By enclosing the entire literal string in quotation apostrophes.</span></span>

<span data-ttu-id="9997a-313">下列範例會使用這兩種方法，在自訂數值格式字串中包含保留的字元。</span><span class="sxs-lookup"><span data-stu-id="9997a-313">The following example uses both approaches to include reserved characters in a custom numeric format string.</span></span>

[!code-csharp-interactive[including reserved characters](~/samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/literal1.cs#1)]
[!code-vb[including reserved characters](~/samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/literal1.vb#1)]

<a name="NotesCustomFormatting"></a>

## <a name="notes"></a><span data-ttu-id="9997a-314">備忘稿</span><span class="sxs-lookup"><span data-stu-id="9997a-314">Notes</span></span>

### <a name="floating-point-infinities-and-nan"></a><span data-ttu-id="9997a-315">無限浮點數和 NaN</span><span class="sxs-lookup"><span data-stu-id="9997a-315">Floating-Point infinities and NaN</span></span>

<span data-ttu-id="9997a-316">不論格式字串為何，如果 <xref:System.Single> 或 <xref:System.Double> 浮點類型的值為正無限大、負無限大或不是數字 (NaN)，則格式化後的字串會分別是 <xref:System.Globalization.NumberFormatInfo.PositiveInfinitySymbol%2A>、 <xref:System.Globalization.NumberFormatInfo.NegativeInfinitySymbol%2A>或 <xref:System.Globalization.NumberFormatInfo.NaNSymbol%2A> 屬性的值 (這些屬性由目前適用的 <xref:System.Globalization.NumberFormatInfo> 物件所指定)。</span><span class="sxs-lookup"><span data-stu-id="9997a-316">Regardless of the format string, if the value of a <xref:System.Single> or <xref:System.Double> floating-point type is positive infinity, negative infinity, or not a number (NaN), the formatted string is the value of the respective <xref:System.Globalization.NumberFormatInfo.PositiveInfinitySymbol%2A>, <xref:System.Globalization.NumberFormatInfo.NegativeInfinitySymbol%2A>, or <xref:System.Globalization.NumberFormatInfo.NaNSymbol%2A> property specified by the currently applicable <xref:System.Globalization.NumberFormatInfo> object.</span></span>

### <a name="control-panel-settings"></a><span data-ttu-id="9997a-317">控制台設定</span><span class="sxs-lookup"><span data-stu-id="9997a-317">Control Panel settings</span></span>

<span data-ttu-id="9997a-318">[控制台] 中 [ **地區及語言選項]** 項目的設定會影響格式化作業所產生的結果字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-318">The settings in the **Regional and Language Options** item in Control Panel influence the result string produced by a formatting operation.</span></span> <span data-ttu-id="9997a-319">這些設定是用來初始化與目前執行緒文化特性相關聯的 <xref:System.Globalization.NumberFormatInfo> 物件，而且目前的執行緒文化特性會提供用來管理格式的值。</span><span class="sxs-lookup"><span data-stu-id="9997a-319">Those settings are used to initialize the <xref:System.Globalization.NumberFormatInfo> object associated with the current thread culture, and the current thread culture provides values used to govern formatting.</span></span> <span data-ttu-id="9997a-320">使用不同設定的電腦會產生不同的結果字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-320">Computers that use different settings generate different result strings.</span></span>

<span data-ttu-id="9997a-321">此外，如果您使用 <xref:System.Globalization.CultureInfo.%23ctor%28System.String%29> 建構函式來將新的 <xref:System.Globalization.CultureInfo> 物件具現化，而此物件代表的文化特性與目前系統文化特性相同，則 [控制台] 中的 [地區及語言選項]\*\*\*\* 項目所建立的任何自訂都會套用至新的 <xref:System.Globalization.CultureInfo> 物件。</span><span class="sxs-lookup"><span data-stu-id="9997a-321">In addition, if you use the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%29> constructor to instantiate a new <xref:System.Globalization.CultureInfo> object that represents the same culture as the current system culture, any customizations established by the **Regional and Language Options** item in Control Panel will be applied to the new <xref:System.Globalization.CultureInfo> object.</span></span> <span data-ttu-id="9997a-322">您可以使用 <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29> 建構函式來建立不反映系統自訂的 <xref:System.Globalization.CultureInfo> 物件。</span><span class="sxs-lookup"><span data-stu-id="9997a-322">You can use the <xref:System.Globalization.CultureInfo.%23ctor%28System.String%2CSystem.Boolean%29> constructor to create a <xref:System.Globalization.CultureInfo> object that does not reflect a system's customizations.</span></span>

### <a name="rounding-and-fixed-point-format-strings"></a><span data-ttu-id="9997a-323">四捨五入和定點格式字串</span><span class="sxs-lookup"><span data-stu-id="9997a-323">Rounding and fixed-point format strings</span></span>

<span data-ttu-id="9997a-324">如果是定點格式字串 (即不含科學標記法格式字元的格式字串)，則數字會四捨五入成與小數點右邊之數字預留位置一樣多的小數位數。</span><span class="sxs-lookup"><span data-stu-id="9997a-324">For fixed-point format strings (that is, format strings that do not contain scientific notation format characters), numbers are rounded to as many decimal places as there are digit placeholders to the right of the decimal point.</span></span> <span data-ttu-id="9997a-325">如果格式字串不包含小數點，數值四捨五入至最接近的整數。</span><span class="sxs-lookup"><span data-stu-id="9997a-325">If the format string does not contain a decimal point, the number is rounded to the nearest integer.</span></span> <span data-ttu-id="9997a-326">如果數值有比小數點左邊的數字預留位置還要多的位數，額外位數會緊接第一個數字預留位置之前複製到輸出字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-326">If the number has more digits than there are digit placeholders to the left of the decimal point, the extra digits are copied to the result string immediately before the first digit placeholder.</span></span>

[<span data-ttu-id="9997a-327">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-327">Back to table</span></span>](#table)

<a name="example"></a>

## <a name="example"></a><span data-ttu-id="9997a-328">範例</span><span class="sxs-lookup"><span data-stu-id="9997a-328">Example</span></span>

<span data-ttu-id="9997a-329">下列範例示範兩個自訂數值格式字串。</span><span class="sxs-lookup"><span data-stu-id="9997a-329">The following example demonstrates two custom numeric format strings.</span></span> <span data-ttu-id="9997a-330">在這兩個範例中，數字預留位置 (`#`) 會顯示數值資料，而所有其他字元則會複製到結果字串中。</span><span class="sxs-lookup"><span data-stu-id="9997a-330">In both cases, the digit placeholder (`#`) displays the numeric data, and all other characters are copied to the result string.</span></span>

[!code-cpp[Formatting.Numeric.Custom#10](../../../samples/snippets/cpp/VS_Snippets_CLR/formatting.numeric.custom/cpp/example1.cpp#10)]
[!code-csharp-interactive[Formatting.Numeric.Custom#10](../../../samples/snippets/csharp/VS_Snippets_CLR/formatting.numeric.custom/cs/example1.cs#10)]
[!code-vb[Formatting.Numeric.Custom#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/formatting.numeric.custom/vb/example1.vb#10)]

[<span data-ttu-id="9997a-331">回到表格</span><span class="sxs-lookup"><span data-stu-id="9997a-331">Back to table</span></span>](#table)

## <a name="see-also"></a><span data-ttu-id="9997a-332">另請參閱</span><span class="sxs-lookup"><span data-stu-id="9997a-332">See also</span></span>

- <xref:System.Globalization.NumberFormatInfo?displayProperty=nameWithType>
- [<span data-ttu-id="9997a-333">格式化類型</span><span class="sxs-lookup"><span data-stu-id="9997a-333">Formatting Types</span></span>](formatting-types.md)
- [<span data-ttu-id="9997a-334">標準數值格式字串</span><span class="sxs-lookup"><span data-stu-id="9997a-334">Standard Numeric Format Strings</span></span>](standard-numeric-format-strings.md)
- [<span data-ttu-id="9997a-335">作法：以前置字元零來填補數字</span><span class="sxs-lookup"><span data-stu-id="9997a-335">How to: Pad a Number with Leading Zeros</span></span>](how-to-pad-a-number-with-leading-zeros.md)
- <span data-ttu-id="9997a-336">[Sample: .NET Core WinForms Formatting Utility (C#)](https://docs.microsoft.com/samples/dotnet/samples/windowsforms-formatting-utility-cs) (範例：.NET Core WinForms 格式化公用程式 (C#))</span><span class="sxs-lookup"><span data-stu-id="9997a-336">[Sample: .NET Core WinForms Formatting Utility (C#)](https://docs.microsoft.com/samples/dotnet/samples/windowsforms-formatting-utility-cs)</span></span>
- <span data-ttu-id="9997a-337">[Sample: .NET Core WinForms Formatting Utility (Visual Basic)](https://docs.microsoft.com/samples/dotnet/samples/windowsforms-formatting-utility-vb) (範例：.NET Core WinForms 格式化公用程式 (Visual Basic))</span><span class="sxs-lookup"><span data-stu-id="9997a-337">[Sample: .NET Core WinForms Formatting Utility (Visual Basic)](https://docs.microsoft.com/samples/dotnet/samples/windowsforms-formatting-utility-vb)</span></span>
