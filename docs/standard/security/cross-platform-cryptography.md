---
title: .NET Core 和 .NET 5 中的跨平臺密碼編譯
description: 瞭解 .NET 支援的平臺上的密碼編譯功能。
ms.date: 06/19/2020
ms.technology: dotnet-standard
helpviewer_keywords:
- cryptography, cross-platform
- encryption, cross-platform
ms.openlocfilehash: 61fd49e53761deac278b770003eb97241b6c2be9
ms.sourcegitcommit: b7a8b09828bab4e90f66af8d495ecd7024c45042
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/04/2020
ms.locfileid: "87557147"
---
# <a name="cross-platform-cryptography-in-net-core-and-net-5"></a><span data-ttu-id="7f521-103">.NET Core 和 .NET 5 中的跨平臺密碼編譯</span><span class="sxs-lookup"><span data-stu-id="7f521-103">Cross-Platform Cryptography in .NET Core and .NET 5</span></span>

<span data-ttu-id="7f521-104">.NET Core 和 .NET 5 中的密碼編譯作業是由作業系統 (作業系統) 程式庫來完成。</span><span class="sxs-lookup"><span data-stu-id="7f521-104">Cryptographic operations in .NET Core and .NET 5 are done by operating system (OS) libraries.</span></span> <span data-ttu-id="7f521-105">這項相依性有下列優點：</span><span class="sxs-lookup"><span data-stu-id="7f521-105">This dependency has advantages:</span></span>

* <span data-ttu-id="7f521-106">.NET 應用程式受益于作業系統可靠性。</span><span class="sxs-lookup"><span data-stu-id="7f521-106">.NET apps benefit from OS reliability.</span></span> <span data-ttu-id="7f521-107">將密碼編譯程式庫保持安全不受弱點影響，是作業系統廠商的高優先順序。</span><span class="sxs-lookup"><span data-stu-id="7f521-107">Keeping cryptography libraries safe from vulnerabilities is a high priority for OS vendors.</span></span> <span data-ttu-id="7f521-108">若要這麼做，他們會提供系統管理員應該套用的更新。</span><span class="sxs-lookup"><span data-stu-id="7f521-108">To do that, they provide updates that system administrators should be applying.</span></span>
* <span data-ttu-id="7f521-109">如果作業系統程式庫經過 FIPS 驗證，則 .NET 應用程式可以存取 FIPS 驗證演算法。</span><span class="sxs-lookup"><span data-stu-id="7f521-109">.NET apps have access to FIPS-validated algorithms if the OS libraries are FIPS-validated.</span></span>

<span data-ttu-id="7f521-110">作業系統程式庫的相依性也表示 .NET 應用程式只能使用作業系統所支援的密碼編譯功能。</span><span class="sxs-lookup"><span data-stu-id="7f521-110">The dependency on OS libraries also means that .NET apps can only use cryptographic features that the OS supports.</span></span> <span data-ttu-id="7f521-111">雖然所有平臺都支援特定的核心功能，但 .NET 所支援的某些功能無法在某些平臺上使用。</span><span class="sxs-lookup"><span data-stu-id="7f521-111">While all platforms support certain core features, some features that .NET supports can't be used on some platforms.</span></span> <span data-ttu-id="7f521-112">本文會識別每個平臺上支援的功能。</span><span class="sxs-lookup"><span data-stu-id="7f521-112">This article identifies the features that are supported on each platform.</span></span>

<span data-ttu-id="7f521-113">本文假設您已熟悉如何在 .NET 中使用密碼編譯。</span><span class="sxs-lookup"><span data-stu-id="7f521-113">This article assumes you have a working familiarity with cryptography in .NET.</span></span> <span data-ttu-id="7f521-114">如需詳細資訊，請參閱[.Net 密碼編譯模型](cryptography-model.md)和 .net 密碼編譯[服務](cryptographic-services.md)。</span><span class="sxs-lookup"><span data-stu-id="7f521-114">For more information, see [.NET Cryptography Model](cryptography-model.md) and [.NET Cryptographic Services](cryptographic-services.md).</span></span>

## <a name="hash-algorithms"></a><span data-ttu-id="7f521-115">雜湊演算法</span><span class="sxs-lookup"><span data-stu-id="7f521-115">Hash algorithms</span></span>

<span data-ttu-id="7f521-116">所有雜湊演算法和雜湊型訊息驗證 (HMAC) 類別，包括 `*Managed` 類別，會延後至 OS 程式庫。</span><span class="sxs-lookup"><span data-stu-id="7f521-116">All hash algorithm and hash-based message authentication (HMAC) classes, including the `*Managed` classes, defer to the OS libraries.</span></span> <span data-ttu-id="7f521-117">雖然各種作業系統程式庫的效能各有不同，但它們應該是相容的。</span><span class="sxs-lookup"><span data-stu-id="7f521-117">While the various OS libraries differ in performance, they should be compatible.</span></span>

## <a name="symmetric-encryption"></a><span data-ttu-id="7f521-118">對稱式加密</span><span class="sxs-lookup"><span data-stu-id="7f521-118">Symmetric encryption</span></span>

<span data-ttu-id="7f521-119">基礎的加密和連結是由系統程式庫所完成，所有平臺都支援所有這些作業。</span><span class="sxs-lookup"><span data-stu-id="7f521-119">The underlying ciphers and chaining are done by the system libraries, and all are supported by all platforms.</span></span>

| <span data-ttu-id="7f521-120">Cipher + 模式</span><span class="sxs-lookup"><span data-stu-id="7f521-120">Cipher + Mode</span></span> | <span data-ttu-id="7f521-121">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-121">Windows</span></span> | <span data-ttu-id="7f521-122">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-122">Linux</span></span> | <span data-ttu-id="7f521-123">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-123">macOS</span></span> |
|---------------|---------|-------|-------|
| <span data-ttu-id="7f521-124">AES-CBC</span><span class="sxs-lookup"><span data-stu-id="7f521-124">AES-CBC</span></span>       | <span data-ttu-id="7f521-125">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-125">✔️</span></span>     | <span data-ttu-id="7f521-126">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-126">✔️</span></span>    | <span data-ttu-id="7f521-127">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-127">✔️</span></span>   |
| <span data-ttu-id="7f521-128">AES-ECB</span><span class="sxs-lookup"><span data-stu-id="7f521-128">AES-ECB</span></span>       | <span data-ttu-id="7f521-129">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-129">✔️</span></span>     | <span data-ttu-id="7f521-130">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-130">✔️</span></span>    | <span data-ttu-id="7f521-131">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-131">✔️</span></span>   |
| <span data-ttu-id="7f521-132">3DES-CBC</span><span class="sxs-lookup"><span data-stu-id="7f521-132">3DES-CBC</span></span>      | <span data-ttu-id="7f521-133">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-133">✔️</span></span>     | <span data-ttu-id="7f521-134">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-134">✔️</span></span>    | <span data-ttu-id="7f521-135">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-135">✔️</span></span>   |
| <span data-ttu-id="7f521-136">3DES-ECB</span><span class="sxs-lookup"><span data-stu-id="7f521-136">3DES-ECB</span></span>      | <span data-ttu-id="7f521-137">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-137">✔️</span></span>     | <span data-ttu-id="7f521-138">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-138">✔️</span></span>    | <span data-ttu-id="7f521-139">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-139">✔️</span></span>   |
| <span data-ttu-id="7f521-140">DES-CBC</span><span class="sxs-lookup"><span data-stu-id="7f521-140">DES-CBC</span></span>       | <span data-ttu-id="7f521-141">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-141">✔️</span></span>     | <span data-ttu-id="7f521-142">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-142">✔️</span></span>    | <span data-ttu-id="7f521-143">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-143">✔️</span></span>   |
| <span data-ttu-id="7f521-144">DES-ECB</span><span class="sxs-lookup"><span data-stu-id="7f521-144">DES-ECB</span></span>       | <span data-ttu-id="7f521-145">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-145">✔️</span></span>     | <span data-ttu-id="7f521-146">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-146">✔️</span></span>    | <span data-ttu-id="7f521-147">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-147">✔️</span></span>   |

## <a name="authenticated-encryption"></a><span data-ttu-id="7f521-148">已驗證的加密</span><span class="sxs-lookup"><span data-stu-id="7f521-148">Authenticated encryption</span></span>

<span data-ttu-id="7f521-149">已驗證的加密 (AE) 支援透過和類別提供給 AES-CCM 和 AES <xref:System.Security.Cryptography.AesCcm?displayProperty=fullName> GCM <xref:System.Security.Cryptography.AesGcm?displayProperty=fullName> 。</span><span class="sxs-lookup"><span data-stu-id="7f521-149">Authenticated encryption (AE) support is provided for AES-CCM and AES-GCM via the <xref:System.Security.Cryptography.AesCcm?displayProperty=fullName> and <xref:System.Security.Cryptography.AesGcm?displayProperty=fullName> classes.</span></span>

<span data-ttu-id="7f521-150">在 Windows 和 Linux 上，AES-CCM 和 AES GCM 的執行是由作業系統程式庫所提供。</span><span class="sxs-lookup"><span data-stu-id="7f521-150">On Windows and Linux, the implementations of AES-CCM and AES-GCM are provided by the OS libraries.</span></span>

### <a name="aes-ccm-and-aes-gcm-on-macos"></a><span data-ttu-id="7f521-151">MacOS 上的 AES-CCM 和 AES GCM</span><span class="sxs-lookup"><span data-stu-id="7f521-151">AES-CCM and AES-GCM on macOS</span></span>

<span data-ttu-id="7f521-152">在 macOS 上，系統程式庫不支援以 AES-CCM 或 AES-GCM 進行協力廠商程式碼，因此 <xref:System.Security.Cryptography.AesCcm> 和 <xref:System.Security.Cryptography.AesGcm> 類別會使用 OpenSSL 來支援。</span><span class="sxs-lookup"><span data-stu-id="7f521-152">On macOS, the system libraries don't support AES-CCM or AES-GCM for third-party code, so the <xref:System.Security.Cryptography.AesCcm> and <xref:System.Security.Cryptography.AesGcm> classes use OpenSSL for support.</span></span> <span data-ttu-id="7f521-153">MacOS 上的使用者必須取得適當的 OpenSSL 複本， (libcrypto) ，才能讓這些類型運作，而且它必須位於系統預設載入程式庫的路徑中。</span><span class="sxs-lookup"><span data-stu-id="7f521-153">Users on macOS need to obtain an appropriate copy of OpenSSL (libcrypto) for these types to function, and it must be in a path that the system would load a library from by default.</span></span> <span data-ttu-id="7f521-154">我們建議您從套件管理員（例如 Homebrew）安裝 OpenSSL。</span><span class="sxs-lookup"><span data-stu-id="7f521-154">We recommend that you install OpenSSL from a package manager such as Homebrew.</span></span>

<span data-ttu-id="7f521-155">`libcrypto.0.9.7.dylib` `libcrypto.0.9.8.dylib` 包含在 macOS 中的和程式庫是來自舊版的 OpenSSL，且不會使用。</span><span class="sxs-lookup"><span data-stu-id="7f521-155">The `libcrypto.0.9.7.dylib` and `libcrypto.0.9.8.dylib` libraries included in macOS are from earlier versions of OpenSSL and will not be used.</span></span> <span data-ttu-id="7f521-156">`libcrypto.35.dylib`、 `libcrypto.41.dylib` 和連結 `libcrypto.42.dylib` 庫來自 LibreSSL，而且不會使用。</span><span class="sxs-lookup"><span data-stu-id="7f521-156">The `libcrypto.35.dylib`, `libcrypto.41.dylib`, and `libcrypto.42.dylib` libraries are from LibreSSL and will not be used.</span></span>

### <a name="aes-ccm-keys-nonces-and-tags"></a><span data-ttu-id="7f521-157">AES-CCM 金鑰、nonce 和標記</span><span class="sxs-lookup"><span data-stu-id="7f521-157">AES-CCM keys, nonces, and tags</span></span>

* <span data-ttu-id="7f521-158">金鑰大小</span><span class="sxs-lookup"><span data-stu-id="7f521-158">Key Sizes</span></span>

  <span data-ttu-id="7f521-159">AES-CCM 可與128、192和256位金鑰搭配運作。</span><span class="sxs-lookup"><span data-stu-id="7f521-159">AES-CCM works with 128, 192, and 256-bit keys.</span></span>

* <span data-ttu-id="7f521-160">Nonce 大小</span><span class="sxs-lookup"><span data-stu-id="7f521-160">Nonce Sizes</span></span>

  <span data-ttu-id="7f521-161"><xref:System.Security.Cryptography.AesCcm>類別支援56、64、72、80、88、96和 104-bit (7、8、9、10、11、12和13個位元組) nonce。</span><span class="sxs-lookup"><span data-stu-id="7f521-161">The <xref:System.Security.Cryptography.AesCcm> class supports 56, 64, 72, 80, 88, 96, and 104-bit (7, 8, 9, 10, 11, 12, and 13-byte) nonces.</span></span>

* <span data-ttu-id="7f521-162">標記大小</span><span class="sxs-lookup"><span data-stu-id="7f521-162">Tag Sizes</span></span>

  <span data-ttu-id="7f521-163"><xref:System.Security.Cryptography.AesCcm>類別支援建立或處理32、48、64、80、96、112和 128-bit (4、8、10、12、14和16位元組) 標記。</span><span class="sxs-lookup"><span data-stu-id="7f521-163">The <xref:System.Security.Cryptography.AesCcm> class supports creating or processing 32, 48, 64, 80, 96, 112, and 128-bit (4, 8, 10, 12, 14, and 16-byte) tags.</span></span>

### <a name="aes-gcm-keys-nonces-and-tags"></a><span data-ttu-id="7f521-164">AES-GCM 金鑰、nonce 和標記</span><span class="sxs-lookup"><span data-stu-id="7f521-164">AES-GCM keys, nonces, and tags</span></span>

* <span data-ttu-id="7f521-165">金鑰大小</span><span class="sxs-lookup"><span data-stu-id="7f521-165">Key Sizes</span></span>

  <span data-ttu-id="7f521-166">AES-GCM 可與128、192和256位金鑰搭配運作。</span><span class="sxs-lookup"><span data-stu-id="7f521-166">AES-GCM works with 128, 192, and 256-bit keys.</span></span>

* <span data-ttu-id="7f521-167">Nonce 大小</span><span class="sxs-lookup"><span data-stu-id="7f521-167">Nonce Sizes</span></span>

  <span data-ttu-id="7f521-168"><xref:System.Security.Cryptography.AesGcm>類別僅支援96位 (12 位元組) nonce。</span><span class="sxs-lookup"><span data-stu-id="7f521-168">The <xref:System.Security.Cryptography.AesGcm> class supports only 96-bit (12-byte) nonces.</span></span>

* <span data-ttu-id="7f521-169">標記大小</span><span class="sxs-lookup"><span data-stu-id="7f521-169">Tag Sizes</span></span>

  <span data-ttu-id="7f521-170"><xref:System.Security.Cryptography.AesGcm>類別支援建立或處理96、104、112、120和 128-bit (12、13、14、15和16個位元組的) 標記。</span><span class="sxs-lookup"><span data-stu-id="7f521-170">The <xref:System.Security.Cryptography.AesGcm> class supports creating or processing 96, 104, 112, 120, and 128-bit (12, 13, 14, 15, and 16-byte) tags.</span></span>

## <a name="asymmetric-cryptography"></a><span data-ttu-id="7f521-171">非對稱式密碼編譯</span><span class="sxs-lookup"><span data-stu-id="7f521-171">Asymmetric cryptography</span></span>

<span data-ttu-id="7f521-172">本節包含下列小節：</span><span class="sxs-lookup"><span data-stu-id="7f521-172">This section includes the following subsections:</span></span>

* [<span data-ttu-id="7f521-173">RSA</span><span class="sxs-lookup"><span data-stu-id="7f521-173">RSA</span></span>](#rsa)
* [<span data-ttu-id="7f521-174">ECDSA</span><span class="sxs-lookup"><span data-stu-id="7f521-174">ECDSA</span></span>](#ecdsa)
* [<span data-ttu-id="7f521-175">ECDH</span><span class="sxs-lookup"><span data-stu-id="7f521-175">ECDH</span></span>](#ecdh)
* [<span data-ttu-id="7f521-176">DSA</span><span class="sxs-lookup"><span data-stu-id="7f521-176">DSA</span></span>](#dsa)

### <a name="rsa"></a><span data-ttu-id="7f521-177">RSA</span><span class="sxs-lookup"><span data-stu-id="7f521-177">RSA</span></span>

<span data-ttu-id="7f521-178">RSA (Rivest – Shamir – Adleman) 金鑰產生是由作業系統程式庫所執行，並受限於其大小限制和效能特性。</span><span class="sxs-lookup"><span data-stu-id="7f521-178">RSA (Rivest–Shamir–Adleman) key generation is performed by the OS libraries and is subject to their size limitations and performance characteristics.</span></span>

<span data-ttu-id="7f521-179">RSA 金鑰作業是由 OS 程式庫執行，而且可以載入的金鑰類型受限於 OS 需求。</span><span class="sxs-lookup"><span data-stu-id="7f521-179">RSA key operations are performed by the OS libraries, and the types of key that can be loaded are subject to OS requirements.</span></span>

<span data-ttu-id="7f521-180">.NET 不會公開「原始」 (未填補之) RSA 作業。</span><span class="sxs-lookup"><span data-stu-id="7f521-180">.NET does not expose "raw" (unpadded) RSA operations.</span></span>

<span data-ttu-id="7f521-181">OS 程式庫會用於加密和解密填補。</span><span class="sxs-lookup"><span data-stu-id="7f521-181">The OS libraries are used for encryption and decryption padding.</span></span> <span data-ttu-id="7f521-182">並非所有平臺都支援相同的填補選項：</span><span class="sxs-lookup"><span data-stu-id="7f521-182">Not all platforms support the same padding options:</span></span>

| <span data-ttu-id="7f521-183">填補模式</span><span class="sxs-lookup"><span data-stu-id="7f521-183">Padding Mode</span></span>                          | <span data-ttu-id="7f521-184">Windows (CNG) </span><span class="sxs-lookup"><span data-stu-id="7f521-184">Windows (CNG)</span></span> | <span data-ttu-id="7f521-185">Linux (OpenSSL) </span><span class="sxs-lookup"><span data-stu-id="7f521-185">Linux (OpenSSL)</span></span> | <span data-ttu-id="7f521-186">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-186">macOS</span></span> | <span data-ttu-id="7f521-187">Windows (CAPI) </span><span class="sxs-lookup"><span data-stu-id="7f521-187">Windows (CAPI)</span></span> |
|---------------------------------------|---------------|-----------------|-------|----------------|
| <span data-ttu-id="7f521-188">PKCS1 加密</span><span class="sxs-lookup"><span data-stu-id="7f521-188">PKCS1 Encryption</span></span>                      | <span data-ttu-id="7f521-189">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-189">✔️</span></span>           | <span data-ttu-id="7f521-190">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-190">✔️</span></span>              | <span data-ttu-id="7f521-191">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-191">✔️</span></span>   | <span data-ttu-id="7f521-192">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-192">✔️</span></span>             |
| <span data-ttu-id="7f521-193">OAEP-SHA-1</span><span class="sxs-lookup"><span data-stu-id="7f521-193">OAEP - SHA-1</span></span>                          | <span data-ttu-id="7f521-194">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-194">✔️</span></span>           | <span data-ttu-id="7f521-195">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-195">✔️</span></span>              | <span data-ttu-id="7f521-196">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-196">✔️</span></span>   | <span data-ttu-id="7f521-197">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-197">✔️</span></span>             |
| <span data-ttu-id="7f521-198">OAEP-SHA-2 (SHA256、SHA384、SHA512) </span><span class="sxs-lookup"><span data-stu-id="7f521-198">OAEP - SHA-2 (SHA256, SHA384, SHA512)</span></span> | <span data-ttu-id="7f521-199">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-199">✔️</span></span>           | <span data-ttu-id="7f521-200">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-200">✔️</span></span>              | <span data-ttu-id="7f521-201">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-201">✔️</span></span>   | ❌             |
| <span data-ttu-id="7f521-202">PKCS1 Signature (MD5，SHA-1) </span><span class="sxs-lookup"><span data-stu-id="7f521-202">PKCS1 Signature (MD5, SHA-1)</span></span>          | <span data-ttu-id="7f521-203">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-203">✔️</span></span>           | <span data-ttu-id="7f521-204">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-204">✔️</span></span>              | <span data-ttu-id="7f521-205">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-205">✔️</span></span>   | <span data-ttu-id="7f521-206">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-206">✔️</span></span>             |
| <span data-ttu-id="7f521-207">PKCS1 Signature (SHA-1) </span><span class="sxs-lookup"><span data-stu-id="7f521-207">PKCS1 Signature (SHA-2)</span></span>               | <span data-ttu-id="7f521-208">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-208">✔️</span></span>           | <span data-ttu-id="7f521-209">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-209">✔️</span></span>              | <span data-ttu-id="7f521-210">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-210">✔️</span></span>   | ⚠️\*           |
| <span data-ttu-id="7f521-211">PSS</span><span class="sxs-lookup"><span data-stu-id="7f521-211">PSS</span></span>                                   | <span data-ttu-id="7f521-212">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-212">✔️</span></span>           | <span data-ttu-id="7f521-213">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-213">✔️</span></span>              | <span data-ttu-id="7f521-214">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-214">✔️</span></span>   | ❌             |

<span data-ttu-id="7f521-215">\*Windows CryptoAPI (CAPI) 能夠 PKCS1 具有 SHA-1 演算法的簽章。</span><span class="sxs-lookup"><span data-stu-id="7f521-215">\* Windows CryptoAPI (CAPI) is capable of PKCS1 signature with a SHA-2 algorithm.</span></span> <span data-ttu-id="7f521-216">但是，您可以將個別的 RSA 物件載入密碼編譯服務提供者中， (不支援的 CSP) 。</span><span class="sxs-lookup"><span data-stu-id="7f521-216">But the individual RSA object may be loaded in a cryptographic service provider (CSP) that doesn't support it.</span></span>

#### <a name="rsa-on-windows"></a><span data-ttu-id="7f521-217">Windows 上的 RSA</span><span class="sxs-lookup"><span data-stu-id="7f521-217">RSA on Windows</span></span>

* <span data-ttu-id="7f521-218">每次使用時，都會使用 Windows CryptoAPI (CAPI) [`new RSACryptoServiceProvider()`](xref:System.Security.Cryptography.RSACryptoServiceProvider) 。</span><span class="sxs-lookup"><span data-stu-id="7f521-218">Windows CryptoAPI (CAPI) is used whenever [`new RSACryptoServiceProvider()`](xref:System.Security.Cryptography.RSACryptoServiceProvider) is used.</span></span>
* <span data-ttu-id="7f521-219">Windows 密碼編譯 API 新一代 (CNG) 會在使用時使用 [`new RSACng()`](xref:System.Security.Cryptography.RSACng) 。</span><span class="sxs-lookup"><span data-stu-id="7f521-219">Windows Cryptography API Next Generation (CNG) is used whenever [`new RSACng()`](xref:System.Security.Cryptography.RSACng) is used.</span></span>
* <span data-ttu-id="7f521-220">傳回的物件 <xref:System.Security.Cryptography.RSA.Create%2A?displayProperty=nameWithType> 是由 WINDOWS CNG 內部提供技術支援。</span><span class="sxs-lookup"><span data-stu-id="7f521-220">The object returned by <xref:System.Security.Cryptography.RSA.Create%2A?displayProperty=nameWithType> is internally powered by Windows CNG.</span></span> <span data-ttu-id="7f521-221">這種 Windows CNG 的使用方式是一個執行詳細資料，而且可能隨時變更。</span><span class="sxs-lookup"><span data-stu-id="7f521-221">This use of Windows CNG is an implementation detail and is subject to change.</span></span>
* <span data-ttu-id="7f521-222">的 <xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPublicKey%2A> 擴充方法會傳回 <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> <xref:System.Security.Cryptography.RSACng> 實例。</span><span class="sxs-lookup"><span data-stu-id="7f521-222">The <xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPublicKey%2A> extension method for <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> returns an <xref:System.Security.Cryptography.RSACng> instance.</span></span> <span data-ttu-id="7f521-223">這項使用 <xref:System.Security.Cryptography.RSACng> 是一個執行詳細資料，而且可能隨時變更。</span><span class="sxs-lookup"><span data-stu-id="7f521-223">This use of <xref:System.Security.Cryptography.RSACng> is an implementation detail and is subject to change.</span></span>
* <span data-ttu-id="7f521-224"><xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPrivateKey%2A>目前偏好實例的擴充方法 <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> <xref:System.Security.Cryptography.RSACng> ，但如果 <xref:System.Security.Cryptography.RSACng> 無法開啟此索引鍵， <xref:System.Security.Cryptography.RSACryptoServiceProvider> 則會嘗試。</span><span class="sxs-lookup"><span data-stu-id="7f521-224">The <xref:System.Security.Cryptography.X509Certificates.RSACertificateExtensions.GetRSAPrivateKey%2A> extension method for <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> currently prefers an <xref:System.Security.Cryptography.RSACng> instance, but if <xref:System.Security.Cryptography.RSACng> can't open the key, <xref:System.Security.Cryptography.RSACryptoServiceProvider> will be attempted.</span></span> <span data-ttu-id="7f521-225">慣用的提供者是一個執行詳細資料，而且可能會變更。</span><span class="sxs-lookup"><span data-stu-id="7f521-225">The preferred provider is an implementation detail and is subject to change.</span></span>

#### <a name="rsa-native-interop"></a><span data-ttu-id="7f521-226">RSA 原生 interop</span><span class="sxs-lookup"><span data-stu-id="7f521-226">RSA native interop</span></span>

<span data-ttu-id="7f521-227">.NET 會公開類型，以允許程式與 .NET 密碼編譯器代碼所使用的 OS 程式庫交互操作。</span><span class="sxs-lookup"><span data-stu-id="7f521-227">.NET exposes types to allow programs to interoperate with the OS libraries that the .NET cryptography code uses.</span></span> <span data-ttu-id="7f521-228">所涉及的類型不會在平臺之間轉譯，而且應該只在必要時才直接使用。</span><span class="sxs-lookup"><span data-stu-id="7f521-228">The types involved do not translate between platforms, and should only be directly used when necessary.</span></span>

| <span data-ttu-id="7f521-229">類型</span><span class="sxs-lookup"><span data-stu-id="7f521-229">Type</span></span>                                                         | <span data-ttu-id="7f521-230">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-230">Windows</span></span> | <span data-ttu-id="7f521-231">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-231">Linux</span></span>         | <span data-ttu-id="7f521-232">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-232">macOS</span></span>         |
|--------------------------------------------------------------|---------|---------------|---------------|
| <xref:System.Security.Cryptography.RSACryptoServiceProvider> | <span data-ttu-id="7f521-233">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-233">✔️</span></span>     | <span data-ttu-id="7f521-234">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-234">⚠️<sup>1</sup></span></span>| <span data-ttu-id="7f521-235">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-235">⚠️<sup>1</sup></span></span> |
| <xref:System.Security.Cryptography.RSACng>                   | <span data-ttu-id="7f521-236">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-236">✔️</span></span>     | ❌            | ❌            |
| <xref:System.Security.Cryptography.RSAOpenSsl>               | ❌     | <span data-ttu-id="7f521-237">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-237">✔️</span></span>            | <span data-ttu-id="7f521-238">⚠️<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-238">⚠️<sup>2</sup></span></span> |

<span data-ttu-id="7f521-239"><sup>1</sup>在 MacOS 和 Linux 上， <xref:System.Security.Cryptography.RSACryptoServiceProvider> 可以用來與現有的程式相容。</span><span class="sxs-lookup"><span data-stu-id="7f521-239"><sup>1</sup> On macOS and Linux, <xref:System.Security.Cryptography.RSACryptoServiceProvider> can be used for compatibility with existing programs.</span></span> <span data-ttu-id="7f521-240">在此情況下，任何需要 OS interop 的方法（例如開啟已命名的金鑰）都會擲回 <xref:System.PlatformNotSupportedException> 。</span><span class="sxs-lookup"><span data-stu-id="7f521-240">In that case, any method that requires OS interop, such as opening a named key, throws a <xref:System.PlatformNotSupportedException>.</span></span>

<span data-ttu-id="7f521-241"><sup>2</sup> On macOS， <xref:System.Security.Cryptography.RSAOpenSsl> 適用于 OpenSSL 已安裝，且可透過動態連結程式庫載入找到適當的 libcrypto dylib。</span><span class="sxs-lookup"><span data-stu-id="7f521-241"><sup>2</sup> On macOS, <xref:System.Security.Cryptography.RSAOpenSsl> works if OpenSSL is installed and an appropriate libcrypto dylib can be found via dynamic library loading.</span></span> <span data-ttu-id="7f521-242">如果找不到適當的程式庫，則會擲回例外狀況。</span><span class="sxs-lookup"><span data-stu-id="7f521-242">If an appropriate library can't be found, exceptions will be thrown.</span></span>

### <a name="ecdsa"></a><span data-ttu-id="7f521-243">ECDSA</span><span class="sxs-lookup"><span data-stu-id="7f521-243">ECDSA</span></span>

<span data-ttu-id="7f521-244">ECDSA (橢圓曲線數位簽章演算法) 金鑰產生是由作業系統程式庫所完成，並受限於其大小限制和效能特性。</span><span class="sxs-lookup"><span data-stu-id="7f521-244">ECDSA (Elliptic Curve Digital Signature Algorithm) key generation is done by the OS libraries and is subject to their size limitations and performance characteristics.</span></span>

<span data-ttu-id="7f521-245">ECDSA 主要曲線是由作業系統程式庫所定義，並受限於其限制。</span><span class="sxs-lookup"><span data-stu-id="7f521-245">ECDSA key curves are defined by the OS libraries and are subject to their limitations.</span></span>

| <span data-ttu-id="7f521-246">橢圓曲線</span><span class="sxs-lookup"><span data-stu-id="7f521-246">Elliptic Curve</span></span>                     | <span data-ttu-id="7f521-247">Windows 10</span><span class="sxs-lookup"><span data-stu-id="7f521-247">Windows 10</span></span>    | <span data-ttu-id="7f521-248">Windows 7-8。1</span><span class="sxs-lookup"><span data-stu-id="7f521-248">Windows 7 - 8.1</span></span> | <span data-ttu-id="7f521-249">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-249">Linux</span></span>         | <span data-ttu-id="7f521-250">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-250">macOS</span></span>         |
|------------------------------------|---------------|-----------------|---------------|---------------|
| <span data-ttu-id="7f521-251">NIST P-256 (secp256r1) </span><span class="sxs-lookup"><span data-stu-id="7f521-251">NIST P-256 (secp256r1)</span></span>             | <span data-ttu-id="7f521-252">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-252">✔️</span></span>           | <span data-ttu-id="7f521-253">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-253">✔️</span></span>              | <span data-ttu-id="7f521-254">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-254">✔️</span></span>           | <span data-ttu-id="7f521-255">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-255">✔️</span></span>            |
| <span data-ttu-id="7f521-256">NIST P-384 (secp384r1) </span><span class="sxs-lookup"><span data-stu-id="7f521-256">NIST P-384 (secp384r1)</span></span>             | <span data-ttu-id="7f521-257">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-257">✔️</span></span>           | <span data-ttu-id="7f521-258">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-258">✔️</span></span>              | <span data-ttu-id="7f521-259">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-259">✔️</span></span>           | <span data-ttu-id="7f521-260">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-260">✔️</span></span>            |
| <span data-ttu-id="7f521-261">NIST P-521 (secp521r1) </span><span class="sxs-lookup"><span data-stu-id="7f521-261">NIST P-521 (secp521r1)</span></span>             | <span data-ttu-id="7f521-262">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-262">✔️</span></span>           | <span data-ttu-id="7f521-263">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-263">✔️</span></span>              | <span data-ttu-id="7f521-264">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-264">✔️</span></span>           | <span data-ttu-id="7f521-265">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-265">✔️</span></span>            |
| <span data-ttu-id="7f521-266">Brainpool 曲線 (為命名曲線) </span><span class="sxs-lookup"><span data-stu-id="7f521-266">Brainpool curves (as named curves)</span></span> | <span data-ttu-id="7f521-267">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-267">✔️</span></span>           | ❌              | <span data-ttu-id="7f521-268">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-268">⚠️<sup>1</sup></span></span>| ❌           |
| <span data-ttu-id="7f521-269">其他命名曲線</span><span class="sxs-lookup"><span data-stu-id="7f521-269">Other named curves</span></span>                 | <span data-ttu-id="7f521-270">⚠️<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-270">⚠️<sup>2</sup></span></span>| ❌             | <span data-ttu-id="7f521-271">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-271">⚠️<sup>1</sup></span></span>| ❌           |
| <span data-ttu-id="7f521-272">明確曲線</span><span class="sxs-lookup"><span data-stu-id="7f521-272">Explicit curves</span></span>                    | <span data-ttu-id="7f521-273">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-273">✔️</span></span>           | ❌              | <span data-ttu-id="7f521-274">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-274">✔️</span></span>           | ❌            |
| <span data-ttu-id="7f521-275">匯出或匯入為明確</span><span class="sxs-lookup"><span data-stu-id="7f521-275">Export or import as explicit</span></span>       | <span data-ttu-id="7f521-276">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-276">✔️</span></span>           | <span data-ttu-id="7f521-277">❌<sup>第</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-277">❌<sup>3</sup></span></span>  | <span data-ttu-id="7f521-278">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-278">✔️</span></span>           | <span data-ttu-id="7f521-279">❌<sup>第</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-279">❌<sup>3</sup></span></span>|

<span data-ttu-id="7f521-280"><sup>1</sup> Linux 散發套件不支援相同的命名曲線。</span><span class="sxs-lookup"><span data-stu-id="7f521-280"><sup>1</sup> Linux distributions don't all have support for the same named curves.</span></span>

<span data-ttu-id="7f521-281"><sup>2</sup>對命名曲線的支援已新增至 windows 10 中的 windows CNG。</span><span class="sxs-lookup"><span data-stu-id="7f521-281"><sup>2</sup> Support for named curves was added to Windows CNG in Windows 10.</span></span> <span data-ttu-id="7f521-282">如需詳細資訊，請參閱[名為橢圓曲線的 CNG](https://msdn.microsoft.com/library/windows/desktop/mt632245(v=vs.85).aspx)。</span><span class="sxs-lookup"><span data-stu-id="7f521-282">For more information, see [CNG Named Elliptic Curves](https://msdn.microsoft.com/library/windows/desktop/mt632245(v=vs.85).aspx).</span></span> <span data-ttu-id="7f521-283">在舊版 Windows 中無法使用命名曲線，但 Windows 7 中的三個曲線除外。</span><span class="sxs-lookup"><span data-stu-id="7f521-283">Named curves are not available in earlier versions of Windows, except for three curves in Windows 7.</span></span>

<span data-ttu-id="7f521-284"><sup>3</sup>使用明確的曲線參數匯出需要作業系統程式庫支援，這在 macOS 或舊版 Windows 中無法使用。</span><span class="sxs-lookup"><span data-stu-id="7f521-284"><sup>3</sup> Exporting with explicit curve parameters requires OS library support, which is not available on macOS or earlier versions of Windows.</span></span>

#### <a name="ecdsa-native-interop"></a><span data-ttu-id="7f521-285">ECDSA 原生 Interop</span><span class="sxs-lookup"><span data-stu-id="7f521-285">ECDSA Native Interop</span></span>

<span data-ttu-id="7f521-286">.NET 會公開類型，以允許程式與 .NET 密碼編譯器代碼所使用的 OS 程式庫交互操作。</span><span class="sxs-lookup"><span data-stu-id="7f521-286">.NET exposes types to allow programs to interoperate with the OS libraries that the .NET cryptography code uses.</span></span> <span data-ttu-id="7f521-287">涉及的類型不會在平臺之間轉譯，而且應該只在必要時才直接使用。</span><span class="sxs-lookup"><span data-stu-id="7f521-287">The types involved don't translate between platforms and should only be directly used when necessary.</span></span>

| <span data-ttu-id="7f521-288">類型</span><span class="sxs-lookup"><span data-stu-id="7f521-288">Type</span></span>                                             | <span data-ttu-id="7f521-289">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-289">Windows</span></span> | <span data-ttu-id="7f521-290">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-290">Linux</span></span> | <span data-ttu-id="7f521-291">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-291">macOS</span></span> |
|--------------------------------------------------|---------|-------|-------|
| <xref:System.Security.Cryptography.ECDsaCng>     | <span data-ttu-id="7f521-292">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-292">✔️</span></span>     | ❌    | ❌    |
| <xref:System.Security.Cryptography.ECDsaOpenSsl> | ❌     | <span data-ttu-id="7f521-293">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-293">✔️</span></span>    | ⚠️\*  |

<span data-ttu-id="7f521-294">\*在 macOS 上， <xref:System.Security.Cryptography.ECDsaOpenSsl> 適用于 OpenSSL 是否安裝在系統中，而且可以透過動態連結程式庫載入找到適當的 libcrypto dylib。</span><span class="sxs-lookup"><span data-stu-id="7f521-294">\* On macOS, <xref:System.Security.Cryptography.ECDsaOpenSsl> works if OpenSSL is installed in the system and an appropriate libcrypto dylib can be found via dynamic library loading.</span></span> <span data-ttu-id="7f521-295">如果找不到適當的程式庫，則會擲回例外狀況。</span><span class="sxs-lookup"><span data-stu-id="7f521-295">If an appropriate library can't be found, exceptions will be thrown.</span></span>

### <a name="ecdh"></a><span data-ttu-id="7f521-296">ECDH</span><span class="sxs-lookup"><span data-stu-id="7f521-296">ECDH</span></span>

<span data-ttu-id="7f521-297">ECDH (橢圓曲線 Diffie-hellman) 金鑰產生是由作業系統程式庫所完成，並且受限於其大小限制和效能特性。</span><span class="sxs-lookup"><span data-stu-id="7f521-297">ECDH (Elliptic Curve Diffie-Hellman) key generation is done by the OS libraries and is subject to their size limitations and performance characteristics.</span></span>

<span data-ttu-id="7f521-298"><xref:System.Security.Cryptography.ECDiffieHellman>類別不會傳回 ECDH 計算的「原始」值。</span><span class="sxs-lookup"><span data-stu-id="7f521-298">The <xref:System.Security.Cryptography.ECDiffieHellman> class doesn't return the "raw" value of the ECDH computation.</span></span> <span data-ttu-id="7f521-299">所有傳回的資料都是索引鍵衍生函式：</span><span class="sxs-lookup"><span data-stu-id="7f521-299">All returned data is in terms of key derivation functions:</span></span>

* <span data-ttu-id="7f521-300">雜湊 (Z) </span><span class="sxs-lookup"><span data-stu-id="7f521-300">HASH(Z)</span></span>
* <span data-ttu-id="7f521-301">雜湊 (前面加上 | |Z | |附加) </span><span class="sxs-lookup"><span data-stu-id="7f521-301">HASH(prepend || Z || append)</span></span>
* <span data-ttu-id="7f521-302">HMAC (鍵，Z) </span><span class="sxs-lookup"><span data-stu-id="7f521-302">HMAC(key, Z)</span></span>
* <span data-ttu-id="7f521-303">HMAC (金鑰，前面加上 | |Z | |附加) </span><span class="sxs-lookup"><span data-stu-id="7f521-303">HMAC(key, prepend || Z || append)</span></span>
* <span data-ttu-id="7f521-304">HMAC (Z，Z) </span><span class="sxs-lookup"><span data-stu-id="7f521-304">HMAC(Z, Z)</span></span>
* <span data-ttu-id="7f521-305">HMAC (Z，前面加上 | |Z | |附加) </span><span class="sxs-lookup"><span data-stu-id="7f521-305">HMAC(Z, prepend || Z || append)</span></span>
* <span data-ttu-id="7f521-306">Tls11Prf (標籤、種子) </span><span class="sxs-lookup"><span data-stu-id="7f521-306">Tls11Prf(label, seed)</span></span>

<span data-ttu-id="7f521-307">ECDH 主要曲線是由作業系統程式庫所定義，並受限於其限制。</span><span class="sxs-lookup"><span data-stu-id="7f521-307">ECDH key curves are defined by the OS libraries and are subject to their limitations.</span></span>

| <span data-ttu-id="7f521-308">橢圓曲線</span><span class="sxs-lookup"><span data-stu-id="7f521-308">Elliptic Curve</span></span>                     | <span data-ttu-id="7f521-309">Windows 10</span><span class="sxs-lookup"><span data-stu-id="7f521-309">Windows 10</span></span>    | <span data-ttu-id="7f521-310">Windows 7-8。1</span><span class="sxs-lookup"><span data-stu-id="7f521-310">Windows 7 - 8.1</span></span> | <span data-ttu-id="7f521-311">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-311">Linux</span></span>         | <span data-ttu-id="7f521-312">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-312">macOS</span></span>         |
|------------------------------------|---------------|-----------------|---------------|---------------|
| <span data-ttu-id="7f521-313">NIST P-256 (secp256r1) </span><span class="sxs-lookup"><span data-stu-id="7f521-313">NIST P-256 (secp256r1)</span></span>             | <span data-ttu-id="7f521-314">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-314">✔️</span></span>           | <span data-ttu-id="7f521-315">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-315">✔️</span></span>              | <span data-ttu-id="7f521-316">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-316">✔️</span></span>           | <span data-ttu-id="7f521-317">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-317">✔️</span></span>            |
| <span data-ttu-id="7f521-318">NIST P-384 (secp384r1) </span><span class="sxs-lookup"><span data-stu-id="7f521-318">NIST P-384 (secp384r1)</span></span>             | <span data-ttu-id="7f521-319">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-319">✔️</span></span>           | <span data-ttu-id="7f521-320">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-320">✔️</span></span>              | <span data-ttu-id="7f521-321">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-321">✔️</span></span>           | <span data-ttu-id="7f521-322">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-322">✔️</span></span>            |
| <span data-ttu-id="7f521-323">NIST P-521 (secp521r1) </span><span class="sxs-lookup"><span data-stu-id="7f521-323">NIST P-521 (secp521r1)</span></span>             | <span data-ttu-id="7f521-324">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-324">✔️</span></span>           | <span data-ttu-id="7f521-325">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-325">✔️</span></span>              | <span data-ttu-id="7f521-326">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-326">✔️</span></span>           | <span data-ttu-id="7f521-327">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-327">✔️</span></span>            |
| <span data-ttu-id="7f521-328">brainpool 曲線 (為命名曲線) </span><span class="sxs-lookup"><span data-stu-id="7f521-328">brainpool curves (as named curves)</span></span> | <span data-ttu-id="7f521-329">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-329">✔️</span></span>           | ❌              | <span data-ttu-id="7f521-330">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-330">⚠️<sup>1</sup></span></span>| ❌           |
| <span data-ttu-id="7f521-331">其他命名曲線</span><span class="sxs-lookup"><span data-stu-id="7f521-331">other named curves</span></span>                 | <span data-ttu-id="7f521-332">⚠️<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-332">⚠️<sup>2</sup></span></span>| ❌             | <span data-ttu-id="7f521-333">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-333">⚠️<sup>1</sup></span></span>| ❌           |
| <span data-ttu-id="7f521-334">明確曲線</span><span class="sxs-lookup"><span data-stu-id="7f521-334">explicit curves</span></span>                    | <span data-ttu-id="7f521-335">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-335">✔️</span></span>           | ❌              | <span data-ttu-id="7f521-336">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-336">✔️</span></span>           | ❌            |
| <span data-ttu-id="7f521-337">匯出或匯入為明確</span><span class="sxs-lookup"><span data-stu-id="7f521-337">Export or import as explicit</span></span>       | <span data-ttu-id="7f521-338">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-338">✔️</span></span>           | <span data-ttu-id="7f521-339">❌<sup>第</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-339">❌<sup>3</sup></span></span>  | <span data-ttu-id="7f521-340">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-340">✔️</span></span>           | <span data-ttu-id="7f521-341">❌<sup>第</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-341">❌<sup>3</sup></span></span>|

<span data-ttu-id="7f521-342"><sup>1</sup> Linux 散發套件不支援相同的命名曲線。</span><span class="sxs-lookup"><span data-stu-id="7f521-342"><sup>1</sup> Linux distributions don't all have support for the same named curves.</span></span>

<span data-ttu-id="7f521-343"><sup>2</sup>對命名曲線的支援已新增至 windows 10 中的 windows CNG。</span><span class="sxs-lookup"><span data-stu-id="7f521-343"><sup>2</sup> Support for named curves was added to Windows CNG in Windows 10.</span></span> <span data-ttu-id="7f521-344">如需詳細資訊，請參閱[名為橢圓曲線的 CNG](https://msdn.microsoft.com/library/windows/desktop/mt632245(v=vs.85).aspx)。</span><span class="sxs-lookup"><span data-stu-id="7f521-344">For more information, see [CNG Named Elliptic Curves](https://msdn.microsoft.com/library/windows/desktop/mt632245(v=vs.85).aspx).</span></span> <span data-ttu-id="7f521-345">在舊版 Windows 中無法使用命名曲線，但 Windows 7 中的三個曲線除外。</span><span class="sxs-lookup"><span data-stu-id="7f521-345">Named curves are not available in earlier versions of Windows, except for three curves in Windows 7.</span></span>

<span data-ttu-id="7f521-346"><sup>3</sup>使用明確的曲線參數匯出需要作業系統程式庫支援，這在 macOS 或舊版 Windows 中無法使用。</span><span class="sxs-lookup"><span data-stu-id="7f521-346"><sup>3</sup> Exporting with explicit curve parameters requires OS library support, which is not available on macOS or earlier versions of Windows.</span></span>

#### <a name="ecdh-native-interop"></a><span data-ttu-id="7f521-347">ECDH 原生 interop</span><span class="sxs-lookup"><span data-stu-id="7f521-347">ECDH native interop</span></span>

<span data-ttu-id="7f521-348">.NET 會公開類型，讓程式能夠與 .NET 所使用的 OS 程式庫相交互操作。</span><span class="sxs-lookup"><span data-stu-id="7f521-348">.NET exposes types to allow programs to interoperate with the OS libraries that .NET uses.</span></span> <span data-ttu-id="7f521-349">涉及的類型不會在平臺之間轉譯，而且應該只在必要時才直接使用。</span><span class="sxs-lookup"><span data-stu-id="7f521-349">The types involved don't translate between platforms and should only be directly used when necessary.</span></span>

| <span data-ttu-id="7f521-350">類型</span><span class="sxs-lookup"><span data-stu-id="7f521-350">Type</span></span>                                                       | <span data-ttu-id="7f521-351">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-351">Windows</span></span> | <span data-ttu-id="7f521-352">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-352">Linux</span></span> | <span data-ttu-id="7f521-353">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-353">macOS</span></span> |
|------------------------------------------------------------|---------|-------|-------|
| <xref:System.Security.Cryptography.ECDiffieHellmanCng>     | <span data-ttu-id="7f521-354">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-354">✔️</span></span>     | ❌    | ❌   |
| <xref:System.Security.Cryptography.ECDiffieHellmanOpenSsl> | ❌     | <span data-ttu-id="7f521-355">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-355">✔️</span></span>    | ⚠️\* |

<span data-ttu-id="7f521-356">\*在 macOS 上， <xref:System.Security.Cryptography.ECDiffieHellmanOpenSsl> 如果已安裝 OpenSSL，且可透過動態連結程式庫載入找到適當的 libcrypto dylib，則適用。</span><span class="sxs-lookup"><span data-stu-id="7f521-356">\* On macOS, <xref:System.Security.Cryptography.ECDiffieHellmanOpenSsl> works if OpenSSL is installed and an appropriate libcrypto dylib can be found via dynamic library loading.</span></span> <span data-ttu-id="7f521-357">如果找不到適當的程式庫，則會擲回例外狀況。</span><span class="sxs-lookup"><span data-stu-id="7f521-357">If an appropriate library can't be found, exceptions will be thrown.</span></span>

### <a name="dsa"></a><span data-ttu-id="7f521-358">DSA</span><span class="sxs-lookup"><span data-stu-id="7f521-358">DSA</span></span>

<span data-ttu-id="7f521-359">DSA (數位簽章演算法) 金鑰產生是由系統程式庫所執行，並受限於其大小限制和效能特性。</span><span class="sxs-lookup"><span data-stu-id="7f521-359">DSA (Digital Signature Algorithm) key generation is performed by the system libraries and is subject to their size limitations and performance characteristics.</span></span>

| <span data-ttu-id="7f521-360">函式</span><span class="sxs-lookup"><span data-stu-id="7f521-360">Function</span></span>                      | <span data-ttu-id="7f521-361">Windows CNG</span><span class="sxs-lookup"><span data-stu-id="7f521-361">Windows CNG</span></span> | <span data-ttu-id="7f521-362">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-362">Linux</span></span> | <span data-ttu-id="7f521-363">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-363">macOS</span></span>         | <span data-ttu-id="7f521-364">Windows CAPI</span><span class="sxs-lookup"><span data-stu-id="7f521-364">Windows CAPI</span></span> |
|-------------------------------|-------------|-------|---------------|--------------|
| <span data-ttu-id="7f521-365">金鑰建立 ( # B0 = 1024 bits) </span><span class="sxs-lookup"><span data-stu-id="7f521-365">Key creation (<= 1024 bits)</span></span>   | <span data-ttu-id="7f521-366">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-366">✔️</span></span>         | <span data-ttu-id="7f521-367">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-367">✔️</span></span>    | ❌            | <span data-ttu-id="7f521-368">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-368">✔️</span></span>           |
| <span data-ttu-id="7f521-369">金鑰建立 ( # A0 1024 bits) </span><span class="sxs-lookup"><span data-stu-id="7f521-369">Key creation (> 1024 bits)</span></span>    | <span data-ttu-id="7f521-370">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-370">✔️</span></span>         | <span data-ttu-id="7f521-371">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-371">✔️</span></span>    | ❌            | ❌            |
| <span data-ttu-id="7f521-372">載入金鑰 ( # B0 = 1024 bits) </span><span class="sxs-lookup"><span data-stu-id="7f521-372">Loading keys (<= 1024 bits)</span></span>   | <span data-ttu-id="7f521-373">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-373">✔️</span></span>         | <span data-ttu-id="7f521-374">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-374">✔️</span></span>    | <span data-ttu-id="7f521-375">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-375">✔️</span></span>            | <span data-ttu-id="7f521-376">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-376">✔️</span></span>           |
| <span data-ttu-id="7f521-377">載入金鑰 ( # A0 1024 bits) </span><span class="sxs-lookup"><span data-stu-id="7f521-377">Loading keys (> 1024 bits)</span></span>    | <span data-ttu-id="7f521-378">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-378">✔️</span></span>         | <span data-ttu-id="7f521-379">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-379">✔️</span></span>    | ⚠️\*          | ❌            |
| <span data-ttu-id="7f521-380">FIPS 186-2</span><span class="sxs-lookup"><span data-stu-id="7f521-380">FIPS 186-2</span></span>                    | <span data-ttu-id="7f521-381">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-381">✔️</span></span>         | <span data-ttu-id="7f521-382">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-382">✔️</span></span>    | <span data-ttu-id="7f521-383">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-383">✔️</span></span>            | <span data-ttu-id="7f521-384">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-384">✔️</span></span>           |
| <span data-ttu-id="7f521-385">FIPS 186-3 (SHA-1 簽名) </span><span class="sxs-lookup"><span data-stu-id="7f521-385">FIPS 186-3 (SHA-2 signatures)</span></span> | <span data-ttu-id="7f521-386">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-386">✔️</span></span>         | <span data-ttu-id="7f521-387">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-387">✔️</span></span>    | ❌            | ❌            |

<span data-ttu-id="7f521-388">\*macOS 會載入大於1024位的 DSA 金鑰，但不會定義這些金鑰的行為。</span><span class="sxs-lookup"><span data-stu-id="7f521-388">\* macOS loads DSA keys bigger than 1024 bits, but the behavior of those keys is undefined.</span></span> <span data-ttu-id="7f521-389">它們不會根據 FIPS 186-3 的行為。</span><span class="sxs-lookup"><span data-stu-id="7f521-389">They don't behave according to FIPS 186-3.</span></span>

#### <a name="dsa-on-windows"></a><span data-ttu-id="7f521-390">Windows 上的 DSA</span><span class="sxs-lookup"><span data-stu-id="7f521-390">DSA on Windows</span></span>

* <span data-ttu-id="7f521-391">每次使用時，都會使用 Windows CryptoAPI (CAPI) [`new DSACryptoServiceProvider()`](xref:System.Security.Cryptography.DSACryptoServiceProvider) 。</span><span class="sxs-lookup"><span data-stu-id="7f521-391">Windows CryptoAPI (CAPI) is used whenever [`new DSACryptoServiceProvider()`](xref:System.Security.Cryptography.DSACryptoServiceProvider) is used.</span></span>
* <span data-ttu-id="7f521-392">Windows 密碼編譯 API 新一代 (CNG) 會在使用時使用 [`new DSACng()`](xref:System.Security.Cryptography.DSACng) 。</span><span class="sxs-lookup"><span data-stu-id="7f521-392">Windows Cryptography API Next Generation (CNG) is used whenever [`new DSACng()`](xref:System.Security.Cryptography.DSACng) is used.</span></span>
* <span data-ttu-id="7f521-393">傳回的物件 <xref:System.Security.Cryptography.DSA.Create%2A?displayProperty=nameWithType> 是由 WINDOWS CNG 內部提供技術支援。</span><span class="sxs-lookup"><span data-stu-id="7f521-393">The object returned by <xref:System.Security.Cryptography.DSA.Create%2A?displayProperty=nameWithType> is internally powered by Windows CNG.</span></span> <span data-ttu-id="7f521-394">這種 Windows CNG 的使用方式是一個執行詳細資料，而且可能隨時變更。</span><span class="sxs-lookup"><span data-stu-id="7f521-394">This use of Windows CNG is an implementation detail and is subject to change.</span></span>
* <span data-ttu-id="7f521-395">的 <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPublicKey%2A> 擴充方法會傳回 <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> <xref:System.Security.Cryptography.DSACng> 實例。</span><span class="sxs-lookup"><span data-stu-id="7f521-395">The <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPublicKey%2A> extension method for <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> returns a <xref:System.Security.Cryptography.DSACng> instance.</span></span> <span data-ttu-id="7f521-396">這項使用 <xref:System.Security.Cryptography.DSACng> 是一個執行詳細資料，而且可能隨時變更。</span><span class="sxs-lookup"><span data-stu-id="7f521-396">This use of <xref:System.Security.Cryptography.DSACng> is an implementation detail and is subject to change.</span></span>
* <span data-ttu-id="7f521-397">偏好 <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPrivateKey%2A> 實例的擴充方法 <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> <xref:System.Security.Cryptography.DSACng> ，但如果 <xref:System.Security.Cryptography.DSACng> 無法開啟索引鍵， <xref:System.Security.Cryptography.DSACryptoServiceProvider> 則會嘗試。</span><span class="sxs-lookup"><span data-stu-id="7f521-397">The <xref:System.Security.Cryptography.X509Certificates.DSACertificateExtensions.GetDSAPrivateKey%2A> extension method for <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> prefers an <xref:System.Security.Cryptography.DSACng> instance, but if <xref:System.Security.Cryptography.DSACng> can't open the key, <xref:System.Security.Cryptography.DSACryptoServiceProvider> will be attempted.</span></span>  <span data-ttu-id="7f521-398">慣用的提供者是一個執行詳細資料，而且可能會變更。</span><span class="sxs-lookup"><span data-stu-id="7f521-398">The preferred provider is an implementation detail and is subject to change.</span></span>

#### <a name="dsa-native-interop"></a><span data-ttu-id="7f521-399">DSA 原生 interop</span><span class="sxs-lookup"><span data-stu-id="7f521-399">DSA native interop</span></span>

<span data-ttu-id="7f521-400">.NET 會公開類型，以允許程式與 .NET 密碼編譯器代碼所使用的 OS 程式庫交互操作。</span><span class="sxs-lookup"><span data-stu-id="7f521-400">.NET exposes types to allow programs to interoperate with the OS libraries that the .NET cryptography code uses.</span></span> <span data-ttu-id="7f521-401">涉及的類型不會在平臺之間轉譯，而且應該只在必要時才直接使用。</span><span class="sxs-lookup"><span data-stu-id="7f521-401">The types involved don't translate between platforms and should only be directly used when necessary.</span></span>

| <span data-ttu-id="7f521-402">類型</span><span class="sxs-lookup"><span data-stu-id="7f521-402">Type</span></span>                                                         | <span data-ttu-id="7f521-403">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-403">Windows</span></span> | <span data-ttu-id="7f521-404">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-404">Linux</span></span>         | <span data-ttu-id="7f521-405">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-405">macOS</span></span>         |
|--------------------------------------------------------------|---------|---------------|---------------|
| <xref:System.Security.Cryptography.DSACryptoServiceProvider> | <span data-ttu-id="7f521-406">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-406">✔️</span></span>     | <span data-ttu-id="7f521-407">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-407">⚠️<sup>1</sup></span></span> | <span data-ttu-id="7f521-408">⚠️<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-408">⚠️<sup>1</sup></span></span> |
| <xref:System.Security.Cryptography.DSACng>                   | <span data-ttu-id="7f521-409">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-409">✔️</span></span>     | ❌             | ❌            |
| <xref:System.Security.Cryptography.DSAOpenSsl>               | ❌      | <span data-ttu-id="7f521-410">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-410">✔️</span></span>            | <span data-ttu-id="7f521-411">⚠️<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="7f521-411">⚠️<sup>2</sup></span></span> |

<span data-ttu-id="7f521-412"><sup>1</sup>在 MacOS 和 Linux 上， <xref:System.Security.Cryptography.DSACryptoServiceProvider> 可以用來與現有的程式相容。</span><span class="sxs-lookup"><span data-stu-id="7f521-412"><sup>1</sup> On macOS and Linux, <xref:System.Security.Cryptography.DSACryptoServiceProvider> can be used for compatibility with existing programs.</span></span> <span data-ttu-id="7f521-413">在此情況下，任何需要系統 interop 的方法（例如開啟已命名的索引鍵）都會擲回 <xref:System.PlatformNotSupportedException> 。</span><span class="sxs-lookup"><span data-stu-id="7f521-413">In that case, any method that requires system interop, such as opening a named key, throws a <xref:System.PlatformNotSupportedException>.</span></span>

<span data-ttu-id="7f521-414"><sup>2</sup> On macOS， <xref:System.Security.Cryptography.DSAOpenSsl> 適用于 OpenSSL 已安裝，且可透過動態連結程式庫載入找到適當的 libcrypto dylib。</span><span class="sxs-lookup"><span data-stu-id="7f521-414"><sup>2</sup> On macOS, <xref:System.Security.Cryptography.DSAOpenSsl> works if OpenSSL is installed and an appropriate libcrypto dylib can be found via dynamic library loading.</span></span> <span data-ttu-id="7f521-415">如果找不到適當的程式庫，則會擲回例外狀況。</span><span class="sxs-lookup"><span data-stu-id="7f521-415">If an appropriate library can't be found, exceptions will be thrown.</span></span>

## <a name="x509-certificates"></a><span data-ttu-id="7f521-416">X.509 憑證</span><span class="sxs-lookup"><span data-stu-id="7f521-416">X.509 Certificates</span></span>

<span data-ttu-id="7f521-417">.NET 中 x.509 憑證的大部分支援都來自作業系統程式庫。</span><span class="sxs-lookup"><span data-stu-id="7f521-417">The majority of support for X.509 certificates in .NET comes from OS libraries.</span></span> <span data-ttu-id="7f521-418">若要將憑證載入至 <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> <xref:System.Security.Cryptography.X509Certificates.X509Certificate> .net 中的或實例，憑證必須由基礎 OS 程式庫載入。</span><span class="sxs-lookup"><span data-stu-id="7f521-418">To load a certificate into an <xref:System.Security.Cryptography.X509Certificates.X509Certificate2> or <xref:System.Security.Cryptography.X509Certificates.X509Certificate> instance in .NET, the certificate must be loaded by the underlying OS library.</span></span>

### <a name="read-a-pkcs12pfx"></a><span data-ttu-id="7f521-419">讀取 PKCS12/PFX</span><span class="sxs-lookup"><span data-stu-id="7f521-419">Read a PKCS12/PFX</span></span>

| <span data-ttu-id="7f521-420">狀況</span><span class="sxs-lookup"><span data-stu-id="7f521-420">Scenario</span></span>                                     | <span data-ttu-id="7f521-421">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-421">Windows</span></span> | <span data-ttu-id="7f521-422">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-422">Linux</span></span> | <span data-ttu-id="7f521-423">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-423">macOS</span></span> |
|----------------------------------------------|---------|-------|-------|
| <span data-ttu-id="7f521-424">空白</span><span class="sxs-lookup"><span data-stu-id="7f521-424">Empty</span></span>                                        | <span data-ttu-id="7f521-425">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-425">✔️</span></span>     | <span data-ttu-id="7f521-426">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-426">✔️</span></span>    | <span data-ttu-id="7f521-427">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-427">✔️</span></span>   |
| <span data-ttu-id="7f521-428">一個憑證，沒有私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-428">One certificate, no private key</span></span>              | <span data-ttu-id="7f521-429">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-429">✔️</span></span>     | <span data-ttu-id="7f521-430">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-430">✔️</span></span>    | <span data-ttu-id="7f521-431">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-431">✔️</span></span>   |
| <span data-ttu-id="7f521-432">一個憑證，具有私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-432">One certificate, with private key</span></span>            | <span data-ttu-id="7f521-433">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-433">✔️</span></span>     | <span data-ttu-id="7f521-434">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-434">✔️</span></span>    | <span data-ttu-id="7f521-435">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-435">✔️</span></span>   |
| <span data-ttu-id="7f521-436">多個憑證，沒有私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-436">Multiple certificates, no private keys</span></span>       | <span data-ttu-id="7f521-437">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-437">✔️</span></span>     | <span data-ttu-id="7f521-438">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-438">✔️</span></span>    | <span data-ttu-id="7f521-439">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-439">✔️</span></span>   |
| <span data-ttu-id="7f521-440">多個憑證，一個私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-440">Multiple certificates, one private key</span></span>       | <span data-ttu-id="7f521-441">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-441">✔️</span></span>     | <span data-ttu-id="7f521-442">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-442">✔️</span></span>    | <span data-ttu-id="7f521-443">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-443">✔️</span></span>   |
| <span data-ttu-id="7f521-444">多個憑證，多個私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-444">Multiple certificates, multiple private keys</span></span> | <span data-ttu-id="7f521-445">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-445">✔️</span></span>     | ⚠️\*  | <span data-ttu-id="7f521-446">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-446">✔️</span></span>   |

<span data-ttu-id="7f521-447">\*適用于 .NET 5 preview 版本。</span><span class="sxs-lookup"><span data-stu-id="7f521-447">\* Available in .NET 5 preview releases.</span></span>

### <a name="write-a-pkcs12pfx"></a><span data-ttu-id="7f521-448">撰寫 PKCS12/PFX</span><span class="sxs-lookup"><span data-stu-id="7f521-448">Write a PKCS12/PFX</span></span>

| <span data-ttu-id="7f521-449">狀況</span><span class="sxs-lookup"><span data-stu-id="7f521-449">Scenario</span></span>                                     | <span data-ttu-id="7f521-450">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-450">Windows</span></span> | <span data-ttu-id="7f521-451">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-451">Linux</span></span> | <span data-ttu-id="7f521-452">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-452">macOS</span></span> |
|----------------------------------------------|---------|-------|-------|
| <span data-ttu-id="7f521-453">空白</span><span class="sxs-lookup"><span data-stu-id="7f521-453">Empty</span></span>                                        | <span data-ttu-id="7f521-454">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-454">✔️</span></span>     | <span data-ttu-id="7f521-455">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-455">✔️</span></span>    | ⚠️\* |
| <span data-ttu-id="7f521-456">一個憑證，沒有私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-456">One certificate, no private key</span></span>              | <span data-ttu-id="7f521-457">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-457">✔️</span></span>     | <span data-ttu-id="7f521-458">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-458">✔️</span></span>    | ⚠️\* |
| <span data-ttu-id="7f521-459">一個憑證，具有私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-459">One certificate, with private key</span></span>            | <span data-ttu-id="7f521-460">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-460">✔️</span></span>     | <span data-ttu-id="7f521-461">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-461">✔️</span></span>    | <span data-ttu-id="7f521-462">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-462">✔️</span></span>   |
| <span data-ttu-id="7f521-463">多個憑證，沒有私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-463">Multiple certificates, no private keys</span></span>       | <span data-ttu-id="7f521-464">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-464">✔️</span></span>     | <span data-ttu-id="7f521-465">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-465">✔️</span></span>    | ⚠️\* |
| <span data-ttu-id="7f521-466">多個憑證，一個私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-466">Multiple certificates, one private key</span></span>       | <span data-ttu-id="7f521-467">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-467">✔️</span></span>     | <span data-ttu-id="7f521-468">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-468">✔️</span></span>    | <span data-ttu-id="7f521-469">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-469">✔️</span></span>   |
| <span data-ttu-id="7f521-470">多個憑證，多個私密金鑰</span><span class="sxs-lookup"><span data-stu-id="7f521-470">Multiple certificates, multiple private keys</span></span> | <span data-ttu-id="7f521-471">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-471">✔️</span></span>     | ⚠️\*  | <span data-ttu-id="7f521-472">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-472">✔️</span></span>   |
| <span data-ttu-id="7f521-473">暫時載入</span><span class="sxs-lookup"><span data-stu-id="7f521-473">Ephemeral loading</span></span>                            | <span data-ttu-id="7f521-474">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-474">✔️</span></span>     | <span data-ttu-id="7f521-475">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-475">✔️</span></span>    | ⚠️\* |

<span data-ttu-id="7f521-476">\*適用于 .NET 5 preview 版本。</span><span class="sxs-lookup"><span data-stu-id="7f521-476">\* Available in .NET 5 preview releases.</span></span>

<span data-ttu-id="7f521-477">macOS 無法在沒有 keychain 物件的情況下載入憑證私密金鑰，這需要寫入磁片。</span><span class="sxs-lookup"><span data-stu-id="7f521-477">macOS can't load certificate private keys without a keychain object, which requires writing to disk.</span></span> <span data-ttu-id="7f521-478">系統會針對 PFX 載入自動建立金鑰鏈]，並在不再使用時將其刪除。</span><span class="sxs-lookup"><span data-stu-id="7f521-478">Keychains are created automatically for PFX loading, and are deleted when no longer in use.</span></span> <span data-ttu-id="7f521-479">因為 <xref:System.Security.Cryptography.X509Certificates.X509KeyStorageFlags.EphemeralKeySet?displayProperty=nameWithType> 選項表示不應將私密金鑰寫入磁片，所以在 macOS 上判斷提示時，會產生中的旗標 <xref:System.PlatformNotSupportedException> 。</span><span class="sxs-lookup"><span data-stu-id="7f521-479">Since the <xref:System.Security.Cryptography.X509Certificates.X509KeyStorageFlags.EphemeralKeySet?displayProperty=nameWithType> option means that the private key should not be written to disk, asserting that flag on macOS results in a <xref:System.PlatformNotSupportedException>.</span></span>

### <a name="write-a-pkcs7-certificate-collection"></a><span data-ttu-id="7f521-480">寫入 PKCS7 憑證集合</span><span class="sxs-lookup"><span data-stu-id="7f521-480">Write a PKCS7 certificate collection</span></span>

<span data-ttu-id="7f521-481">Windows 和 Linux 都會發出 DER 編碼的 PKCS7 blob。</span><span class="sxs-lookup"><span data-stu-id="7f521-481">Windows and Linux both emit DER-encoded PKCS7 blobs.</span></span> <span data-ttu-id="7f521-482">macOS 會發出不限長度的 CER 編碼 PKCS7 blob。</span><span class="sxs-lookup"><span data-stu-id="7f521-482">macOS emits indefinite-length-CER-encoded PKCS7 blobs.</span></span>

### <a name="x509store"></a><span data-ttu-id="7f521-483">System.security.cryptography.x509certificates.x509store</span><span class="sxs-lookup"><span data-stu-id="7f521-483">X509Store</span></span>

<span data-ttu-id="7f521-484">在 Windows 上， <xref:System.Security.Cryptography.X509Certificates.X509Store> 類別是 Windows 憑證存放區 api 的標記法。</span><span class="sxs-lookup"><span data-stu-id="7f521-484">On Windows, the <xref:System.Security.Cryptography.X509Certificates.X509Store> class is a representation of the Windows Certificate Store APIs.</span></span> <span data-ttu-id="7f521-485">這些 Api 在 .NET Core 和 .NET 5 中的作用都相同，如同在 .NET Framework 中所做的一樣。</span><span class="sxs-lookup"><span data-stu-id="7f521-485">Those APIs work the same in .NET Core and .NET 5 as they do in .NET Framework.</span></span>

<span data-ttu-id="7f521-486">在 Linux 上， <xref:System.Security.Cryptography.X509Certificates.X509Store> 類別是系統信任決策 (唯讀) 、使用者信任決策 (讀寫) 和使用者金鑰儲存 (讀寫) 的預測。</span><span class="sxs-lookup"><span data-stu-id="7f521-486">On Linux, the <xref:System.Security.Cryptography.X509Certificates.X509Store> class is a projection of system trust decisions (read-only), user trust decisions (read-write), and user key storage (read-write).</span></span>

<span data-ttu-id="7f521-487">在 macOS 上， <xref:System.Security.Cryptography.X509Certificates.X509Store> 類別是系統信任決策 (唯讀) 、使用者信任決策 (唯讀) 和使用者金鑰儲存 (讀寫) 的預測。</span><span class="sxs-lookup"><span data-stu-id="7f521-487">On macOS, the <xref:System.Security.Cryptography.X509Certificates.X509Store> class is a projection of system trust decisions (read-only), user trust decisions (read-only), and user key storage (read-write).</span></span>

<span data-ttu-id="7f521-488">下表顯示每個平臺支援的案例。</span><span class="sxs-lookup"><span data-stu-id="7f521-488">The following tables show which scenarios are supported in each platform.</span></span> <span data-ttu-id="7f521-489">針對不支援的案例 (❌ 在) 的資料表中，會擲回 <xref:System.Security.Cryptography.CryptographicException> 。</span><span class="sxs-lookup"><span data-stu-id="7f521-489">For unsupported scenarios (❌ in the tables), a <xref:System.Security.Cryptography.CryptographicException> is thrown.</span></span>

#### <a name="the-my-store"></a><span data-ttu-id="7f521-490">我的存放區</span><span class="sxs-lookup"><span data-stu-id="7f521-490">The My store</span></span>

| <span data-ttu-id="7f521-491">狀況</span><span class="sxs-lookup"><span data-stu-id="7f521-491">Scenario</span></span>                                         | <span data-ttu-id="7f521-492">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-492">Windows</span></span> | <span data-ttu-id="7f521-493">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-493">Linux</span></span> | <span data-ttu-id="7f521-494">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-494">macOS</span></span> |
|--------------------------------------------------|---------|-------|-------|
| <span data-ttu-id="7f521-495">開啟 CurrentUser\My (ReadOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-495">Open CurrentUser\My (ReadOnly)</span></span>                   | <span data-ttu-id="7f521-496">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-496">✔️</span></span>     | <span data-ttu-id="7f521-497">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-497">✔️</span></span>    | <span data-ttu-id="7f521-498">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-498">✔️</span></span>   |
| <span data-ttu-id="7f521-499">開啟 CurrentUser\My (ReadWrite) </span><span class="sxs-lookup"><span data-stu-id="7f521-499">Open CurrentUser\My (ReadWrite)</span></span>                  | <span data-ttu-id="7f521-500">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-500">✔️</span></span>     | <span data-ttu-id="7f521-501">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-501">✔️</span></span>    | <span data-ttu-id="7f521-502">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-502">✔️</span></span>   |
| <span data-ttu-id="7f521-503">開啟 CurrentUser\My (ExistingOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-503">Open CurrentUser\My (ExistingOnly)</span></span>               | <span data-ttu-id="7f521-504">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-504">✔️</span></span>     | ⚠️    | <span data-ttu-id="7f521-505">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-505">✔️</span></span>   |
| <span data-ttu-id="7f521-506">開啟 LocalMachine\My</span><span class="sxs-lookup"><span data-stu-id="7f521-506">Open LocalMachine\My</span></span>                             | <span data-ttu-id="7f521-507">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-507">✔️</span></span>     | ❌    | <span data-ttu-id="7f521-508">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-508">✔️</span></span>   |

<span data-ttu-id="7f521-509">在 Linux 上，存放區會在第一次寫入時建立，而且預設不會有任何使用者存放區，因此開啟 `CurrentUser\My` `ExistingOnly` 可能會失敗。</span><span class="sxs-lookup"><span data-stu-id="7f521-509">On Linux, stores are created on first write, and no user stores exist by default, so opening `CurrentUser\My` with `ExistingOnly` may fail.</span></span>

<span data-ttu-id="7f521-510">在 macOS 上， `CurrentUser\My` 存放區是使用者的預設 keychain，預設值是 `login.keychain` 。</span><span class="sxs-lookup"><span data-stu-id="7f521-510">On macOS, the `CurrentUser\My` store is the user's default keychain, which is `login.keychain` by default.</span></span> <span data-ttu-id="7f521-511">`LocalMachine\My`存放區是 `System.keychain` 。</span><span class="sxs-lookup"><span data-stu-id="7f521-511">The `LocalMachine\My` store is `System.keychain`.</span></span>

#### <a name="the-root-store"></a><span data-ttu-id="7f521-512">根存放區</span><span class="sxs-lookup"><span data-stu-id="7f521-512">The Root store</span></span>

| <span data-ttu-id="7f521-513">狀況</span><span class="sxs-lookup"><span data-stu-id="7f521-513">Scenario</span></span>                              | <span data-ttu-id="7f521-514">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-514">Windows</span></span> | <span data-ttu-id="7f521-515">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-515">Linux</span></span> | <span data-ttu-id="7f521-516">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-516">macOS</span></span>           |
|---------------------------------------|---------|-------|-----------------|
| <span data-ttu-id="7f521-517">開啟 CurrentUser\Root (ReadOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-517">Open CurrentUser\Root (ReadOnly)</span></span>      | <span data-ttu-id="7f521-518">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-518">✔️</span></span>     | <span data-ttu-id="7f521-519">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-519">✔️</span></span>    | <span data-ttu-id="7f521-520">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-520">✔️</span></span>             |
| <span data-ttu-id="7f521-521">開啟 CurrentUser\Root (ReadWrite) </span><span class="sxs-lookup"><span data-stu-id="7f521-521">Open CurrentUser\Root (ReadWrite)</span></span>     | <span data-ttu-id="7f521-522">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-522">✔️</span></span>     | <span data-ttu-id="7f521-523">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-523">✔️</span></span>    | ❌              |
| <span data-ttu-id="7f521-524">開啟 CurrentUser\Root (ExistingOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-524">Open CurrentUser\Root (ExistingOnly)</span></span>  | <span data-ttu-id="7f521-525">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-525">✔️</span></span>     | ⚠️    | <span data-ttu-id="7f521-526">如果 ReadOnly) ，則✔️ (</span><span class="sxs-lookup"><span data-stu-id="7f521-526">✔️ (if ReadOnly)</span></span> |
| <span data-ttu-id="7f521-527">開啟 LocalMachine\Root (ReadOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-527">Open LocalMachine\Root (ReadOnly)</span></span>     | <span data-ttu-id="7f521-528">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-528">✔️</span></span>     | <span data-ttu-id="7f521-529">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-529">✔️</span></span>    | <span data-ttu-id="7f521-530">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-530">✔️</span></span>             |
| <span data-ttu-id="7f521-531">開啟 LocalMachine\Root (ReadWrite) </span><span class="sxs-lookup"><span data-stu-id="7f521-531">Open LocalMachine\Root (ReadWrite)</span></span>    | <span data-ttu-id="7f521-532">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-532">✔️</span></span>     | ❌    | ❌              |
| <span data-ttu-id="7f521-533">開啟 LocalMachine\Root (ExistingOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-533">Open LocalMachine\Root (ExistingOnly)</span></span> | <span data-ttu-id="7f521-534">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-534">✔️</span></span>     | ⚠️    | <span data-ttu-id="7f521-535">如果 ReadOnly) ，則✔️ (</span><span class="sxs-lookup"><span data-stu-id="7f521-535">✔️ (if ReadOnly)</span></span> |

<span data-ttu-id="7f521-536">在 Linux 上， `LocalMachine\Root` 存放區是 OpenSSL 預設路徑中 CA 配套的轉譯。</span><span class="sxs-lookup"><span data-stu-id="7f521-536">On Linux, the `LocalMachine\Root` store is an interpretation of the CA bundle in the default path for OpenSSL.</span></span>

<span data-ttu-id="7f521-537">在 macOS 上， `CurrentUser\Root` 存放區是 `SecTrustSettings` 使用者信任網域的結果轉譯。</span><span class="sxs-lookup"><span data-stu-id="7f521-537">On macOS, the `CurrentUser\Root` store is an interpretation of the `SecTrustSettings` results for the user trust domain.</span></span> <span data-ttu-id="7f521-538">`LocalMachine\Root`存放區是 `SecTrustSettings` 系統管理員和系統信任網域的結果轉譯。</span><span class="sxs-lookup"><span data-stu-id="7f521-538">The `LocalMachine\Root` store is an interpretation of the `SecTrustSettings` results for the admin and system trust domains.</span></span>

#### <a name="the-intermediate-store"></a><span data-ttu-id="7f521-539">中繼存放區</span><span class="sxs-lookup"><span data-stu-id="7f521-539">The Intermediate store</span></span>

| <span data-ttu-id="7f521-540">狀況</span><span class="sxs-lookup"><span data-stu-id="7f521-540">Scenario</span></span>                                      | <span data-ttu-id="7f521-541">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-541">Windows</span></span> | <span data-ttu-id="7f521-542">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-542">Linux</span></span> | <span data-ttu-id="7f521-543">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-543">macOS</span></span>           |
|-----------------------------------------------|---------|-------|-----------------|
| <span data-ttu-id="7f521-544">開啟 CurrentUser\Intermediate (ReadOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-544">Open CurrentUser\Intermediate (ReadOnly)</span></span>      | <span data-ttu-id="7f521-545">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-545">✔️</span></span>     | <span data-ttu-id="7f521-546">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-546">✔️</span></span>    | <span data-ttu-id="7f521-547">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-547">✔️</span></span>             |
| <span data-ttu-id="7f521-548">開啟 CurrentUser\Intermediate (ReadWrite) </span><span class="sxs-lookup"><span data-stu-id="7f521-548">Open CurrentUser\Intermediate (ReadWrite)</span></span>     | <span data-ttu-id="7f521-549">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-549">✔️</span></span>     | <span data-ttu-id="7f521-550">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-550">✔️</span></span>    | ❌              |
| <span data-ttu-id="7f521-551">開啟 CurrentUser\Intermediate (ExistingOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-551">Open CurrentUser\Intermediate (ExistingOnly)</span></span>  | <span data-ttu-id="7f521-552">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-552">✔️</span></span>     | ⚠️    | <span data-ttu-id="7f521-553">如果 ReadOnly) ，則✔️ (</span><span class="sxs-lookup"><span data-stu-id="7f521-553">✔️ (if ReadOnly)</span></span> |
| <span data-ttu-id="7f521-554">開啟 LocalMachine\Intermediate (ReadOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-554">Open LocalMachine\Intermediate (ReadOnly)</span></span>     | <span data-ttu-id="7f521-555">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-555">✔️</span></span>     | <span data-ttu-id="7f521-556">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-556">✔️</span></span>    | <span data-ttu-id="7f521-557">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-557">✔️</span></span>             |
| <span data-ttu-id="7f521-558">開啟 LocalMachine\Intermediate (ReadWrite) </span><span class="sxs-lookup"><span data-stu-id="7f521-558">Open LocalMachine\Intermediate (ReadWrite)</span></span>    | <span data-ttu-id="7f521-559">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-559">✔️</span></span>     | ❌    | ❌              |
| <span data-ttu-id="7f521-560">開啟 LocalMachine\Intermediate (ExistingOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-560">Open LocalMachine\Intermediate (ExistingOnly)</span></span> | <span data-ttu-id="7f521-561">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-561">✔️</span></span>     | ⚠️    | <span data-ttu-id="7f521-562">如果 ReadOnly) ，則✔️ (</span><span class="sxs-lookup"><span data-stu-id="7f521-562">✔️ (if ReadOnly)</span></span> |

<span data-ttu-id="7f521-563">在 Linux 上， `CurrentUser\Intermediate` 當 X509Chain 組建上的授權資訊存取記錄下載中繼 ca 時，會使用此存放區作為快取。</span><span class="sxs-lookup"><span data-stu-id="7f521-563">On Linux, the `CurrentUser\Intermediate` store is used as a cache when downloading intermediate CAs by their Authority Information Access records on successful X509Chain builds.</span></span> <span data-ttu-id="7f521-564">此 `LocalMachine\Intermediate` 存放區是 OpenSSL 預設路徑中的 CA 配套的轉譯。</span><span class="sxs-lookup"><span data-stu-id="7f521-564">The `LocalMachine\Intermediate` store is an interpretation of the CA bundle in the default path for OpenSSL.</span></span>

#### <a name="the-disallowed-store"></a><span data-ttu-id="7f521-565">不允許的存放區</span><span class="sxs-lookup"><span data-stu-id="7f521-565">The Disallowed store</span></span>

| <span data-ttu-id="7f521-566">狀況</span><span class="sxs-lookup"><span data-stu-id="7f521-566">Scenario</span></span>                                    | <span data-ttu-id="7f521-567">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-567">Windows</span></span> | <span data-ttu-id="7f521-568">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-568">Linux</span></span> | <span data-ttu-id="7f521-569">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-569">macOS</span></span>           |
|---------------------------------------------|---------|-------|-----------------|
| <span data-ttu-id="7f521-570">開啟 CurrentUser\Disallowed (ReadOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-570">Open CurrentUser\Disallowed (ReadOnly)</span></span>      | <span data-ttu-id="7f521-571">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-571">✔️</span></span>     | ⚠️    | <span data-ttu-id="7f521-572">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-572">✔️</span></span>             |
| <span data-ttu-id="7f521-573">開啟 CurrentUser\Disallowed (ReadWrite) </span><span class="sxs-lookup"><span data-stu-id="7f521-573">Open CurrentUser\Disallowed (ReadWrite)</span></span>     | <span data-ttu-id="7f521-574">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-574">✔️</span></span>     | ⚠️    | ❌              |
| <span data-ttu-id="7f521-575">開啟 CurrentUser\Disallowed (ExistingOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-575">Open CurrentUser\Disallowed (ExistingOnly)</span></span>  | <span data-ttu-id="7f521-576">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-576">✔️</span></span>     | ⚠️    | <span data-ttu-id="7f521-577">如果 ReadOnly) ，則✔️ (</span><span class="sxs-lookup"><span data-stu-id="7f521-577">✔️ (if ReadOnly)</span></span> |
| <span data-ttu-id="7f521-578">開啟 LocalMachine\Disallowed (ReadOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-578">Open LocalMachine\Disallowed (ReadOnly)</span></span>     | <span data-ttu-id="7f521-579">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-579">✔️</span></span>     | ❌    | <span data-ttu-id="7f521-580">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-580">✔️</span></span>             |
| <span data-ttu-id="7f521-581">開啟 LocalMachine\Disallowed (ReadWrite) </span><span class="sxs-lookup"><span data-stu-id="7f521-581">Open LocalMachine\Disallowed (ReadWrite)</span></span>    | <span data-ttu-id="7f521-582">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-582">✔️</span></span>     | ❌    | ❌              |
| <span data-ttu-id="7f521-583">開啟 LocalMachine\Disallowed (ExistingOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-583">Open LocalMachine\Disallowed (ExistingOnly)</span></span> | <span data-ttu-id="7f521-584">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-584">✔️</span></span>     | ❌    | <span data-ttu-id="7f521-585">如果 ReadOnly) ，則✔️ (</span><span class="sxs-lookup"><span data-stu-id="7f521-585">✔️ (if ReadOnly)</span></span> |

<span data-ttu-id="7f521-586">在 Linux 上， `Disallowed` 存放區不會用於鏈建築物中，而嘗試在其中新增內容會導致 <xref:System.Security.Cryptography.CryptographicException> 。</span><span class="sxs-lookup"><span data-stu-id="7f521-586">On Linux, the `Disallowed` store is not used in chain building, and attempting to add contents to it results in a <xref:System.Security.Cryptography.CryptographicException>.</span></span> <span data-ttu-id="7f521-587"><xref:System.Security.Cryptography.CryptographicException>如果已取得內容，則在開啟存放區時，會擲回 `Disallowed` 。</span><span class="sxs-lookup"><span data-stu-id="7f521-587">A <xref:System.Security.Cryptography.CryptographicException> is thrown when opening the `Disallowed` store if it has already acquired contents.</span></span>

<span data-ttu-id="7f521-588">在 macOS 上，CurrentUser\Disallowed 和 LocalMachine\Disallowed 存放區是針對信任設定為之憑證的適當 SecTrustSettings 結果的解釋 `Always Deny` 。</span><span class="sxs-lookup"><span data-stu-id="7f521-588">On macOS, the CurrentUser\Disallowed and LocalMachine\Disallowed stores are interpretations of the appropriate SecTrustSettings results for certificates whose trust is set to `Always Deny`.</span></span>

#### <a name="nonexistent-store"></a><span data-ttu-id="7f521-589">不存在的存放區</span><span class="sxs-lookup"><span data-stu-id="7f521-589">Nonexistent store</span></span>

| <span data-ttu-id="7f521-590">狀況</span><span class="sxs-lookup"><span data-stu-id="7f521-590">Scenario</span></span>                                         | <span data-ttu-id="7f521-591">Windows</span><span class="sxs-lookup"><span data-stu-id="7f521-591">Windows</span></span> | <span data-ttu-id="7f521-592">Linux</span><span class="sxs-lookup"><span data-stu-id="7f521-592">Linux</span></span> | <span data-ttu-id="7f521-593">macOS</span><span class="sxs-lookup"><span data-stu-id="7f521-593">macOS</span></span> |
|--------------------------------------------------|---------|-------|-------|
| <span data-ttu-id="7f521-594">開啟不存在的存放區 (ExistingOnly) </span><span class="sxs-lookup"><span data-stu-id="7f521-594">Open non-existent store (ExistingOnly)</span></span>           | ❌     | ❌     | ❌    |
| <span data-ttu-id="7f521-595">開啟 CurrentUser 不存在的存放區 (ReadWrite) </span><span class="sxs-lookup"><span data-stu-id="7f521-595">Open CurrentUser non-existent store (ReadWrite)</span></span>  | <span data-ttu-id="7f521-596">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-596">✔️</span></span>     | <span data-ttu-id="7f521-597">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-597">✔️</span></span>     | ⚠️   |
| <span data-ttu-id="7f521-598">開啟 LocalMachine 不存在的存放區 (ReadWrite) </span><span class="sxs-lookup"><span data-stu-id="7f521-598">Open LocalMachine non-existent store (ReadWrite)</span></span> | <span data-ttu-id="7f521-599">✔️</span><span class="sxs-lookup"><span data-stu-id="7f521-599">✔️</span></span>     | ❌     | ❌    |

<span data-ttu-id="7f521-600">在 macOS 上，只有 location 才支援使用 System.security.cryptography.x509certificates.x509store API 建立自訂存放區 `CurrentUser` 。</span><span class="sxs-lookup"><span data-stu-id="7f521-600">On macOS, custom store creation with the X509Store API is supported only for `CurrentUser` location.</span></span> <span data-ttu-id="7f521-601">它會在使用者的 keychain 目錄中建立不含密碼的新 keychain， (*~/Library/Keychains*) 。</span><span class="sxs-lookup"><span data-stu-id="7f521-601">It will create a new keychain with no password in the user's keychain directory (*~/Library/Keychains*).</span></span> <span data-ttu-id="7f521-602">若要建立具有密碼的 keychain，可以使用 P/Invoke `SecKeychainCreate` 。</span><span class="sxs-lookup"><span data-stu-id="7f521-602">To create a keychain with password, a P/Invoke to `SecKeychainCreate` could be used.</span></span> <span data-ttu-id="7f521-603">同樣地， `SecKeychainOpen` 也可以用來開啟不同位置中的金鑰鏈]。</span><span class="sxs-lookup"><span data-stu-id="7f521-603">Similarly, `SecKeychainOpen` could be used to open keychains in different locations.</span></span> <span data-ttu-id="7f521-604">產生的 `IntPtr` 可以傳遞至， [`new X509Store(IntPtr)`](xref:System.Security.Cryptography.X509Certificates.X509Store.%23ctor(System.IntPtr)) 以取得具備讀取/寫入功能的存放區，受限於目前使用者的許可權。</span><span class="sxs-lookup"><span data-stu-id="7f521-604">The resulting `IntPtr` can be passed to [`new X509Store(IntPtr)`](xref:System.Security.Cryptography.X509Certificates.X509Store.%23ctor(System.IntPtr)) to obtain a read/write-capable store, subject to the current user's permissions.</span></span>

### <a name="x509chain"></a><span data-ttu-id="7f521-605">X509Chain</span><span class="sxs-lookup"><span data-stu-id="7f521-605">X509Chain</span></span>

<span data-ttu-id="7f521-606">macOS 不支援離線 CRL 使用率，因此 `X509RevocationMode.Offline` 會被視為 `X509RevocationMode.Online` 。</span><span class="sxs-lookup"><span data-stu-id="7f521-606">macOS doesn't support Offline CRL utilization, so `X509RevocationMode.Offline` is treated as `X509RevocationMode.Online`.</span></span>

<span data-ttu-id="7f521-607">macOS 不支援在 CRL (憑證撤銷清單上啟動使用者起始的超時) /OCSP (線上憑證狀態通訊協定) /AIA (授權單位資訊存取) 下載，因此 `X509ChainPolicy.UrlRetrievalTimeout` 會被忽略。</span><span class="sxs-lookup"><span data-stu-id="7f521-607">macOS doesn't support a user-initiated timeout on CRL (Certificate Revocation List) / OCSP (Online Certificate Status Protocol) / AIA (Authority Information Access) downloading, so `X509ChainPolicy.UrlRetrievalTimeout` is ignored.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7f521-608">其他資源</span><span class="sxs-lookup"><span data-stu-id="7f521-608">Additional resources</span></span>

* [<span data-ttu-id="7f521-609">.NET 密碼編譯模型</span><span class="sxs-lookup"><span data-stu-id="7f521-609">.NET Cryptography Model</span></span>](cryptography-model.md)
* [<span data-ttu-id="7f521-610">.NET 密碼編譯服務</span><span class="sxs-lookup"><span data-stu-id="7f521-610">.NET Cryptographic Services</span></span>](cryptographic-services.md)
* [<span data-ttu-id="7f521-611">使用填補進行 CBC 模式對稱解密的時間弱點</span><span class="sxs-lookup"><span data-stu-id="7f521-611">Timing vulnerabilities with CBC-mode symmetric decryption using padding</span></span>](vulnerabilities-cbc-mode.md)
* [<span data-ttu-id="7f521-612">ASP.NET Core 資料保護</span><span class="sxs-lookup"><span data-stu-id="7f521-612">ASP.NET Core Data Protection</span></span>](/aspnet/core/security/data-protection/introduction)
