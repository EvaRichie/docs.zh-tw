---
title: 隔離儲存區
description: 探索隔離儲存區，這是一種資料儲存機制，藉由定義將程式碼與儲存的資料產生關聯的標準化方式，來提供隔離 & 安全。
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- data storage using isolated storage
- stores
- storing data using isolated storage
- isolated storage
- location of isolated storage in file system
- standardizing storage systems
- storing data using isolated storage, when not to use
- code, isolated storage
- isolated storage, options
- data storage using isolated storage, when not to use
- storing data using isolated storage, options
- isolated storage, when not to use
- data storage using isolated storage, options
- isolation
ms.assetid: aff939d7-9e49-46f2-a8cd-938d3020e94e
ms.openlocfilehash: b9915faff2593cc51868c20e1a83a05ffca9f548
ms.sourcegitcommit: dc2feef0794cf41dbac1451a13b8183258566c0e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/24/2020
ms.locfileid: "85325939"
---
# <a name="isolated-storage"></a><span data-ttu-id="177ba-103">隔離儲存區</span><span class="sxs-lookup"><span data-stu-id="177ba-103">Isolated Storage</span></span>
<a name="top"></a> <span data-ttu-id="177ba-104">對於傳統型應用程式而言，隔離儲存區為資料儲存機制，藉著定義標準化方式，將程式碼與儲存的資料產生關聯，以提供隔離和安全。</span><span class="sxs-lookup"><span data-stu-id="177ba-104">For desktop apps, isolated storage is a data storage mechanism that provides isolation and safety by defining standardized ways of associating code with saved data.</span></span> <span data-ttu-id="177ba-105">標準化也提供其他利益。</span><span class="sxs-lookup"><span data-stu-id="177ba-105">Standardization provides other benefits as well.</span></span> <span data-ttu-id="177ba-106">系統管理員可以使用設計來操作隔離儲存區的工具，設定檔案存放空間、設定安全性原則，和刪除未使用的資料。</span><span class="sxs-lookup"><span data-stu-id="177ba-106">Administrators can use tools designed to manipulate isolated storage to configure file storage space, set security policies, and delete unused data.</span></span> <span data-ttu-id="177ba-107">有了隔離儲存區，您的程式碼不再需要唯一路徑去指定檔案系統中的安全位置，並且資料也被保護以免受到只擁有隔離儲存區存取權的其他應用程式的影響。</span><span class="sxs-lookup"><span data-stu-id="177ba-107">With isolated storage, your code no longer needs unique paths to specify safe locations in the file system, and data is protected from other applications that only have isolated storage access.</span></span> <span data-ttu-id="177ba-108">指示應用程式之存放區域所在位置的硬式編碼資訊是沒有必要的。</span><span class="sxs-lookup"><span data-stu-id="177ba-108">Hard-coded information that indicates where an application's storage area is located is unnecessary.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="177ba-109">Windows 8.x 存放區應用程式無法使用隔離儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-109">Isolated storage is not available for Windows 8.x Store apps.</span></span> <span data-ttu-id="177ba-110">請改用 Windows 執行階段 API 所提供的 `Windows.Storage` 命名空間來儲存本機資料與檔案。</span><span class="sxs-lookup"><span data-stu-id="177ba-110">Instead, use the application data classes in the `Windows.Storage` namespaces included in the Windows Runtime API to store local data and files.</span></span> <span data-ttu-id="177ba-111">如需詳細資訊，請參閱 Windows 開發人員中心的[應用程式資料](https://docs.microsoft.com/previous-versions/windows/apps/hh464917(v=win.10))。</span><span class="sxs-lookup"><span data-stu-id="177ba-111">For more information, see [Application data](https://docs.microsoft.com/previous-versions/windows/apps/hh464917(v=win.10)) in the Windows Dev Center.</span></span>

<span data-ttu-id="177ba-112">本主題包含下列幾節：</span><span class="sxs-lookup"><span data-stu-id="177ba-112">This topic contains the following sections:</span></span>

- [<span data-ttu-id="177ba-113">資料區間和存放區</span><span class="sxs-lookup"><span data-stu-id="177ba-113">Data Compartments and Stores</span></span>](#data_compartments_and_stores)

- [<span data-ttu-id="177ba-114">隔離儲存區的配額</span><span class="sxs-lookup"><span data-stu-id="177ba-114">Quotas for Isolated Storage</span></span>](#quotas)

- [<span data-ttu-id="177ba-115">安全存取</span><span class="sxs-lookup"><span data-stu-id="177ba-115">Secure Access</span></span>](#secure_access)

- [<span data-ttu-id="177ba-116">容許的用法和安全性風險</span><span class="sxs-lookup"><span data-stu-id="177ba-116">Allowed Usage and Security Risks</span></span>](#allowed_usage)

- [<span data-ttu-id="177ba-117">隔離儲存區位置</span><span class="sxs-lookup"><span data-stu-id="177ba-117">Isolated Storage Locations</span></span>](#isolated_storage_locations)

- [<span data-ttu-id="177ba-118">建立、列舉和刪除隔離儲存區</span><span class="sxs-lookup"><span data-stu-id="177ba-118">Creating, Enumerating, and Deleting Isolated Storage</span></span>](#isolated_storage_tasks)

- [<span data-ttu-id="177ba-119">隔離儲存區的案例</span><span class="sxs-lookup"><span data-stu-id="177ba-119">Scenarios for Isolated Storage</span></span>](#scenarios_for_isolated_storage)

- [<span data-ttu-id="177ba-120">相關主題</span><span class="sxs-lookup"><span data-stu-id="177ba-120">Related Topics</span></span>](#related_topics)

- [<span data-ttu-id="177ba-121">參考</span><span class="sxs-lookup"><span data-stu-id="177ba-121">Reference</span></span>](#reference)

<a name="data_compartments_and_stores"></a>

## <a name="data-compartments-and-stores"></a><span data-ttu-id="177ba-122">資料區間和存放區</span><span class="sxs-lookup"><span data-stu-id="177ba-122">Data Compartments and Stores</span></span>

<span data-ttu-id="177ba-123">當應用程式在檔案中儲存資料時，您必須小心選擇檔案名稱和儲存位置，將儲存位置為另一個應用程式知悉因而遭受損毀的可能性降至最低。</span><span class="sxs-lookup"><span data-stu-id="177ba-123">When an application stores data in a file, the file name and storage location must be carefully chosen to minimize the possibility that the storage location will be known to another application and, therefore, will be vulnerable to corruption.</span></span> <span data-ttu-id="177ba-124">若沒有一個標準系統從中管理這些問題，開發臨機操作技術以使儲存衝突降至最低可能會很複雜，而且結果也不可靠。</span><span class="sxs-lookup"><span data-stu-id="177ba-124">Without a standard system in place to manage these problems, developing ad hoc techniques that minimize storage conflicts can be complex, and the results can be unreliable.</span></span>

<span data-ttu-id="177ba-125">有了隔離儲存區，資料永遠按照使用者和按照組件 (Assembly) 來隔離。</span><span class="sxs-lookup"><span data-stu-id="177ba-125">With isolated storage, data is always isolated by user and by assembly.</span></span> <span data-ttu-id="177ba-126">認證 (例如組件的來源或強式名稱) 會決定組件的識別 (Identity)。</span><span class="sxs-lookup"><span data-stu-id="177ba-126">Credentials such as the origin or the strong name of the assembly determine assembly identity.</span></span> <span data-ttu-id="177ba-127">資料也可以使用類似的認證，依據應用程式定義域來隔離。</span><span class="sxs-lookup"><span data-stu-id="177ba-127">Data can also be isolated by application domain, using similar credentials.</span></span>

<span data-ttu-id="177ba-128">使用隔離儲存區時，應用程式會將資料儲存至與程式碼識別在某種程度上相關聯的唯一資料區間，例如它的發行者或簽章。</span><span class="sxs-lookup"><span data-stu-id="177ba-128">When you use isolated storage, your application saves data to a unique data compartment that is associated with some aspect of the code's identity, such as its publisher or signature.</span></span> <span data-ttu-id="177ba-129">資料區間為抽象概念，不是特定儲存位置；它由一個或多個稱為存放區的隔離儲存區檔案 (包含資料儲存的實際目錄位置) 所構成。</span><span class="sxs-lookup"><span data-stu-id="177ba-129">The data compartment is an abstraction, not a specific storage location; it consists of one or more isolated storage files, called stores, which contain the actual directory locations where data is stored.</span></span> <span data-ttu-id="177ba-130">例如，應用程式可能具有與它相關的資料區間，而檔案系統中的目錄則將實作實際保留那個應用程式資料的存放區。</span><span class="sxs-lookup"><span data-stu-id="177ba-130">For example, an application might have a data compartment associated with it, and a directory in the file system would implement the store that actually preserves the data for that application.</span></span> <span data-ttu-id="177ba-131">儲存在存放區中的資料可以是任何種類的資料，從使用者的喜好資訊至應用程式的狀態。</span><span class="sxs-lookup"><span data-stu-id="177ba-131">The data saved in the store can be any kind of data, from user preference information to application state.</span></span> <span data-ttu-id="177ba-132">對於開發人員而言，資料區間的位置顯而易見。</span><span class="sxs-lookup"><span data-stu-id="177ba-132">For the developer, the location of the data compartment is transparent.</span></span> <span data-ttu-id="177ba-133">存放區通常位於用戶端上，不過，伺服器應用程式可以模擬執行操作的使用者，使用隔離儲存區儲存資訊。</span><span class="sxs-lookup"><span data-stu-id="177ba-133">Stores usually reside on the client, but a server application could use isolated stores to store information by impersonating the user on whose behalf it is functioning.</span></span> <span data-ttu-id="177ba-134">隔離儲存區 (Isolated Storage) 也可以配合使用者漫遊設定檔在伺服器上儲存資訊，讓漫遊使用者隨時隨地都能使用資訊。</span><span class="sxs-lookup"><span data-stu-id="177ba-134">Isolated storage can also store information on a server with a user's roaming profile so that the information will travel with the roaming user.</span></span>

<a name="quotas"></a>

## <a name="quotas-for-isolated-storage"></a><span data-ttu-id="177ba-135">隔離儲存區的配額</span><span class="sxs-lookup"><span data-stu-id="177ba-135">Quotas for Isolated Storage</span></span>

<span data-ttu-id="177ba-136">配額是對於可用的隔離儲存區數量的限制。</span><span class="sxs-lookup"><span data-stu-id="177ba-136">A quota is a limit on the amount of isolated storage that can be used.</span></span> <span data-ttu-id="177ba-137">配額包括檔案空間的位元組和目錄相關的負荷以及存放區中的其他資訊。</span><span class="sxs-lookup"><span data-stu-id="177ba-137">The quota includes bytes of file space as well as the overhead associated with the directory and other information in the store.</span></span> <span data-ttu-id="177ba-138">隔離儲存區使用權限配額，也就是使用 <xref:System.Security.Permissions.IsolatedStoragePermission> 物件設定的儲存區限制。</span><span class="sxs-lookup"><span data-stu-id="177ba-138">Isolated storage uses permission quotas, which are storage limits that are set by using <xref:System.Security.Permissions.IsolatedStoragePermission> objects.</span></span> <span data-ttu-id="177ba-139">如果您嘗試寫入的資料超過配額，就會擲回 <xref:System.IO.IsolatedStorage.IsolatedStorageException> 例外狀況。</span><span class="sxs-lookup"><span data-stu-id="177ba-139">If you try to write data that exceeds the quota, an <xref:System.IO.IsolatedStorage.IsolatedStorageException> exception is thrown.</span></span>  <span data-ttu-id="177ba-140">安全性原則會決定授與程式碼的權限，您可以使用 .NET Framework 組態工具 (Mscorcfg.msc) 修改安全性原則。</span><span class="sxs-lookup"><span data-stu-id="177ba-140">Security policy, which can be modified using the .NET Framework Configuration Tool (Mscorcfg.msc), determines which permissions are granted to code.</span></span> <span data-ttu-id="177ba-141">已具有 <xref:System.Security.Permissions.IsolatedStoragePermission> 的程式碼僅限使用不超過 <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> 屬性所允許的儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-141">Code that has been granted <xref:System.Security.Permissions.IsolatedStoragePermission> is restricted to using no more storage than the <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> property allows.</span></span> <span data-ttu-id="177ba-142">然而，因為程式碼可以提出不同的使用者識別來略過使用權限配額，使用權限配額可充當對程式碼應該如何動作的指導方針，並非做為程式碼行為的固定限制。</span><span class="sxs-lookup"><span data-stu-id="177ba-142">However, because code can bypass permission quotas by presenting different user identities, permission quotas serve as guidelines for how code should behave rather than as a firm limit on code behavior.</span></span>

<span data-ttu-id="177ba-143">配額並不對漫遊存放區做限制。</span><span class="sxs-lookup"><span data-stu-id="177ba-143">Quotas are not enforced on roaming stores.</span></span> <span data-ttu-id="177ba-144">因為這點，程式碼需要稍高等級的使用權限來使用它們。</span><span class="sxs-lookup"><span data-stu-id="177ba-144">Because of this, a slightly higher level of permission is required for code to use them.</span></span> <span data-ttu-id="177ba-145">列舉值 <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> 和 <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> 會為漫遊使用者指定使用隔離儲存區的權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-145">The enumeration values <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> and <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> specify a permission to use isolated storage for a roaming user.</span></span>

<a name="secure_access"></a>

## <a name="secure-access"></a><span data-ttu-id="177ba-146">安全存取</span><span class="sxs-lookup"><span data-stu-id="177ba-146">Secure Access</span></span>

<span data-ttu-id="177ba-147">隔離儲存區的使用讓部分受信任的應用程式能夠藉由電腦的安全性原則所控制的方式來儲存資料。</span><span class="sxs-lookup"><span data-stu-id="177ba-147">Using isolated storage enables partially trusted applications to store data in a manner that is controlled by the computer's security policy.</span></span> <span data-ttu-id="177ba-148">這對於使用者可能要小心翼翼執行的下載元件特別有用。</span><span class="sxs-lookup"><span data-stu-id="177ba-148">This is especially useful for downloaded components that a user might want to run cautiously.</span></span> <span data-ttu-id="177ba-149">當您使用標準 I/O 機制存取檔案系統時，安全性原則很少授與這類程式碼權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-149">Security policy rarely grants this kind of code permission when you access the file system by using standard I/O mechanisms.</span></span> <span data-ttu-id="177ba-150">不過，根據預設，從本機電腦、區域網路或網際網路執行的程式碼將被授與使用隔離儲存區的權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-150">However, by default, code running from the local computer, a local network, or the Internet is granted the right to use isolated storage.</span></span>

<span data-ttu-id="177ba-151">系統管理員可以根據適當的信任等級，限制應用程式或使用者可使用多少隔離儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-151">Administrators can limit how much isolated storage an application or a user has available, based on an appropriate trust level.</span></span> <span data-ttu-id="177ba-152">此外，系統管理員可以完全移除使用者的保存資料。</span><span class="sxs-lookup"><span data-stu-id="177ba-152">In addition, administrators can remove a user's persisted data completely.</span></span> <span data-ttu-id="177ba-153">若要建立或存取隔離儲存區，程式碼必須具備適當的 <xref:System.Security.Permissions.IsolatedStorageFilePermission> 權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-153">To create or access isolated storage, code must be granted the appropriate <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission.</span></span>

<span data-ttu-id="177ba-154">若要存取隔離儲存區，程式碼必須擁有所有必要的原生 (Native) 平台作業系統權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-154">To access isolated storage, code must have all necessary native platform operating system rights.</span></span> <span data-ttu-id="177ba-155">例如，必須遵循控制哪些使用者有權使用檔案系統的存取控制清單 (ACL)。</span><span class="sxs-lookup"><span data-stu-id="177ba-155">The access control lists (ACLs) that control which users have the rights to use the file system must be satisfied.</span></span> <span data-ttu-id="177ba-156">.NET Framework 應用程式已經擁有作業系統權限以存取隔離儲存區，除非它們執行 (平台特定) 模擬。</span><span class="sxs-lookup"><span data-stu-id="177ba-156">.NET Framework applications already have operating system rights to access isolated storage unless they perform (platform-specific) impersonation.</span></span> <span data-ttu-id="177ba-157">在這個狀況中，應用程式有責任確保模擬的使用者識別具有適當的作業系統權限，以存取隔離儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-157">In this case, the application is responsible for ensuring that the impersonated user identity has the proper operating system rights to access isolated storage.</span></span> <span data-ttu-id="177ba-158">這個存取對於從 Web 執行或下載的程式碼提供便利的方式，以讀取和寫入與特定使用者有關的存放區域。</span><span class="sxs-lookup"><span data-stu-id="177ba-158">This access provides a convenient way for code that is run or downloaded from the web to read and write to a storage area related to a particular user.</span></span>

<span data-ttu-id="177ba-159">通用語言執行平台會使用 <xref:System.Security.Permissions.IsolatedStorageFilePermission> 物件控制對隔離儲存區的存取。</span><span class="sxs-lookup"><span data-stu-id="177ba-159">To control access to isolated storage, the common language runtime uses <xref:System.Security.Permissions.IsolatedStorageFilePermission> objects.</span></span> <span data-ttu-id="177ba-160">每個物件都有指定下列值的屬性：</span><span class="sxs-lookup"><span data-stu-id="177ba-160">Each object has properties that specify the following values:</span></span>

- <span data-ttu-id="177ba-161">容許的使用方式，表示允許的存取類型。</span><span class="sxs-lookup"><span data-stu-id="177ba-161">Allowed usage, which indicates the type of access that is allowed.</span></span> <span data-ttu-id="177ba-162">這些值為 <xref:System.Security.Permissions.IsolatedStorageContainment> 列舉類型的成員。</span><span class="sxs-lookup"><span data-stu-id="177ba-162">The values are members of the <xref:System.Security.Permissions.IsolatedStorageContainment> enumeration.</span></span> <span data-ttu-id="177ba-163">如需有關這些值的詳細資訊，請參閱下一節中的表格。</span><span class="sxs-lookup"><span data-stu-id="177ba-163">For more information about these values, see the table in the next section.</span></span>

- <span data-ttu-id="177ba-164">儲存區配額，如上一節中所討論。</span><span class="sxs-lookup"><span data-stu-id="177ba-164">Storage quota, as discussed in the preceding section.</span></span>

<span data-ttu-id="177ba-165">在程式碼第一次嘗試開啟存放區時，執行階段要求必須有 <xref:System.Security.Permissions.IsolatedStorageFilePermission> 權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-165">The runtime demands <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission when code first attempts to open a store.</span></span> <span data-ttu-id="177ba-166">它會根據信任程式碼的程度，決定是否要授與此權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-166">It decides whether to grant this permission, based on how much the code is trusted.</span></span> <span data-ttu-id="177ba-167">如果授與權限，容許的用法和儲存區配額值會由安全性原則和程式碼對 <xref:System.Security.Permissions.IsolatedStorageFilePermission>的要求決定。</span><span class="sxs-lookup"><span data-stu-id="177ba-167">If the permission is granted, the allowed usage and storage quota values are determined by security policy and by the code's request for <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span> <span data-ttu-id="177ba-168">安全性原則是使用 .NET Framework 組態工具 (Mscorcfg.msc) 所設定。</span><span class="sxs-lookup"><span data-stu-id="177ba-168">Security policy is set by using the .NET Framework Configuration Tool (Mscorcfg.msc).</span></span> <span data-ttu-id="177ba-169">要檢查呼叫堆疊中的所有呼叫端，以確保各個呼叫端都至少有適當的允許使用方式。</span><span class="sxs-lookup"><span data-stu-id="177ba-169">All callers in the call stack are checked to ensure that each caller has at least the appropriate allowed usage.</span></span> <span data-ttu-id="177ba-170">執行階段也檢查加諸於程式碼 (其已開啟或建立將要儲存檔案的存放區) 的配額。</span><span class="sxs-lookup"><span data-stu-id="177ba-170">The runtime also checks the quota imposed on the code that opened or created the store in which the file is to be saved.</span></span> <span data-ttu-id="177ba-171">如果這些條件滿足，即授與使用權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-171">If these conditions are satisfied, permission is granted.</span></span> <span data-ttu-id="177ba-172">每當檔案寫入存放區時，會再度檢查配額。</span><span class="sxs-lookup"><span data-stu-id="177ba-172">The quota is checked again every time a file is written to the store.</span></span>

<span data-ttu-id="177ba-173">要求權限時不需要應用程式程式碼，因為通用語言執行平台根據安全性原則授與適當的 <xref:System.Security.Permissions.IsolatedStorageFilePermission> 。</span><span class="sxs-lookup"><span data-stu-id="177ba-173">Application code is not required to request permission because the common language runtime will grant whatever <xref:System.Security.Permissions.IsolatedStorageFilePermission> is appropriate based on security policy.</span></span> <span data-ttu-id="177ba-174">不過，有時候要求應用程式所需的特定權限 (包括 <xref:System.Security.Permissions.IsolatedStorageFilePermission>) 有其合理原因。</span><span class="sxs-lookup"><span data-stu-id="177ba-174">However, there are good reasons to request specific permissions that your application needs, including <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span>

<a name="allowed_usage"></a>

## <a name="allowed-usage-and-security-risks"></a><span data-ttu-id="177ba-175">容許的用法和安全性風險</span><span class="sxs-lookup"><span data-stu-id="177ba-175">Allowed Usage and Security Risks</span></span>

<span data-ttu-id="177ba-176"><xref:System.Security.Permissions.IsolatedStorageFilePermission> 所指定的容許用法將決定允許程式碼建立和使用隔離儲存區的程度。</span><span class="sxs-lookup"><span data-stu-id="177ba-176">The allowed usage specified by <xref:System.Security.Permissions.IsolatedStorageFilePermission> determines the degree to which code will be allowed to create and use isolated storage.</span></span> <span data-ttu-id="177ba-177">下表顯示如何在對應隔離類型的使用權限中指定容許的使用方式，並摘要各個允許使用方式相關的安全性風險。</span><span class="sxs-lookup"><span data-stu-id="177ba-177">The following table shows how the allowed usage specified in the permission corresponds to types of isolation and summarizes the security risks associated with each allowed usage.</span></span>

|<span data-ttu-id="177ba-178">容許的使用方式</span><span class="sxs-lookup"><span data-stu-id="177ba-178">Allowed usage</span></span>|<span data-ttu-id="177ba-179">隔離類型</span><span class="sxs-lookup"><span data-stu-id="177ba-179">Isolation types</span></span>|<span data-ttu-id="177ba-180">安全性影響</span><span class="sxs-lookup"><span data-stu-id="177ba-180">Security impact</span></span>|
|-------------------|---------------------|---------------------|
|<xref:System.Security.Permissions.IsolatedStorageContainment.None>|<span data-ttu-id="177ba-181">不允許使用隔離儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-181">No isolated storage use is allowed.</span></span>|<span data-ttu-id="177ba-182">沒有安全性影響。</span><span class="sxs-lookup"><span data-stu-id="177ba-182">There is no security impact.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByUser>|<span data-ttu-id="177ba-183">依據使用者、定義域和組件的隔離。</span><span class="sxs-lookup"><span data-stu-id="177ba-183">Isolation by user, domain, and assembly.</span></span> <span data-ttu-id="177ba-184">各個組件在定義域中具有分別的子存放區。</span><span class="sxs-lookup"><span data-stu-id="177ba-184">Each assembly has a separate substore within the domain.</span></span> <span data-ttu-id="177ba-185">電腦也會隱含隔離使用這項權限的存放區。</span><span class="sxs-lookup"><span data-stu-id="177ba-185">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="177ba-186">這個使用權限等級開放資源給未經授權的過度使用，即使強制的配額對此增加了一些難度。</span><span class="sxs-lookup"><span data-stu-id="177ba-186">This permission level leaves resources open to unauthorized overuse, although enforced quotas make it more difficult.</span></span> <span data-ttu-id="177ba-187">這被稱為拒絕服務的攻擊。</span><span class="sxs-lookup"><span data-stu-id="177ba-187">This is called a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser>|<span data-ttu-id="177ba-188">與 `DomainIsolationByUser`相同，但存放區儲存至將漫遊的位置，如果啟用漫遊使用者設定檔而未限制配額的話。</span><span class="sxs-lookup"><span data-stu-id="177ba-188">Same as `DomainIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="177ba-189">因為配額必須停用，儲存資源將更容易受到拒絕服務的攻擊傷害。</span><span class="sxs-lookup"><span data-stu-id="177ba-189">Because quotas must be disabled, storage resources are more vulnerable to a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByUser>|<span data-ttu-id="177ba-190">依據使用者和組件的隔離。</span><span class="sxs-lookup"><span data-stu-id="177ba-190">Isolation by user and assembly.</span></span> <span data-ttu-id="177ba-191">電腦也會隱含隔離使用這項權限的存放區。</span><span class="sxs-lookup"><span data-stu-id="177ba-191">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="177ba-192">配額被強制在這個等級，幫助防止拒絕服務的攻擊。</span><span class="sxs-lookup"><span data-stu-id="177ba-192">Quotas are enforced at this level to help prevent a denial of service attack.</span></span> <span data-ttu-id="177ba-193">另一個定義域中的相同組件可以存取這個存放區，開啟資訊可在應用程式之間洩漏的可能性。</span><span class="sxs-lookup"><span data-stu-id="177ba-193">The same assembly in another domain can access this store, opening the possibility that information could be leaked between applications.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser>|<span data-ttu-id="177ba-194">與 `AssemblyIsolationByUser`相同，但存放區儲存至將漫遊的位置，如果啟用漫遊使用者設定檔而未限制配額的話。</span><span class="sxs-lookup"><span data-stu-id="177ba-194">Same as `AssemblyIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="177ba-195">與 `AssemblyIsolationByUser`中相同，但沒有配額，遭到拒絕服務攻擊的風險增加。</span><span class="sxs-lookup"><span data-stu-id="177ba-195">Same as in `AssemblyIsolationByUser`, but without quotas, the risk of a denial of service attack increases.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AdministerIsolatedStorageByUser>|<span data-ttu-id="177ba-196">依據使用者的隔離。</span><span class="sxs-lookup"><span data-stu-id="177ba-196">Isolation by user.</span></span> <span data-ttu-id="177ba-197">基本上，只有管理的或偵錯的工具使用這個等級的使用權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-197">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="177ba-198">這個使用權限的存取允許程式碼檢視或刪除使用者的任何隔離儲存區檔案或目錄 (不管組件隔離)。</span><span class="sxs-lookup"><span data-stu-id="177ba-198">Access with this permission allows code to view or delete any of a user's isolated storage files or directories (regardless of assembly isolation).</span></span> <span data-ttu-id="177ba-199">風險包括資訊洩漏和資料遺失 (但不僅限於此)。</span><span class="sxs-lookup"><span data-stu-id="177ba-199">Risks include, but are not limited to, leaking information and data loss.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.UnrestrictedIsolatedStorage>|<span data-ttu-id="177ba-200">依據所有使用者、定義域和組件的隔離。</span><span class="sxs-lookup"><span data-stu-id="177ba-200">Isolation by all users, domains, and assemblies.</span></span> <span data-ttu-id="177ba-201">基本上，只有管理的或偵錯的工具使用這個等級的使用權限。</span><span class="sxs-lookup"><span data-stu-id="177ba-201">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="177ba-202">這個使用權限將產生完全洩露所有使用者的全部隔離存放區的可能性。</span><span class="sxs-lookup"><span data-stu-id="177ba-202">This permission creates the potential for a total compromise of all isolated stores for all users.</span></span>|

## <a name="safety-of-isolated-storage-components-with-regard-to-untrusted-data"></a><span data-ttu-id="177ba-203">隔離儲存區元件與不受信任資料的安全性</span><span class="sxs-lookup"><span data-stu-id="177ba-203">Safety of isolated storage components with regard to untrusted data</span></span>

<span data-ttu-id="177ba-204">__本節適用于下列架構：__</span><span class="sxs-lookup"><span data-stu-id="177ba-204">__This section applies to the following frameworks:__</span></span>

- <span data-ttu-id="177ba-205">.NET Framework （所有版本）</span><span class="sxs-lookup"><span data-stu-id="177ba-205">.NET Framework (all versions)</span></span>
- <span data-ttu-id="177ba-206">.NET Core 2.1 +</span><span class="sxs-lookup"><span data-stu-id="177ba-206">.NET Core 2.1+</span></span>
- <span data-ttu-id="177ba-207">.NET 5.0 +</span><span class="sxs-lookup"><span data-stu-id="177ba-207">.NET 5.0+</span></span>

<span data-ttu-id="177ba-208">.NET Framework 和 .NET Core 提供[隔離儲存區](/dotnet/standard/io/isolated-storage)，做為保存使用者、應用程式或元件資料的機制。</span><span class="sxs-lookup"><span data-stu-id="177ba-208">The .NET Framework and .NET Core offer [isolated storage](/dotnet/standard/io/isolated-storage) as a mechanism to persist data for a user, an application, or a component.</span></span> <span data-ttu-id="177ba-209">這是舊版元件，主要是針對現在已過時的代碼啟用安全性案例所設計。</span><span class="sxs-lookup"><span data-stu-id="177ba-209">This is a legacy component primarily designed for now-deprecated Code Access Security scenarios.</span></span>

<span data-ttu-id="177ba-210">各種隔離儲存區 Api 和工具可以用來跨信任界限讀取資料。</span><span class="sxs-lookup"><span data-stu-id="177ba-210">Various isolated storage APIs and tools can be used to read data across trust boundaries.</span></span> <span data-ttu-id="177ba-211">例如，從全電腦範圍讀取資料，可以從電腦上其他可能較不受信任的使用者帳戶匯總資料。</span><span class="sxs-lookup"><span data-stu-id="177ba-211">For example, reading data from a machine-wide scope can aggregate data from other, possibly less-trusted user accounts on the machine.</span></span> <span data-ttu-id="177ba-212">從電腦範圍隔離儲存區中讀取的元件或應用程式，應該要知道讀取此資料的結果。</span><span class="sxs-lookup"><span data-stu-id="177ba-212">Components or applications which read from machine-wide isolated storage scopes should be aware of the consequences of reading this data.</span></span>

### <a name="security-sensitive-apis-which-can-read-from-the-machine-wide-scope"></a><span data-ttu-id="177ba-213">可從全電腦範圍讀取的安全性敏感 Api</span><span class="sxs-lookup"><span data-stu-id="177ba-213">Security-sensitive APIs which can read from the machine-wide scope</span></span>

<span data-ttu-id="177ba-214">呼叫下列任何 Api 的元件或應用程式會從整部電腦範圍讀取：</span><span class="sxs-lookup"><span data-stu-id="177ba-214">Components or applications that call any of the following APIs read from the machine-wide scope:</span></span>

* <span data-ttu-id="177ba-215">[Remove-isolatedstoragefile. GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator)，傳遞包含 IsolatedStorageScope 旗標的範圍</span><span class="sxs-lookup"><span data-stu-id="177ba-215">[IsolatedStorageFile.GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* [<span data-ttu-id="177ba-216">Remove-isolatedstoragefile. GetMachineStoreForApplication</span><span class="sxs-lookup"><span data-stu-id="177ba-216">IsolatedStorageFile.GetMachineStoreForApplication</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforapplication)
* [<span data-ttu-id="177ba-217">Remove-isolatedstoragefile. GetMachineStoreForAssembly</span><span class="sxs-lookup"><span data-stu-id="177ba-217">IsolatedStorageFile.GetMachineStoreForAssembly</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforassembly)
* [<span data-ttu-id="177ba-218">Remove-isolatedstoragefile. GetMachineStoreForDomain</span><span class="sxs-lookup"><span data-stu-id="177ba-218">IsolatedStorageFile.GetMachineStoreForDomain</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestorefordomain)
* <span data-ttu-id="177ba-219">[Remove-isolatedstoragefile. GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore)，傳遞包含 IsolatedStorageScope 旗標的範圍</span><span class="sxs-lookup"><span data-stu-id="177ba-219">[IsolatedStorageFile.GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* <span data-ttu-id="177ba-220">[Remove-isolatedstoragefile](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove)，傳遞包含旗標的範圍 `IsolatedStorageScope.Machine`</span><span class="sxs-lookup"><span data-stu-id="177ba-220">[IsolatedStorageFile.Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove), passing a scope that includes the `IsolatedStorageScope.Machine` flag</span></span>

<span data-ttu-id="177ba-221">如果使用參數呼叫[隔離儲存區工具](/dotnet/framework/tools/storeadm-exe-isolated-storage-tool) `storeadm.exe` ，則會受到影響 `/machine` ，如下列程式碼所示：</span><span class="sxs-lookup"><span data-stu-id="177ba-221">The [isolated storage tool](/dotnet/framework/tools/storeadm-exe-isolated-storage-tool) `storeadm.exe` is impacted if called with the `/machine` switch, as shown in the following code:</span></span>

```txt
storeadm.exe /machine [any-other-switches]
```

<span data-ttu-id="177ba-222">隔離儲存區工具是 Visual Studio 和 .NET Framework SDK 的一部分提供。</span><span class="sxs-lookup"><span data-stu-id="177ba-222">The isolated storage tool is provided as part of Visual Studio and the .NET Framework SDK.</span></span>

<span data-ttu-id="177ba-223">如果應用程式未牽涉到對先前 Api 的呼叫，或工作流程未牽涉到 `storeadm.exe` 以這種方式呼叫，則不適用此檔。</span><span class="sxs-lookup"><span data-stu-id="177ba-223">If the application doesn't involve calls to the preceding APIs, or if the workflow doesn't involve calling `storeadm.exe` in this manner, this document doesn't apply.</span></span>

### <a name="impact-in-multi-user-environments"></a><span data-ttu-id="177ba-224">多使用者環境的影響</span><span class="sxs-lookup"><span data-stu-id="177ba-224">Impact in multi-user environments</span></span>

<span data-ttu-id="177ba-225">如先前所述，從一個信任環境寫入的資料，這些 Api 所產生的安全性影響是從不同的信任環境中讀取。</span><span class="sxs-lookup"><span data-stu-id="177ba-225">As mentioned previously, the security impact from these APIs results from data written from one trust environment is read from a different trust environment.</span></span> <span data-ttu-id="177ba-226">隔離儲存區通常會使用下列三個位置的其中一個來讀取和寫入資料：</span><span class="sxs-lookup"><span data-stu-id="177ba-226">Isolated storage generally uses one of three locations to read and write data:</span></span>

1. <span data-ttu-id="177ba-227">`%LOCALAPPDATA%\IsolatedStorage\`：例如， `C:\Users\<username>\AppData\Local\IsolatedStorage\` 用於範圍的 `User` 。</span><span class="sxs-lookup"><span data-stu-id="177ba-227">`%LOCALAPPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Local\IsolatedStorage\`, for `User` scope.</span></span>
2. <span data-ttu-id="177ba-228">`%APPDATA%\IsolatedStorage\`：例如， `C:\Users\<username>\AppData\Roaming\IsolatedStorage\` 用於範圍的 `User|Roaming` 。</span><span class="sxs-lookup"><span data-stu-id="177ba-228">`%APPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Roaming\IsolatedStorage\`, for `User|Roaming` scope.</span></span>
3. <span data-ttu-id="177ba-229">`%PROGRAMDATA%\IsolatedStorage\`：例如， `C:\ProgramData\IsolatedStorage\` 用於範圍的 `Machine` 。</span><span class="sxs-lookup"><span data-stu-id="177ba-229">`%PROGRAMDATA%\IsolatedStorage\`: For example, `C:\ProgramData\IsolatedStorage\`, for `Machine` scope.</span></span>

<span data-ttu-id="177ba-230">前兩個位置會針對每位使用者隔離。</span><span class="sxs-lookup"><span data-stu-id="177ba-230">The first two locations are isolated per-user.</span></span> <span data-ttu-id="177ba-231">Windows 可確保同一部電腦上的不同使用者帳戶無法存取彼此的使用者設定檔資料夾。</span><span class="sxs-lookup"><span data-stu-id="177ba-231">Windows ensures that different user accounts on the same machine cannot access each other's user profile folders.</span></span> <span data-ttu-id="177ba-232">使用或存放區的兩個不同使用者帳戶 `User` `User|Roaming` 不會看到彼此的資料，也不能幹擾彼此的資料。</span><span class="sxs-lookup"><span data-stu-id="177ba-232">Two different user accounts who use the `User` or `User|Roaming` stores will not see each other's data and cannot interfere with each other's data.</span></span>

<span data-ttu-id="177ba-233">第三個位置會在電腦上的所有使用者帳戶之間共用。</span><span class="sxs-lookup"><span data-stu-id="177ba-233">The third location is shared across all user accounts on the machine.</span></span> <span data-ttu-id="177ba-234">不同的帳戶可以讀取和寫入此位置，而且能夠查看彼此的資料。</span><span class="sxs-lookup"><span data-stu-id="177ba-234">Different accounts can read from and write to this location, and they're able to see each other's data.</span></span>

<span data-ttu-id="177ba-235">上述路徑可能會根據使用中的 Windows 版本而有所不同。</span><span class="sxs-lookup"><span data-stu-id="177ba-235">The preceding paths may differ based on the version of Windows in use.</span></span>

<span data-ttu-id="177ba-236">現在請考慮有兩個已註冊的使用者_Mallory_和_Bob_的多使用者系統。</span><span class="sxs-lookup"><span data-stu-id="177ba-236">Now consider a multi-user system with two registered users _Mallory_ and _Bob_.</span></span> <span data-ttu-id="177ba-237">Mallory 能夠存取其使用者設定檔目錄 `C:\Users\Mallory\` ，而她可以存取共用的全電腦儲存位置 `C:\ProgramData\IsolatedStorage\` 。</span><span class="sxs-lookup"><span data-stu-id="177ba-237">Mallory has the ability to access her user profile directory `C:\Users\Mallory\`, and she can access the shared machine-wide storage location `C:\ProgramData\IsolatedStorage\`.</span></span> <span data-ttu-id="177ba-238">她無法存取 Bob 的使用者設定檔目錄 `C:\Users\Bob\` 。</span><span class="sxs-lookup"><span data-stu-id="177ba-238">She cannot access Bob's user profile directory `C:\Users\Bob\`.</span></span>

<span data-ttu-id="177ba-239">如果 Mallory 希望攻擊 Bob，她可能會將資料寫入整部電腦的儲存位置，然後嘗試影響 Bob 從整部電腦的存放區讀取。</span><span class="sxs-lookup"><span data-stu-id="177ba-239">If Mallory wishes to attack Bob, she might write data to the machine-wide storage location, then attempt to influence Bob into reading from the machine-wide store.</span></span> <span data-ttu-id="177ba-240">當 Bob 執行從這個存放區讀取的應用程式時，該應用程式將會在 Mallory 放置的資料上運作，但從 Bob 的使用者帳戶內容中操作。</span><span class="sxs-lookup"><span data-stu-id="177ba-240">When Bob runs an app that reads from this store, that app will operate on the data Mallory placed there, but from within the context of Bob's user account.</span></span> <span data-ttu-id="177ba-241">本檔的其餘部分會策劃各種攻擊媒介，以及應用程式可以執行哪些步驟，將其風險降到最低。</span><span class="sxs-lookup"><span data-stu-id="177ba-241">The remainder of this document contemplates various attack vectors and what steps apps can do to minimize their risk to these attacks.</span></span>

<span data-ttu-id="177ba-242">__注意：__ 為了讓這類攻擊發生，Mallory 需要：</span><span class="sxs-lookup"><span data-stu-id="177ba-242">__Note:__ In order for such an attack to take place, Mallory requires:</span></span>

* <span data-ttu-id="177ba-243">電腦上的使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="177ba-243">A user account on the machine.</span></span>
* <span data-ttu-id="177ba-244">將檔案放入檔案系統上已知位置的功能。</span><span class="sxs-lookup"><span data-stu-id="177ba-244">The ability to place a file into a known location on the file system.</span></span>
* <span data-ttu-id="177ba-245">Bob 在某個時間點執行的應用程式，會嘗試讀取此資料。</span><span class="sxs-lookup"><span data-stu-id="177ba-245">Knowledge that Bob will at some point run an app which attempts to read this data.</span></span>

<span data-ttu-id="177ba-246">這些不是適用于標準單一使用者桌面環境（例如家用電腦或單一員工企業工作站）的威脅向量。</span><span class="sxs-lookup"><span data-stu-id="177ba-246">These are not threat vectors which apply to standard single-user desktop environments like home PCs or single-employee enterprise workstations.</span></span>

#### <a name="elevation-of-privilege"></a><span data-ttu-id="177ba-247">權限提高</span><span class="sxs-lookup"><span data-stu-id="177ba-247">Elevation of privilege</span></span>

<span data-ttu-id="177ba-248">當 Bob 的應用程式讀取 Mallory 的檔案，並根據該承載的內容自動嘗試採取某種動作時，就會發生特權__提升__攻擊。</span><span class="sxs-lookup"><span data-stu-id="177ba-248">An __elevation of privilege__ attack occurs when Bob's app reads Mallory's file and automatically tries to take some action based on the contents of that payload.</span></span> <span data-ttu-id="177ba-249">假設有一個應用程式從整部電腦的存放區讀取啟動腳本的內容，並將這些內容傳遞給 `Process.Start` 。</span><span class="sxs-lookup"><span data-stu-id="177ba-249">Consider an app that reads the contents of a startup script from the machine-wide store and passes those contents to `Process.Start`.</span></span> <span data-ttu-id="177ba-250">如果 Mallory 可以將惡意腳本放在全電腦存放區中，當 Bob 啟動他的應用程式時：</span><span class="sxs-lookup"><span data-stu-id="177ba-250">If Mallory can place a malicious script inside the machine-wide store, when Bob launches his app:</span></span>

* <span data-ttu-id="177ba-251">他的應用程式會_在 Bob 的使用者設定檔內容_底下，剖析並啟動 Mallory 的惡意腳本。</span><span class="sxs-lookup"><span data-stu-id="177ba-251">His app parses and launches Mallory's malicious script _under the context of Bob's user profile_.</span></span>
* <span data-ttu-id="177ba-252">Mallory gaines 在本機電腦上存取 Bob 的帳戶。</span><span class="sxs-lookup"><span data-stu-id="177ba-252">Mallory gaines access to Bob's account on the local machine.</span></span>

#### <a name="denial-of-service"></a><span data-ttu-id="177ba-253">拒絕服務</span><span class="sxs-lookup"><span data-stu-id="177ba-253">Denial of service</span></span>

<span data-ttu-id="177ba-254">當 Bob 的應用程式讀取 Mallory 的檔案、當機或以其他方式停止正常運作時，就會發生阻絕__服務__攻擊。</span><span class="sxs-lookup"><span data-stu-id="177ba-254">A __denial of service__ attack occurs when Bob's app reads Mallory's file and crashes or otherwise stops functioning correctly.</span></span> <span data-ttu-id="177ba-255">再次考慮先前所述的應用程式，它會嘗試從整部電腦的存放區剖析啟動腳本。</span><span class="sxs-lookup"><span data-stu-id="177ba-255">Consider again the app mentioned previously, which attempts to parse a startup script from the machine-wide store.</span></span> <span data-ttu-id="177ba-256">如果 Mallory 可以將格式不正確的檔案放在整部電腦的存放區內，她可能會：</span><span class="sxs-lookup"><span data-stu-id="177ba-256">If Mallory can place a file with malformed contents inside the machine-wide store, she might:</span></span>

* <span data-ttu-id="177ba-257">導致 Bob 的應用程式及早在啟動路徑中擲回例外狀況。</span><span class="sxs-lookup"><span data-stu-id="177ba-257">Cause Bob's app to throw an exception early in the startup path.</span></span>
* <span data-ttu-id="177ba-258">導致應用程式無法順利啟動，因為發生例外狀況。</span><span class="sxs-lookup"><span data-stu-id="177ba-258">Prevent the app from launching successfully because of the exception.</span></span>

<span data-ttu-id="177ba-259">她接著拒絕 Bob 在自己的使用者帳戶下啟動應用程式的能力。</span><span class="sxs-lookup"><span data-stu-id="177ba-259">She has then denied Bob the ability to launch the app under his own user account.</span></span>

#### <a name="information-disclosure"></a><span data-ttu-id="177ba-260">資訊洩漏</span><span class="sxs-lookup"><span data-stu-id="177ba-260">Information disclosure</span></span>

<span data-ttu-id="177ba-261">當 Mallory 可以誘騙 Bob 洩漏 Mallory 通常無法存取的檔案內容時，就會發生__資訊洩漏__攻擊。</span><span class="sxs-lookup"><span data-stu-id="177ba-261">An __information disclosure__ attack occurs when Mallory can trick Bob into disclosing the contents of a file that Mallory does not normally have access to.</span></span> <span data-ttu-id="177ba-262">請考慮 Bob 有一個*C:\Users\Bob\secret.txt* Mallory 想要讀取的秘密檔。</span><span class="sxs-lookup"><span data-stu-id="177ba-262">Consider that Bob has a secret file *C:\Users\Bob\secret.txt* that Mallory wants to read.</span></span> <span data-ttu-id="177ba-263">她知道這個檔案的路徑，但她無法讀取它，因為 Windows 禁止她取得 Bob 的使用者設定檔目錄的存取權。</span><span class="sxs-lookup"><span data-stu-id="177ba-263">She knows the path to this file, but she cannot read it because Windows forbids her from gaining access to Bob's user profile directory.</span></span>

<span data-ttu-id="177ba-264">相反地，Mallory 會將硬式連結放入全電腦存放區。</span><span class="sxs-lookup"><span data-stu-id="177ba-264">Instead, Mallory places a hard link into the machine-wide store.</span></span> <span data-ttu-id="177ba-265">這是一種特殊的檔案，本身並不包含任何內容，而是指向磁片上的另一個檔案。</span><span class="sxs-lookup"><span data-stu-id="177ba-265">This is a special kind of file that itself does not contain any contents, rather, it points to another file on disk.</span></span> <span data-ttu-id="177ba-266">嘗試讀取永久連結檔案，會改為讀取連結的目標檔案內容。</span><span class="sxs-lookup"><span data-stu-id="177ba-266">Attempting to read the hard link file will instead read the contents of the file targeted by the link.</span></span> <span data-ttu-id="177ba-267">建立永久連結之後，Mallory 仍無法讀取檔案內容，因為她無法存取連結的目標（ `C:\Users\Bob\secret.txt` ）。</span><span class="sxs-lookup"><span data-stu-id="177ba-267">After creating the hard link, Mallory still cannot read the file contents because she does not have access to the target (`C:\Users\Bob\secret.txt`) of the link.</span></span> <span data-ttu-id="177ba-268">不過 _，Bob 可以_存取此檔案。</span><span class="sxs-lookup"><span data-stu-id="177ba-268">However, Bob _does_ have access to this file.</span></span>

<span data-ttu-id="177ba-269">當 Bob 的應用程式從整部電腦的存放區讀取時，它現在會不小心讀取檔案的內容 `secret.txt` ，就像檔案本身已經存在於整部電腦的存放區一樣。</span><span class="sxs-lookup"><span data-stu-id="177ba-269">When Bob's app reads from the machine-wide store, it now inadvertently reads the contents of his `secret.txt` file, just as if the file itself had been present in the machine-wide store.</span></span> <span data-ttu-id="177ba-270">當 Bob 的應用程式結束時，如果嘗試將檔案重新儲存到整部電腦的存放區，最後會將檔案的實際複本放在 \* C:\ProgramData\IsolatedStorage 目錄中 \* 。</span><span class="sxs-lookup"><span data-stu-id="177ba-270">When Bob's app exits, if it attempts to resave the file to the machine-wide store, it will end up placing an actual copy of the file in the \*C:\ProgramData\IsolatedStorage\* directory.</span></span> <span data-ttu-id="177ba-271">由於此目錄可由電腦上的任何使用者讀取，因此 Mallory 現在可以讀取檔案的內容。</span><span class="sxs-lookup"><span data-stu-id="177ba-271">Since this directory is readable by any user on the machine, Mallory can now read the contents of the file.</span></span>

### <a name="best-practices-to-defend-against-these-attacks"></a><span data-ttu-id="177ba-272">防禦這些攻擊的最佳作法</span><span class="sxs-lookup"><span data-stu-id="177ba-272">Best practices to defend against these attacks</span></span>

<span data-ttu-id="177ba-273">__重要事項：__ 如果您的環境有多個相互不受信任的使用者，__請勿__呼叫 API 或叫用 `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` 工具 `storeadm.exe /machine /list` 。</span><span class="sxs-lookup"><span data-stu-id="177ba-273">__Important:__ If your environment has multiple mutually untrusted users, __do not__ call the API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` or invoke the tool `storeadm.exe /machine /list`.</span></span> <span data-ttu-id="177ba-274">這兩個都假設它們是在受信任的資料上運作。</span><span class="sxs-lookup"><span data-stu-id="177ba-274">Both of these assume that they're operating on trusted data.</span></span> <span data-ttu-id="177ba-275">如果攻擊者可以植入整部電腦存放區中的惡意承載，該承載可能會在執行這些命令的使用者內容下導致權限提高攻擊。</span><span class="sxs-lookup"><span data-stu-id="177ba-275">If an attacker can seed a malicious payload in the machine-wide store, that payload can lead to an elevation of privilege attack under the context of the user who runs these commands.</span></span>

<span data-ttu-id="177ba-276">如果是在多使用者環境中操作，請重新考慮使用以_電腦_範圍為目標的隔離儲存功能。</span><span class="sxs-lookup"><span data-stu-id="177ba-276">If operating in a multi-user environment, reconsider use of isolated storage features which target the _Machine_ scope.</span></span> <span data-ttu-id="177ba-277">如果應用程式必須從電腦範圍的位置讀取資料，則偏好從只能由系統管理員帳戶寫入的位置讀取資料。</span><span class="sxs-lookup"><span data-stu-id="177ba-277">If an app must read data from a machine-wide location, prefer to read the data from a location that are writable only by admin accounts.</span></span> <span data-ttu-id="177ba-278">`%PROGRAMFILES%`目錄和登錄區 `HKLM` 是只有系統管理員可寫入，而且每個人都可讀取的位置範例。</span><span class="sxs-lookup"><span data-stu-id="177ba-278">The `%PROGRAMFILES%` directory and the `HKLM` registry hive are examples of locations which are writable by only administrators and readable by everyone.</span></span> <span data-ttu-id="177ba-279">因此，從這些位置讀取的資料會被視為值得信任。</span><span class="sxs-lookup"><span data-stu-id="177ba-279">Data read from those locations is therefore considered trustworthy.</span></span>

<span data-ttu-id="177ba-280">如果應用程式必須在多使用者環境中使用_電腦_範圍，請驗證您從整部電腦存放區讀取之任何檔案的內容。</span><span class="sxs-lookup"><span data-stu-id="177ba-280">If an app must use the _Machine_ scope in a multi-user environment, validate the contents of any file that you read from the machine-wide store.</span></span> <span data-ttu-id="177ba-281">如果應用程式從這些檔案還原序列化物件圖形，請考慮使用更安全的序列化程式，例如， `XmlSerializer` 而不是危險的序列化程式，例如 `BinaryFormatter` 或 `NetDataContractSerializer`</span><span class="sxs-lookup"><span data-stu-id="177ba-281">If the app deserializing object graphs from these files, consider using safer serializers like `XmlSerializer` instead of dangerous serializers like `BinaryFormatter` or `NetDataContractSerializer`.</span></span> <span data-ttu-id="177ba-282">請小心使用深度嵌套物件圖形或物件圖形，以根據檔案內容執行資源分配。</span><span class="sxs-lookup"><span data-stu-id="177ba-282">Use caution with deeply nested object graphs or object graphs which perform resource allocation based on the file contents.</span></span>

<a name="isolated_storage_locations"></a>

## <a name="isolated-storage-locations"></a><span data-ttu-id="177ba-283">隔離儲存區位置</span><span class="sxs-lookup"><span data-stu-id="177ba-283">Isolated Storage Locations</span></span>

<span data-ttu-id="177ba-284">有時候，使用作業系統的檔案系統來驗證隔離儲存區的變更，很有用處。</span><span class="sxs-lookup"><span data-stu-id="177ba-284">Sometimes it is helpful to verify a change to isolated storage by using the file system of the operating system.</span></span> <span data-ttu-id="177ba-285">您可能也想要知道隔離儲存區檔案的位置。</span><span class="sxs-lookup"><span data-stu-id="177ba-285">You might also want to know the location of isolated storage files.</span></span> <span data-ttu-id="177ba-286">這個位置依作業系統而不同。</span><span class="sxs-lookup"><span data-stu-id="177ba-286">This location is different depending on the operating system.</span></span> <span data-ttu-id="177ba-287">下表顯示在幾個一般作業系統上建立隔離儲存區所在的根 (Root) 位置。</span><span class="sxs-lookup"><span data-stu-id="177ba-287">The following table shows the root locations where isolated storage is created on a few common operating systems.</span></span> <span data-ttu-id="177ba-288">尋找這個根位置下的 Microsoft\IsolatedStorage 目錄。</span><span class="sxs-lookup"><span data-stu-id="177ba-288">Look for Microsoft\IsolatedStorage directories under this root location.</span></span> <span data-ttu-id="177ba-289">您必須變更資料夾設定值來顯示隱藏的檔案和資料夾，以便可以在檔案系統中看到隔離儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-289">You must change folder settings to show hidden files and folders in order to see isolated storage in the file system.</span></span>

|<span data-ttu-id="177ba-290">作業系統</span><span class="sxs-lookup"><span data-stu-id="177ba-290">Operating system</span></span>|<span data-ttu-id="177ba-291">檔案系統中的位置</span><span class="sxs-lookup"><span data-stu-id="177ba-291">Location in file system</span></span>|
|----------------------|-----------------------------|
|<span data-ttu-id="177ba-292">Windows 2000、Windows XP、Windows Server 2003 (從 Windows NT 4.0 升級)</span><span class="sxs-lookup"><span data-stu-id="177ba-292">Windows 2000, Windows XP, Windows Server 2003  (upgrade from Windows NT 4.0)</span></span>|<span data-ttu-id="177ba-293">啟用漫遊的存放區 =</span><span class="sxs-lookup"><span data-stu-id="177ba-293">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="177ba-294">\<SYSTEMROOT>\Profiles \\<使用者 \> \Application 資料</span><span class="sxs-lookup"><span data-stu-id="177ba-294">\<SYSTEMROOT>\Profiles\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="177ba-295">非漫遊存放區 =</span><span class="sxs-lookup"><span data-stu-id="177ba-295">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="177ba-296">\<SYSTEMROOT>\Profiles \\<使用者 \> \Local Settings\Application 資料</span><span class="sxs-lookup"><span data-stu-id="177ba-296">\<SYSTEMROOT>\Profiles\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="177ba-297">Windows 2000 - 全新安裝 (以及從 Windows 98 和 Windows NT 3.51 升級)</span><span class="sxs-lookup"><span data-stu-id="177ba-297">Windows 2000  - clean installation (and upgrades from Windows 98 and Windows NT 3.51)</span></span>|<span data-ttu-id="177ba-298">啟用漫遊的存放區 =</span><span class="sxs-lookup"><span data-stu-id="177ba-298">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="177ba-299">\<SYSTEMDRIVE>\Documents 和設定 \\<使用者 \> \Application 資料</span><span class="sxs-lookup"><span data-stu-id="177ba-299">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="177ba-300">非漫遊存放區 =</span><span class="sxs-lookup"><span data-stu-id="177ba-300">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="177ba-301">\<SYSTEMDRIVE>\Documents 和設定 \\<使用者 \> \Local Settings\Application 資料</span><span class="sxs-lookup"><span data-stu-id="177ba-301">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="177ba-302">Windows XP、Windows Server 2003 - 全新安裝 (以及從 Windows 2000 和 Windows 98 升級)</span><span class="sxs-lookup"><span data-stu-id="177ba-302">Windows XP, Windows Server 2003 - clean installation (and upgrades from Windows 2000 and Windows 98)</span></span>|<span data-ttu-id="177ba-303">啟用漫遊的存放區 =</span><span class="sxs-lookup"><span data-stu-id="177ba-303">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="177ba-304">\<SYSTEMDRIVE>\Documents 和設定 \\<使用者 \> \Application 資料</span><span class="sxs-lookup"><span data-stu-id="177ba-304">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="177ba-305">非漫遊存放區 =</span><span class="sxs-lookup"><span data-stu-id="177ba-305">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="177ba-306">\<SYSTEMDRIVE>\Documents 和設定 \\<使用者 \> \Local Settings\Application 資料</span><span class="sxs-lookup"><span data-stu-id="177ba-306">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="177ba-307">Windows 8、Windows 7、Windows Server 2008、Windows Vista</span><span class="sxs-lookup"><span data-stu-id="177ba-307">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span></span>|<span data-ttu-id="177ba-308">啟用漫遊的存放區 =</span><span class="sxs-lookup"><span data-stu-id="177ba-308">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="177ba-309">\<SYSTEMDRIVE>\Users \\<使用者 \> \AppData\Roaming</span><span class="sxs-lookup"><span data-stu-id="177ba-309">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Roaming</span></span><br /><br /> <span data-ttu-id="177ba-310">非漫遊存放區 =</span><span class="sxs-lookup"><span data-stu-id="177ba-310">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="177ba-311">\<SYSTEMDRIVE>\Users \\<使用者 \> \AppData\Local</span><span class="sxs-lookup"><span data-stu-id="177ba-311">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Local</span></span>|

<a name="isolated_storage_tasks"></a>

## <a name="creating-enumerating-and-deleting-isolated-storage"></a><span data-ttu-id="177ba-312">建立、列舉和刪除隔離儲存區</span><span class="sxs-lookup"><span data-stu-id="177ba-312">Creating, Enumerating, and Deleting Isolated Storage</span></span>

<span data-ttu-id="177ba-313">.NET Framework 提供 <xref:System.IO.IsolatedStorage> 命名空間中的三個類別，可協助您執行包含隔離儲存區的工作：</span><span class="sxs-lookup"><span data-stu-id="177ba-313">The .NET Framework provides three classes in the <xref:System.IO.IsolatedStorage> namespace to help you perform tasks that involve isolated storage:</span></span>

- <span data-ttu-id="177ba-314"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>衍生自 <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> ，並提供儲存的組件和應用程式檔案的基本管理。</span><span class="sxs-lookup"><span data-stu-id="177ba-314"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>, derives from <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> and provides basic management of stored assembly and application files.</span></span> <span data-ttu-id="177ba-315"><xref:System.IO.IsolatedStorage.IsolatedStorageFile> 類別的執行個體代表位於檔案系統中的單一存放區。</span><span class="sxs-lookup"><span data-stu-id="177ba-315">An instance of the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class represents a single store located in the file system.</span></span>

- <span data-ttu-id="177ba-316"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> 衍生自 <xref:System.IO.FileStream?displayProperty=nameWithType> ，並提供對存放區中檔案的存取。</span><span class="sxs-lookup"><span data-stu-id="177ba-316"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> derives from <xref:System.IO.FileStream?displayProperty=nameWithType> and provides access to the files in a store.</span></span>

- <span data-ttu-id="177ba-317"><xref:System.IO.IsolatedStorage.IsolatedStorageScope> 為列舉類型，讓您能夠建立和選取適當隔離類型的存放區。</span><span class="sxs-lookup"><span data-stu-id="177ba-317"><xref:System.IO.IsolatedStorage.IsolatedStorageScope> is an enumeration that enables you to create and select a store with the appropriate isolation type.</span></span>

<span data-ttu-id="177ba-318">隔離儲存區類別允許您建立、列舉和刪除隔離儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-318">The isolated storage classes enable you to create, enumerate, and delete isolated storage.</span></span> <span data-ttu-id="177ba-319">您可以透過 <xref:System.IO.IsolatedStorage.IsolatedStorageFile> 物件使用執行這些工作的方法。</span><span class="sxs-lookup"><span data-stu-id="177ba-319">The methods for performing these tasks are available through the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object.</span></span> <span data-ttu-id="177ba-320">某些作業會要求您擁有代表管理隔離儲存區權限的 <xref:System.Security.Permissions.IsolatedStorageFilePermission> 權限，您可能也需要擁有作業系統權限才能存取檔案或目錄。</span><span class="sxs-lookup"><span data-stu-id="177ba-320">Some operations require you to have the <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission that represents the right to administer isolated storage; you might also need to have operating system rights to access the file or directory.</span></span>

<span data-ttu-id="177ba-321">如需示範常見隔離儲存區工作的一系列範例，請參閱[相關主題](#related_topics)中所列的「如何」主題。</span><span class="sxs-lookup"><span data-stu-id="177ba-321">For a series of examples that demonstrate common isolated storage tasks, see the how-to topics listed in [Related Topics](#related_topics).</span></span>

<a name="scenarios_for_isolated_storage"></a>

## <a name="scenarios-for-isolated-storage"></a><span data-ttu-id="177ba-322">隔離儲存區的案例</span><span class="sxs-lookup"><span data-stu-id="177ba-322">Scenarios for Isolated Storage</span></span>

<span data-ttu-id="177ba-323">在許多情況下隔離儲存區非常實用，包括下列四種情境：</span><span class="sxs-lookup"><span data-stu-id="177ba-323">Isolated storage is useful in many situations, including these four scenarios:</span></span>

- <span data-ttu-id="177ba-324">下載的控制項。</span><span class="sxs-lookup"><span data-stu-id="177ba-324">Downloaded controls.</span></span> <span data-ttu-id="177ba-325">從網際網路下載的 Managed 程式碼控制項不允許透過一般 I/O 類別寫入硬碟，但它們可以使用隔離儲存區保存 (Persist) 使用者的設定值和應用程式狀態。</span><span class="sxs-lookup"><span data-stu-id="177ba-325">Managed code controls downloaded from the Internet are not allowed to write to the hard drive through normal I/O classes, but they can use isolated storage to persist users' settings and application states.</span></span>

- <span data-ttu-id="177ba-326">共用的元件儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-326">Shared component storage.</span></span> <span data-ttu-id="177ba-327">應用程式之間共用的元件可以使用隔離儲存區以提供對資料存放區的控制存取。</span><span class="sxs-lookup"><span data-stu-id="177ba-327">Components that are shared between applications can use isolated storage to provide controlled access to data stores.</span></span>

- <span data-ttu-id="177ba-328">伺服器儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-328">Server storage.</span></span> <span data-ttu-id="177ba-329">伺服器應用程式可以使用隔離儲存區，提供個別存放區給向應用程式產生要求的大量使用者。</span><span class="sxs-lookup"><span data-stu-id="177ba-329">Server applications can use isolated storage to provide individual stores for a large number of users making requests to the application.</span></span> <span data-ttu-id="177ba-330">因為隔離儲存區一直根據使用者來分離，伺服器必須模擬提出要求的使用者。</span><span class="sxs-lookup"><span data-stu-id="177ba-330">Because isolated storage is always segregated by user, the server must impersonate the user making the request.</span></span> <span data-ttu-id="177ba-331">在這個狀況中，資料是根據主體的識別 (應用程式用以區別其使用者的相同識別) 來隔離。</span><span class="sxs-lookup"><span data-stu-id="177ba-331">In this case, data is isolated based on the identity of the principal, which is the same identity the application uses to distinguish between its users.</span></span>

- <span data-ttu-id="177ba-332">漫遊。</span><span class="sxs-lookup"><span data-stu-id="177ba-332">Roaming.</span></span> <span data-ttu-id="177ba-333">應用程式也可以根據漫遊使用者設定檔來使用隔離儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-333">Applications can also use isolated storage with roaming user profiles.</span></span> <span data-ttu-id="177ba-334">這允許使用者的隔離存放區隨著設定檔而漫遊。</span><span class="sxs-lookup"><span data-stu-id="177ba-334">This allows a user's isolated stores to roam with the profile.</span></span>

<span data-ttu-id="177ba-335">下列情況下不應該使用隔離儲存區：</span><span class="sxs-lookup"><span data-stu-id="177ba-335">You should not use isolated storage in the following situations:</span></span>

- <span data-ttu-id="177ba-336">存放具高度價值的機密，例如未加密的金鑰或密碼，因為隔離儲存區不能防範高度信任的程式碼、Unmanaged 程式碼或電腦的信任使用者。</span><span class="sxs-lookup"><span data-stu-id="177ba-336">To store high-value secrets, such as unencrypted keys or passwords, because isolated storage is not protected from highly trusted code, from unmanaged code, or from trusted users of the computer.</span></span>

- <span data-ttu-id="177ba-337">儲存程式碼。</span><span class="sxs-lookup"><span data-stu-id="177ba-337">To store code.</span></span>

- <span data-ttu-id="177ba-338">儲存系統管理員所控制的組態和部署設定。</span><span class="sxs-lookup"><span data-stu-id="177ba-338">To store configuration and deployment settings, which administrators control.</span></span> <span data-ttu-id="177ba-339">(使用者喜好不算是組態設定，因為系統管理員並不控制它們)。</span><span class="sxs-lookup"><span data-stu-id="177ba-339">(User preferences are not considered to be configuration settings because administrators do not control them.)</span></span>

<span data-ttu-id="177ba-340">許多應用程式使用資料庫來儲存並隔離資料，這種情況下，資料庫中可能有一個或多個資料列代表特定使用者的儲存區。</span><span class="sxs-lookup"><span data-stu-id="177ba-340">Many applications use a database to store and isolate data, in which case one or more rows in a database might represent storage for a specific user.</span></span> <span data-ttu-id="177ba-341">當使用者數目還小、使用資料庫的耗用很重大，或沒有資料庫設備存在時，您可以選擇使用隔離儲存區代替資料庫。</span><span class="sxs-lookup"><span data-stu-id="177ba-341">You might choose to use isolated storage instead of a database when the number of users is small, when the overhead of using a database is significant, or when no database facility exists.</span></span> <span data-ttu-id="177ba-342">同樣，當應用程式需要較資料庫資料列所提供更為彈性和複雜的儲存區時，隔離儲存區可以提供可行的替代方案。</span><span class="sxs-lookup"><span data-stu-id="177ba-342">Also, when the application requires storage that is more flexible and complex than what a row in a database provides, isolated storage can provide a viable alternative.</span></span>

<a name="related_topics"></a>

## <a name="related-topics"></a><span data-ttu-id="177ba-343">[相關主題]</span><span class="sxs-lookup"><span data-stu-id="177ba-343">Related Topics</span></span>

|<span data-ttu-id="177ba-344">Title</span><span class="sxs-lookup"><span data-stu-id="177ba-344">Title</span></span>|<span data-ttu-id="177ba-345">描述</span><span class="sxs-lookup"><span data-stu-id="177ba-345">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="177ba-346">隔離的類型</span><span class="sxs-lookup"><span data-stu-id="177ba-346">Types of Isolation</span></span>](types-of-isolation.md)|<span data-ttu-id="177ba-347">描述各種類型的隔離。</span><span class="sxs-lookup"><span data-stu-id="177ba-347">Describes the different types of isolation.</span></span>|
|[<span data-ttu-id="177ba-348">作法：取得隔離儲存區的存放區</span><span class="sxs-lookup"><span data-stu-id="177ba-348">How to: Obtain Stores for Isolated Storage</span></span>](how-to-obtain-stores-for-isolated-storage.md)|<span data-ttu-id="177ba-349">提供使用 <xref:System.IO.IsolatedStorage.IsolatedStorageFile> 類別的範例，示範如何使用它來取得使用者和組件所隔離的存放區。</span><span class="sxs-lookup"><span data-stu-id="177ba-349">Provides an example of using the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class to obtain a store isolated by user and assembly.</span></span>|
|[<span data-ttu-id="177ba-350">作法：列舉隔離儲存區的存放區</span><span class="sxs-lookup"><span data-stu-id="177ba-350">How to: Enumerate Stores for Isolated Storage</span></span>](how-to-enumerate-stores-for-isolated-storage.md)|<span data-ttu-id="177ba-351">示範如何使用 <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> 方法來計算使用者之所有隔離儲存區的大小。</span><span class="sxs-lookup"><span data-stu-id="177ba-351">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> method to calculate the size of all isolated storage for the user.</span></span>|
|[<span data-ttu-id="177ba-352">作法：刪除隔離儲存區中的存放區</span><span class="sxs-lookup"><span data-stu-id="177ba-352">How to: Delete Stores in Isolated Storage</span></span>](how-to-delete-stores-in-isolated-storage.md)|<span data-ttu-id="177ba-353">示範如何使用 <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> 方法，以兩種不同的方式刪除隔離存放區。</span><span class="sxs-lookup"><span data-stu-id="177ba-353">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> method in two different ways to delete isolated stores.</span></span>|
|[<span data-ttu-id="177ba-354">作法：預期隔離儲存區發生空間不足的情況</span><span class="sxs-lookup"><span data-stu-id="177ba-354">How to: Anticipate Out-of-Space Conditions with Isolated Storage</span></span>](how-to-anticipate-out-of-space-conditions-with-isolated-storage.md)|<span data-ttu-id="177ba-355">示範如何測量隔離存放區內的剩餘空間。</span><span class="sxs-lookup"><span data-stu-id="177ba-355">Shows how to measure the remaining space in an isolated store.</span></span>|
|[<span data-ttu-id="177ba-356">作法：在隔離儲存區中建立檔案和目錄</span><span class="sxs-lookup"><span data-stu-id="177ba-356">How to: Create Files and Directories in Isolated Storage</span></span>](how-to-create-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="177ba-357">提供一些在隔離存放區中建立檔案和目錄的範例。</span><span class="sxs-lookup"><span data-stu-id="177ba-357">Provides some examples of creating files and directories in an isolated store.</span></span>|
|[<span data-ttu-id="177ba-358">作法：尋找隔離儲存區中的現有檔案和目錄</span><span class="sxs-lookup"><span data-stu-id="177ba-358">How to: Find Existing Files and Directories in Isolated Storage</span></span>](how-to-find-existing-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="177ba-359">示範如何在隔離儲存區中讀取目錄結構和檔案。</span><span class="sxs-lookup"><span data-stu-id="177ba-359">Demonstrates how to read the directory structure and files in isolated storage.</span></span>|
|[<span data-ttu-id="177ba-360">作法：讀取和寫入隔離儲存區中的檔案</span><span class="sxs-lookup"><span data-stu-id="177ba-360">How to: Read and Write to Files in Isolated Storage</span></span>](how-to-read-and-write-to-files-in-isolated-storage.md)|<span data-ttu-id="177ba-361">提供將字串寫入至隔離儲存區檔案並將它讀回的範例。</span><span class="sxs-lookup"><span data-stu-id="177ba-361">Provides an example of writing a string to an isolated storage file and reading it back.</span></span>|
|[<span data-ttu-id="177ba-362">作法：刪除隔離儲存區中的檔案和目錄</span><span class="sxs-lookup"><span data-stu-id="177ba-362">How to: Delete Files and Directories in Isolated Storage</span></span>](how-to-delete-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="177ba-363">示範如何刪除隔離儲存區的檔案和目錄。</span><span class="sxs-lookup"><span data-stu-id="177ba-363">Demonstrates how to delete isolated storage files and directories.</span></span>|
|[<span data-ttu-id="177ba-364">檔案和資料流程 i/o</span><span class="sxs-lookup"><span data-stu-id="177ba-364">File and Stream I/O</span></span>](index.md)|<span data-ttu-id="177ba-365">說明如何執行同步和非同步檔案及資料流存取。</span><span class="sxs-lookup"><span data-stu-id="177ba-365">Explains how you can perform synchronous and asynchronous file and data stream access.</span></span>|

<a name="reference"></a>

## <a name="reference"></a><span data-ttu-id="177ba-366">參考</span><span class="sxs-lookup"><span data-stu-id="177ba-366">Reference</span></span>

- <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFile?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFileStream?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageScope?displayProperty=nameWithType>
