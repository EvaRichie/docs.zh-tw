---
title: 無伺服器架構-無伺服器應用程式
description: 探索無伺服器架構所支援的各種架構和應用程式，包括 web 應用程式、行動裝置和 IoT。
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: f7d80ce3957c2ad90a67ae6ba1fc2786af30fcc1
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/24/2020
ms.locfileid: "91171711"
---
# <a name="serverless-architecture"></a>無伺服器架構

使用 [無伺服器](https://azure.com/serverless) 架構的方法有很多種。 本章探討整合無伺服器的常見架構範例。 它也涵蓋可能造成額外挑戰的考慮，或在執行無伺服器時需要額外的考慮。 最後，提供數個設計範例來說明各種無伺服器的使用案例。

無伺服器主機通常會使用現有的容器型或 PaaS 層來管理無伺服器實例。 例如，Azure Functions 是以 [Azure App Service](/azure/app-service/)為基礎。 App Service 用來向外延展實例，並管理執行 Azure Functions 程式碼的執行時間。 針對以 Windows 為基礎的函式，主機會以 PaaS 的形式執行，並相應放大 .NET 執行時間。 針對以 Linux 為基礎的函式，主機會利用容器。

![Azure Functions 架構](./media/azure-functions-architecture.png)

Webjob 核心提供函數的執行內容。 語言執行時間會執行腳本、執行程式庫，並裝載目的語言的架構。 例如，Node.js 是用來執行 JavaScript 函式，而 .NET Framework 用來執行 c # 函數。 您將在本章稍後進一步瞭解語言和平臺選項。

某些專案可能會因為對無伺服器採取「全功能」方法而受益。 依賴微服務的應用程式可以使用無伺服器技術來執行所有微服務。 大部分的應用程式都是混合式，遵循多層式設計，並針對有意義的元件使用無伺服器，因為元件是模組化且可獨立擴充。 為了説明您瞭解這些案例，本節將逐步解說一些使用無伺服器的常見架構範例。

## <a name="full-serverless-back-end"></a>完整無伺服器後端

完整無伺服器後端適用于數種類型的案例，特別是在建立新的或「環保欄位」應用程式時。 使用 Api 的大型介面區的應用程式，可能會因為將每個 API 視為無伺服器函式而受益。 以微服務架構為基礎的應用程式是另一個可實作為完整無伺服器後端的範例。 微服務會透過各種不同的通訊協定彼此通訊。 特定案例包括：

- 以 API 為基礎的 SaaS 產品 (範例：財務支付處理器) 。
- 訊息驅動的應用程式 (範例：裝置監視解決方案) 。
- 著重于服務之間整合的應用程式 (範例：航空公司預約應用程式) 。
- 定期執行的進程 (範例：以計時器為基礎的資料庫清除) 。
- 著重于資料轉換的應用程式 (範例：檔案上傳) 所觸發的匯入。
- 將轉換和載入 (ETL) 處理常式。

本檔稍後會討論其他更具體的使用案例。

## <a name="monoliths-and-starving-the-beast"></a>是開化和 "starvation 怪獸"

常見的挑戰是將現有的整合型應用程式遷移至雲端。 最不具風險的方法是將「隨即轉移」完全放在虛擬機器上。 許多店偏好使用遷移作為將其程式碼基底現代化的機會。 實際的遷移方法稱為「starvation 怪獸」。 在此案例中，單體會以「原樣」遷移，以開始。 然後，會現代化選取的服務。 在某些情況下，服務的簽章與原始的相同：它只是以函式的形式裝載。 用戶端會更新為使用新的服務，而不是單體端點。 在過渡期間，資料庫複寫等步驟可讓微服務裝載自己的儲存空間，即使單體仍在處理交易時也一樣。 最後，所有用戶端都會遷移至新的服務。 單體是「耗盡」 (不再) 呼叫其服務，除非已取代所有功能。 無伺服器和 proxy 的組合有助於進行大部分的遷移。

![無伺服器單體遷移](./media/serverless-monolith-migration.png)

若要深入瞭解這種方法，請觀看影片：將 [您的應用程式帶入無伺服器 Azure Functions 的雲端](https://channel9.msdn.com/Events/Connect/2017/E102)。

## <a name="web-apps"></a>Web 應用程式

Web apps 是無伺服器應用程式的絕佳候選項目。 現今的 web 應用程式有兩種常見的方法：伺服器驅動和用戶端導向的 (，例如單一頁面應用程式或 SPA) 。 伺服器導向的 web 應用程式通常會使用中介軟體層來發出 API 呼叫，以呈現 web UI。 SPA 應用程式會直接從瀏覽器進行 REST API 的呼叫。 在這兩種情況下，無伺服器可以提供必要的商務邏輯來容納中介軟體或 REST API 要求。 常見的架構是建立輕量靜態網頁伺服器。 單一頁面應用程式 (SPA) 提供 HTML、CSS、JavaScript 和其他瀏覽器資產。 然後，web 應用程式會連接到微服務後端。

## <a name="mobile-back-ends"></a>行動後端

無伺服器應用程式的事件驅動典範讓它們成為行動後端的理想選擇。 行動裝置會觸發事件，並執行無伺服器程式碼來滿足要求。 利用無伺服器模型可讓開發人員增強商務邏輯，而不需要部署完整的應用程式更新。 無伺服器方法也可讓小組共用端點和平行工作。

行動開發人員可以建立商務邏輯，而不會成為伺服器端的專家。 傳統上，連接到內部部署服務的 mobile apps。 建立所需的服務層級，以瞭解伺服器平臺和程式設計範例。 開發人員會使用作業來布建伺服器，並適當地進行設定。 有時會花幾天甚至數周的時間來建立部署管線。 所有這些挑戰都是由無伺服器來解決。

無伺服器會將伺服器端相依性抽象化，讓開發人員能夠專注于商務邏輯。 例如，使用 JavaScript 架構來建立應用程式的行動開發人員也可以使用 JavaScript 建立無伺服器功能。 無伺服器主機管理作業系統、裝載程式碼的 Node.js 實例、封裝相依性等等。 開發人員會提供一組簡單的輸入，以及用於輸出的標準範本。 然後，他們可以專注于建立和測試商務邏輯。 因此，他們可以使用現有的技能來建立行動應用程式的後端邏輯，而不需要學習新的平臺或成為「伺服器端開發人員」。

![無伺服器行動後端](./media/serverless-mobile-backend.png)

大部分的雲端提供者都提供以行動為基礎的無伺服器產品，可簡化整個行動開發生命週期。 這些產品可能會自動布建資料庫來保存資料、處理 DevOps 的考慮、提供雲端式組建和測試架構，以及使用開發人員慣用的語言編寫商務程式腳本的能力。 遵循以行動為中心的無伺服器方法，可以簡化此程式。 無伺服器為行動後端的布建、設定及維護伺服器，免除了極大的負擔。

## <a name="internet-of-things-iot"></a>物聯網 (IoT)

IoT 指的是將網路連線在一起的實體物件。 它們有時稱為「連線裝置」或「智慧型裝置」。 車輛和自動販賣電腦的所有專案都可以連線，並將資訊從清查到感應器資料（例如溫度和濕度）傳送。 在企業中，IoT 透過監視和自動化來供應商務程式改進。 IoT 資料可用來管制大型倉儲中的氣候，或透過供應鏈來追蹤清查。 IoT 可以感知化學，並在偵測到冒煙時呼叫消防部門。

大量的裝置和資訊通常會指定事件驅動架構來路由傳送和處理訊息。 無伺服器是很理想的解決方案，原因如下：

- 可在裝置數量和資料增加時進行調整。
- 加入新的端點以支援新的裝置和感應器。
- 促進獨立的版本控制，讓開發人員可以更新特定裝置的商務邏輯，而不需部署整個系統。
- 復原和較少的停機時間。

IoT 的普及率導致數個無伺服器產品，特別著重于 IoT 考慮，例如 [Azure IoT 中樞](/azure/iot-hub)。 無伺服器自動化工作，例如裝置註冊、原則強制執行、追蹤，甚至是將程式碼部署到 *邊緣的*裝置。 邊緣指的是連線到網際網路（但不是使用中的）的裝置（例如感應器和傳動器）。

>[!div class="step-by-step"]
>[上一個](architecture-approaches.md) 
>[下一步](serverless-architecture-considerations.md)
