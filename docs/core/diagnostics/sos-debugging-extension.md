---
title: 適用于 .NET 的 SOS 偵錯工具擴充功能
description: 瞭解適用于 .NET 的 SOS 偵錯工具擴充功能，其提供內部 CLR 環境的相關資訊。
ms.date: 12/21/2020
helpviewer_keywords:
- debugging extensions
- SOS debugging extensions
- SOS.dll
ms.openlocfilehash: a24b946c4ffda59e17f61c065d2846dc1a6effe0
ms.sourcegitcommit: c0b803bffaf101e12f071faf94ca21b46d04ff30
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/24/2020
ms.locfileid: "97764964"
---
# <a name="sos-debugging-extension"></a><span data-ttu-id="4d180-103">SOS 調試延伸模組</span><span class="sxs-lookup"><span data-stu-id="4d180-103">SOS debugging extension</span></span>

<span data-ttu-id="4d180-104">SOS 偵錯工具擴充功能可讓您在即時程式和傾印上，查看在 .NET Core 執行時間內執行之程式碼的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-104">The SOS Debugging Extension lets you view information about code that is running inside the .NET Core runtime, both on live processes and dumps.</span></span> <span data-ttu-id="4d180-105">此擴充功能會預先安裝 [dotnet](dotnet-dump.md) 傾印和 [Windbg/dbg](/windows-hardware/drivers/debugger/debugger-download-tools)，並且可以 [下載](dotnet-sos.md) 以搭配 LLDB 使用。</span><span class="sxs-lookup"><span data-stu-id="4d180-105">The extension is preinstalled with [dotnet-dump](dotnet-dump.md) and [Windbg/dbg](/windows-hardware/drivers/debugger/debugger-download-tools), and can be [downloaded](dotnet-sos.md) for use with LLDB.</span></span>  <span data-ttu-id="4d180-106">SOS 偵錯工具擴充功能適合用來收集 managed 堆積的相關資訊、尋找堆積損毀、顯示執行時間所使用的內部資料類型，以及查看執行時間內執行之所有 managed 程式碼的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-106">The SOS Debugging Extension is useful for collecting information about the managed heap, looking for heap corruptions, displaying internal data types used by the runtime, and viewing information about all managed code running inside the runtime.</span></span>

## <a name="syntax"></a><span data-ttu-id="4d180-107">語法</span><span class="sxs-lookup"><span data-stu-id="4d180-107">Syntax</span></span>

### <a name="windows"></a><span data-ttu-id="4d180-108">Windows</span><span class="sxs-lookup"><span data-stu-id="4d180-108">Windows</span></span>

`![command] [options]`

### <a name="linux-and-macos"></a><span data-ttu-id="4d180-109">Linux 與 macOS</span><span class="sxs-lookup"><span data-stu-id="4d180-109">Linux and macOS</span></span>

`sos [command] [options]`

<span data-ttu-id="4d180-110">許多命令在 lldb 底下都有別名或快捷方式：</span><span class="sxs-lookup"><span data-stu-id="4d180-110">Many of the commands have aliases or shortcuts under lldb:</span></span>

`clrstack [options]`

## <a name="commands"></a><span data-ttu-id="4d180-111">命令</span><span class="sxs-lookup"><span data-stu-id="4d180-111">Commands</span></span>

<span data-ttu-id="4d180-112">下列命令表格也可在 [說明] **或** [ **soshelp**] 底下取得。</span><span class="sxs-lookup"><span data-stu-id="4d180-112">The following table of commands is also available under **Help** or **soshelp**.</span></span>  <span data-ttu-id="4d180-113">您可以使用個別的命令說明 `soshelp <command>` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-113">Individual command help is available using `soshelp <command>`.</span></span>

|<span data-ttu-id="4d180-114">命令</span><span class="sxs-lookup"><span data-stu-id="4d180-114">Command</span></span>|<span data-ttu-id="4d180-115">描述</span><span class="sxs-lookup"><span data-stu-id="4d180-115">Description</span></span>|
|-------------|-----------------|
|<span data-ttu-id="4d180-116">**bpmd** [**-nofuturemodule**] [ \<*module name*> \<*method name*> ] [**-md**  < `MethodDesc`>] **-list** **-clear** \<*pending breakpoint number*> **->-clearall**</span><span class="sxs-lookup"><span data-stu-id="4d180-116">**bpmd** [**-nofuturemodule**] [\<*module name*> \<*method name*>] [**-md** <`MethodDesc`>] **-list** **-clear** \<*pending breakpoint number*> **-clearall**</span></span>|<span data-ttu-id="4d180-117">在所指定模組中的指定方法上建立中斷點。</span><span class="sxs-lookup"><span data-stu-id="4d180-117">Creates a breakpoint at the specified method in the specified module.</span></span><br /><br /> <span data-ttu-id="4d180-118">如果指定的模組和方法尚未載入，這個命令便會在建立中斷點之前，等待已載入模組和已完成 Just-in-Time (JIT) 編譯的通知。</span><span class="sxs-lookup"><span data-stu-id="4d180-118">If the specified module and method have not been loaded, this command waits for a notification that the module was loaded and just-in-time (JIT) compiled before creating a breakpoint.</span></span><br /><br /> <span data-ttu-id="4d180-119">您可以使用 **-list**、**-clear** 和 **-clearall** 選項來管理暫止中斷點的清單：</span><span class="sxs-lookup"><span data-stu-id="4d180-119">You can manage the list of pending breakpoints by using the **-list**, **-clear**, and **-clearall** options:</span></span><br /><br /> <span data-ttu-id="4d180-120">**-list** 選項會產生所有暫止中斷點的清單。</span><span class="sxs-lookup"><span data-stu-id="4d180-120">The **-list** option generates a list of all the pending breakpoints.</span></span> <span data-ttu-id="4d180-121">如果暫止中斷點具有非零的模組 ID，就是該特殊載入模組中函式的特定中斷點。</span><span class="sxs-lookup"><span data-stu-id="4d180-121">If a pending breakpoint has a non-zero module ID, that breakpoint is specific to a function in that particular loaded module.</span></span> <span data-ttu-id="4d180-122">如果暫止中斷點具有零模組 ID，該中斷點就會套用至尚未載入的模組。</span><span class="sxs-lookup"><span data-stu-id="4d180-122">If the pending breakpoint has a zero module ID, that breakpoint applies to modules that have not yet been loaded.</span></span><br /><br /> <span data-ttu-id="4d180-123">使用 **-clear** 或 **-clearall** 選項可從清單中移除暫止中斷點。</span><span class="sxs-lookup"><span data-stu-id="4d180-123">Use the **-clear** or **-clearall** option to remove pending breakpoints from the list.</span></span>|
|<span data-ttu-id="4d180-124">**>clrstack** [**-a**] [**-l**] [**-p**] [**-n**] [**-f**] [**-r**] [**-all**]</span><span class="sxs-lookup"><span data-stu-id="4d180-124">**CLRStack** [**-a**] [**-l**] [**-p**] [**-n**] [**-f**] [**-r**] [**-all**]</span></span>|<span data-ttu-id="4d180-125">僅提供 Managed 程式碼的堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="4d180-125">Provides a stack trace of managed code only.</span></span><br /><br /> <span data-ttu-id="4d180-126">**-p** 選項會顯示 Managed 函式的引數。</span><span class="sxs-lookup"><span data-stu-id="4d180-126">The **-p** option shows arguments to the managed function.</span></span><br /><br /> <span data-ttu-id="4d180-127">**-l** 選項會顯示框架中區域變數的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-127">The **-l** option shows information on local variables in a frame.</span></span> <span data-ttu-id="4d180-128">SOS 偵錯工具擴充功能無法取出區功能變數名稱稱，因此區功能變數名稱稱的輸出格式為 \<*local address*> **=** \<*value*> 。</span><span class="sxs-lookup"><span data-stu-id="4d180-128">The SOS Debugging Extension cannot retrieve local names, so the output for local names is in the format \<*local address*> **=** \<*value*>.</span></span><br /><br /> <span data-ttu-id="4d180-129">**-A** 選項是 **-l** 和 **-p** 組合的快捷方式。</span><span class="sxs-lookup"><span data-stu-id="4d180-129">The **-a** option is a shortcut for **-l** and **-p** combined.</span></span><br /><br /> <span data-ttu-id="4d180-130">**-n** 選項會停用原始程式檔名稱和行號的顯示。</span><span class="sxs-lookup"><span data-stu-id="4d180-130">The **-n** option disables the display of source file names and line numbers.</span></span> <span data-ttu-id="4d180-131">如果偵錯工具有指定 SYMOPT_LOAD_LINES 選項，SOS 將會查詢每個 Managed 框架的符號，而且如果成功，就會顯示對應的原始程式檔名稱和行號。</span><span class="sxs-lookup"><span data-stu-id="4d180-131">If the debugger has the option SYMOPT_LOAD_LINES specified, SOS will look up the symbols for every managed frame and if successful will display the corresponding source file name and line number.</span></span> <span data-ttu-id="4d180-132">指定 **-n** (沒有行號) 參數即可停用這種行為。</span><span class="sxs-lookup"><span data-stu-id="4d180-132">The **-n** (No line numbers) parameter can be specified to disable this behavior.</span></span><br /><br /><span data-ttu-id="4d180-133"> (full 模式) 的 **-f** 選項會顯示原生框架，混合使用 managed 框架以及 managed 框架的元件名稱和函式位移。</span><span class="sxs-lookup"><span data-stu-id="4d180-133">The **-f** option (full mode) displays the native frames intermixing them with the managed frames and the assembly name and function offset for the managed frames.</span></span>  <span data-ttu-id="4d180-134">搭配使用時，此選項不會顯示原生框架 `dotnet-dump` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-134">This option does not display native frames when used with `dotnet-dump`.</span></span><br /><br /><span data-ttu-id="4d180-135">**-R** 選項會傾印每個堆疊框架的暫存器。</span><span class="sxs-lookup"><span data-stu-id="4d180-135">The **-r** option dumps the registers for each stack frame.</span></span><br /><br /><span data-ttu-id="4d180-136">**-All** 選項會傾印所有 managed 執行緒的堆疊。</span><span class="sxs-lookup"><span data-stu-id="4d180-136">The **-all** option dumps all the managed threads' stacks.</span></span>|
|<span data-ttu-id="4d180-137">**COMState**</span><span class="sxs-lookup"><span data-stu-id="4d180-137">**COMState**</span></span>|<span data-ttu-id="4d180-138">列出每個執行緒和 `Context` 指標的 COM Apartment Model (如果有)。</span><span class="sxs-lookup"><span data-stu-id="4d180-138">Lists the COM apartment model for each thread and a `Context` pointer, if available.</span></span> <span data-ttu-id="4d180-139">只有在 Windows 上才支援這個命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-139">This command is only supported on Windows.</span></span>|
|<span data-ttu-id="4d180-140">**DumpArray** [**-start** \<*startIndex*> ] [**-length** \<*length*> ] [**-details**] [**-nofields**] \<*array object address*></span><span class="sxs-lookup"><span data-stu-id="4d180-140">**DumpArray** [**-start** \<*startIndex*>] [**-length** \<*length*>] [**-details**] [**-nofields**] \<*array object address*></span></span><br /><br /> <span data-ttu-id="4d180-141">-或-</span><span class="sxs-lookup"><span data-stu-id="4d180-141">-or-</span></span><br /><br /> <span data-ttu-id="4d180-142">**DA** [**-start** \<*startIndex*> ] [**-length** \<*length*> ] [**-detail**] [**-nofields**] *陣列物件位址*></span><span class="sxs-lookup"><span data-stu-id="4d180-142">**DA** [**-start** \<*startIndex*>] [**-length** \<*length*>] [**-detail**] [**-nofields**] *array object address*></span></span>|<span data-ttu-id="4d180-143">檢查陣列物件的元素。</span><span class="sxs-lookup"><span data-stu-id="4d180-143">Examines elements of an array object.</span></span><br /><br /> <span data-ttu-id="4d180-144">**-start** 選項會指定開始顯示項目的索引。</span><span class="sxs-lookup"><span data-stu-id="4d180-144">The **-start** option specifies the starting index at which to display elements.</span></span><br /><br /> <span data-ttu-id="4d180-145">**-length** 選項會指定要顯示多少項目。</span><span class="sxs-lookup"><span data-stu-id="4d180-145">The **-length** option specifies how many elements to show.</span></span><br /><br /> <span data-ttu-id="4d180-146">**-details** 選項會使用 **DumpObj** 和 **DumpVC** 格式來顯示項目的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="4d180-146">The **-details** option displays details of the element using the **DumpObj** and **DumpVC** formats.</span></span><br /><br /> <span data-ttu-id="4d180-147">**-nofields** 選項會防止陣列顯示。</span><span class="sxs-lookup"><span data-stu-id="4d180-147">The **-nofields** option prevents arrays from displaying.</span></span> <span data-ttu-id="4d180-148">這個選項只有在指定 **-detail** 選項時才能使用。</span><span class="sxs-lookup"><span data-stu-id="4d180-148">This option is available only when the **-detail** option is specified.</span></span>|
|<span data-ttu-id="4d180-149">**DumpAsync** (**DumpAsync**) [**-mt** \<*MethodTable address*> ] [**-type** \<*partial type name*> ] [**-等候**] [**-根目錄**]</span><span class="sxs-lookup"><span data-stu-id="4d180-149">**DumpAsync** (**dumpasync**) [**-mt** \<*MethodTable address*>] [**-type** \<*partial type name*>] [**-waiting**] [**-roots**]</span></span>|<span data-ttu-id="4d180-150">DumpAsync 會進行垃圾收集的堆積，尋找代表非同步狀態機器的物件（當非同步方法的狀態傳送到堆積時建立）。</span><span class="sxs-lookup"><span data-stu-id="4d180-150">DumpAsync traverses the garbage collected heap, looking for objects representing async state machines as created when an async method's state is transferred to the heap.</span></span>  <span data-ttu-id="4d180-151">此命令會辨識定義為、、 `async void` `async Task` `async Task<T>` 、和的 `async ValueTask` 非同步狀態機器 `async ValueTask<T>` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-151">This command recognizes async state machines defined as `async void`, `async Task`, `async Task<T>`, `async ValueTask`, and `async ValueTask<T>`.</span></span><br /><br /><span data-ttu-id="4d180-152">輸出中會包含每個找到的非同步狀態機器物件的詳細資料區塊。</span><span class="sxs-lookup"><span data-stu-id="4d180-152">The output includes a block of details for each async state machine object found.</span></span> <span data-ttu-id="4d180-153">這些詳細資料包括：</span><span class="sxs-lookup"><span data-stu-id="4d180-153">These details include:</span></span><br /><span data-ttu-id="4d180-154">-非同步狀態機器物件的型別行，包括其 MethodTable 位址、其物件位址、大小，以及其型別名稱。</span><span class="sxs-lookup"><span data-stu-id="4d180-154">- a line for the type of the async state machine object, including its MethodTable address, its object address, its size, and its type name.</span></span><br /><span data-ttu-id="4d180-155">-包含在物件中之狀態機器類型名稱的行。</span><span class="sxs-lookup"><span data-stu-id="4d180-155">- a line for the state machine type name as contained in the object.</span></span><br /><span data-ttu-id="4d180-156">-狀態機器上的每個欄位清單。</span><span class="sxs-lookup"><span data-stu-id="4d180-156">- a listing of each field on the state machine.</span></span><br /><span data-ttu-id="4d180-157">-此狀態機器物件的接續行（如果有一或多個已註冊）。</span><span class="sxs-lookup"><span data-stu-id="4d180-157">- a line for a continuation from this state machine object, if one or more has been registered.</span></span><br /><span data-ttu-id="4d180-158">-探索到這個非同步狀態機器物件的 GC 根。</span><span class="sxs-lookup"><span data-stu-id="4d180-158">- discovered GC roots for this async state machine object.</span></span><br />|
|<span data-ttu-id="4d180-159">**DumpAssembly**\<*assembly address*></span><span class="sxs-lookup"><span data-stu-id="4d180-159">**DumpAssembly** \<*assembly address*></span></span>|<span data-ttu-id="4d180-160">顯示關於組件的資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-160">Displays information about an assembly.</span></span><br /><br /> <span data-ttu-id="4d180-161">**DumpAssembly** 命令會列出多個模組 (如果這些模組存在)。</span><span class="sxs-lookup"><span data-stu-id="4d180-161">The **DumpAssembly** command lists multiple modules, if they exist.</span></span><br /><br /> <span data-ttu-id="4d180-162">您可以使用 **DumpDomain** 命令取得組件位址。</span><span class="sxs-lookup"><span data-stu-id="4d180-162">You can get an assembly address by using the **DumpDomain** command.</span></span>|
|<span data-ttu-id="4d180-163">**DumpClass**\<*EEClass address*></span><span class="sxs-lookup"><span data-stu-id="4d180-163">**DumpClass** \<*EEClass address*></span></span>|<span data-ttu-id="4d180-164">顯示與某個類型關聯之 `EEClass` 結構的資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-164">Displays information about the `EEClass` structure associated with a type.</span></span><br /><br /> <span data-ttu-id="4d180-165">**DumpClass** 命令會顯示靜態欄位值，但不會顯示非靜態欄位值。</span><span class="sxs-lookup"><span data-stu-id="4d180-165">The **DumpClass** command displays static field values but does not display nonstatic field values.</span></span><br /><br /> <span data-ttu-id="4d180-166">使用 **DumpMT**、**DumpObj**、**Name2EE** 或 **Token2EE** 命令，以取得 `EEClass` 結構位址。</span><span class="sxs-lookup"><span data-stu-id="4d180-166">Use the **DumpMT**, **DumpObj**, **Name2EE**, or **Token2EE** command to get an `EEClass` structure address.</span></span>|
|<span data-ttu-id="4d180-167">**>dumpdomain** [ \<*domain address*> ]</span><span class="sxs-lookup"><span data-stu-id="4d180-167">**DumpDomain** [\<*domain address*>]</span></span>|<span data-ttu-id="4d180-168">列舉載入於所指定 <xref:System.Reflection.Assembly> 物件位址內的每個 <xref:System.AppDomain> 物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-168">Enumerates each <xref:System.Reflection.Assembly> object that is loaded within the specified <xref:System.AppDomain> object address.</span></span>  <span data-ttu-id="4d180-169">當不使用參數進行呼叫時，**DumpDomain** 命令便會列出處理序中的所有 <xref:System.AppDomain> 物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-169">When called with no parameters, the **DumpDomain** command lists all <xref:System.AppDomain> objects in a process.</span></span> <span data-ttu-id="4d180-170">由於 .NET Core 只有一個 <xref:System.AppDomain> ，因此 **>dumpdomain** 只會傳回一個物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-170">Since .NET Core only has one <xref:System.AppDomain>, **DumpDomain** will only return one object.</span></span>|
|<span data-ttu-id="4d180-171">**DumpHeap** [**-stat**] [**-strings**] [**-short**] [**-min** \<*size*> ] [**-max** \<*size*> ] [**-thinlock**] [**-startAtLowerBound**] [**-mt** \<*MethodTable address*> ] [**-type** \<*partial type name*> ] [*start* [*end*]]</span><span class="sxs-lookup"><span data-stu-id="4d180-171">**DumpHeap** [**-stat**] [**-strings**] [**-short**] [**-min** \<*size*>] [**-max** \<*size*>] [**-thinlock**] [**-startAtLowerBound**] [**-mt** \<*MethodTable address*>] [**-type** \<*partial type name*>][*start* [*end*]]</span></span>|<span data-ttu-id="4d180-172">顯示記憶體回收堆積的資訊，以及關於物件的回收統計資料。</span><span class="sxs-lookup"><span data-stu-id="4d180-172">Displays information about the garbage-collected heap and collection statistics about objects.</span></span><br /><br /> <span data-ttu-id="4d180-173">**DumpHeap** 命令會在偵測到記憶體回收行程堆積中出現過多分割時顯示警告。</span><span class="sxs-lookup"><span data-stu-id="4d180-173">The **DumpHeap** command displays a warning if it detects excessive fragmentation in the garbage collector heap.</span></span><br /><br /> <span data-ttu-id="4d180-174">**-stat** 選項會將輸出限制為統計類型摘要。</span><span class="sxs-lookup"><span data-stu-id="4d180-174">The **-stat** option restricts the output to the statistical type summary.</span></span><br /><br /> <span data-ttu-id="4d180-175">**-strings** 選項會將輸出限制為統計字串值摘要。</span><span class="sxs-lookup"><span data-stu-id="4d180-175">The **-strings** option restricts the output to a statistical string value summary.</span></span><br /><br /> <span data-ttu-id="4d180-176">**-short** 選項會將輸出限制為每個物件的位址。</span><span class="sxs-lookup"><span data-stu-id="4d180-176">The **-short** option limits output to just the address of each object.</span></span> <span data-ttu-id="4d180-177">這可讓您輕鬆地將輸出從命令由管道送到另一個偵錯工具命令以達成自動化。</span><span class="sxs-lookup"><span data-stu-id="4d180-177">This lets you easily pipe output from the command to another debugger command for automation.</span></span><br /><br /> <span data-ttu-id="4d180-178">**-min** 選項會忽略小於 `size` 參數的物件 (指定單位為位元組)。</span><span class="sxs-lookup"><span data-stu-id="4d180-178">The **-min** option ignores objects that are less than the `size` parameter, specified in bytes.</span></span><br /><br /> <span data-ttu-id="4d180-179">**-max** 選項會忽略大於 `size` 參數的物件 (指定單位為位元組)。</span><span class="sxs-lookup"><span data-stu-id="4d180-179">The **-max** option ignores objects that are larger than the `size` parameter, specified in bytes.</span></span><br /><br /> <span data-ttu-id="4d180-180">**-thinlock** 選項會報告 ThinLocks。</span><span class="sxs-lookup"><span data-stu-id="4d180-180">The **-thinlock** option reports ThinLocks.</span></span>  <span data-ttu-id="4d180-181">如需詳細資訊，請參閱 **SyncBlk** 命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-181">For more information, see the **SyncBlk** command.</span></span><br /><br /> <span data-ttu-id="4d180-182">`-startAtLowerBound` 選項會強制堆積查核從所提供之位址範圍的下限開始。</span><span class="sxs-lookup"><span data-stu-id="4d180-182">The `-startAtLowerBound` option forces the heap walk to begin at the lower bound of a supplied address range.</span></span> <span data-ttu-id="4d180-183">在規劃階段期間，因為物件正在移動，通常都無法查核堆積。</span><span class="sxs-lookup"><span data-stu-id="4d180-183">During the planning phase, the heap is often not walkable because objects are being moved.</span></span> <span data-ttu-id="4d180-184">這個選項會強制 **DumpHeap** 在指定的下限開始其查核。</span><span class="sxs-lookup"><span data-stu-id="4d180-184">This option forces **DumpHeap** to begin its walk at the specified lower bound.</span></span> <span data-ttu-id="4d180-185">您必須提供有效物件的位址，做為讓此選項運作的下限。</span><span class="sxs-lookup"><span data-stu-id="4d180-185">You must supply the address of a valid object as the lower bound for this option to work.</span></span> <span data-ttu-id="4d180-186">您可以顯示位於錯誤物件之位址的記憶體，以手動方式找出下一個方法資料表。</span><span class="sxs-lookup"><span data-stu-id="4d180-186">You can display memory at the address of a bad object to manually find the next method table.</span></span> <span data-ttu-id="4d180-187">如果記憶體回收目前位於 `memcopy` 的呼叫中，您也可以將大小加到起始位址 (以參數的形式提供)，以尋找下一個物件的位址。</span><span class="sxs-lookup"><span data-stu-id="4d180-187">If the garbage collection is currently in a call to `memcopy`, you may also be able to find the address of the next object by adding the size to the start address, which is supplied as a parameter.</span></span><br /><br /> <span data-ttu-id="4d180-188">**-mt** 選項只會列出會對應至所指定 `MethodTable` 結構中的那些物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-188">The **-mt** option lists only those objects that correspond to the specified `MethodTable` structure.</span></span><br /><br /> <span data-ttu-id="4d180-189">**-type** 選項只會列出其類型名稱即為所指定字串之子字串的物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-189">The **-type** option lists only those objects whose type name is a substring match of the specified string.</span></span><br /><br /> <span data-ttu-id="4d180-190">`start` 參數會從指定的位址開始列出。</span><span class="sxs-lookup"><span data-stu-id="4d180-190">The `start` parameter begins listing from the specified address.</span></span><br /><br /> <span data-ttu-id="4d180-191">`end` 參數會在指定的位址停止列出。</span><span class="sxs-lookup"><span data-stu-id="4d180-191">The `end` parameter stops listing at the specified address.</span></span>|
|<span data-ttu-id="4d180-192">**DumpIL** \<*Managed DynamicMethod object*> &#124;       \<*DynamicMethodDesc pointer*> &#124;        \<*MethodDesc pointer*></span><span class="sxs-lookup"><span data-stu-id="4d180-192">**DumpIL** \<*Managed DynamicMethod object*> &#124;       \<*DynamicMethodDesc pointer*> &#124;        \<*MethodDesc pointer*></span></span>|<span data-ttu-id="4d180-193">顯示與 Managed 方法相關聯的 Microsoft 中繼語言 (MSIL)。</span><span class="sxs-lookup"><span data-stu-id="4d180-193">Displays the Microsoft intermediate language (MSIL) that is associated with a managed method.</span></span><br /><br /> <span data-ttu-id="4d180-194">動態 MSIL 的發出方式與從元件載入的 MSIL 不同。</span><span class="sxs-lookup"><span data-stu-id="4d180-194">Dynamic MSIL is emitted differently than MSIL that's loaded from an assembly.</span></span> <span data-ttu-id="4d180-195">動態 MSIL 會參考 Managed 物件陣列中的物件，而非參考中繼資料語彙基元。</span><span class="sxs-lookup"><span data-stu-id="4d180-195">Dynamic MSIL refers to objects in a managed object array rather than to metadata tokens.</span></span>|
|<span data-ttu-id="4d180-196">**DumpLog** [**-addr** \<*addressOfStressLog*> ] [<*Filename*>]</span><span class="sxs-lookup"><span data-stu-id="4d180-196">**DumpLog** [**-addr** \<*addressOfStressLog*>] [<*Filename*>]</span></span>|<span data-ttu-id="4d180-197">將記憶體中壓力記錄檔的內容寫入指定的檔案。</span><span class="sxs-lookup"><span data-stu-id="4d180-197">Writes the contents of an in-memory stress log to the specified file.</span></span> <span data-ttu-id="4d180-198">如果沒有指定名稱，此命令便會在目前的目錄中建立名為 StressLog.txt 的檔案。</span><span class="sxs-lookup"><span data-stu-id="4d180-198">If you do not specify a name, this command creates a file called StressLog.txt in the current directory.</span></span><br /><br /> <span data-ttu-id="4d180-199">記憶體中的壓力記錄可協助您診斷壓力失敗而不必使用鎖定或 I/O。</span><span class="sxs-lookup"><span data-stu-id="4d180-199">The in-memory stress log helps you diagnose stress failures without using locks or I/O.</span></span> <span data-ttu-id="4d180-200">若要啟用壓力記錄檔，請在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\\.NETFramework 底下設定下列登錄機碼：</span><span class="sxs-lookup"><span data-stu-id="4d180-200">To enable the stress log, set the following registry keys under HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\\.NETFramework:</span></span><br /><br /> <span data-ttu-id="4d180-201">(DWORD) StressLog = 1</span><span class="sxs-lookup"><span data-stu-id="4d180-201">(DWORD) StressLog = 1</span></span><br /><br /> <span data-ttu-id="4d180-202">(DWORD) LogFacility = 0xffffffff</span><span class="sxs-lookup"><span data-stu-id="4d180-202">(DWORD) LogFacility = 0xffffffff</span></span><br /><br /> <span data-ttu-id="4d180-203">(DWORD) StressLogSize = 65536</span><span class="sxs-lookup"><span data-stu-id="4d180-203">(DWORD) StressLogSize = 65536</span></span><br /><br /> <span data-ttu-id="4d180-204">選擇性的 `-addr` 選項可讓您指定預設記錄檔以外的壓力記錄檔。</span><span class="sxs-lookup"><span data-stu-id="4d180-204">The optional `-addr` option lets you specify a stress log other than the default log.</span></span>|
|<span data-ttu-id="4d180-205">**DumpMD**\<*MethodDesc address*></span><span class="sxs-lookup"><span data-stu-id="4d180-205">**DumpMD** \<*MethodDesc address*></span></span>|<span data-ttu-id="4d180-206">在指定的位址顯示 `MethodDesc` 結構的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-206">Displays information about a `MethodDesc` structure at the specified address.</span></span><br /><br /> <span data-ttu-id="4d180-207">您可以使用 **IP2MD** 命令，從 Managed 函式取得 `MethodDesc` 結構位址。</span><span class="sxs-lookup"><span data-stu-id="4d180-207">You can use the **IP2MD** command to get the `MethodDesc` structure address from a managed function.</span></span>|
|<span data-ttu-id="4d180-208">**DumpMT** [**-MD**] \<*MethodTable address*></span><span class="sxs-lookup"><span data-stu-id="4d180-208">**DumpMT** [**-MD**] \<*MethodTable address*></span></span>|<span data-ttu-id="4d180-209">顯示在所指定位址之方法資料表的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-209">Displays information about a method table at the specified address.</span></span> <span data-ttu-id="4d180-210">指定 **-MD** 選項，便會顯示與物件一起定義之所有方法的清單。</span><span class="sxs-lookup"><span data-stu-id="4d180-210">Specifying the **-MD** option displays a list of all methods defined with the object.</span></span><br /><br /> <span data-ttu-id="4d180-211">每個 Managed 物件都包含一個方法資料表指標。</span><span class="sxs-lookup"><span data-stu-id="4d180-211">Each managed object contains a method table pointer.</span></span>|
|<span data-ttu-id="4d180-212">**DumpModule** [**-mt**] \<*Module address*></span><span class="sxs-lookup"><span data-stu-id="4d180-212">**DumpModule** [**-mt**] \<*Module address*></span></span>|<span data-ttu-id="4d180-213">顯示在所指定位址之模組的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-213">Displays information about a module at the specified address.</span></span> <span data-ttu-id="4d180-214">**-mt** 選項會顯示定義在模組中的類型，以及由該模組所參考的類型。</span><span class="sxs-lookup"><span data-stu-id="4d180-214">The **-mt** option displays the types defined in a module and the types referenced by the module</span></span><br /><br /> <span data-ttu-id="4d180-215">您可以使用 **DumpDomain** 或 **DumpAssembly** 命令來擷取模組的位址。</span><span class="sxs-lookup"><span data-stu-id="4d180-215">You can use the **DumpDomain** or **DumpAssembly** command to retrieve a module's address.</span></span>|
|<span data-ttu-id="4d180-216">**>dumpobj** [**-nofields**] \<*object address*></span><span class="sxs-lookup"><span data-stu-id="4d180-216">**DumpObj** [**-nofields**] \<*object address*></span></span><br /><br /> <span data-ttu-id="4d180-217">-或-</span><span class="sxs-lookup"><span data-stu-id="4d180-217">-or-</span></span><br /><br /> <span data-ttu-id="4d180-218">**DO**\<*object address*></span><span class="sxs-lookup"><span data-stu-id="4d180-218">**DO** \<*object address*></span></span>|<span data-ttu-id="4d180-219">顯示在所指定位址之物件的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-219">Displays information about an object at the specified address.</span></span> <span data-ttu-id="4d180-220">**DumpObj** 命令會顯示欄位、`EEClass` 結構資訊、方法資料表，以及物件的大小。</span><span class="sxs-lookup"><span data-stu-id="4d180-220">The **DumpObj** command displays the fields, the `EEClass` structure information, the method table, and the size of the object.</span></span><br /><br /> <span data-ttu-id="4d180-221">您可以使用 **DumpStackObjects** 命令來擷取物件的位址。</span><span class="sxs-lookup"><span data-stu-id="4d180-221">You can use the **DumpStackObjects** command to retrieve an object's address.</span></span><br /><br /> <span data-ttu-id="4d180-222">您可以在類型的欄位上執行 **>dumpobj** 命令， `CLASS` 因為它們也是物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-222">You can run the **DumpObj** command on fields of type `CLASS` because they are also objects.</span></span><br /><br /> <span data-ttu-id="4d180-223">`-`**nofields** 選項可防止物件的欄位顯示，這對像是 String 的物件非常有用。</span><span class="sxs-lookup"><span data-stu-id="4d180-223">The `-`**nofields** option prevents fields of the object being displayed, it is useful for objects like String.</span></span>|
|<span data-ttu-id="4d180-224">**DumpRuntimeTypes**</span><span class="sxs-lookup"><span data-stu-id="4d180-224">**DumpRuntimeTypes**</span></span>|<span data-ttu-id="4d180-225">顯示記憶體回收行程堆積中的執行階段類型物件，並列出與其關聯的類型名稱和方法資料表。</span><span class="sxs-lookup"><span data-stu-id="4d180-225">Displays the runtime type objects in the garbage collector heap and lists their associated type names and method tables.</span></span>|
|<span data-ttu-id="4d180-226">**DumpStack** [**-EE**] [**-n**] [ `top` *stack* [ `bottom` *stac* `k` ]]</span><span class="sxs-lookup"><span data-stu-id="4d180-226">**DumpStack** [**-EE**] [**-n**] [`top` *stack* [`bottom` *stac*`k`]]</span></span>|<span data-ttu-id="4d180-227">顯示堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="4d180-227">Displays a stack trace.</span></span><br /><br /> <span data-ttu-id="4d180-228">**-EE** 選項會使 **DumpStack** 命令只顯示 Managed 函式。</span><span class="sxs-lookup"><span data-stu-id="4d180-228">The **-EE** option causes the **DumpStack** command to display only managed functions.</span></span> <span data-ttu-id="4d180-229">使用 `top` 和 `bottom` 參數可限制在 x86 平台上顯示的堆疊框架。</span><span class="sxs-lookup"><span data-stu-id="4d180-229">Use the `top` and `bottom` parameters to limit the stack frames displayed on x86 platforms.</span></span><br /><br /> <span data-ttu-id="4d180-230">**-n** 選項會停用原始程式檔名稱和行號的顯示。</span><span class="sxs-lookup"><span data-stu-id="4d180-230">The **-n** option disables the display of source file names and line numbers.</span></span> <span data-ttu-id="4d180-231">如果偵錯工具有指定 SYMOPT_LOAD_LINES 選項，SOS 將會查詢每個 Managed 框架的符號，而且如果成功，就會顯示對應的原始程式檔名稱和行號。</span><span class="sxs-lookup"><span data-stu-id="4d180-231">If the debugger has the option SYMOPT_LOAD_LINES specified, SOS will look up the symbols for every managed frame and if successful will display the corresponding source file name and line number.</span></span> <span data-ttu-id="4d180-232">指定 **-n** (沒有行號) 參數即可停用這種行為。</span><span class="sxs-lookup"><span data-stu-id="4d180-232">The **-n** (No line numbers) parameter can be specified to disable this behavior.</span></span><br /><br />
|<span data-ttu-id="4d180-233">**DumpSig** \<*sigaddr*>\<*moduleaddr*></span><span class="sxs-lookup"><span data-stu-id="4d180-233">**DumpSig** \<*sigaddr*> \<*moduleaddr*></span></span>|<span data-ttu-id="4d180-234">在指定的位址顯示 `Sig` 結構的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-234">Displays information about a `Sig` structure at the specified address.</span></span>|
|<span data-ttu-id="4d180-235">**DumpSigElem** \<*sigaddr*>\<*moduleaddr*></span><span class="sxs-lookup"><span data-stu-id="4d180-235">**DumpSigElem** \<*sigaddr*> \<*moduleaddr*></span></span>|<span data-ttu-id="4d180-236">顯示簽章物件的單一項目。</span><span class="sxs-lookup"><span data-stu-id="4d180-236">Displays a single element of a signature object.</span></span> <span data-ttu-id="4d180-237">在大多數情況下，您都應該使用 **DumpSig** 來查看個別簽章物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-237">In most cases, you should use **DumpSig** to look at individual signature objects.</span></span> <span data-ttu-id="4d180-238">不過，如果簽章已經以某種形式損毀，您可以使用 **DumpSigElem** 來讀取它的有效部分。</span><span class="sxs-lookup"><span data-stu-id="4d180-238">However, if a signature has been corrupted in some way, you can use **DumpSigElem** to read the valid portions of it.</span></span>|
|<span data-ttu-id="4d180-239">**DumpStackObjects** [**-verify**] [ `top` *stack* [ `bottom` *stack*]]</span><span class="sxs-lookup"><span data-stu-id="4d180-239">**DumpStackObjects** [**-verify**] [`top` *stack* [`bottom` *stack*]]</span></span><br /><br /> <span data-ttu-id="4d180-240">-或-</span><span class="sxs-lookup"><span data-stu-id="4d180-240">-or-</span></span><br /><br /> <span data-ttu-id="4d180-241">**DSO** [**-verify**] [ `top` *stack* [ `bottom` *stack*]]</span><span class="sxs-lookup"><span data-stu-id="4d180-241">**DSO** [**-verify**] [`top` *stack* [`bottom` *stack*]]</span></span>|<span data-ttu-id="4d180-242">顯示可在目前堆疊界限內找到的所有 Managed 物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-242">Displays all managed objects found within the bounds of the current stack.</span></span><br /><br /> <span data-ttu-id="4d180-243">**-verify** 選項會驗證物件欄位的每個非靜態 `CLASS` 欄位。</span><span class="sxs-lookup"><span data-stu-id="4d180-243">The **-verify** option validates each non-static `CLASS` field of an object field.</span></span><br /><br /> <span data-ttu-id="4d180-244">使用 **DumpStackObject** 命令搭配堆疊追蹤命令，例如 **K** (windbg) 或 **bt** (lldb) 以及 **>clrstack** 命令，以判斷區域變數和參數的值。</span><span class="sxs-lookup"><span data-stu-id="4d180-244">Use the **DumpStackObject** command with stack tracing commands such as **K** (windbg) or **bt** (lldb) along with the **clrstack** command to determine the values of local variables and parameters.</span></span>|
|<span data-ttu-id="4d180-245">**>dumpvc** \<*MethodTable address*>\<*Address*></span><span class="sxs-lookup"><span data-stu-id="4d180-245">**DumpVC** \<*MethodTable address*> \<*Address*></span></span>|<span data-ttu-id="4d180-246">顯示在所指定位址之實值類別欄位的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-246">Displays information about the fields of a value class at the specified address.</span></span><br /><br /> <span data-ttu-id="4d180-247">**MethodTable** 參數可讓 **DumpVC** 命令正確地解譯欄位。</span><span class="sxs-lookup"><span data-stu-id="4d180-247">The **MethodTable** parameter allows the **DumpVC** command to correctly interpret fields.</span></span> <span data-ttu-id="4d180-248">實值類別並未以方法資料表做為其第一個欄位。</span><span class="sxs-lookup"><span data-stu-id="4d180-248">Value classes do not have a method table as their first field.</span></span>|
|<span data-ttu-id="4d180-249">**EEHeap** [**-gc**] [**-loader**]</span><span class="sxs-lookup"><span data-stu-id="4d180-249">**EEHeap** [**-gc**] [**-loader**]</span></span>|<span data-ttu-id="4d180-250">顯示內部執行時間資料結構所耗用的進程記憶體相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-250">Displays information about process memory consumed by internal runtime data structures.</span></span><br /><br /> <span data-ttu-id="4d180-251">**-gc** 和 **-loader** 選項會將這個命令的輸出限制為記憶體回收行程或載入器資料結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-251">The **-gc** and **-loader** options limit the output of this command to garbage collector or loader data structures.</span></span><br /><br /> <span data-ttu-id="4d180-252">記憶體回收行程的資訊會列出 Managed 堆積中每個區段的範圍。</span><span class="sxs-lookup"><span data-stu-id="4d180-252">The information for the garbage collector lists the ranges of each segment in the managed heap.</span></span>  <span data-ttu-id="4d180-253">如果指標位於 **-gc** 所指定的區段範圍內，該指標就是物件指標。</span><span class="sxs-lookup"><span data-stu-id="4d180-253">If the pointer falls within a segment range given by **-gc**, the pointer is an object pointer.</span></span>|
|<span data-ttu-id="4d180-254">**EEStack** [**-short**] [**-EE**]</span><span class="sxs-lookup"><span data-stu-id="4d180-254">**EEStack** [**-short**] [**-EE**]</span></span>|<span data-ttu-id="4d180-255">在處理序中的所有執行緒上執行 **DumpStack** 命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-255">Runs the **DumpStack** command on all threads in the process.</span></span><br /><br /> <span data-ttu-id="4d180-256">**-EE** 選項會直接傳遞到 **DumpStack** 命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-256">The **-EE** option is passed directly to the **DumpStack** command.</span></span> <span data-ttu-id="4d180-257">**-short** 參數會將輸出限制到下列種類的執行緒：</span><span class="sxs-lookup"><span data-stu-id="4d180-257">The **-short** parameter limits the output to the following kinds of threads:</span></span><br /><br /><span data-ttu-id="4d180-258">具有鎖定的執行緒。</span><span class="sxs-lookup"><span data-stu-id="4d180-258">Threads that have taken a lock.</span></span><br /><br /><span data-ttu-id="4d180-259">已經停止以便允許記憶體回收的執行緒。</span><span class="sxs-lookup"><span data-stu-id="4d180-259">Threads that have been stalled in order to allow a garbage collection.</span></span><br /><br /> <span data-ttu-id="4d180-260">目前在 Managed 程式碼中的執行緒。</span><span class="sxs-lookup"><span data-stu-id="4d180-260">Threads that are currently in managed code.</span></span>|
|<span data-ttu-id="4d180-261">**EHInfo** [ \<*MethodDesc address*> ] [ \<*Code address*> ]</span><span class="sxs-lookup"><span data-stu-id="4d180-261">**EHInfo** [\<*MethodDesc address*>] [\<*Code address*>]</span></span>|<span data-ttu-id="4d180-262">顯示所指定方法中的例外狀況處理區塊。</span><span class="sxs-lookup"><span data-stu-id="4d180-262">Displays the exception handling blocks in a specified method.</span></span>  <span data-ttu-id="4d180-263">這個命令會顯示子句區塊 (`try` 區塊) 和處理常式區塊 (`catch` 區塊) 的程式碼位址和位移。</span><span class="sxs-lookup"><span data-stu-id="4d180-263">This command displays the code addresses and offsets for the clause block (the `try` block) and the handler block (the `catch` block).</span></span>|
|<span data-ttu-id="4d180-264">**常見問題集**</span><span class="sxs-lookup"><span data-stu-id="4d180-264">**FAQ**</span></span>|<span data-ttu-id="4d180-265">顯示常見問題集。</span><span class="sxs-lookup"><span data-stu-id="4d180-265">Displays frequently asked questions.</span></span>  <span data-ttu-id="4d180-266">`dotnet-dump`不支援此項目。</span><span class="sxs-lookup"><span data-stu-id="4d180-266">Not supported in `dotnet-dump`.</span></span>|
|<span data-ttu-id="4d180-267">**FinalizeQueue** [**-detail**] &#124; [**-allReady**] [**-short**]</span><span class="sxs-lookup"><span data-stu-id="4d180-267">**FinalizeQueue** [**-detail**] &#124; [**-allReady**] [**-short**]</span></span>|<span data-ttu-id="4d180-268">顯示所有已註冊為完成項的物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-268">Displays all objects registered for finalization.</span></span><br /><br /> <span data-ttu-id="4d180-269">**-detail** 選項會顯示需要清除之任何 `SyncBlocks` 的額外資訊，以及等待清除之任何 `RuntimeCallableWrappers` (RCW) 的額外資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-269">The **-detail** option displays extra information about any `SyncBlocks` that need to be cleaned up, and any `RuntimeCallableWrappers` (RCWs) that await cleanup.</span></span> <span data-ttu-id="4d180-270">當完成項執行緒執行時，便會快取和清除這兩種資料結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-270">Both of these data structures are cached and cleaned up by the finalizer thread when it runs.</span></span><br /><br /> <span data-ttu-id="4d180-271">`-allReady` 選項會顯示已準備好進行最終處理的所有物件，無論它們已經由記憶體回收這樣標記，或是將由下一個記憶體回收所標記，都會包括在內。</span><span class="sxs-lookup"><span data-stu-id="4d180-271">The `-allReady` option displays all objects that are ready for finalization, regardless of whether they are already marked by the garbage collection as such, or will be marked by the next garbage collection.</span></span> <span data-ttu-id="4d180-272">在「準備最終處理」清單中的物件，也就是不再是根目錄的可最終處理物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-272">The objects that are in the "ready for finalization" list are finalizable objects that are no longer rooted.</span></span> <span data-ttu-id="4d180-273">這個選項可能非常昂貴，因為它會驗證可最終處理佇列中的所有物件是否依然為根目錄。</span><span class="sxs-lookup"><span data-stu-id="4d180-273">This option can be very expensive, because it verifies whether all the objects in the finalizable queues are still rooted.</span></span><br /><br /> <span data-ttu-id="4d180-274">`-short` 選項會將輸出限制為每個物件的位址。</span><span class="sxs-lookup"><span data-stu-id="4d180-274">The `-short` option limits the output to the address of each object.</span></span> <span data-ttu-id="4d180-275">如果搭配使用它與 **-allReady**，它就會列舉具有完成項且不再為根目錄的所有物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-275">If it is used in conjunction with **-allReady**, it enumerates all objects that have a finalizer that are no longer rooted.</span></span> <span data-ttu-id="4d180-276">如果單獨使用，它就會在可進行最終處理和「準備最終處理」的佇列中列出所有物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-276">If it is used independently, it lists all objects in the finalizable and "ready for finalization" queues.</span></span>|
|<span data-ttu-id="4d180-277">**FindAppDomain**\<*Object address*></span><span class="sxs-lookup"><span data-stu-id="4d180-277">**FindAppDomain** \<*Object address*></span></span>|<span data-ttu-id="4d180-278">判斷在所指定位址之物件的應用程式定義域。</span><span class="sxs-lookup"><span data-stu-id="4d180-278">Determines the application domain of an object at the specified address.</span></span>|
|<span data-ttu-id="4d180-279">**FindRoots** **-gen** \<*N*> &#124; **-gen any** &#124;\<*object address*></span><span class="sxs-lookup"><span data-stu-id="4d180-279">**FindRoots** **-gen** \<*N*> &#124; **-gen any** &#124;\<*object address*></span></span>|<span data-ttu-id="4d180-280">讓偵錯工具在所指定層代的下一個集合上的偵錯項目內中斷。</span><span class="sxs-lookup"><span data-stu-id="4d180-280">Causes the debugger to break in the debuggee on the next collection of the specified generation.</span></span> <span data-ttu-id="4d180-281">只要中斷發生，就會立即重設效果。</span><span class="sxs-lookup"><span data-stu-id="4d180-281">The effect is reset as soon as the break occurs.</span></span> <span data-ttu-id="4d180-282">若要在下一個集合上中斷，您必須重新發出命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-282">To break on the next collection, you have to reissue the command.</span></span> <span data-ttu-id="4d180-283">*\<object address>* 此命令的形式是在發生 **-gen** 或 **-gen any** 所造成的中斷之後使用。</span><span class="sxs-lookup"><span data-stu-id="4d180-283">The *\<object address>* form of this command is used after the break caused by the **-gen** or **-gen any** has occurred.</span></span> <span data-ttu-id="4d180-284">此時，偵錯項目處於正確的狀態，可讓 **FindRoots** 從目前的不適用層代識別出物件的根。</span><span class="sxs-lookup"><span data-stu-id="4d180-284">At that time, the debuggee is in the right state for **FindRoots** to identify roots for objects from the current condemned generations.</span></span> <span data-ttu-id="4d180-285">只有在 Windows 上才支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-285">Only supported on Windows.</span></span>|
|<span data-ttu-id="4d180-286">**GCHandles** [**-perdomain**]</span><span class="sxs-lookup"><span data-stu-id="4d180-286">**GCHandles** [**-perdomain**]</span></span>|<span data-ttu-id="4d180-287">顯示處理序中記憶體回收行程控制代碼的統計資料。</span><span class="sxs-lookup"><span data-stu-id="4d180-287">Displays statistics about garbage collector handles in the process.</span></span><br /><br /> <span data-ttu-id="4d180-288">**-perdomain** 選項會依據應用程式定義域來排列統計資料。</span><span class="sxs-lookup"><span data-stu-id="4d180-288">The **-perdomain** option arranges the statistics by application domain.</span></span><br /><br /> <span data-ttu-id="4d180-289">使用 **GCHandles** 命令，便可找出由記憶體回收行程控制代碼遺漏造成的記憶體流失。</span><span class="sxs-lookup"><span data-stu-id="4d180-289">Use the **GCHandles** command to find memory leaks caused by garbage collector handle leaks.</span></span> <span data-ttu-id="4d180-290">例如，當程式碼保留大型陣列時就會發生記憶體流失，其保留的原因是因為強式記憶體回收行程控制代碼依然指向該陣列，而捨棄控制代碼時卻未釋放陣列。</span><span class="sxs-lookup"><span data-stu-id="4d180-290">For example, a memory leak occurs when code retains a large array because a strong garbage collector handle still points to it, and the handle is discarded without freeing it.</span></span> <br /><br /><span data-ttu-id="4d180-291">只有在 Windows 上才支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-291">Only supported on Windows.</span></span>|
|<span data-ttu-id="4d180-292">**GCHandleLeaks**</span><span class="sxs-lookup"><span data-stu-id="4d180-292">**GCHandleLeaks**</span></span>|<span data-ttu-id="4d180-293">在處理序中搜尋強式和 Pin 記憶體回收行程控制代碼之任何參考的記憶體，並顯示結果。</span><span class="sxs-lookup"><span data-stu-id="4d180-293">Searches memory for any references to strong and pinned garbage collector handles in the process and displays the results.</span></span> <span data-ttu-id="4d180-294">如果有找到控制代碼，**GCHandleLeaks** 命令便會顯示該參考的位址。</span><span class="sxs-lookup"><span data-stu-id="4d180-294">If a handle is found, the **GCHandleLeaks** command displays the address of the reference.</span></span> <span data-ttu-id="4d180-295">如果在記憶體中沒有找到任何控制代碼，這個命令便會顯示通知。</span><span class="sxs-lookup"><span data-stu-id="4d180-295">If a handle is not found in memory, this command displays a notification.</span></span> <span data-ttu-id="4d180-296">只有在 Windows 上才支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-296">Only supported on Windows.</span></span>|
|<span data-ttu-id="4d180-297">**GCInfo**\<*MethodDesc address*>\<*Code address*></span><span class="sxs-lookup"><span data-stu-id="4d180-297">**GCInfo** \<*MethodDesc address*>\<*Code address*></span></span>|<span data-ttu-id="4d180-298">顯示指出註冊位置或堆疊位置在何時包含 Managed 物件的資料。</span><span class="sxs-lookup"><span data-stu-id="4d180-298">Displays data that indicates when registers or stack locations contain managed objects.</span></span> <span data-ttu-id="4d180-299">進行記憶體回收時，回收行程必須知道物件參考的位置，以便能夠用新的物件指標值來更新這些參考。</span><span class="sxs-lookup"><span data-stu-id="4d180-299">If a garbage collection occurs, the collector must know the locations of references to objects so it can update them with new object pointer values.</span></span>|
|<span data-ttu-id="4d180-300">**GCRoot** [**-nostacks**] [**-all**] \<*Object address*></span><span class="sxs-lookup"><span data-stu-id="4d180-300">**GCRoot** [**-nostacks**] [**-all**] \<*Object address*></span></span>|<span data-ttu-id="4d180-301">顯示在所指定位址之物件參考 (或根目錄) 的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-301">Displays information about references (or roots) to an object at the specified address.</span></span><br /><br /> <span data-ttu-id="4d180-302">**FindRoots** 命令會在整個 Managed 堆積和控制代碼表格中，檢查位於堆疊上之其他物件和控制代碼中的控制代碼。</span><span class="sxs-lookup"><span data-stu-id="4d180-302">The **GCRoot** command examines the entire managed heap and the handle table for handles within other objects and handles on the stack.</span></span> <span data-ttu-id="4d180-303">然後，會在每個堆疊上搜尋物件的指標，並會搜尋完成項佇列。</span><span class="sxs-lookup"><span data-stu-id="4d180-303">Each stack is then searched for pointers to objects, and the finalizer queue is also searched.</span></span><br /><br /> <span data-ttu-id="4d180-304">這個命令不會判斷堆疊根目錄是否有效或是已遭捨棄。</span><span class="sxs-lookup"><span data-stu-id="4d180-304">This command does not determine whether a stack root is valid or is discarded.</span></span> <span data-ttu-id="4d180-305">您可以使用 **>clrstack** 和 **U** 命令來將區域變數或引數值所屬的框架進行拆解，以判斷堆疊根目錄是否仍在使用中。</span><span class="sxs-lookup"><span data-stu-id="4d180-305">Use the **clrstack** and **U** commands to disassemble the frame that the local or argument value belongs to in order to determine if the stack root is still in use.</span></span><br /><br /> <span data-ttu-id="4d180-306">**-nostacks** 選項會將搜尋限制到記憶體回收行程控制代碼和可存取的物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-306">The **-nostacks** option restricts the search to garbage collector handles and reachable objects.</span></span><br /><br /> <span data-ttu-id="4d180-307">**-All** 選項會強制顯示所有的根目錄，而不是只顯示唯一的根目錄。</span><span class="sxs-lookup"><span data-stu-id="4d180-307">The **-all** option forces all roots to be displayed instead of just the unique roots.</span></span>|
|<span data-ttu-id="4d180-308">**GCWhere**  *\<object address>*</span><span class="sxs-lookup"><span data-stu-id="4d180-308">**GCWhere**  *\<object address>*</span></span>|<span data-ttu-id="4d180-309">顯示傳入之引數的記憶體回收堆積中的位置和大小。</span><span class="sxs-lookup"><span data-stu-id="4d180-309">Displays the location and size in the garbage collection heap of the argument passed in.</span></span> <span data-ttu-id="4d180-310">當引數位於 Managed 堆積中，但不是有效的物件位址時，大小就會顯示為 0 (零)。</span><span class="sxs-lookup"><span data-stu-id="4d180-310">When the argument lies in the managed heap but is not a valid object address, the size is displayed as 0 (zero).</span></span>|
|<span data-ttu-id="4d180-311">**Help** (**soshelp**) [ \<*command*> ] [ `faq` ]</span><span class="sxs-lookup"><span data-stu-id="4d180-311">**Help** (**soshelp**) [\<*command*>] [`faq`]</span></span>|<span data-ttu-id="4d180-312">顯示當未指定任何參數時的所有可用命令，或是顯示所指定命令的詳細說明資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-312">Displays all available commands when no parameter is specified, or displays detailed help information about the specified command.</span></span><br /><br /> <span data-ttu-id="4d180-313">`faq` 參數會顯示常見問題集的解答。</span><span class="sxs-lookup"><span data-stu-id="4d180-313">The `faq` parameter displays answers to frequently asked questions.</span></span>|
|<span data-ttu-id="4d180-314">**HeapStat** [**-inclUnrooted** &#124; **-iu**]</span><span class="sxs-lookup"><span data-stu-id="4d180-314">**HeapStat** [**-inclUnrooted** &#124; **-iu**]</span></span>|<span data-ttu-id="4d180-315">顯示每個堆積的層代大小，以及每個堆積上每個層代中的總可用空間。</span><span class="sxs-lookup"><span data-stu-id="4d180-315">Displays the generation sizes for each heap and the total free space in each generation on each heap.</span></span> <span data-ttu-id="4d180-316">如果指定 **-lines** 選項，報告就會包括來自於記憶體回收堆積，且不再為根目錄之 Managed 物件的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-316">If the -**inclUnrooted** option is specified, the report includes information about the managed objects from the garbage collection heap that is no longer rooted.</span></span> <span data-ttu-id="4d180-317">只有在 Windows 上才支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-317">Only supported on Windows.</span></span>|
|<span data-ttu-id="4d180-318">**HistClear**</span><span class="sxs-lookup"><span data-stu-id="4d180-318">**HistClear**</span></span>|<span data-ttu-id="4d180-319">釋放 `Hist` 命令系列所使用的任何資源。</span><span class="sxs-lookup"><span data-stu-id="4d180-319">Releases any resources used by the family of `Hist` commands.</span></span><br /><br /> <span data-ttu-id="4d180-320">通常，您不需要明確地呼叫 `HistClear`，因為每個 `HistInit` 都會清除先前的資源。</span><span class="sxs-lookup"><span data-stu-id="4d180-320">Generally, you do not have to explicitly call `HistClear`, because each `HistInit` cleans up the previous resources.</span></span>|
|<span data-ttu-id="4d180-321">**HistInit**</span><span class="sxs-lookup"><span data-stu-id="4d180-321">**HistInit**</span></span>|<span data-ttu-id="4d180-322">初始化在偵錯項目中儲存之壓力記錄檔中的 SOS 結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-322">Initializes the SOS structures from the stress log saved in the debuggee.</span></span>|
|<span data-ttu-id="4d180-323">**HistObj** *<obj_address>*</span><span class="sxs-lookup"><span data-stu-id="4d180-323">**HistObj** *<obj_address>*</span></span>|<span data-ttu-id="4d180-324">會檢查所有壓力記錄檔重新配置記錄，並顯示可能會使位址被當做引數傳入之記憶體回收重新配置的鏈結。</span><span class="sxs-lookup"><span data-stu-id="4d180-324">Examines all stress log relocation records and displays the chain of garbage collection relocations that may have led to the address passed in as an argument.</span></span>|
|<span data-ttu-id="4d180-325">**HistObjFind**  *<obj_address>*</span><span class="sxs-lookup"><span data-stu-id="4d180-325">**HistObjFind**  *<obj_address>*</span></span>|<span data-ttu-id="4d180-326">顯示參考位於指定位址之物件的所有記錄檔項目。</span><span class="sxs-lookup"><span data-stu-id="4d180-326">Displays all the log entries that reference an object at the specified address.</span></span>|
|<span data-ttu-id="4d180-327">\**HistRoot\*\*\*\<root>*</span><span class="sxs-lookup"><span data-stu-id="4d180-327">**HistRoot** *\<root>*</span></span>|<span data-ttu-id="4d180-328">顯示與指定之根的提升和重新配置都相關的資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-328">Displays information related to both promotions and relocations of the specified root.</span></span><br /><br /> <span data-ttu-id="4d180-329">根值可以透過記憶體回收，用來追蹤物件的移動。</span><span class="sxs-lookup"><span data-stu-id="4d180-329">The root value can be used to track the movement of an object through the garbage collections.</span></span>|
|<span data-ttu-id="4d180-330">**IP2MD** (**IP2MD**) \<*Code address*></span><span class="sxs-lookup"><span data-stu-id="4d180-330">**IP2MD** (**ip2md**) \<*Code address*></span></span>|<span data-ttu-id="4d180-331">顯示在已進行 JIT 編譯之程式碼中之指定位址的 `MethodDesc` 結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-331">Displays the `MethodDesc` structure at the specified address in code that has been JIT-compiled.</span></span>|
|<span data-ttu-id="4d180-332">**ListNearObj** (**lno**) *<obj_address>*</span><span class="sxs-lookup"><span data-stu-id="4d180-332">**ListNearObj** (**lno**) *<obj_address>*</span></span>|<span data-ttu-id="4d180-333">顯示在指定的位址之前與之後的物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-333">Displays the objects preceding and following the specified address.</span></span> <span data-ttu-id="4d180-334">此命令會在記憶體回收堆積中，尋找看來像是 Managed 物件之有效開頭的位址 (根據有效方法資料表)，以及引數位址的後接物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-334">The command looks for the address in the garbage collection heap that looks like a valid beginning of a managed object (based on a valid method table) and the object following the argument address.</span></span> <span data-ttu-id="4d180-335">只有在 Windows 上才支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-335">Only supported on Windows.</span></span>|
|<span data-ttu-id="4d180-336">**MinidumpMode** [**0**] [**1**]</span><span class="sxs-lookup"><span data-stu-id="4d180-336">**MinidumpMode** [**0**] [**1**]</span></span>|<span data-ttu-id="4d180-337">防止在使用小型傾印時執行不安全的命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-337">Prevents running unsafe commands when using a minidump.</span></span><br /><br /> <span data-ttu-id="4d180-338">傳遞 **0** 便可停用這項功能，而傳遞 **1** 便可啟用這項功能。</span><span class="sxs-lookup"><span data-stu-id="4d180-338">Pass **0** to disable this feature or **1** to enable this feature.</span></span> <span data-ttu-id="4d180-339">根據預設，**MinidumpMode** 值會設定為 **0**。</span><span class="sxs-lookup"><span data-stu-id="4d180-339">By default, the **MinidumpMode** value is set to **0**.</span></span><br /><br /> <span data-ttu-id="4d180-340">以 **.dump /m** 命令或 **.dump** 命令建立的小型傾印，都具有有限的 CLR 特定資料，並只允許您正確執行 SOS 命令的子集。</span><span class="sxs-lookup"><span data-stu-id="4d180-340">Minidumps created with the **.dump /m** command or **.dump** command have limited CLR-specific data and allow you to run only a subset of SOS commands correctly.</span></span> <span data-ttu-id="4d180-341">有些命令可能會因未預期的錯誤而失敗，原因是沒有對應或是只有部分對應到必要的記憶體區域。</span><span class="sxs-lookup"><span data-stu-id="4d180-341">Some commands may fail with unexpected errors because required areas of memory are not mapped or are only partially mapped.</span></span> <span data-ttu-id="4d180-342">這個選項可防止您對小型傾印執行不安全的命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-342">This option protects you from running unsafe commands against minidumps.</span></span> <br /><br /><span data-ttu-id="4d180-343">僅支援 Windbg。</span><span class="sxs-lookup"><span data-stu-id="4d180-343">Only supported with Windbg.</span></span>|
|<span data-ttu-id="4d180-344">**Name2EE** (**Name2EE**) \<*module name*>\<*type or method name*></span><span class="sxs-lookup"><span data-stu-id="4d180-344">**Name2EE** (**name2ee**) \<*module name*> \<*type or method name*></span></span><br /><br /> <span data-ttu-id="4d180-345">-或-</span><span class="sxs-lookup"><span data-stu-id="4d180-345">-or-</span></span><br /><br /> <span data-ttu-id="4d180-346">**Name2EE** \<*module name*>**!**\<*type or method name*></span><span class="sxs-lookup"><span data-stu-id="4d180-346">**Name2EE** \<*module name*>**!**\<*type or method name*></span></span>|<span data-ttu-id="4d180-347">顯示所指定模組中之指定類型或方法的 `MethodTable` 結構和 `EEClass` 結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-347">Displays the `MethodTable` structure and `EEClass` structure for the specified type or method in the specified module.</span></span><br /><br /> <span data-ttu-id="4d180-348">指定的模組必須載入到處理序。</span><span class="sxs-lookup"><span data-stu-id="4d180-348">The specified module must be loaded in the process.</span></span><br /><br /> <span data-ttu-id="4d180-349">若要取得適當的類型名稱，請使用 [Ildasm.exe (IL 反組譯工具)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md) 瀏覽該模組。</span><span class="sxs-lookup"><span data-stu-id="4d180-349">To get the proper type name, browse the module by using the [Ildasm.exe (IL Disassembler)](../../../docs/framework/tools/ildasm-exe-il-disassembler.md).</span></span> <span data-ttu-id="4d180-350">您也可以將 `*` 當做模組名稱參數傳遞，以便搜尋所有已載入的 Managed 模組。</span><span class="sxs-lookup"><span data-stu-id="4d180-350">You can also pass `*` as the module name parameter to search all loaded managed modules.</span></span> <span data-ttu-id="4d180-351">*module name* 參數也可以是模組的偵錯工具名稱，例如 `mscorlib` 或 `image00400000`。</span><span class="sxs-lookup"><span data-stu-id="4d180-351">The *module name* parameter can also be the debugger's name for a module, such as `mscorlib` or `image00400000`.</span></span><br /><br /> <span data-ttu-id="4d180-352">這個命令支援 <`module`>`!`<`type`> 的 Windows 偵錯工具語法。</span><span class="sxs-lookup"><span data-stu-id="4d180-352">This command supports the Windows debugger syntax of <`module`>`!`<`type`>.</span></span> <span data-ttu-id="4d180-353">這個類型必須具有完整名稱。</span><span class="sxs-lookup"><span data-stu-id="4d180-353">The type must be fully qualified.</span></span>|
|<span data-ttu-id="4d180-354">**ObjSize** [ \<*Object address*> ] &#124; [**-aggregate**] [**-stat**]</span><span class="sxs-lookup"><span data-stu-id="4d180-354">**ObjSize** [\<*Object address*>] &#124; [**-aggregate**] [**-stat**]</span></span>|<span data-ttu-id="4d180-355">顯示所指定物件的大小。</span><span class="sxs-lookup"><span data-stu-id="4d180-355">Displays the size of the specified object.</span></span> <span data-ttu-id="4d180-356">如果未指定任何參數，**ObjSize** 命令會顯示在 Managed 執行緒上找到之所有物件的大小，並會顯示處理序中的所有記憶體回收行程控制代碼，以及這些控制代碼所指向之任何物件的總大小。</span><span class="sxs-lookup"><span data-stu-id="4d180-356">If you do not specify any parameters, the **ObjSize** command displays the size of all objects found on managed threads, displays all garbage collector handles in the process, and totals the size of any objects pointed to by those handles.</span></span> <span data-ttu-id="4d180-357">**ObjSize** 命令會包括父代和其他所有子物件的大小。</span><span class="sxs-lookup"><span data-stu-id="4d180-357">The **ObjSize** command includes the size of all child objects in addition to the parent.</span></span><br /><br /> <span data-ttu-id="4d180-358">**-aggregate** 選項可搭配使用 **-stat** 引數，以取得依然為根目錄之類型的詳細檢視。</span><span class="sxs-lookup"><span data-stu-id="4d180-358">The **-aggregate** option can be used in conjunction with the **-stat** argument to get a detailed view of the types that are still rooted.</span></span> <span data-ttu-id="4d180-359">藉由使用 **!dumpheap -stat** 和 **!objsize -aggregate -stat**，您可以判斷哪些物件不再是根目錄，以及診斷各種記憶體問題。</span><span class="sxs-lookup"><span data-stu-id="4d180-359">By using **!dumpheap -stat** and **!objsize -aggregate -stat**, you can determine which objects are no longer rooted and diagnose various memory issues.</span></span> <br /><br /> <span data-ttu-id="4d180-360">只有在 Windows 上才支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-360">Only supported on Windows.</span></span>|
|<span data-ttu-id="4d180-361">**PrintException** [**-nested**] [**-行**] [ \<*Exception object address*> ]</span><span class="sxs-lookup"><span data-stu-id="4d180-361">**PrintException** [**-nested**] [**-lines**] [\<*Exception object address*>]</span></span><br /><br /> <span data-ttu-id="4d180-362">-或-</span><span class="sxs-lookup"><span data-stu-id="4d180-362">-or-</span></span><br /><br /> <span data-ttu-id="4d180-363">**PE** [**-nested**] [ \<*Exception object address*> ]</span><span class="sxs-lookup"><span data-stu-id="4d180-363">**PE** [**-nested**] [\<*Exception object address*>]</span></span>|<span data-ttu-id="4d180-364">顯示並格式化在所指定位址且衍生自 <xref:System.Exception> 類別之任何物件的欄位。</span><span class="sxs-lookup"><span data-stu-id="4d180-364">Displays and formats fields of any object derived from the <xref:System.Exception> class at the specified address.</span></span> <span data-ttu-id="4d180-365">如果您未指定位址，**PrintException** 命令便會顯示目前執行緒上最近一次擲回的例外狀況。</span><span class="sxs-lookup"><span data-stu-id="4d180-365">If you do not specify an address, the **PrintException** command displays the last exception thrown on the current thread.</span></span><br /><br /> <span data-ttu-id="4d180-366">**-nested** 選項會顯示巢狀例外狀況物件的詳細資料。</span><span class="sxs-lookup"><span data-stu-id="4d180-366">The **-nested** option displays details about nested exception objects.</span></span><br /><br /> <span data-ttu-id="4d180-367">**-lines** 選項會顯示來源資訊 (如果存在)。</span><span class="sxs-lookup"><span data-stu-id="4d180-367">The **-lines** option displays source information, if available.</span></span><br /><br /> <span data-ttu-id="4d180-368">您可以使用這個命令來格式化和檢視 `_stackTrace` 欄位，此欄位屬於二進位陣列。</span><span class="sxs-lookup"><span data-stu-id="4d180-368">You can use this command to format and view the `_stackTrace` field, which is a binary array.</span></span>|
|<span data-ttu-id="4d180-369">**ProcInfo** [**-env**] [**-time**] [**-mem**]</span><span class="sxs-lookup"><span data-stu-id="4d180-369">**ProcInfo** [**-env**] [**-time**] [**-mem**]</span></span>|<span data-ttu-id="4d180-370">顯示處理序的環境變數、核心 CPU 時間，以及記憶體使用統計資料。</span><span class="sxs-lookup"><span data-stu-id="4d180-370">Displays environment variables for the process, kernel CPU time, and memory usage statistics.</span></span> <span data-ttu-id="4d180-371">僅支援 Windbg。</span><span class="sxs-lookup"><span data-stu-id="4d180-371">Only supported with Windbg.</span></span>|
|<span data-ttu-id="4d180-372">**RCWCleanupList**\<*RCWCleanupList address*></span><span class="sxs-lookup"><span data-stu-id="4d180-372">**RCWCleanupList** \<*RCWCleanupList address*></span></span>|<span data-ttu-id="4d180-373">顯示在所指定位址上正在等待清除之執行階段可呼叫包裝函式的清單。</span><span class="sxs-lookup"><span data-stu-id="4d180-373">Displays the list of runtime callable wrappers at the specified address that are awaiting cleanup.</span></span> <span data-ttu-id="4d180-374">僅支援 Windbg。</span><span class="sxs-lookup"><span data-stu-id="4d180-374">Only supported with Windbg.</span></span>|
|<span data-ttu-id="4d180-375">**SaveModule** \<*Base address*>\<*Filename*></span><span class="sxs-lookup"><span data-stu-id="4d180-375">**SaveModule** \<*Base address*> \<*Filename*></span></span>|<span data-ttu-id="4d180-376">將在所指定位址上已載入記憶體的影像，寫入至指定的檔案。</span><span class="sxs-lookup"><span data-stu-id="4d180-376">Writes an image, which is loaded in memory at the specified address, to the specified file.</span></span> <span data-ttu-id="4d180-377">僅支援 Windbg。</span><span class="sxs-lookup"><span data-stu-id="4d180-377">Only supported with Windbg.</span></span>|
|<span data-ttu-id="4d180-378">**SetHostRuntime** [ \<runtime-directory\> ]</span><span class="sxs-lookup"><span data-stu-id="4d180-378">**SetHostRuntime** [\<runtime-directory\>]</span></span>|<span data-ttu-id="4d180-379">此命令會設定 .NET Core 執行時間的路徑，以用來裝載在偵錯工具 (lldb) 中作為 SOS 一部分執行的 managed 程式碼。</span><span class="sxs-lookup"><span data-stu-id="4d180-379">This command sets the path to the .NET Core runtime to use to host the managed code that runs as part of SOS in the debugger (lldb).</span></span> <span data-ttu-id="4d180-380">執行時間必須至少為2.1.0 版或更高版本。</span><span class="sxs-lookup"><span data-stu-id="4d180-380">The runtime needs to be at least version 2.1.0 or greater.</span></span> <span data-ttu-id="4d180-381">如果目錄中有空格，則必須以單引號括住 ( ' ) 。</span><span class="sxs-lookup"><span data-stu-id="4d180-381">If there are spaces in directory, it needs to be single-quoted (').</span></span><br/><br/><span data-ttu-id="4d180-382">通常，SOS 會嘗試找出已安裝的 .NET Core 執行時間，以自動執行其受控碼，但如果失敗，則可以使用此命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-382">Normally, SOS attempts to find an installed .NET Core runtime to run its managed code automatically but this command is available if it fails.</span></span> <span data-ttu-id="4d180-383">預設值是使用相同的執行時間 (>libcoreclr.dylib) 正在進行調試。</span><span class="sxs-lookup"><span data-stu-id="4d180-383">The default is to use the same runtime (libcoreclr) being debugged.</span></span> <span data-ttu-id="4d180-384">如果所要調試的預設執行時間無法執行 SOS 程式碼或版本小於2.1.0，請使用此命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-384">Use this command if the default runtime being debugged isn't working enough to run the SOS code or if the version is less than 2.1.0.</span></span><br/><br/><span data-ttu-id="4d180-385">如果您在執行 SOS 命令時收到下列錯誤訊息，請使用此命令將路徑設定為2.1.0 或更大的 .NET Core 執行時間。</span><span class="sxs-lookup"><span data-stu-id="4d180-385">If you received the following error message when running a SOS command, use this command to set the path to 2.1.0 or greater .NET Core runtime.</span></span> <br/><br/>`(lldb) clrstack`<br/>`Error: Fail to initialize CoreCLR 80004005 ClrStack failed`<br/><br/>`(lldb) sethostruntime /usr/share/dotnet/shared/Microsoft.NETCore.App/2.1.6`<br/><br/><span data-ttu-id="4d180-386">您可以使用命令介面中的 "dotnet--info" 來尋找已安裝的 .NET Core 執行時間路徑。</span><span class="sxs-lookup"><span data-stu-id="4d180-386">You can use the "dotnet --info" in a command shell to find the path of an installed .NET Core runtime.</span></span>|
|<span data-ttu-id="4d180-387">**SetSymbolServer** [**-ms**] [**-disable**] [**-log**] [**-loadsymbols**] [**-cache** \<cache-path> ] [**-directory** \<search-directory> ] [**-.sympath** \<windows-symbol-path> ] [ \<symbol-server-URL> ]</span><span class="sxs-lookup"><span data-stu-id="4d180-387">**SetSymbolServer** [**-ms**] [**-disable**] [**-log**] [**-loadsymbols**] [**-cache** \<cache-path>] [**-directory** \<search-directory>] [**-sympath** \<windows-symbol-path>] [\<symbol-server-URL>]</span></span>|<span data-ttu-id="4d180-388">啟用符號伺服器下載支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-388">Enables the symbol server downloading support.</span></span><br/><br/><span data-ttu-id="4d180-389">**-Ms** 選項可讓您從公用 Microsoft 符號伺服器進行下載。</span><span class="sxs-lookup"><span data-stu-id="4d180-389">The **-ms** option enables downloading from the public Microsoft symbol server.</span></span><br/><br/><span data-ttu-id="4d180-390">**-Disable** 選項會開啟符號下載支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-390">The **-disable** option turns on the symbol download support.</span></span><br/><br/><span data-ttu-id="4d180-391">**-Cache** \<cache-path> 選項會指定符號快取目錄。</span><span class="sxs-lookup"><span data-stu-id="4d180-391">The **-cache** \<cache-path> option specifies a symbol cache directory.</span></span> <span data-ttu-id="4d180-392">如果未指定，預設值會是 $HOME/.dotnet/symbolcache。</span><span class="sxs-lookup"><span data-stu-id="4d180-392">The default is $HOME/.dotnet/symbolcache if not specified.</span></span><br/><br/><span data-ttu-id="4d180-393">**-Directory** 選項會新增用來搜尋符號的路徑。</span><span class="sxs-lookup"><span data-stu-id="4d180-393">The **-directory** option adds a path to search for symbols.</span></span> <span data-ttu-id="4d180-394">可以是一個以上。</span><span class="sxs-lookup"><span data-stu-id="4d180-394">Can be more than one.</span></span><br/><br/><span data-ttu-id="4d180-395">**-.Sympath** 選項會以 Windows 符號路徑格式新增伺服器、快取和目錄路徑。</span><span class="sxs-lookup"><span data-stu-id="4d180-395">The **-sympath** option adds server, cache, and directory paths in the Windows symbol path format.</span></span><br/><br/><span data-ttu-id="4d180-396">**-Log** 選項會啟用符號下載記錄。</span><span class="sxs-lookup"><span data-stu-id="4d180-396">The **-log** option enables symbol download logging.</span></span><br/><br/><span data-ttu-id="4d180-397">**-Loadsymbols** 選項會嘗試下載執行時間的原生 .net Core 符號。</span><span class="sxs-lookup"><span data-stu-id="4d180-397">The **-loadsymbols** option attempts to download the native .NET Core symbols for the runtime.</span></span> <span data-ttu-id="4d180-398">支援 lldb 和 dotnet-傾印</span><span class="sxs-lookup"><span data-stu-id="4d180-398">Supported on lldb and dotnet-dump</span></span>|
|<span data-ttu-id="4d180-399">**SOSFlush**</span><span class="sxs-lookup"><span data-stu-id="4d180-399">**SOSFlush**</span></span>|<span data-ttu-id="4d180-400">清除內部 SOS 快取。</span><span class="sxs-lookup"><span data-stu-id="4d180-400">Flushes an internal SOS cache.</span></span>|
|<span data-ttu-id="4d180-401">**SOSStatus** [**-reset**]</span><span class="sxs-lookup"><span data-stu-id="4d180-401">**SOSStatus** [**-reset**]</span></span>|<span data-ttu-id="4d180-402">顯示內部 SOS 狀態，或重設內部快取狀態。</span><span class="sxs-lookup"><span data-stu-id="4d180-402">Displays internal SOS status or reset the internal cached state.</span></span>|
|<span data-ttu-id="4d180-403">**StopOnException** [**-衍生**] [**-create** &#124; **-create2**] \<*Exception*>\<*Pseudo-register number*></span><span class="sxs-lookup"><span data-stu-id="4d180-403">**StopOnException** [**-derived**] [**-create** &#124; **-create2**] \<*Exception*> \<*Pseudo-register number*></span></span>|<span data-ttu-id="4d180-404">導致偵錯工具會在擲回所指定例外狀況時停止，但是在擲回其他例外狀況時會繼續執行。</span><span class="sxs-lookup"><span data-stu-id="4d180-404">Causes the debugger to stop when the specified exception is thrown, but to continue running when other exceptions are thrown.</span></span><br /><br /> <span data-ttu-id="4d180-405">**-derived** 選項會攔截所指定的例外狀況，以及從所指定例外狀況衍生的每一個例外狀況。</span><span class="sxs-lookup"><span data-stu-id="4d180-405">The **-derived** option catches the specified exception and every exception that derives from the specified exception.</span></span> <br /><br /> <span data-ttu-id="4d180-406">僅支援 Windbg。</span><span class="sxs-lookup"><span data-stu-id="4d180-406">Only supported with Windbg.</span></span>|
|<span data-ttu-id="4d180-407">**>syncblk** [**-all** &#124; \<*syncblk number*> ]</span><span class="sxs-lookup"><span data-stu-id="4d180-407">**SyncBlk** [**-all** &#124; \<*syncblk number*>]</span></span>|<span data-ttu-id="4d180-408">顯示所指定 `SyncBlock` 結構，或是所有的 `SyncBlock` 結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-408">Displays the specified `SyncBlock` structure or all `SyncBlock` structures.</span></span>  <span data-ttu-id="4d180-409">如果您沒有傳遞任何引數，**SyncBlk** 命令便會顯示屬於某執行緒擁有之物件的對應 `SyncBlock` 結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-409">If you do not pass any arguments, the **SyncBlk** command displays the `SyncBlock` structure corresponding to objects that are owned by a thread.</span></span><br /><br /> <span data-ttu-id="4d180-410">`SyncBlock` 結構是專門放置並非每一個物件都要建立之額外資訊的容器。</span><span class="sxs-lookup"><span data-stu-id="4d180-410">A `SyncBlock` structure is a container for extra information that does not need to be created for every object.</span></span> <span data-ttu-id="4d180-411">其中可以包含 COM Interop 資料、雜湊碼，以及安全執行緒作業的鎖定資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-411">It can hold COM interop data, hash codes, and locking information for thread-safe operations.</span></span>|
|<span data-ttu-id="4d180-412">**ThreadPool**</span><span class="sxs-lookup"><span data-stu-id="4d180-412">**ThreadPool**</span></span>|<span data-ttu-id="4d180-413">顯示 Managed 執行緒集區的相關資訊，其中包括佇列中工作要求的數目、完成連接埠執行緒的數目，以及計時器的數目。</span><span class="sxs-lookup"><span data-stu-id="4d180-413">Displays information about the managed thread pool, including the number of work requests in the queue, the number of completion port threads, and the number of timers.</span></span>|
|<span data-ttu-id="4d180-414">**執行緒** (**clrthreads**) [**-live**] [**-特殊**]</span><span class="sxs-lookup"><span data-stu-id="4d180-414">**Threads** (**clrthreads**) [**-live**] [**-special**]</span></span>|<span data-ttu-id="4d180-415">顯示處理序中的所有 Managed 執行緒。</span><span class="sxs-lookup"><span data-stu-id="4d180-415">Displays all managed threads in the process.</span></span><br /><br /> <span data-ttu-id="4d180-416">**Threads** 命令會顯示偵錯工具簡略識別碼、CLR 執行緒識別碼，以及作業系統執行緒識別碼。</span><span class="sxs-lookup"><span data-stu-id="4d180-416">The **Threads** command displays the debugger shorthand ID, the CLR thread ID, and the operating system thread ID.</span></span>  <span data-ttu-id="4d180-417">此外，**Threads** 命令也會顯示 Domain 資料行、APT 資料行和 Exception 資料行，分別指出執行緒執行所在的應用程式定義域、COM Apartment 模式和執行緒中最近一次擲回的例外狀況。</span><span class="sxs-lookup"><span data-stu-id="4d180-417">Additionally, the **Threads** command displays a Domain column that indicates the application domain in which a thread is executing, an APT column that displays the COM apartment mode, and an Exception column that displays the last exception thrown in the thread.</span></span><br /><br /> <span data-ttu-id="4d180-418">**-live** 選項會顯示與運作中執行緒建立關聯的執行緒。</span><span class="sxs-lookup"><span data-stu-id="4d180-418">The **-live** option displays threads associated with a live thread.</span></span><br /><br /> <span data-ttu-id="4d180-419">**-special** 選項會顯示由 CLR 建立的所有特殊執行緒。</span><span class="sxs-lookup"><span data-stu-id="4d180-419">The **-special** option displays all special threads created by the CLR.</span></span> <span data-ttu-id="4d180-420">特殊執行緒包括記憶體回收執行緒 (在並行和伺服器記憶體回收中)、偵錯工具 Helper 執行緒、完成項執行緒、<xref:System.AppDomain> 卸載執行緒，以及執行緒集區計時器執行緒。</span><span class="sxs-lookup"><span data-stu-id="4d180-420">Special threads include garbage collection threads (in concurrent and server garbage collection), debugger helper threads, finalizer threads, <xref:System.AppDomain> unload threads, and thread pool timer threads.</span></span>|
|<span data-ttu-id="4d180-421">**ThreadState \<** *State value field* **>**</span><span class="sxs-lookup"><span data-stu-id="4d180-421">**ThreadState \<** *State value field* **>**</span></span>|<span data-ttu-id="4d180-422">顯示執行緒的狀態。</span><span class="sxs-lookup"><span data-stu-id="4d180-422">Displays the state of the thread.</span></span> <span data-ttu-id="4d180-423">`value` 參數為 **Threads** 報告輸出中 `State` 欄位的值。</span><span class="sxs-lookup"><span data-stu-id="4d180-423">The `value` parameter is the value of the `State` field in the **Threads** report output.</span></span>|
|<span data-ttu-id="4d180-424">**Token2EE** \<*module name*>\<*token*></span><span class="sxs-lookup"><span data-stu-id="4d180-424">**Token2EE** \<*module name*> \<*token*></span></span>|<span data-ttu-id="4d180-425">將所指定模組中的已指定中繼資料語彙基元轉變成 `MethodTable` 結構或 `MethodDesc` 結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-425">Turns the specified metadata token in the specified module into a `MethodTable` structure or `MethodDesc` structure.</span></span><br /><br /> <span data-ttu-id="4d180-426">您可以將 `*` 當做模組名稱參數傳遞，便可了解該語彙基元對應至每一個載入之 Managed 模組中的哪個項目。</span><span class="sxs-lookup"><span data-stu-id="4d180-426">You can pass `*` for the module name parameter to find what that token maps to in every loaded managed module.</span></span> <span data-ttu-id="4d180-427">您也可以傳遞模組的偵錯工具名稱，例如 `mscorlib` 或 `image00400000`。</span><span class="sxs-lookup"><span data-stu-id="4d180-427">You can also pass the debugger's name for a module, such as `mscorlib` or `image00400000`.</span></span>|
|<span data-ttu-id="4d180-428">**U** [**-gcinfo**] [**-ehinfo**] [**-n**] \<*MethodDesc address*> &#124; \<*Code address*></span><span class="sxs-lookup"><span data-stu-id="4d180-428">**U** [**-gcinfo**] [**-ehinfo**] [**-n**] \<*MethodDesc address*> &#124; \<*Code address*></span></span>|<span data-ttu-id="4d180-429">顯示由方法之 `MethodDesc` 結構指標，或是由方法主體內之程式碼位址所指定 Managed 方法的標註反組譯碼。</span><span class="sxs-lookup"><span data-stu-id="4d180-429">Displays an annotated disassembly of a managed method specified either by a `MethodDesc` structure pointer for the method or by a code address within the method body.</span></span> <span data-ttu-id="4d180-430">**U** 命令會顯示從開始到結束的整個方法，以及將中繼資料語彙基元轉換成名稱的註釋。</span><span class="sxs-lookup"><span data-stu-id="4d180-430">The **U** command displays the entire method from start to finish, with annotations that convert metadata tokens to names.</span></span><br /><br /> <span data-ttu-id="4d180-431">**-gcinfo** 選項會使 **U** 命令顯示方法的 `GCInfo` 結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-431">The **-gcinfo** option causes the **U** command to display the `GCInfo` structure for the method.</span></span><br /><br /> <span data-ttu-id="4d180-432">**-ehinfo** 選項會顯示方法的例外狀況資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-432">The **-ehinfo** option displays exception information for the method.</span></span> <span data-ttu-id="4d180-433">您也可以使用 **EHInfo** 命令取得這項資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-433">You can also obtain this information with the **EHInfo** command.</span></span><br /><br /> <span data-ttu-id="4d180-434">**-n** 選項會停用原始程式檔名稱和行號的顯示。</span><span class="sxs-lookup"><span data-stu-id="4d180-434">The **-n** option disables the display of source file names and line numbers.</span></span> <span data-ttu-id="4d180-435">如果偵錯工具有指定 SYMOPT_LOAD_LINES 選項，SOS 就會查詢每個 Managed 框架的符號，而且如果成功，就會顯示對應的原始程式檔名稱和行號。</span><span class="sxs-lookup"><span data-stu-id="4d180-435">If the debugger has the option SYMOPT_LOAD_LINES specified, SOS looks up the symbols for every managed frame and, if successful, displays the corresponding source file name and line number.</span></span> <span data-ttu-id="4d180-436">您可以指定 **-n** 選項以停用這種行為。</span><span class="sxs-lookup"><span data-stu-id="4d180-436">You can specify the **-n** option to disable this behavior.</span></span>|
|<span data-ttu-id="4d180-437">**VerifyHeap**</span><span class="sxs-lookup"><span data-stu-id="4d180-437">**VerifyHeap**</span></span>|<span data-ttu-id="4d180-438">檢查記憶體回收行程堆積是否有損毀徵兆，並顯示任何所發現的錯誤。</span><span class="sxs-lookup"><span data-stu-id="4d180-438">Checks the garbage collector heap for signs of corruption and displays any errors found.</span></span><br /><br /> <span data-ttu-id="4d180-439">堆積損毀的原因可能是平台叫用架構不正確的呼叫。</span><span class="sxs-lookup"><span data-stu-id="4d180-439">Heap corruptions can be caused by platform invoke calls that are constructed incorrectly.</span></span> |
|<span data-ttu-id="4d180-440">**VerifyObj**\<*object address*></span><span class="sxs-lookup"><span data-stu-id="4d180-440">**VerifyObj** \<*object address*></span></span>|<span data-ttu-id="4d180-441">檢查傳遞為引數的物件以找出損毀的症狀。</span><span class="sxs-lookup"><span data-stu-id="4d180-441">Checks the object that is passed as an argument for signs of corruption.</span></span> <span data-ttu-id="4d180-442">只有在 Windows 上才支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-442">Only supported on Windows.</span></span>|
|<span data-ttu-id="4d180-443">**存取 vmmap**</span><span class="sxs-lookup"><span data-stu-id="4d180-443">**VMMap**</span></span>|<span data-ttu-id="4d180-444">周遊虛擬位址空間，並顯示每個區域所套用的保護類型。</span><span class="sxs-lookup"><span data-stu-id="4d180-444">Traverses the virtual address space and displays the type of protection applied to each region.</span></span> <span data-ttu-id="4d180-445">僅支援 Windbg。</span><span class="sxs-lookup"><span data-stu-id="4d180-445">Only supported with Windbg.</span></span>|
|<span data-ttu-id="4d180-446">**Vmstat**</span><span class="sxs-lookup"><span data-stu-id="4d180-446">**VMStat**</span></span>|<span data-ttu-id="4d180-447">提供虛擬位址空間的摘要檢視，並依據套用至該記憶體的各種保護類型 (無限制、保留、認可、私用、對應、影像) 進行排列。</span><span class="sxs-lookup"><span data-stu-id="4d180-447">Provides a summary view of the virtual address space, ordered by each type of protection applied to that memory (free, reserved, committed, private, mapped, image).</span></span> <span data-ttu-id="4d180-448">TOTAL 資料行會顯示 AVERAGE 資料行乘以 BLK COUNT 資料行的結果。</span><span class="sxs-lookup"><span data-stu-id="4d180-448">The TOTAL column displays the result of the AVERAGE column multiplied by the BLK COUNT column.</span></span> <span data-ttu-id="4d180-449">僅支援 Windbg。</span><span class="sxs-lookup"><span data-stu-id="4d180-449">Only supported with Windbg.</span></span>|

### <a name="dotnet-dump"></a><span data-ttu-id="4d180-450">Dotnet-Dump</span><span class="sxs-lookup"><span data-stu-id="4d180-450">Dotnet-Dump</span></span>

<span data-ttu-id="4d180-451">如需的可用 SOS 命令清單 `dotnet-dump analyze` ，請參閱 [dotnet-](dotnet-dump.md#analyze-sos-commands)傾印。</span><span class="sxs-lookup"><span data-stu-id="4d180-451">For a list of available SOS commands with `dotnet-dump analyze`, see [dotnet-dump](dotnet-dump.md#analyze-sos-commands).</span></span>

### <a name="windows-debugger"></a><span data-ttu-id="4d180-452">Windows 偵錯工具</span><span class="sxs-lookup"><span data-stu-id="4d180-452">Windows Debugger</span></span>

<span data-ttu-id="4d180-453">您也可以使用 SOS 偵錯工具擴充功能，方法是將它載入至 [WinDbg/dbg 偵錯工具](/windows-hardware/drivers/debugger/debugger-download-tools) ，並在 Windows 偵錯工具中執行命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-453">You can also use the SOS Debugging Extension by loading it into the [WinDbg/dbg debugger](/windows-hardware/drivers/debugger/debugger-download-tools) and executing commands within the Windows debugger.</span></span>  <span data-ttu-id="4d180-454">SOS 命令可用於即時進程或傾印。</span><span class="sxs-lookup"><span data-stu-id="4d180-454">SOS commands can be used on live processes or dumps.</span></span>

<span data-ttu-id="4d180-455">若要將 SOS 偵錯工具擴充功能載入 Windows 偵錯工具，請在工具中執行下列命令：</span><span class="sxs-lookup"><span data-stu-id="4d180-455">To load the SOS Debugging Extension into the Windows debugger, run the following command in the tool:</span></span>

```console
.loadby sos clr
```

<span data-ttu-id="4d180-456">WinDbg.exe 和 Visual Studio 都會使用對應於目前使用中之 Mscorwks.dll 版本的 SOS.dll 版本。</span><span class="sxs-lookup"><span data-stu-id="4d180-456">WinDbg.exe and Visual Studio use a version of SOS.dll that corresponds to the version of Mscorwks.dll currently in use.</span></span> <span data-ttu-id="4d180-457">根據預設，您應該使用符合目前 Mscorwks.dll 版本的 SOS.dll 版本。</span><span class="sxs-lookup"><span data-stu-id="4d180-457">By default, you should use the version of SOS.dll that matches the current version of Mscorwks.dll.</span></span>

<span data-ttu-id="4d180-458">若要使用在另一部電腦上建立的傾印檔案，請確定此次安裝所隨附的 Mscorwks.dll 檔案位於您的符號路徑中，然後載入對應的 SOS.dll 版本。</span><span class="sxs-lookup"><span data-stu-id="4d180-458">To use a dump file created on another computer, make sure that the Mscorwks.dll file that came with that installation is in your symbol path, and load the corresponding version of SOS.dll.</span></span>

<span data-ttu-id="4d180-459">若要載入特定版本的 SOS.dll，請在 Windows 偵錯工具中輸入下列命令：</span><span class="sxs-lookup"><span data-stu-id="4d180-459">To load a specific version of SOS.dll, enter the following command into the Windows Debugger:</span></span>

```console
.load <full path to sos.dll>
```

### <a name="lldb-debugger"></a><span data-ttu-id="4d180-460">LLDB 偵錯工具</span><span class="sxs-lookup"><span data-stu-id="4d180-460">LLDB Debugger</span></span>

<span data-ttu-id="4d180-461">如需設定 SOS 以進行 LLDB 的指示，請參閱 [dotnet-SOS](dotnet-sos.md)。</span><span class="sxs-lookup"><span data-stu-id="4d180-461">For instructions on configuring SOS for LLDB, see [dotnet-sos](dotnet-sos.md).</span></span> <span data-ttu-id="4d180-462">SOS 命令可用於即時進程或傾印。</span><span class="sxs-lookup"><span data-stu-id="4d180-462">SOS commands can be used on live processes or dumps.</span></span>

<span data-ttu-id="4d180-463">依預設，您可以藉由輸入下列命令來連接所有 SOS 命令： `sos [command\_name]` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-463">By default you can reach all the SOS commands by entering: `sos [command\_name]`.</span></span> <span data-ttu-id="4d180-464">不過，常見的命令已有別名，因此您不需要 `sos` 前置詞：</span><span class="sxs-lookup"><span data-stu-id="4d180-464">However, the common commands have been aliased so that you don't need the `sos` prefix:</span></span>

| <span data-ttu-id="4d180-465">命令</span><span class="sxs-lookup"><span data-stu-id="4d180-465">Command</span></span>                               | <span data-ttu-id="4d180-466">函數</span><span class="sxs-lookup"><span data-stu-id="4d180-466">Function</span></span>
| ------------------------------------- | ---------------------------------------------------------------------------------------------
|    `bpmd`                             | <span data-ttu-id="4d180-467">在指定的模組中，于指定的 managed 方法上建立中斷點。</span><span class="sxs-lookup"><span data-stu-id="4d180-467">Creates a breakpoint at the specified managed method in the specified module.</span></span>
|    `clrstack`                         | <span data-ttu-id="4d180-468">僅提供 Managed 程式碼的堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="4d180-468">Provides a stack trace of managed code only.</span></span>
|    `clrthreads`                       | <span data-ttu-id="4d180-469">列出正在執行的受管理執行緒。</span><span class="sxs-lookup"><span data-stu-id="4d180-469">List the managed threads that are running.</span></span>
|    `clru`                             | <span data-ttu-id="4d180-470">顯示 managed 方法的批註式反組解碼。</span><span class="sxs-lookup"><span data-stu-id="4d180-470">Displays an annotated disassembly of a managed method.</span></span>
|    `dso`                              | <span data-ttu-id="4d180-471">顯示可在目前堆疊界限內找到的所有 Managed 物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-471">Displays all managed objects found within the bounds of the current stack.</span></span>
|    `dumpasync`                        | <span data-ttu-id="4d180-472">顯示垃圾收集堆積上非同步狀態機器的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-472">Displays info about async state machines on the garbage-collected heap.</span></span>
|    `dumpclass`                        | <span data-ttu-id="4d180-473">顯示指定位址之結構的相關資訊 `EEClass` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-473">Displays information about the `EEClass` structure at the specified address.</span></span>
|    `dumpdomain`                       | <span data-ttu-id="4d180-474">顯示指定網域內所有 Appdomain 和所有元件的資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-474">Displays information all the AppDomains and all assemblies within the specified domain.</span></span>
|    `dumpheap`                         | <span data-ttu-id="4d180-475">顯示垃圾收集堆積的相關資訊，以及物件的集合統計資料。</span><span class="sxs-lookup"><span data-stu-id="4d180-475">Displays info about the garbage-collected heap and collection statistics about objects.</span></span>
|    `dumpil`                           | <span data-ttu-id="4d180-476">顯示與 Managed 方法相關聯的 Microsoft 中繼語言 (MSIL)。</span><span class="sxs-lookup"><span data-stu-id="4d180-476">Displays the Microsoft intermediate language (MSIL) that is associated with a managed method.</span></span>
|    `dumplog`                          | <span data-ttu-id="4d180-477">將記憶體中壓力記錄檔的內容寫入指定的檔案。</span><span class="sxs-lookup"><span data-stu-id="4d180-477">Writes the contents of an in-memory stress log to the specified file.</span></span>
|    `dumpmd`                           | <span data-ttu-id="4d180-478">顯示指定位址之結構的相關資訊 `MethodDesc` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-478">Displays information about the `MethodDesc` structure at the specified address.</span></span>
|    `dumpmodule`                       | <span data-ttu-id="4d180-479">顯示指定位址上模組的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-479">Displays information about the module at the specified address.</span></span>
|    `dumpmt`                           | <span data-ttu-id="4d180-480">顯示指定位址之方法資料表的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-480">Displays information about the method table at the specified address.</span></span>
|    `dumpobj`                          | <span data-ttu-id="4d180-481">顯示指定位址的物件資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-481">Displays info the object at the specified address.</span></span>
|    `dumpstack`                        | <span data-ttu-id="4d180-482">顯示原生和 managed 堆疊追蹤。</span><span class="sxs-lookup"><span data-stu-id="4d180-482">Displays a native and managed stack trace.</span></span>
|    `eeheap`                           | <span data-ttu-id="4d180-483">顯示內部執行時間資料結構所耗用的進程記憶體相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-483">Displays info about process memory consumed by internal runtime data structures.</span></span>
|    `eestack`                          | <span data-ttu-id="4d180-484">會 `dumpstack` 在進程中的所有線程上執行。</span><span class="sxs-lookup"><span data-stu-id="4d180-484">Runs `dumpstack` on all threads in the process.</span></span>
|    `gcroot`                           | <span data-ttu-id="4d180-485">在指定的位址上，顯示物件 (或根) 參考的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-485">Displays info about references (or roots) to the object at the specified address.</span></span>
|    `histclear`                        | <span data-ttu-id="4d180-486">釋放 >hist 命令系列所使用的任何資源。</span><span class="sxs-lookup"><span data-stu-id="4d180-486">Releases any resources used by the family of Hist commands.</span></span>
|    `histinit`                         | <span data-ttu-id="4d180-487">初始化在偵錯項目中儲存之壓力記錄檔中的 SOS 結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-487">Initializes the SOS structures from the stress log saved in the debuggee.</span></span>
|    `histobj`                          | <span data-ttu-id="4d180-488">會檢查所有壓力記錄檔重新配置記錄，並顯示可能會使位址被當做引數傳入之記憶體回收重新配置的鏈結。</span><span class="sxs-lookup"><span data-stu-id="4d180-488">Examines all stress log relocation records and displays the chain of garbage collection relocations that may have led to the address passed in as an argument.</span></span>
|    `histobjfind`                      | <span data-ttu-id="4d180-489">顯示在指定的位址參考物件的所有記錄專案。</span><span class="sxs-lookup"><span data-stu-id="4d180-489">Displays all the log entries that reference the object at the specified address.</span></span>
|    `histroot`                         | <span data-ttu-id="4d180-490">顯示與指定之根的提升和重新配置都相關的資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-490">Displays information related to both promotions and relocations of the specified root.</span></span>
|    `ip2md`                            | <span data-ttu-id="4d180-491">顯示在已進行 JIT 編譯之程式碼中之指定位址的 `MethodDesc` 結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-491">Displays the `MethodDesc` structure at the specified address in code that has been JIT-compiled.</span></span>
|    `loadsymbols`                      | <span data-ttu-id="4d180-492">載入 .NET Core 原生模組符號。</span><span class="sxs-lookup"><span data-stu-id="4d180-492">Load the .NET Core native module symbols.</span></span>
|    `name2ee`                          | <span data-ttu-id="4d180-493">顯示指定 `MethodTable` `EEClass` 模組中所指定類型或方法的和結構。</span><span class="sxs-lookup"><span data-stu-id="4d180-493">Displays the `MethodTable` and `EEClass` structures for the specified type or method in the specified module.</span></span>
|    `pe`                               | <span data-ttu-id="4d180-494">顯示並格式化在所指定位址且衍生自 <xref:System.Exception> 類別之任何物件的欄位。</span><span class="sxs-lookup"><span data-stu-id="4d180-494">Displays and formats fields of any object derived from the <xref:System.Exception> class at the specified address.</span></span>
|    `setclrpath`                       | <span data-ttu-id="4d180-495">設定要載入 coreclr dac/dbi 檔案的路徑。</span><span class="sxs-lookup"><span data-stu-id="4d180-495">Sets the path to load coreclr dac/dbi files.</span></span> `setclrpath <path>`
|    `sethostruntime`                   | <span data-ttu-id="4d180-496">設定或顯示在 SOS 中用來執行 managed 程式碼的 .NET Core 執行時間目錄。</span><span class="sxs-lookup"><span data-stu-id="4d180-496">Sets or displays the .NET Core runtime directory to use to run managed code in SOS.</span></span>
|    `setsymbolserver`                  | <span data-ttu-id="4d180-497">啟用符號伺服器支援。</span><span class="sxs-lookup"><span data-stu-id="4d180-497">Enables the symbol server support.</span></span>
|    `setsostid`                        | <span data-ttu-id="4d180-498">設定目前的 OS tid/執行緒索引，而不是使用一個 lldb 提供的。</span><span class="sxs-lookup"><span data-stu-id="4d180-498">Sets the current OS tid/thread index instead of using the one lldb provides.</span></span> `setsostid <tid> <index>`
|    `sos`                              | <span data-ttu-id="4d180-499">各種 coreclr 的調試命令。</span><span class="sxs-lookup"><span data-stu-id="4d180-499">Various coreclr debugging commands.</span></span> <span data-ttu-id="4d180-500">如需詳細資訊，請參閱 ' soshelp '。</span><span class="sxs-lookup"><span data-stu-id="4d180-500">For more information, see 'soshelp'.</span></span> `sos <command-name> <args>`
|    `soshelp`                          | <span data-ttu-id="4d180-501">如果未指定任何參數，則顯示所有可用的命令，或顯示指定命令的詳細說明資訊： `soshelp <command>`</span><span class="sxs-lookup"><span data-stu-id="4d180-501">Displays all available commands when no parameter is specified, or displays detailed help information about the specified command: `soshelp <command>`</span></span>
|    `syncblk`                          | <span data-ttu-id="4d180-502">顯示 SyncBlock 持有者資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-502">Displays the SyncBlock holder info.</span></span>

## <a name="windbgcdb-example-usage"></a><span data-ttu-id="4d180-503">Windbg/cdb 範例使用方式</span><span class="sxs-lookup"><span data-stu-id="4d180-503">Windbg/cdb example usage</span></span>

| <span data-ttu-id="4d180-504">命令</span><span class="sxs-lookup"><span data-stu-id="4d180-504">Command</span></span>  | <span data-ttu-id="4d180-505">描述</span><span class="sxs-lookup"><span data-stu-id="4d180-505">Description</span></span>
| - | -
| `!dumparray -start 2 -length 5 -detail 00ad28d0` | <span data-ttu-id="4d180-506">顯示位址的陣列內容 `00ad28d0` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-506">Displays the contents of an array at the address `00ad28d0`.</span></span>  <span data-ttu-id="4d180-507">顯示會從第二個元素開始，然後連續顯示五個元素。</span><span class="sxs-lookup"><span data-stu-id="4d180-507">The display starts from the second element and continues for five elements.</span></span>
| `!dumpassembly 1ca248` | <span data-ttu-id="4d180-508">顯示位址的元件內容 `1ca248` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-508">Displays the contents of an assembly at the address `1ca248`.</span></span>
| `!dumpheap` | <span data-ttu-id="4d180-509">顯示垃圾收集行程堆積的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-509">Displays information about the garbage collector heap.</span></span>
| `!DumpLog` | <span data-ttu-id="4d180-510">將記憶體中壓力記錄檔的內容寫入至目前目錄中名為 StressLog.txt 的 (預設) 檔。</span><span class="sxs-lookup"><span data-stu-id="4d180-510">Writes the contents of the in-memory stress log to a (default) file called StressLog.txt in the current directory.</span></span>
 `!dumpmd 902f40` | <span data-ttu-id="4d180-511">`MethodDesc`在位址顯示結構 `902f40` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-511">Displays the `MethodDesc` structure at the address `902f40`.</span></span>
| `!dumpmodule 1caa50` | <span data-ttu-id="4d180-512">顯示位址上模組的相關資訊 `1caa50` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-512">Displays information about a module at the address `1caa50`.</span></span>
| `!DumpObj a79d40` | <span data-ttu-id="4d180-513">顯示位址上物件的相關資訊 `a79d40` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-513">Displays information about an object at the address `a79d40`.</span></span>
| `!DumpVC 0090320c 00a79d9c` | <span data-ttu-id="4d180-514">`00a79d9c`使用位址上的方法資料表，在位址顯示值類別的欄位 `0090320c` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-514">Displays the fields of a value class at the address `00a79d9c` using the method table at the address `0090320c`.</span></span>
| <span data-ttu-id="4d180-515">`!eeheap` -gc</span><span class="sxs-lookup"><span data-stu-id="4d180-515">`!eeheap` -gc</span></span> | <span data-ttu-id="4d180-516">顯示垃圾收集行程所使用的進程記憶體。</span><span class="sxs-lookup"><span data-stu-id="4d180-516">Displays the process memory used by the garbage collector.</span></span>
| `!finalizequeue` | <span data-ttu-id="4d180-517">顯示排程進行最終處理的所有物件。</span><span class="sxs-lookup"><span data-stu-id="4d180-517">Displays all objects scheduled for finalization.</span></span>
| `!findappdomain 00a79d98` |  <span data-ttu-id="4d180-518">判斷位於位址之物件的應用程式域 `00a79d98` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-518">Determines the application domain of an object at the address `00a79d98`.</span></span>
| `!gcinfo 5b68dbb8` | <span data-ttu-id="4d180-519">顯示目前進程中的所有垃圾收集行程控制碼。</span><span class="sxs-lookup"><span data-stu-id="4d180-519">Displays all garbage collector handles in the current process.</span></span>
| `!name2ee unittest.exe MainClass.Main` | <span data-ttu-id="4d180-520">顯示 `MethodTable` 模組中 `EEClass` 類別的方法和結構 `Main` `MainClass` `unittest.exe` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-520">Displays the `MethodTable` and `EEClass` structures for the `Main` method in the class `MainClass` in the module `unittest.exe`.</span></span>
| `!token2ee unittest.exe 02000003` | <span data-ttu-id="4d180-521">顯示有關模組中位址的元資料標記資訊 `02000003` `unittest.exe` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-521">Displays information about the metadata token at the address `02000003` in the module `unittest.exe`.</span></span>

## <a name="lldb-example-usage"></a><span data-ttu-id="4d180-522">LLDB 範例使用方式</span><span class="sxs-lookup"><span data-stu-id="4d180-522">LLDB example usage</span></span>

| <span data-ttu-id="4d180-523">命令</span><span class="sxs-lookup"><span data-stu-id="4d180-523">Command</span></span>  | <span data-ttu-id="4d180-524">描述</span><span class="sxs-lookup"><span data-stu-id="4d180-524">Description</span></span>
| - | -
| `sos DumpArray -start 2 -length 5 -detail 00ad28d0` | <span data-ttu-id="4d180-525">顯示位址的陣列內容 `00ad28d0` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-525">Displays the contents of an array at the address `00ad28d0`.</span></span>  <span data-ttu-id="4d180-526">顯示會從第二個元素開始，然後連續顯示五個元素。</span><span class="sxs-lookup"><span data-stu-id="4d180-526">The display starts from the second element and continues for five elements.</span></span>
| `sos DumpAssembly 1ca248` | <span data-ttu-id="4d180-527">顯示位址的元件內容 `1ca248` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-527">Displays the contents of an assembly at the address `1ca248`.</span></span>
| `dumpheap` | <span data-ttu-id="4d180-528">顯示垃圾收集行程堆積的相關資訊。</span><span class="sxs-lookup"><span data-stu-id="4d180-528">Displays information about the garbage collector heap.</span></span>
| `dumplog` | <span data-ttu-id="4d180-529">將記憶體中壓力記錄檔的內容寫入至目前目錄中名為 StressLog.txt 的 (預設) 檔。</span><span class="sxs-lookup"><span data-stu-id="4d180-529">Writes the contents of the in-memory stress log to a (default) file called StressLog.txt in the current directory.</span></span>
| `dumpmd 902f40` | <span data-ttu-id="4d180-530">`MethodDesc`在位址顯示結構 `902f40` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-530">Displays the `MethodDesc` structure at the address `902f40`.</span></span>
| `dumpmodule 1caa50` | <span data-ttu-id="4d180-531">顯示位址上模組的相關資訊 `1caa50` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-531">Displays information about a module at the address `1caa50`.</span></span>
| `dumpobj a79d40` | <span data-ttu-id="4d180-532">顯示位址上物件的相關資訊 `a79d40` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-532">Displays information about an object at the address `a79d40`.</span></span>
| `sos DumpVC 0090320c 00a79d9c` | <span data-ttu-id="4d180-533">`00a79d9c`使用位址上的方法資料表，在位址顯示值類別的欄位 `0090320c` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-533">Displays the fields of a value class at the address `00a79d9c` using the method table at the address `0090320c`.</span></span>
| `eeheap -gc` | <span data-ttu-id="4d180-534">顯示垃圾收集行程所使用的進程記憶體。</span><span class="sxs-lookup"><span data-stu-id="4d180-534">Displays the process memory used by the garbage collector.</span></span>
| `sos FindAppDomain 00a79d98` | <span data-ttu-id="4d180-535">判斷位於位址之物件的應用程式域 `00a79d98` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-535">Determines the application domain of an object at the address `00a79d98`.</span></span>
| `sos GCInfo 5b68dbb8` | <span data-ttu-id="4d180-536">顯示目前進程中的所有垃圾收集行程控制碼。</span><span class="sxs-lookup"><span data-stu-id="4d180-536">Displays all garbage collector handles in the current process.</span></span>
| `name2ee unittest.exe MainClass.Main` | <span data-ttu-id="4d180-537">顯示 `MethodTable` 模組中 `EEClass` 類別的方法和結構 `Main` `MainClass` `unittest.exe` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-537">Displays the `MethodTable` and `EEClass` structures for the `Main` method in the class `MainClass` in the module `unittest.exe`.</span></span>
| `sos Token2EE unittest.exe 02000003` | <span data-ttu-id="4d180-538">顯示有關模組中位址的元資料標記資訊 `02000003` `unittest.exe` 。</span><span class="sxs-lookup"><span data-stu-id="4d180-538">Displays information about the metadata token at the address `02000003` in the module `unittest.exe`.</span></span>
| `clrthreads` | <span data-ttu-id="4d180-539">顯示 managed 執行緒。</span><span class="sxs-lookup"><span data-stu-id="4d180-539">Displays the managed threads.</span></span>

## <a name="see-also"></a><span data-ttu-id="4d180-540">請參閱</span><span class="sxs-lookup"><span data-stu-id="4d180-540">See also</span></span>

- [<span data-ttu-id="4d180-541">.NET 中傾印的簡介</span><span class="sxs-lookup"><span data-stu-id="4d180-541">An introduction to dumps in .NET</span></span>](dumps.md)
- [<span data-ttu-id="4d180-542">瞭解如何在 .NET Core 中偵測記憶體流失</span><span class="sxs-lookup"><span data-stu-id="4d180-542">Learn how to debug a memory leak in .NET Core</span></span>](debug-memory-leak.md)
- [<span data-ttu-id="4d180-543">收集和分析記憶體傾印的 blog</span><span class="sxs-lookup"><span data-stu-id="4d180-543">Collecting and analyzing memory dumps blog</span></span>](https://devblogs.microsoft.com/dotnet/collecting-and-analyzing-memory-dumps/)
- [<span data-ttu-id="4d180-544">傾印分析工具 (dotnet-傾印) </span><span class="sxs-lookup"><span data-stu-id="4d180-544">Dump analysis tool (dotnet-dump)</span></span>](dotnet-dump.md)
- [<span data-ttu-id="4d180-545">SOS 安裝工具 (dotnet-sos) </span><span class="sxs-lookup"><span data-stu-id="4d180-545">SOS Installation Tool (dotnet-sos)</span></span>](dotnet-sos.md)
- [<span data-ttu-id="4d180-546">堆積分析工具 (dotnet-gcdump) </span><span class="sxs-lookup"><span data-stu-id="4d180-546">Heap analysis tool (dotnet-gcdump)</span></span>](dotnet-gcdump.md)
