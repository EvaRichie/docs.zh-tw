---
title: 在 .NET Framework 4.5 安裝期間減少系統重新啟動的次數
description: 瞭解如何在 .NET Framework 4.5 安裝期間減少系統重新開機。 如果在 .NET Framework 4.5 安裝期間使用 .NET 4 應用程式，則可能需要重新開機。
ms.date: 03/30/2017
helpviewer_keywords:
- .NET Framework, reducing system restarts
- installing .NET Framework
- installation [.NET Framework]
ms.assetid: 7aa8cb72-dee9-4716-ac54-b17b9ae8218f
ms.openlocfilehash: bdbf856bd4e431e389109524b70fce0674f552b8
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/24/2020
ms.locfileid: "95726973"
---
# <a name="reducing-system-restarts-during-net-framework-45-installations"></a><span data-ttu-id="dbb2f-104">在 .NET Framework 4.5 安裝期間減少系統重新啟動的次數</span><span class="sxs-lookup"><span data-stu-id="dbb2f-104">Reducing System Restarts During .NET Framework 4.5 Installations</span></span>
<span data-ttu-id="dbb2f-105">.NET Framework 4.5 安裝程式會使用[重新啟動管理員](/windows/win32/rstmgr/about-restart-manager)，盡可能在安裝時防止系統重新啟動。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-105">The .NET Framework 4.5 installer uses the [Restart Manager](/windows/win32/rstmgr/about-restart-manager) to prevent system restarts whenever possible during installation.</span></span> <span data-ttu-id="dbb2f-106">如果您的應用程式安裝程式安裝 .NET Framework，則可以與 [重新啟動管理員] 互動來利用這項功能。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-106">If your app setup program installs the .NET Framework, it can interface with the Restart Manager to take advantage of this feature.</span></span> <span data-ttu-id="dbb2f-107">如需詳細資訊，請參閱[如何：取得 .NET Framework 4.5 安裝程式的進度](how-to-get-progress-from-the-dotnet-installer.md)。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-107">For more information, see [How to: Get Progress from the .NET Framework 4.5 Installer](how-to-get-progress-from-the-dotnet-installer.md).</span></span>

## <a name="reasons-for-a-restart"></a><span data-ttu-id="dbb2f-108">重新啟動的原因</span><span class="sxs-lookup"><span data-stu-id="dbb2f-108">Reasons for a Restart</span></span>
 <span data-ttu-id="dbb2f-109">如果安裝期間正在使用 .NET Framework 4 應用程式，則 .NET Framework 4.5 安裝需要重新啟動系統。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-109">The .NET Framework 4.5 installation requires a system restart if a .NET Framework 4 app is in use during the installation.</span></span> <span data-ttu-id="dbb2f-110">這是因為 .NET Framework 4.5 會取代 .NET Framework 4 檔案，因此這些檔案必須在安裝期間可供使用。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-110">This is because the .NET Framework 4.5 replaces .NET Framework 4 files and requires those files to be available during installation.</span></span> <span data-ttu-id="dbb2f-111">在許多情況下，事先偵測和關閉正在使用的 .NET Framework 4 應用程式，即可避免重新啟動。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-111">In many cases, the restart can be prevented by preemptively detecting and closing.NET Framework 4 apps that are in use.</span></span> <span data-ttu-id="dbb2f-112">不過，不應該關閉部分系統應用程式。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-112">However, some system apps should not be closed.</span></span> <span data-ttu-id="dbb2f-113">在這些情況下，無法避免重新啟動。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-113">In these cases, a restart cannot be avoided.</span></span>

## <a name="end-user-experience"></a><span data-ttu-id="dbb2f-114">使用者體驗</span><span class="sxs-lookup"><span data-stu-id="dbb2f-114">End-User Experience</span></span>
 <span data-ttu-id="dbb2f-115">如果安裝程式偵測到正在使用 .NET Framework 4 應用程式，則執行完整 .NET Framework 4.5 安裝的終端使用者就有機會可以避免重新啟動系統。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-115">An end-user who is doing a full installation of the .NET Framework 4.5 is given the opportunity to avoid a system restart if the installer detects .NET Framework 4 apps in use.</span></span> <span data-ttu-id="dbb2f-116">訊息會列出所有執行中 .NET Framework 4 應用程式，並提供選項來關閉這些應用程式，再進行安裝。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-116">A message lists all running .NET Framework 4 apps and provides the option to close these apps before the installation.</span></span> <span data-ttu-id="dbb2f-117">如果使用者確認，則安裝程式會關閉這些應用程式，並避免重新啟動系統。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-117">If the user confirms, these apps are shut down by the installer, and a system restart is avoided.</span></span> <span data-ttu-id="dbb2f-118">如果使用者在一段時間內未回應訊息，則會繼續安裝，而不需要關閉任何應用程式。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-118">If the user does not respond to the message within a certain amount of time, the installation continues without closing any apps.</span></span>

 <span data-ttu-id="dbb2f-119">如果 [重新啟動管理員] 偵測到即使關閉執行中應用程式也需要重新啟動系統的情況，則不會顯示訊息。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-119">If the Restart Manager detects a situation that will require a system restart even if running apps are closed, the message is not displayed.</span></span>

 ![[關閉應用程式] 對話方塊，其中列出目前正在執行的程式。](./media/reducing-system-restarts/close-application-dialog.png)

## <a name="using-a-chained-installer"></a><span data-ttu-id="dbb2f-121">使用鏈結的安裝程式</span><span class="sxs-lookup"><span data-stu-id="dbb2f-121">Using a Chained Installer</span></span>
 <span data-ttu-id="dbb2f-122">如果您想要轉散發 .NET Framework 與應用程式，但想要使用自己的安裝程式和 UI，則可以在安裝程序中包括 (鏈結) .NET Framework 安裝程序。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-122">If you want to redistribute the .NET Framework with your app, but you want to use your own setup program and UI, you can include (chain) the .NET Framework setup process to your setup process.</span></span> <span data-ttu-id="dbb2f-123">如需鏈結之安裝的詳細資訊，請參閱[開發人員部署手冊](deployment-guide-for-developers.md)。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-123">For more information about chained installations, see [Deployment Guide for Developers](deployment-guide-for-developers.md).</span></span> <span data-ttu-id="dbb2f-124">為了減少在鏈結的安裝中重新啟動系統，.NET Framework 安裝程式會將要關閉的應用程式清單提供給安裝程式。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-124">To reduce system restarts in chained installations, the .NET Framework installer supplies your setup program with the list of apps to close.</span></span> <span data-ttu-id="dbb2f-125">安裝程式必須透過使用者介面 (例如訊息方塊) 將這項資訊提供給使用者，並取得使用者的回應，然後將回應傳遞回 .NET Framework 安裝程式。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-125">Your setup program must provide this information to the user through a user interface such as a message box, get the user’s response, and then pass the response back to the .NET Framework installer.</span></span> <span data-ttu-id="dbb2f-126">如需所鏈結安裝程式的範例，請參閱[如何：取得 .NET Framework 4.5 安裝程式的進度](how-to-get-progress-from-the-dotnet-installer.md)一文。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-126">For an example of a chained installer, see the article [How to: Get Progress from the .NET Framework 4.5 Installer](how-to-get-progress-from-the-dotnet-installer.md).</span></span>

 <span data-ttu-id="dbb2f-127">如果您要使用鏈結的安裝程式，但不想要提供關閉應用程式的專屬訊息方塊，則可以在鏈結 .NET Framework 安裝程序時，於命令列上使用 `/showrmui` 和 `/passive` 選項。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-127">If you're using a chained installer, but you do not want to provide your own message box for closing apps, you can use the `/showrmui` and `/passive` options on the command line when you chain the .NET Framework setup process.</span></span> <span data-ttu-id="dbb2f-128">當您一起使用這些選項時，安裝程式會顯示關閉可關閉之應用程式的訊息方塊，以避免重新啟動系統。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-128">When you use these options together, the installer shows the message box for closing apps if they can be closed to avoid a system restart.</span></span> <span data-ttu-id="dbb2f-129">被動模式下之這個訊息方塊的行為與完整使用者介面的作用相同。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-129">This message box behaves the same in passive mode as it does under the full user interface.</span></span> <span data-ttu-id="dbb2f-130">如需 .NET Framework 可轉散發套件的完整一組命令列選項，請參閱[開發人員部署手冊](deployment-guide-for-developers.md)。</span><span class="sxs-lookup"><span data-stu-id="dbb2f-130">See [Deployment Guide for Developers](deployment-guide-for-developers.md) for the complete set of command-line options for the .NET Framework redistributable.</span></span>

## <a name="see-also"></a><span data-ttu-id="dbb2f-131">另請參閱</span><span class="sxs-lookup"><span data-stu-id="dbb2f-131">See also</span></span>

- [<span data-ttu-id="dbb2f-132">部署</span><span class="sxs-lookup"><span data-stu-id="dbb2f-132">Deployment</span></span>](index.md)
- [<span data-ttu-id="dbb2f-133">開發人員部署手冊</span><span class="sxs-lookup"><span data-stu-id="dbb2f-133">Deployment Guide for Developers</span></span>](deployment-guide-for-developers.md)
- [<span data-ttu-id="dbb2f-134">作法：取得 .NET Framework 4.5 安裝程式的進度</span><span class="sxs-lookup"><span data-stu-id="dbb2f-134">How to: Get Progress from the .NET Framework 4.5 Installer</span></span>](how-to-get-progress-from-the-dotnet-installer.md)
