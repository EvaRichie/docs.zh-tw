---
title: System.Uri 的國際資源識別項支援
ms.date: 03/30/2017
ms.assetid: b5e994c3-3535-4aff-8e1b-b69be22e9a22
ms.openlocfilehash: a3670c40a7a78e2ac8b521a4cb95477381848f36
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/26/2020
ms.locfileid: "96253358"
---
# <a name="international-resource-identifier-support-in-systemuri"></a><span data-ttu-id="d8a81-102">System.Uri 的國際資源識別項支援</span><span class="sxs-lookup"><span data-stu-id="d8a81-102">International Resource Identifier Support in System.Uri</span></span>

<span data-ttu-id="d8a81-103"><xref:System.Uri?displayProperty=nameWithType> 類別已擴充加上國際資源識別碼 (IRI) 和國際化網域名稱 (IDN) 支援。</span><span class="sxs-lookup"><span data-stu-id="d8a81-103">The <xref:System.Uri?displayProperty=nameWithType> class has been extended with International Resource Identifier (IRI) and Internationalized Domain Names (IDN) support.</span></span> <span data-ttu-id="d8a81-104">NET Framework 3.5、3.0 SP1 和 2.0 SP1 皆可使用這些增強功能。</span><span class="sxs-lookup"><span data-stu-id="d8a81-104">These enhancements are available in .NET Framework 3.5, 3.0 SP1, and 2.0 SP1.</span></span>  
  
## <a name="iri-and-idn-support"></a><span data-ttu-id="d8a81-105">IRI 和 IDN 支援</span><span class="sxs-lookup"><span data-stu-id="d8a81-105">IRI and IDN Support</span></span>  

 <span data-ttu-id="d8a81-106">網址通常是使用統一資源識別碼 (URI) 來表示，而 URI 是由非常有限的字元組構成：</span><span class="sxs-lookup"><span data-stu-id="d8a81-106">Web addresses are typically expressed using Uniform Resource Identifiers (URI) that consist of a very restricted set of characters:</span></span>  
  
- <span data-ttu-id="d8a81-107">大寫和小寫的英文 ASCII 字母。</span><span class="sxs-lookup"><span data-stu-id="d8a81-107">Upper and lower case ASCII letters from the English alphabet.</span></span>  
  
- <span data-ttu-id="d8a81-108">0 到 9 位數。</span><span class="sxs-lookup"><span data-stu-id="d8a81-108">Digits from 0 to 9.</span></span>  
  
- <span data-ttu-id="d8a81-109">少數幾個其他 ASCII 符號。</span><span class="sxs-lookup"><span data-stu-id="d8a81-109">A small number of other ASCII symbols.</span></span>  
  
 <span data-ttu-id="d8a81-110">網際網路工程任務推動小組 (IETF) 發行的 RFC 2396 和 RFC 3986 中有記載 URI 的規格。</span><span class="sxs-lookup"><span data-stu-id="d8a81-110">The specifications for URIs are documented in RFC 2396 and RFC 3986 published by the Internet Engineering Task Force (IETF).</span></span>  
  
 <span data-ttu-id="d8a81-111">隨著網際網路的成長，識別使用非英文語言資源的需求也持續成長。</span><span class="sxs-lookup"><span data-stu-id="d8a81-111">With the growth of the Internet, there is a growing need to identify resources using languages other than English.</span></span> <span data-ttu-id="d8a81-112">有利此需求且允許非 ASCII 字元 (Unicode/ISO 10646 字元集中的字元) 的識別碼，稱為國際資源識別碼 (IRI)。</span><span class="sxs-lookup"><span data-stu-id="d8a81-112">Identifiers which facilitate this need and allow non-ASCII characters (characters in the Unicode/ISO 10646 character set) are known as International Resource Identifiers (IRIs).</span></span> <span data-ttu-id="d8a81-113">IETF 發行的 RFC 3987 中有記載 IRI 的規格。</span><span class="sxs-lookup"><span data-stu-id="d8a81-113">The specifications for IRIs are documented in RFC 3987 published by IETF.</span></span> <span data-ttu-id="d8a81-114">使用 IRI 可讓 URL 包含 Unicode 字元。</span><span class="sxs-lookup"><span data-stu-id="d8a81-114">Using IRIs allows a URL to contain Unicode characters.</span></span>  
  
 <span data-ttu-id="d8a81-115">已擴充現有的 <xref:System.Uri?displayProperty=nameWithType> 類別，根據 RFC 3987 提供 IRI 支援。</span><span class="sxs-lookup"><span data-stu-id="d8a81-115">The existing <xref:System.Uri?displayProperty=nameWithType> class has been extended to provide IRI support based on RFC 3987.</span></span> <span data-ttu-id="d8a81-116">目前的使用者除非特別啟用 IRI，否則看不出與 .NET Framework 2.0 的行為有任何不同之處。</span><span class="sxs-lookup"><span data-stu-id="d8a81-116">Current users will not see any change from the .NET Framework 2.0 behavior unless they specifically enable IRI.</span></span> <span data-ttu-id="d8a81-117">這可確保應用程式與舊版 .NET framework 相容。</span><span class="sxs-lookup"><span data-stu-id="d8a81-117">This ensures application compatibility with prior versions of the .NET Framework.</span></span>  
  
 <span data-ttu-id="d8a81-118">應用程式可以指定是否使用網域名稱套用的國際化網域名稱 (IDN) 剖析功能，以及是否應套用 IRI 剖析規則。</span><span class="sxs-lookup"><span data-stu-id="d8a81-118">An application can specify whether to use Internationalized Domain Name (IDN) parsing applied to domain names and whether IRI parsing rules should be applied.</span></span> <span data-ttu-id="d8a81-119">此作業可在 machine.config 或 app.config 檔案中完成。</span><span class="sxs-lookup"><span data-stu-id="d8a81-119">This can be done in the machine.config or in the app.config file.</span></span>  
  
 <span data-ttu-id="d8a81-120">啟用 IDN 會將網域名稱中所有的 Unicode 標籤轉換成對等的 Punycode。</span><span class="sxs-lookup"><span data-stu-id="d8a81-120">Enabling IDN will convert all Unicode labels in a domain name to their Punycode equivalents.</span></span> <span data-ttu-id="d8a81-121">Punycode 名稱只包含 ASCII 字元，而且開頭一律為前置詞 xn--。</span><span class="sxs-lookup"><span data-stu-id="d8a81-121">Punycode names contain only ASCII characters and always start with the xn-- prefix.</span></span> <span data-ttu-id="d8a81-122">這是為了支援網際網路上現有的 DNS 伺服器，因為大部分的 DNS 伺服器僅支援 ASCII 字元 (請參閱 RFC 3940)。</span><span class="sxs-lookup"><span data-stu-id="d8a81-122">The reason for this is to support existing DNS servers on the Internet, since most DNS servers only support ASCII characters (see RFC 3940).</span></span>  
  
 <span data-ttu-id="d8a81-123">啟用 IRI 和 IDN 會影響 <xref:System.Uri.DnsSafeHost%2A?displayProperty=nameWithType> 屬性的值。</span><span class="sxs-lookup"><span data-stu-id="d8a81-123">Enabling IRI and IDN affects the value of the <xref:System.Uri.DnsSafeHost%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="d8a81-124">啟用 IRI 和 IDN 也可以變更 <xref:System.Uri.Equals%2A?displayProperty=nameWithType>、<xref:System.Uri.OriginalString%2A?displayProperty=nameWithType>、<xref:System.Uri.GetComponents%2A?displayProperty=nameWithType> 和 <xref:System.Uri.IsWellFormedOriginalString%2A> 方法的行為。</span><span class="sxs-lookup"><span data-stu-id="d8a81-124">Enabling IRI and IDN can also change the behavior of the <xref:System.Uri.Equals%2A?displayProperty=nameWithType>, <xref:System.Uri.OriginalString%2A?displayProperty=nameWithType>, <xref:System.Uri.GetComponents%2A?displayProperty=nameWithType>, and <xref:System.Uri.IsWellFormedOriginalString%2A> methods.</span></span>  
  
 <span data-ttu-id="d8a81-125"><xref:System.GenericUriParser?displayProperty=nameWithType> 類別也已經擴充，允許建立可自訂的剖析器，支援 IRI 和 IDN。</span><span class="sxs-lookup"><span data-stu-id="d8a81-125">The <xref:System.GenericUriParser?displayProperty=nameWithType> class has also been extended to allow creating a customizable parser that supports IRI and IDN.</span></span> <span data-ttu-id="d8a81-126">指定 <xref:System.GenericUriParser?displayProperty=nameWithType> 物件行為的方法，是將 <xref:System.GenericUriParserOptions?displayProperty=nameWithType> 列舉中的可用值位元組合傳遞至 <xref:System.GenericUriParser?displayProperty=nameWithType> 建構函式。</span><span class="sxs-lookup"><span data-stu-id="d8a81-126">The behavior of a <xref:System.GenericUriParser?displayProperty=nameWithType> object is specified by passing a bitwise combination of the values available in the <xref:System.GenericUriParserOptions?displayProperty=nameWithType> enumeration to the <xref:System.GenericUriParser?displayProperty=nameWithType> constructor.</span></span> <span data-ttu-id="d8a81-127"><xref:System.GenericUriParserOptions.IriParsing?displayProperty=nameWithType> 類型，指出支援 RFC 3987 指定的國際資源識別碼 (IRI) 剖析規則的剖析器。</span><span class="sxs-lookup"><span data-stu-id="d8a81-127">The <xref:System.GenericUriParserOptions.IriParsing?displayProperty=nameWithType> type indicates the parser supports the parsing rules specified in RFC 3987 for International Resource Identifiers (IRI).</span></span> <span data-ttu-id="d8a81-128">實際是否使用 IRI，取決於是否已啟用 IRI。</span><span class="sxs-lookup"><span data-stu-id="d8a81-128">Whether IRI is actually used depends on if IRI is enabled.</span></span>  
  
 <span data-ttu-id="d8a81-129"><xref:System.GenericUriParserOptions.Idn?displayProperty=nameWithType> 類型，指出剖析器支援主機名稱的國際化網域名稱 (IDN) 剖析。</span><span class="sxs-lookup"><span data-stu-id="d8a81-129">The <xref:System.GenericUriParserOptions.Idn?displayProperty=nameWithType> type indicates the parser supports Internationalized Domain Name (IDN) parsing (IDN) of host names.</span></span> <span data-ttu-id="d8a81-130">實際是否使用 IDN，取決於是否已啟用 IDN。</span><span class="sxs-lookup"><span data-stu-id="d8a81-130">Whether IDN is actually used depends on if IDN is enabled.</span></span>  
  
 <span data-ttu-id="d8a81-131">啟用 URI 剖析會根據 RFC 3987 中最新的 IRI 規則來執行正規化和字元檢查。</span><span class="sxs-lookup"><span data-stu-id="d8a81-131">Enabling IRI parsing will do normalization and character checking according to the latest IRI rules in RFC 3987.</span></span> <span data-ttu-id="d8a81-132">預設值專供要停用的 IRI 剖析使用，以便正規化和字元檢查根據 RFC 2396 和 RFC 3986 完成。</span><span class="sxs-lookup"><span data-stu-id="d8a81-132">The default value is for IRI parsing to be disabled so normalization and character checking are done according to RFC 2396 and RFC 3986.</span></span>  
  
 <span data-ttu-id="d8a81-133"><xref:System.Uri?displayProperty=nameWithType> 類別中的 IRI 和 IDN 處理也可以使用 <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> 和 <xref:System.Configuration.IdnElement?displayProperty=nameWithType> 組態設定類別來控制。</span><span class="sxs-lookup"><span data-stu-id="d8a81-133">IRI and IDN processing in the <xref:System.Uri?displayProperty=nameWithType> class can also be controlled using the <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> and <xref:System.Configuration.IdnElement?displayProperty=nameWithType> configuration setting classes.</span></span> <span data-ttu-id="d8a81-134"><xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> 設定可啟用或停用 <xref:System.Uri?displayProperty=nameWithType> 類別中的 IRI 處理。</span><span class="sxs-lookup"><span data-stu-id="d8a81-134">The <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> setting enables or disables IRI processing in the <xref:System.Uri?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="d8a81-135"><xref:System.Configuration.IdnElement?displayProperty=nameWithType> 設定可啟用或停用 <xref:System.Uri> 類別中的 IDN 處理。</span><span class="sxs-lookup"><span data-stu-id="d8a81-135">The <xref:System.Configuration.IdnElement?displayProperty=nameWithType> setting enables or disables IDN processing in the <xref:System.Uri> class.</span></span> <span data-ttu-id="d8a81-136"><xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> 設定也可以間接控制 IDN。</span><span class="sxs-lookup"><span data-stu-id="d8a81-136">The <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> setting also indirectly controls IDN.</span></span> <span data-ttu-id="d8a81-137">必須啟用 IRI 處理才能進行 IDN 處理。</span><span class="sxs-lookup"><span data-stu-id="d8a81-137">IRI processing must be enabled for IDN processing to be possible.</span></span> <span data-ttu-id="d8a81-138">如果停用 IRI 處理，則 IDN 處理會設定為預設設定，此種情況下，.NET Framework 2.0 行為會用於相容性，但不使用 IDN 名稱。</span><span class="sxs-lookup"><span data-stu-id="d8a81-138">If IRI processing is disabled, then IDN processing will be set to the default setting where the .NET Framework 2.0 behavior is used for compatibility and IDN names are not used.</span></span>  
  
 <span data-ttu-id="d8a81-139">建構第一個 <xref:System.Uri?displayProperty=nameWithType> 類別時，<xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> 和 <xref:System.Configuration.IdnElement?displayProperty=nameWithType> 組態類別的組態設定會讀取一次。</span><span class="sxs-lookup"><span data-stu-id="d8a81-139">The configuration setting for the <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType> and <xref:System.Configuration.IdnElement?displayProperty=nameWithType> configuration classes will be read once when the first <xref:System.Uri?displayProperty=nameWithType> class is constructed.</span></span> <span data-ttu-id="d8a81-140">該時間之後的組態設定變更會被忽略。</span><span class="sxs-lookup"><span data-stu-id="d8a81-140">Changes to configuration settings after that time are ignored.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d8a81-141">另請參閱</span><span class="sxs-lookup"><span data-stu-id="d8a81-141">See also</span></span>

- <xref:System.Configuration.IdnElement?displayProperty=nameWithType>
- <xref:System.Configuration.IriParsingElement?displayProperty=nameWithType>
- <xref:System.Uri?displayProperty=nameWithType>
- <xref:System.Uri.DnsSafeHost%2A?displayProperty=nameWithType>
