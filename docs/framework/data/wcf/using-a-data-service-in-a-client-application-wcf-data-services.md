---
title: 在用戶端應用程式中使用資料服務 (WCF 資料服務)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, getting started
ms.assetid: 90872d0c-e989-4490-b3e9-54afb10d33d4
ms.openlocfilehash: b921e78c1b3d3d90d9ac8b4a459df496cf6d14dd
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/24/2020
ms.locfileid: "91180578"
---
# <a name="using-a-data-service-in-a-client-application-wcf-data-services"></a><span data-ttu-id="eb697-102">在用戶端應用程式中使用資料服務 (WCF 資料服務)</span><span class="sxs-lookup"><span data-stu-id="eb697-102">Using a Data Service in a Client Application (WCF Data Services)</span></span>

<span data-ttu-id="eb697-103">您可以藉由提供 Web 瀏覽器的 URI，存取公開開放式資料通訊協定 (OData) 摘要的服務。</span><span class="sxs-lookup"><span data-stu-id="eb697-103">You can access a service that exposes an Open Data Protocol (OData) feed by supplying a URI to a Web browser.</span></span> <span data-ttu-id="eb697-104">URI 可提供資源的位址，而要求訊息會傳送至這些位址，以存取或變更資源所代表的基礎資料。</span><span class="sxs-lookup"><span data-stu-id="eb697-104">The URI provides the address of a resource, and request messages are sent to these addresses to access or change the underlying data that the resource represents.</span></span> <span data-ttu-id="eb697-105">瀏覽器會發出 HTTP GET 命令，並傳回所要求的資源作為 OData 摘要。</span><span class="sxs-lookup"><span data-stu-id="eb697-105">The browser issues an HTTP GET command and returns the requested resource as an OData feed.</span></span> <span data-ttu-id="eb697-106">如需詳細資訊，請參閱 [從網頁瀏覽器存取服務](accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md)。</span><span class="sxs-lookup"><span data-stu-id="eb697-106">For more information, see [Accessing the Service from a Web Browser](accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md).</span></span>  
  
 <span data-ttu-id="eb697-107">雖然 Web 瀏覽器可以用來測試 OData 服務是否會傳回預期的資料，但可讓您建立、更新和刪除資料的生產 OData 服務，通常是由應用程式程式碼或網頁中的指令碼語言來存取。</span><span class="sxs-lookup"><span data-stu-id="eb697-107">Although a Web browser may be useful for testing that an OData service returns the expected data, production OData services that enable you to also create, update, and delete data are generally accessed by application code or scripting languages in a Web page.</span></span> <span data-ttu-id="eb697-108">本主題概要說明如何從用戶端應用程式存取 OData 摘要。</span><span class="sxs-lookup"><span data-stu-id="eb697-108">This topic provides an overview of how to access OData feeds from a client application.</span></span>  
  
## <a name="accessing-and-changing-data-using-rest-semantics"></a><span data-ttu-id="eb697-109">使用 REST 語意存取與變更資料</span><span class="sxs-lookup"><span data-stu-id="eb697-109">Accessing and Changing Data Using REST Semantics</span></span>  

 <span data-ttu-id="eb697-110">OData 有助於保證服務之間的互通性，這些服務會公開使用 OData 摘要的 OData 摘要和應用程式。</span><span class="sxs-lookup"><span data-stu-id="eb697-110">OData helps guarantee interoperability between services that expose OData feeds and applications that consume OData feeds.</span></span> <span data-ttu-id="eb697-111">應用程式會藉由傳送特定 HTTP 動作的要求訊息，以及定址應執行動作之實體資源的 URI，來存取及變更 OData 型服務中的資料。</span><span class="sxs-lookup"><span data-stu-id="eb697-111">Applications access and change data in an OData-based service by sending request messages of a specific HTTP action and with a URI that addresses an entity resource against which the action should be performed.</span></span> <span data-ttu-id="eb697-112">當必須提供實體資料時，會在訊息本文中以特定編碼的裝載形式提供。</span><span class="sxs-lookup"><span data-stu-id="eb697-112">When entity data must be supplied, it is supplied as a specifically encoded payload in the body of the message.</span></span>  
  
### <a name="http-actions"></a><span data-ttu-id="eb697-113">HTTP 動作</span><span class="sxs-lookup"><span data-stu-id="eb697-113">HTTP Actions</span></span>  

 <span data-ttu-id="eb697-114">OData 支援下列 HTTP 動作，在定址資源代表的實體資料上執行建立、讀取、更新和刪除作業：</span><span class="sxs-lookup"><span data-stu-id="eb697-114">OData supports the following HTTP actions to perform create, read, update, and delete operations on the entity data that the addressed resource represents:</span></span>  
  
- <span data-ttu-id="eb697-115">**HTTP GET** -這是從瀏覽器存取資源時的預設動作。</span><span class="sxs-lookup"><span data-stu-id="eb697-115">**HTTP GET** - This is the default action when a resource is accessed from a browser.</span></span> <span data-ttu-id="eb697-116">要求訊息中不會提供任何承載，同時會以包含所要求之資料的承載傳回回應方法。</span><span class="sxs-lookup"><span data-stu-id="eb697-116">No payload is supplied in the request message, and a response method with a payload that contains the requested data is returned.</span></span>  
  
- <span data-ttu-id="eb697-117">**HTTP POST** -將新的實體資料插入至提供的資源。</span><span class="sxs-lookup"><span data-stu-id="eb697-117">**HTTP POST** - Inserts new entity data into the supplied resource.</span></span> <span data-ttu-id="eb697-118">要插入的資料會於要求訊息的承載中提供。</span><span class="sxs-lookup"><span data-stu-id="eb697-118">Data to be inserted is supplied in the payload of the request message.</span></span> <span data-ttu-id="eb697-119">回應訊息的裝載包含新建立之實體的資料。</span><span class="sxs-lookup"><span data-stu-id="eb697-119">The payload of the response message contains the data for the newly created entity.</span></span> <span data-ttu-id="eb697-120">其中包括任何自動產生的索引鍵值。</span><span class="sxs-lookup"><span data-stu-id="eb697-120">This includes any autogenerated key values.</span></span> <span data-ttu-id="eb697-121">標頭亦包含定址新實體資源的 URI。</span><span class="sxs-lookup"><span data-stu-id="eb697-121">The header also contains the URI that addresses the new entity resource.</span></span>  
  
- <span data-ttu-id="eb697-122">**HTTP DELETE** -刪除指定資源所代表的實體資料。</span><span class="sxs-lookup"><span data-stu-id="eb697-122">**HTTP DELETE** - Deletes the entity data that the specified resource represents.</span></span> <span data-ttu-id="eb697-123">要求或回應訊息中不會出現任何承載。</span><span class="sxs-lookup"><span data-stu-id="eb697-123">A payload is not present in the request or response messages.</span></span>  
  
- <span data-ttu-id="eb697-124">**HTTP PUT** -使用要求訊息承載中提供的新資料來取代所要求資源上的現有實體資料。</span><span class="sxs-lookup"><span data-stu-id="eb697-124">**HTTP PUT** - Replaces existing entity data at the requested resource with new data that is supplied in the payload of the request message.</span></span>  
  
- <span data-ttu-id="eb697-125">**HTTP 合併** -因為執行刪除的效率不佳，然後在資料來源中插入資料，而只是為了變更實體資料，所以 OData 引進了新的 HTTP 合併動作。</span><span class="sxs-lookup"><span data-stu-id="eb697-125">**HTTP MERGE** - Because of inefficiencies in executing a delete followed by an insert in the data source just to change entity data, OData introduces a new HTTP MERGE action.</span></span> <span data-ttu-id="eb697-126">要求訊息的承載包含在定址實體資源中必須變更的屬性。</span><span class="sxs-lookup"><span data-stu-id="eb697-126">The payload of the request message contains the properties that must be changed on the addressed entity resource.</span></span> <span data-ttu-id="eb697-127">由於 HTTP 規格中未定義 HTTP MERGE，因此可能需要額外的處理，才能透過非 OData 感知的伺服器來路由傳送 HTTP MERGE 要求。</span><span class="sxs-lookup"><span data-stu-id="eb697-127">Because HTTP MERGE is not defined in the HTTP specification, it may require additional processing to route a HTTP MERGE request through non-OData aware servers.</span></span>  
  
 <span data-ttu-id="eb697-128">如需詳細資訊，請參閱 [OData： Operations](https://www.odata.org/documentation/odata-version-2-0/operations/)。</span><span class="sxs-lookup"><span data-stu-id="eb697-128">For more information, see [OData: Operations](https://www.odata.org/documentation/odata-version-2-0/operations/).</span></span>
  
### <a name="payload-formats"></a><span data-ttu-id="eb697-129">承載格式</span><span class="sxs-lookup"><span data-stu-id="eb697-129">Payload Formats</span></span>  

 <span data-ttu-id="eb697-130">若為 HTTP PUT、HTTP POST 或 HTTP MERGE 要求，要求訊息的裝載會包含您傳送至資料服務的實體資料。</span><span class="sxs-lookup"><span data-stu-id="eb697-130">For an HTTP PUT, HTTP POST, or HTTP MERGE request, the payload of a request message contains the entity data that you send to the data service.</span></span> <span data-ttu-id="eb697-131">承載的內容取決於訊息的資料格式。</span><span class="sxs-lookup"><span data-stu-id="eb697-131">The contents of the payload depend on the data format of the message.</span></span> <span data-ttu-id="eb697-132">所有動作 (DELETE 除外) 的 HTTP 回應也包含此類承載。</span><span class="sxs-lookup"><span data-stu-id="eb697-132">The HTTP responses to all actions except DELETE also contain such a payload.</span></span> <span data-ttu-id="eb697-133">OData 支援下列裝載格式，可使用服務來存取和變更資料：</span><span class="sxs-lookup"><span data-stu-id="eb697-133">OData supports the following payload formats for accessing and changing data with the service:</span></span>  
  
- <span data-ttu-id="eb697-134">**Atom** -以 XML 為基礎的訊息編碼（由 OData 定義為 Atom 發行通訊協定的延伸模組） (AtomPub) ，以針對 Web 摘要、播客、WIKI 及 XML 架構的網際網路功能啟用透過 HTTP 的資料交換。</span><span class="sxs-lookup"><span data-stu-id="eb697-134">**Atom** - An XML-based message encoding that is defined by OData as an extension to the Atom Publishing Protocol (AtomPub) to enable data exchange over HTTP for Web feeds, podcasts, wikis, and XML-based Internet functionality.</span></span> <span data-ttu-id="eb697-135">如需詳細資訊，請參閱 [OData： Atom 格式](https://www.odata.org/documentation/odata-version-2-0/atom-format/)。</span><span class="sxs-lookup"><span data-stu-id="eb697-135">For more information, see [OData: Atom Format](https://www.odata.org/documentation/odata-version-2-0/atom-format/).</span></span>
  
- <span data-ttu-id="eb697-136">**Json** JAVASCRIPT 物件標記法 (json) 是以 JavaScript 程式設計語言子集為基礎的輕量資料交換格式。</span><span class="sxs-lookup"><span data-stu-id="eb697-136">**JSON** - JavaScript Object Notation (JSON) is a lightweight data interchange format that is based on a subset of the JavaScript Programming Language.</span></span> <span data-ttu-id="eb697-137">如需詳細資訊，請參閱 [OData： JSON 格式](https://www.odata.org/documentation/odata-version-2-0/json-format/)。</span><span class="sxs-lookup"><span data-stu-id="eb697-137">For more information, see [OData: JSON Format](https://www.odata.org/documentation/odata-version-2-0/json-format/).</span></span>
  
 <span data-ttu-id="eb697-138">HTTP 要求訊息的標頭中會要求裝載的訊息格式。</span><span class="sxs-lookup"><span data-stu-id="eb697-138">The message format of the payload is requested in the header of the HTTP request message.</span></span> <span data-ttu-id="eb697-139">如需詳細資訊，請參閱 [OData： Operations](https://www.odata.org/documentation/odata-version-2-0/operations/)。</span><span class="sxs-lookup"><span data-stu-id="eb697-139">For more information, see [OData: Operations](https://www.odata.org/documentation/odata-version-2-0/operations/).</span></span>
  
## <a name="accessing-and-changing-data-using-client-libraries"></a><span data-ttu-id="eb697-140">使用用戶端程式庫存取及變更資料</span><span class="sxs-lookup"><span data-stu-id="eb697-140">Accessing and Changing Data Using Client Libraries</span></span>  

 <span data-ttu-id="eb697-141">WCF Data Services 包含用戶端程式庫，可讓您更輕鬆地從 .NET Framework 和 Silverlight 用戶端應用程式使用 OData 摘要。</span><span class="sxs-lookup"><span data-stu-id="eb697-141">WCF Data Services includes client libraries that enable you to more easily consume an OData feed from .NET Framework and Silverlight-based client applications.</span></span> <span data-ttu-id="eb697-142">這些程式庫會簡化 HTTP 訊息的傳送與接收。</span><span class="sxs-lookup"><span data-stu-id="eb697-142">These libraries simplify sending and receiving HTTP messages.</span></span> <span data-ttu-id="eb697-143">他們也會將訊息承載轉譯為代表實體資料的 CLR 物件。</span><span class="sxs-lookup"><span data-stu-id="eb697-143">They also translate the message payload into CLR objects that represent entity data.</span></span> <span data-ttu-id="eb697-144">用戶端程式庫具有兩個核心類別： <xref:System.Data.Services.Client.DataServiceContext> 和 <xref:System.Data.Services.Client.DataServiceQuery%601>。</span><span class="sxs-lookup"><span data-stu-id="eb697-144">The client libraries feature the two core classes <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span> <span data-ttu-id="eb697-145">這些類別可讓您查詢資料服務，然後使用傳回的實體資料當做 CLR 物件。</span><span class="sxs-lookup"><span data-stu-id="eb697-145">These classes enable you to query a data service and then work with the returned entity data as CLR objects.</span></span> <span data-ttu-id="eb697-146">如需詳細資訊，請參閱 [WCF Data Services 用戶端程式庫](wcf-data-services-client-library.md) 和 [WCF Data Services (Silverlight) ](/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc838234(v=vs.95))。</span><span class="sxs-lookup"><span data-stu-id="eb697-146">For more information, see [WCF Data Services Client Library](wcf-data-services-client-library.md) and [WCF Data Services (Silverlight)](/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc838234(v=vs.95)).</span></span>  
  
 <span data-ttu-id="eb697-147">您可以使用 Visual Studio 中的 [ **加入服務參考** ] 對話方塊，將參考加入至資料服務。</span><span class="sxs-lookup"><span data-stu-id="eb697-147">You can use the **Add Service Reference** dialog in Visual Studio to add a reference to a data service.</span></span> <span data-ttu-id="eb697-148">此工具會從參考的資料服務要求服務中繼資料，並產生代表資料服務的 <xref:System.Data.Services.Client.DataServiceContext>，同時也會產生代表實體的用戶端資料服務類別。</span><span class="sxs-lookup"><span data-stu-id="eb697-148">This tool requests the service metadata from a referenced data service and generates the <xref:System.Data.Services.Client.DataServiceContext> that represents a data service, as well as generates the client data service classes that represent entities.</span></span> <span data-ttu-id="eb697-149">如需詳細資訊，請參閱 [產生資料服務用戶端程式庫](generating-the-data-service-client-library-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="eb697-149">For more information, see [Generating the Data Service Client Library](generating-the-data-service-client-library-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="eb697-150">有一些可用的程式設計程式庫，可讓您在其他種類的用戶端應用程式中使用 OData 摘要。</span><span class="sxs-lookup"><span data-stu-id="eb697-150">There are programming libraries available that you can use to consume an OData feed in other kinds of client applications.</span></span> <span data-ttu-id="eb697-151">如需 OData SDK 的詳細資訊，請參閱 [ODATA sdk-範例程式碼](https://www.odata.org/ecosystem/#sdk)。</span><span class="sxs-lookup"><span data-stu-id="eb697-151">For more information on OData SDK, see [OData SDK - Sample Code](https://www.odata.org/ecosystem/#sdk).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="eb697-152">另請參閱</span><span class="sxs-lookup"><span data-stu-id="eb697-152">See also</span></span>

- [<span data-ttu-id="eb697-153">存取資料服務資源</span><span class="sxs-lookup"><span data-stu-id="eb697-153">Accessing Data Service Resources</span></span>](accessing-data-service-resources-wcf-data-services.md)
- [<span data-ttu-id="eb697-154">快速入門</span><span class="sxs-lookup"><span data-stu-id="eb697-154">Quickstart</span></span>](quickstart-wcf-data-services.md)
