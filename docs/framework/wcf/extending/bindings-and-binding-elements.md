---
title: 繫結和繫結項目
ms.date: 03/30/2017
helpviewer_keywords:
- binding elements [WCF]
ms.assetid: 765ff77b-7682-4ea3-90eb-e4d751e37379
ms.openlocfilehash: 16e1b7840be6a3ec247033fa3a2eada9e5799bdb
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/26/2020
ms.locfileid: "96262134"
---
# <a name="bindings-and-binding-elements"></a><span data-ttu-id="9ad6d-102">繫結和繫結項目</span><span class="sxs-lookup"><span data-stu-id="9ad6d-102">Bindings and Binding Elements</span></span>

<span data-ttu-id="9ad6d-103">系結是特殊設定專案的集合，稱為 *綁定* 項，只要在建立用戶端或服務端點時，服務執行時間就會評估這些元素。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-103">Bindings are collections of special configuration elements, called *binding elements*, which are evaluated by the service runtime whenever a client or service endpoint is being constructed.</span></span> <span data-ttu-id="9ad6d-104">繫結項目在繫結內的型別與順序會決定端點通道堆疊中通訊協定與傳輸通道的選擇與堆疊順序。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-104">The type and order of the binding elements within a binding determines the selection and stacking order of the protocol and transport channels in an endpoint's channel stack.</span></span>  
  
 <span data-ttu-id="9ad6d-105">繫結 (尤其是系統提供的繫結) 通常都會同時具備許多組態屬性，這些屬性會反映最常修改的封裝繫結項目屬性。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-105">Bindings, especially the system-provided bindings, usually also have a number of configuration properties that reflect the most commonly modified properties of the encapsulated binding elements.</span></span>  
  
 <span data-ttu-id="9ad6d-106">一個繫結必須剛好包含一個傳輸繫結項目。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-106">A binding must contain exactly one transport binding element.</span></span> <span data-ttu-id="9ad6d-107">每個傳輸繫結項目都意指預設的訊息編碼繫結項目，此項目可透過將最多一個訊息編碼繫結項目新增至繫結的方式來加以覆寫。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-107">Each transport binding element implies a default message encoding binding element, which can be overridden by adding at most one message encoding binding element to the binding.</span></span> <span data-ttu-id="9ad6d-108">除了傳輸與編碼器繫結項目之外，繫結還可包含任何數量的通訊協定繫結項目，這些項目可一併實作服務所需的功能，並在各個端點之間傳送 SOAP 訊息。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-108">In addition to the transport and encoder binding elements, the binding may contain any number of protocol binding elements that together implement the functionality needed to service and send a SOAP message from one endpoint to another.</span></span> <span data-ttu-id="9ad6d-109">如需詳細資訊，請參閱使用系結 [來設定服務和用戶端](../using-bindings-to-configure-services-and-clients.md)。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-109">For details, see [Using Bindings to Configure Services and Clients](../using-bindings-to-configure-services-and-clients.md).</span></span>  
  
## <a name="extending-bindings-and-binding-elements"></a><span data-ttu-id="9ad6d-110">延伸繫結與繫結項目</span><span class="sxs-lookup"><span data-stu-id="9ad6d-110">Extending Bindings and Binding Elements</span></span>  

 <span data-ttu-id="9ad6d-111">Windows Communication Foundation (WCF) 包含涵蓋各種案例的系統提供系結。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-111">Windows Communication Foundation (WCF) includes system-provided bindings that cover a wide range of scenarios.</span></span> <span data-ttu-id="9ad6d-112"> (需更多詳細資訊，請參閱 [系統提供](../system-provided-bindings.md)的系結。在某些情況下，當您需要建立並使用未包含在 WCF 中的系結時，) 可能會發生這種情況。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-112">(For more, see [System-Provided Bindings](../system-provided-bindings.md).) There may be times, however, when you need to create and use a binding that is not included in WCF.</span></span> <span data-ttu-id="9ad6d-113">下列案例需要建立新的繫結。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-113">The following scenarios require the creation of a new binding.</span></span>  
  
- <span data-ttu-id="9ad6d-114">若要使用新的繫結項目 (例如新的傳輸、編碼或通訊協定繫結項目)，您必須建立包含該繫結項目的新繫結。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-114">To use a new binding element (such as a new transport, encoding, or protocol binding element), you must create a new binding that includes that binding element.</span></span> <span data-ttu-id="9ad6d-115">例如，如果您為 UDP 傳輸新增自訂的 `UdpTransportBindingElement`，則需要建立新繫結才能使用它。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-115">For example, if you added a custom `UdpTransportBindingElement` for UDP transport, you would need to create a new binding to make use of it.</span></span> <span data-ttu-id="9ad6d-116">如需使用型別執行此行為的詳細資訊 <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType> ，請參閱 [自訂](custom-bindings.md)系結。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-116">For information about performing this behavior using the <xref:System.ServiceModel.Channels.CustomBinding?displayProperty=nameWithType> type, see [Custom Bindings](custom-bindings.md).</span></span>  
  
- <span data-ttu-id="9ad6d-117">若要設定現有繫結項目，讓系統提供的繫結在公用的屬性上不公開。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-117">To configure existing binding elements in a way that the system-provided bindings to not expose on public properties.</span></span> <span data-ttu-id="9ad6d-118">例如，您必須建立新的繫結來變更簽署與加密作業的執行順序。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-118">For example, you must create a new binding to change the order in which signing and encryption operations are performed.</span></span> <span data-ttu-id="9ad6d-119">如需執行此行為的詳細資訊，請參閱 [如何：自訂 System-Provided](how-to-customize-a-system-provided-binding.md)系結。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-119">For information about performing this behavior, see [How to: Customize a System-Provided Binding](how-to-customize-a-system-provided-binding.md).</span></span>  
  
- <span data-ttu-id="9ad6d-120">若要建立僅公開特定組態選項的企業標準繫結。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-120">To establish corporate standard bindings that expose only specific configuration options.</span></span> <span data-ttu-id="9ad6d-121">例如，要為公司建立 <xref:System.ServiceModel.WSHttpBinding> 變數，其中不得停用安全性，請建立具有類似 <xref:System.ServiceModel.WSHttpBinding> 行為的新繫結，但是一律啟用安全性。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-121">For example, to create for your company a variant of the <xref:System.ServiceModel.WSHttpBinding> for your company in which security cannot be disabled, create a new binding that behaves like the <xref:System.ServiceModel.WSHttpBinding>, but with security always on.</span></span> <span data-ttu-id="9ad6d-122">如需詳細資訊，請參閱 [建立 User-Defined](creating-user-defined-bindings.md)系結。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-122">For details, see [Creating User-Defined Bindings](creating-user-defined-bindings.md).</span></span>  
  
- <span data-ttu-id="9ad6d-123">若要執行中繼資料的某項自訂作業，通常 (不是一定) 會設定或使用某個自訂繫結項目。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-123">To perform some customization of metadata, typically but not necessarily to configure or use some custom binding element.</span></span> <span data-ttu-id="9ad6d-124">如需有關將中繼資料支援提供給系結和繫結項目的詳細資訊，請參閱設定 [和中繼資料支援](configuration-and-metadata-support.md)。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-124">For more information about providing metadata support to bindings and binding elements, see [Configuration and Metadata Support](configuration-and-metadata-support.md).</span></span>  

## <a name="channels-bindings-and-binding-elements"></a><span data-ttu-id="9ad6d-125">通道、繫結與繫結項目</span><span class="sxs-lookup"><span data-stu-id="9ad6d-125">Channels, Bindings, and Binding Elements</span></span>  

 <span data-ttu-id="9ad6d-126">繫結與繫結項目都可用來連接應用程式的程式設計模型 (包含屬性與行為) 與通道模型 (包含處理站與接聽程式、訊息編碼器，以及傳輸和通訊協定實作)。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-126">Bindings and binding elements are the connection between the application programming model, which includes the attributes and behaviors, and the channel model, which includes the factories and listeners, message encoders, and transport and protocol implementations.</span></span> <span data-ttu-id="9ad6d-127">一般來說，實作繫結項目與繫結的目的是要啟用通道，以供應用程式層使用。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-127">Typically, binding elements and bindings are implemented to enable channels to be used by the application layer.</span></span>  
  
 <span data-ttu-id="9ad6d-128">通道層會與服務層互相傳遞與接收訊息，並在端點之間傳輸這些訊息。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-128">The channel layer hands off or receives messages to and from the service layer and transports those messages between endpoints.</span></span> <span data-ttu-id="9ad6d-129">在用戶端，通道層是指建立網路端點通道的通道處理站堆疊。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-129">On a client, the channel layer is a stack of channel factories that create channels to a network endpoint.</span></span> <span data-ttu-id="9ad6d-130">在服務上，通道層則是指接受網路端點上所接收之通道的通道接聽程式堆疊。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-130">On a service, the channel layer is a stack of channel listeners that accept channels received at a network endpoint.</span></span>  
  
 <span data-ttu-id="9ad6d-131">一般的通道類型有兩種：通訊協定通道與傳輸通道。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-131">There are two general types of channels: protocol channels and transport channels.</span></span> <span data-ttu-id="9ad6d-132">傳輸通道負責將訊息從某個網路端點實際傳輸到另一個網路端點，</span><span class="sxs-lookup"><span data-stu-id="9ad6d-132">Transport channels are responsible for the actual transmission of a message from one network endpoint to another.</span></span> <span data-ttu-id="9ad6d-133">而且必須具備預設的訊息編碼器，同時也要能夠使用透過訊息編碼器繫結項目所提供的替代訊息編碼器。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-133">Transport channels must have a default message encoder and should be able to use an alternate message encoder supplied through a message encoder binding element.</span></span> <span data-ttu-id="9ad6d-134">訊息編碼器負責將 <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> 轉換為 Wire 表示法，反之亦然。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-134">A message encoder is responsible for turning a <xref:System.ServiceModel.Channels.Message?displayProperty=nameWithType> into a wire representation and vice-versa.</span></span> <span data-ttu-id="9ad6d-135">通訊協定通道負責實作 SOAP 層級的通訊協定 (例如，WS-Security 或 WS-ReliableMessaging)。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-135">Protocol channels are responsible for implementing SOAP-level protocols (for example, WS-Security or WS-ReliableMessaging).</span></span>  
  
 <span data-ttu-id="9ad6d-136">對於傳輸與通訊協定通道的主要要求，就是它們必須實作必要的通道介面。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-136">The primary requirement for transport and protocol channels is that they implement the required channel interfaces.</span></span> <span data-ttu-id="9ad6d-137">若要建立可運作的通道層，它們必須具備相關的處理站與接聽程式等等。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-137">To create a working channel layer they must have associated factories and listeners, and so on.</span></span> <span data-ttu-id="9ad6d-138">若要從 WCF 使用通道實作為，必須有衍生自每個通道之的相關聯綁定 <xref:System.ServiceModel.Channels.BindingElement> 項，而且應該要有相關的系結延伸元素，才能包含在衍生自的設定檔中 <xref:System.ServiceModel.Configuration.BindingElementExtensionElement> 。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-138">To use the channel implementations from WCF there needs to be an associated binding elements derived from <xref:System.ServiceModel.Channels.BindingElement> for each channel and there should be a related binding extension element for inclusion into configuration files that derives from <xref:System.ServiceModel.Configuration.BindingElementExtensionElement>.</span></span>  
  
 <span data-ttu-id="9ad6d-139">如上所述，您可以堆疊訊息編碼器、通訊協定與傳輸通道實作的繫結項目來產生通道堆疊，而將這些項目依序組合起來的機制就是繫結。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-139">As mentioned earlier, binding elements for message encoders, protocol, and transport channel implementations can be stacked to form a channel stack and the mechanism to line them up into an ordered set is the binding.</span></span> <span data-ttu-id="9ad6d-140">繫結與繫結項目會將應用程式的程式設計模型連接至通道模型。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-140">Bindings and binding elements connect the application programming model to the channel model.</span></span> <span data-ttu-id="9ad6d-141">您可以直接使用程式碼中的通道實作，但是除非編碼器、傳輸與通訊協定都實作為繫結項目，否則您無法透過服務層程式設計模型來使用它們。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-141">You can use your channel implementations from code directly, but unless encoders, transports, and protocols are implemented as binding elements they cannot be used from the service layer programming model.</span></span>  
  
 <span data-ttu-id="9ad6d-142">如需開發通道及其繫結項目的詳細資訊，請參閱 [擴充通道層](extending-the-channel-layer.md)。</span><span class="sxs-lookup"><span data-stu-id="9ad6d-142">For details about developing channels and their binding elements, see [Extending the Channel Layer](extending-the-channel-layer.md).</span></span>
