---
title: 了解 HTTP 驗證
ms.date: 03/30/2017
ms.assetid: 9376309a-39e3-4819-b47b-a73982b57620
ms.openlocfilehash: a31c9f96185364c59dca1ff26251a30f5d7a88bc
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/09/2020
ms.locfileid: "84595085"
---
# <a name="understanding-http-authentication"></a><span data-ttu-id="acc4d-102">了解 HTTP 驗證</span><span class="sxs-lookup"><span data-stu-id="acc4d-102">Understanding HTTP Authentication</span></span>
<span data-ttu-id="acc4d-103">驗證是一種識別用戶端是否具備存取資源之資格的程序。</span><span class="sxs-lookup"><span data-stu-id="acc4d-103">Authentication is the process of identifying whether a client is eligible to access a resource.</span></span> <span data-ttu-id="acc4d-104">HTTP 通訊協定支援驗證作為存取安全資源的交涉方法。</span><span class="sxs-lookup"><span data-stu-id="acc4d-104">The HTTP protocol supports authentication as a means of negotiating access to a secure resource.</span></span>  
  
 <span data-ttu-id="acc4d-105">用戶端的初始要求一般為匿名要求，不包含任何驗證資訊。</span><span class="sxs-lookup"><span data-stu-id="acc4d-105">The initial request from a client is typically an anonymous request, not containing any authentication information.</span></span> <span data-ttu-id="acc4d-106">HTTP 伺服器應用程式可拒絕匿名要求，同時表示驗證是必要的。</span><span class="sxs-lookup"><span data-stu-id="acc4d-106">HTTP server applications can deny the anonymous request while indicating that authentication is required.</span></span> <span data-ttu-id="acc4d-107">伺服器應用程式會傳送 WWW-Authentication 標頭，表示支援的驗證配置。</span><span class="sxs-lookup"><span data-stu-id="acc4d-107">The server application sends WWW-Authentication headers to indicate the supported authentication schemes.</span></span> <span data-ttu-id="acc4d-108">本檔描述數個適用于 HTTP 的驗證配置，並討論其在 Windows Communication Foundation （WCF）中的支援。</span><span class="sxs-lookup"><span data-stu-id="acc4d-108">This document describes several authentication schemes for HTTP and discusses their support in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="http-authentication-schemes"></a><span data-ttu-id="acc4d-109">HTTP 驗證配置</span><span class="sxs-lookup"><span data-stu-id="acc4d-109">HTTP Authentication Schemes</span></span>  
 <span data-ttu-id="acc4d-110">伺服器可以為用戶端指定多個驗證配置，以供選擇。</span><span class="sxs-lookup"><span data-stu-id="acc4d-110">The server can specify multiple authentication schemes for the client to choose from.</span></span> <span data-ttu-id="acc4d-111">下表描述一些通常在 Windows 應用程式中找到的驗證配置。</span><span class="sxs-lookup"><span data-stu-id="acc4d-111">The following table describes some of the authentication schemes commonly found in Windows applications.</span></span>  
  
|<span data-ttu-id="acc4d-112">驗證配置</span><span class="sxs-lookup"><span data-stu-id="acc4d-112">Authentication Scheme</span></span>|<span data-ttu-id="acc4d-113">描述</span><span class="sxs-lookup"><span data-stu-id="acc4d-113">Description</span></span>|  
|---------------------------|-----------------|  
|<span data-ttu-id="acc4d-114">匿名</span><span class="sxs-lookup"><span data-stu-id="acc4d-114">Anonymous</span></span>|<span data-ttu-id="acc4d-115">匿名要求不包含任何驗證資訊。</span><span class="sxs-lookup"><span data-stu-id="acc4d-115">An anonymous request does not contain any authentication information.</span></span> <span data-ttu-id="acc4d-116">這樣相當於授與所有人資源存取權。</span><span class="sxs-lookup"><span data-stu-id="acc4d-116">This is equivalent to granting everyone access to the resource.</span></span>|  
|<span data-ttu-id="acc4d-117">基本</span><span class="sxs-lookup"><span data-stu-id="acc4d-117">Basic</span></span>|<span data-ttu-id="acc4d-118">基本驗證會為用戶端傳送包含使用者名稱和密碼的 Base64 編碼字串。</span><span class="sxs-lookup"><span data-stu-id="acc4d-118">Basic authentication sends a Base64-encoded string that contains a user name and password for the client.</span></span> <span data-ttu-id="acc4d-119">Base64 不是一種加密形式，這種方法所傳送的使用者名稱與密碼應視同為明文形式。</span><span class="sxs-lookup"><span data-stu-id="acc4d-119">Base64 is not a form of encryption and should be considered the same as sending the user name and password in clear text.</span></span> <span data-ttu-id="acc4d-120">若需要保護資源，強烈建議考慮使用驗證配置而非基本驗證。</span><span class="sxs-lookup"><span data-stu-id="acc4d-120">If a resource needs to be protected, strongly consider using an authentication scheme other than basic authentication.</span></span>|  
|<span data-ttu-id="acc4d-121">Digest</span><span class="sxs-lookup"><span data-stu-id="acc4d-121">Digest</span></span>|<span data-ttu-id="acc4d-122">摘要驗證是設計來取代基本驗證的挑戰/回應配置。</span><span class="sxs-lookup"><span data-stu-id="acc4d-122">Digest authentication is a challenge-response scheme that is intended to replace Basic authentication.</span></span> <span data-ttu-id="acc4d-123">伺服器會以挑戰的形式，將稱為*nonce*的亂數據字串傳送給用戶端。</span><span class="sxs-lookup"><span data-stu-id="acc4d-123">The server sends a string of random data called a *nonce* to the client as a challenge.</span></span> <span data-ttu-id="acc4d-124">用戶端會回應包含使用者名稱、密碼與 Nonce 及其他資訊的雜湊。</span><span class="sxs-lookup"><span data-stu-id="acc4d-124">The client responds with a hash that includes the user name, password, and nonce, among additional information.</span></span> <span data-ttu-id="acc4d-125">使用這種驗證配置的交換所帶來的複雜性與資料雜湊，讓竊取與再利用使用者的認證更加困難。</span><span class="sxs-lookup"><span data-stu-id="acc4d-125">The complexity this exchange introduces and the data hashing make it more difficult to steal and reuse the user's credentials with this authentication scheme.</span></span><br /><br /> <span data-ttu-id="acc4d-126">摘要驗證需要使用 Windows 網域帳號。</span><span class="sxs-lookup"><span data-stu-id="acc4d-126">Digest authentication requires the use of Windows domain accounts.</span></span> <span data-ttu-id="acc4d-127">摘要*領域*是 Windows 功能變數名稱。</span><span class="sxs-lookup"><span data-stu-id="acc4d-127">The digest *realm* is the Windows domain name.</span></span> <span data-ttu-id="acc4d-128">因此，您無法以不支援 Windows 網域的作業系統 (例如 Windows XP 家用版) 上執行的伺服器使用摘要驗證。</span><span class="sxs-lookup"><span data-stu-id="acc4d-128">Therefore, you cannot use a server running on an operating system that does not support Windows domains, such as Windows XP Home Edition, with Digest authentication.</span></span> <span data-ttu-id="acc4d-129">相反地，當用戶端在不支援 Windows 網域的作業系統上執行，驗證期間必須特別指定網域帳號。</span><span class="sxs-lookup"><span data-stu-id="acc4d-129">Conversely, when the client runs on an operating system that does not support Windows domains, a domain account must be explicitly specified during the authentication.</span></span>|  
|<span data-ttu-id="acc4d-130">NTLM</span><span class="sxs-lookup"><span data-stu-id="acc4d-130">NTLM</span></span>|<span data-ttu-id="acc4d-131">NT LAN Manager (NTLM) 驗證為摘要式驗證更安全的變異，是一種挑戰/回應配置。</span><span class="sxs-lookup"><span data-stu-id="acc4d-131">NT LAN Manager (NTLM) authentication is a challenge-response scheme that is a securer variation of Digest authentication.</span></span> <span data-ttu-id="acc4d-132">NTLM 使用 Windows 認證轉換挑戰資料，而非未編碼的使用者名稱與密碼。</span><span class="sxs-lookup"><span data-stu-id="acc4d-132">NTLM uses Windows credentials to transform the challenge data instead of the unencoded user name and password.</span></span> <span data-ttu-id="acc4d-133">NTLM 驗證需要在用戶端與服務器之間進行多次交換。</span><span class="sxs-lookup"><span data-stu-id="acc4d-133">NTLM authentication requires multiple exchanges between the client and server.</span></span> <span data-ttu-id="acc4d-134">伺服器與任何介入的 Proxy 必須支援持續性連線以成功完成驗證。</span><span class="sxs-lookup"><span data-stu-id="acc4d-134">The server and any intervening proxies must support persistent connections to successfully complete the authentication.</span></span>|  
|<span data-ttu-id="acc4d-135">交涉</span><span class="sxs-lookup"><span data-stu-id="acc4d-135">Negotiate</span></span>|<span data-ttu-id="acc4d-136">交涉驗證會自動在 Kerberos 通訊協定與 NTLM 驗證之間選擇，依可用性而定。</span><span class="sxs-lookup"><span data-stu-id="acc4d-136">Negotiate authentication automatically selects between the Kerberos protocol and NTLM authentication, depending on availability.</span></span> <span data-ttu-id="acc4d-137">如果 Kerberos 通訊協定可以使用，就選擇它；否則就會嘗試使用 NTLM。</span><span class="sxs-lookup"><span data-stu-id="acc4d-137">The Kerberos protocol is used if it is available; otherwise, NTLM is tried.</span></span> <span data-ttu-id="acc4d-138">Kerberos 驗證較 NTLM 更大幅改善。</span><span class="sxs-lookup"><span data-stu-id="acc4d-138">Kerberos authentication significantly improves upon NTLM.</span></span> <span data-ttu-id="acc4d-139">Kerberos 驗證不僅較 NTLM 更快，而且允許使用交互驗證和對遠端機器認證的委派。</span><span class="sxs-lookup"><span data-stu-id="acc4d-139">Kerberos authentication is both faster than NTLM and allows the use of mutual authentication and delegation of credentials to remote machines.</span></span>|  
|<span data-ttu-id="acc4d-140">Windows Live ID</span><span class="sxs-lookup"><span data-stu-id="acc4d-140">Windows Live ID</span></span>|<span data-ttu-id="acc4d-141">基礎的 Windows HTTP 服務包括使用聯合通訊協定的驗證。</span><span class="sxs-lookup"><span data-stu-id="acc4d-141">The underlying Windows HTTP service includes authentication using federated protocols.</span></span> <span data-ttu-id="acc4d-142">不過，WCF 中的標準 HTTP 傳輸不支援使用同盟驗證配置，例如 Microsoft Windows Live ID。</span><span class="sxs-lookup"><span data-stu-id="acc4d-142">However, the standard HTTP transports in WCF do not support the use of federated authentication schemes, such as Microsoft Windows Live ID.</span></span> <span data-ttu-id="acc4d-143">目前可透過訊息安全性提供對此功能的支援。</span><span class="sxs-lookup"><span data-stu-id="acc4d-143">Support for this feature is currently available through the use of message security.</span></span> <span data-ttu-id="acc4d-144">如需詳細資訊，請參閱[同盟和發行的權杖](federation-and-issued-tokens.md)。</span><span class="sxs-lookup"><span data-stu-id="acc4d-144">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
## <a name="choosing-an-authentication-scheme"></a><span data-ttu-id="acc4d-145">選擇驗證配置</span><span class="sxs-lookup"><span data-stu-id="acc4d-145">Choosing an Authentication Scheme</span></span>  
 <span data-ttu-id="acc4d-146">為 HTTP 伺服器選擇潛在驗證配置時，必須考量一些項目，包括：</span><span class="sxs-lookup"><span data-stu-id="acc4d-146">When selecting the potential authentication schemes for an HTTP server, a few items to consider include the following:</span></span>  
  
- <span data-ttu-id="acc4d-147">考量資源是否需要保護。</span><span class="sxs-lookup"><span data-stu-id="acc4d-147">Consider whether the resource needs to be protected.</span></span> <span data-ttu-id="acc4d-148">使用 HTTP 驗證需要傳輸更多資料，並且可限制與用戶端的互通性。</span><span class="sxs-lookup"><span data-stu-id="acc4d-148">Using HTTP authentication requires transmitting more data and can limit interoperability with clients.</span></span> <span data-ttu-id="acc4d-149">允許匿名存取不需要保護的資源。</span><span class="sxs-lookup"><span data-stu-id="acc4d-149">Allow anonymous access to resources that do not need to be protected.</span></span>  
  
- <span data-ttu-id="acc4d-150">如果資源需要保護，則考慮何種驗證配置提供所需的安全性等級。</span><span class="sxs-lookup"><span data-stu-id="acc4d-150">If the resource needs to be protected, consider which authentication schemes provide the required level of security.</span></span> <span data-ttu-id="acc4d-151">這裡所討論的驗證配置，最低標準是基礎驗證。</span><span class="sxs-lookup"><span data-stu-id="acc4d-151">The weakest standard authentication scheme discussed here is Basic authentication.</span></span> <span data-ttu-id="acc4d-152">基礎驗證不會保護使用者的認證資訊。</span><span class="sxs-lookup"><span data-stu-id="acc4d-152">Basic authentication does not protect the user's credentials.</span></span> <span data-ttu-id="acc4d-153">最高標準驗證配置為交涉驗證，也就是 Kerberos 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="acc4d-153">The strongest standard authentication scheme is Negotiate authentication, resulting in the Kerberos protocol.</span></span>  
  
- <span data-ttu-id="acc4d-154">伺服器不應存在任何 (以 WWW-Authentication 標頭表示) 不預備接受或未能提供保護資源適當安全的配置。</span><span class="sxs-lookup"><span data-stu-id="acc4d-154">A server should not present (in the WWW-Authentication headers) any scheme that it is not prepared to accept or that does not adequately secure the protected resource.</span></span> <span data-ttu-id="acc4d-155">用戶端可自行選擇任何伺服器提供的驗證配置。</span><span class="sxs-lookup"><span data-stu-id="acc4d-155">Clients are free to choose between any of the authentication schemes the server presents.</span></span> <span data-ttu-id="acc4d-156">有些用戶端預設選擇最薄弱的驗證配置，或是伺服器清單中第一項驗證配置。</span><span class="sxs-lookup"><span data-stu-id="acc4d-156">Some clients default to a weak authentication scheme or the first authentication scheme in the server's list.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="acc4d-157">請參閱</span><span class="sxs-lookup"><span data-stu-id="acc4d-157">See also</span></span>

- [<span data-ttu-id="acc4d-158">傳輸安全性概觀</span><span class="sxs-lookup"><span data-stu-id="acc4d-158">Transport Security Overview</span></span>](transport-security-overview.md)
- [<span data-ttu-id="acc4d-159">使用模擬搭配傳輸安全性</span><span class="sxs-lookup"><span data-stu-id="acc4d-159">Using Impersonation with Transport Security</span></span>](using-impersonation-with-transport-security.md)
- [<span data-ttu-id="acc4d-160">委派和模擬</span><span class="sxs-lookup"><span data-stu-id="acc4d-160">Delegation and Impersonation</span></span>](delegation-and-impersonation-with-wcf.md)
