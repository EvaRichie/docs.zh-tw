---
title: 了解 HTTP 驗證
description: 請參閱 WCF 中 HTTP 驗證的簡介，包括 HTTP 驗證配置和選擇驗證配置。
ms.date: 03/30/2017
ms.assetid: 9376309a-39e3-4819-b47b-a73982b57620
ms.openlocfilehash: 65ccde358f4eb8727e59ca32fb9782b87e29c5c1
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/26/2020
ms.locfileid: "96293516"
---
# <a name="understanding-http-authentication"></a><span data-ttu-id="689ad-103">了解 HTTP 驗證</span><span class="sxs-lookup"><span data-stu-id="689ad-103">Understanding HTTP Authentication</span></span>

<span data-ttu-id="689ad-104">驗證是一種識別用戶端是否具備存取資源之資格的程序。</span><span class="sxs-lookup"><span data-stu-id="689ad-104">Authentication is the process of identifying whether a client is eligible to access a resource.</span></span> <span data-ttu-id="689ad-105">HTTP 通訊協定支援驗證作為存取安全資源的交涉方法。</span><span class="sxs-lookup"><span data-stu-id="689ad-105">The HTTP protocol supports authentication as a means of negotiating access to a secure resource.</span></span>  
  
 <span data-ttu-id="689ad-106">用戶端的初始要求一般為匿名要求，不包含任何驗證資訊。</span><span class="sxs-lookup"><span data-stu-id="689ad-106">The initial request from a client is typically an anonymous request, not containing any authentication information.</span></span> <span data-ttu-id="689ad-107">HTTP 伺服器應用程式可拒絕匿名要求，同時表示驗證是必要的。</span><span class="sxs-lookup"><span data-stu-id="689ad-107">HTTP server applications can deny the anonymous request while indicating that authentication is required.</span></span> <span data-ttu-id="689ad-108">伺服器應用程式會傳送 WWW-Authentication 標頭，表示支援的驗證配置。</span><span class="sxs-lookup"><span data-stu-id="689ad-108">The server application sends WWW-Authentication headers to indicate the supported authentication schemes.</span></span> <span data-ttu-id="689ad-109">本檔說明數種 HTTP 驗證配置，並討論 Windows Communication Foundation (WCF) 的支援。</span><span class="sxs-lookup"><span data-stu-id="689ad-109">This document describes several authentication schemes for HTTP and discusses their support in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="http-authentication-schemes"></a><span data-ttu-id="689ad-110">HTTP 驗證配置</span><span class="sxs-lookup"><span data-stu-id="689ad-110">HTTP Authentication Schemes</span></span>  

 <span data-ttu-id="689ad-111">伺服器可以指定多個驗證配置供用戶端選擇。</span><span class="sxs-lookup"><span data-stu-id="689ad-111">The server can specify multiple authentication schemes for the client to choose from.</span></span> <span data-ttu-id="689ad-112">下表說明一些常見在 Windows 應用程式中找到的驗證配置。</span><span class="sxs-lookup"><span data-stu-id="689ad-112">The following table describes some of the authentication schemes commonly found in Windows applications.</span></span>  
  
|<span data-ttu-id="689ad-113">驗證配置</span><span class="sxs-lookup"><span data-stu-id="689ad-113">Authentication Scheme</span></span>|<span data-ttu-id="689ad-114">描述</span><span class="sxs-lookup"><span data-stu-id="689ad-114">Description</span></span>|  
|---------------------------|-----------------|  
|<span data-ttu-id="689ad-115">匿名</span><span class="sxs-lookup"><span data-stu-id="689ad-115">Anonymous</span></span>|<span data-ttu-id="689ad-116">匿名要求不包含任何驗證資訊。</span><span class="sxs-lookup"><span data-stu-id="689ad-116">An anonymous request does not contain any authentication information.</span></span> <span data-ttu-id="689ad-117">這樣相當於授與所有人資源存取權。</span><span class="sxs-lookup"><span data-stu-id="689ad-117">This is equivalent to granting everyone access to the resource.</span></span>|  
|<span data-ttu-id="689ad-118">基本</span><span class="sxs-lookup"><span data-stu-id="689ad-118">Basic</span></span>|<span data-ttu-id="689ad-119">基本驗證會為用戶端傳送包含使用者名稱和密碼的 Base64 編碼字串。</span><span class="sxs-lookup"><span data-stu-id="689ad-119">Basic authentication sends a Base64-encoded string that contains a user name and password for the client.</span></span> <span data-ttu-id="689ad-120">Base64 不是一種加密形式，這種方法所傳送的使用者名稱與密碼應視同為明文形式。</span><span class="sxs-lookup"><span data-stu-id="689ad-120">Base64 is not a form of encryption and should be considered the same as sending the user name and password in clear text.</span></span> <span data-ttu-id="689ad-121">若需要保護資源，強烈建議考慮使用驗證配置而非基本驗證。</span><span class="sxs-lookup"><span data-stu-id="689ad-121">If a resource needs to be protected, strongly consider using an authentication scheme other than basic authentication.</span></span>|  
|<span data-ttu-id="689ad-122">Digest</span><span class="sxs-lookup"><span data-stu-id="689ad-122">Digest</span></span>|<span data-ttu-id="689ad-123">摘要驗證是設計來取代基本驗證的挑戰/回應配置。</span><span class="sxs-lookup"><span data-stu-id="689ad-123">Digest authentication is a challenge-response scheme that is intended to replace Basic authentication.</span></span> <span data-ttu-id="689ad-124">伺服器將稱為 *nonce* 的亂數據字串傳送給用戶端，是一項挑戰。</span><span class="sxs-lookup"><span data-stu-id="689ad-124">The server sends a string of random data called a *nonce* to the client as a challenge.</span></span> <span data-ttu-id="689ad-125">用戶端會回應包含使用者名稱、密碼與 Nonce 及其他資訊的雜湊。</span><span class="sxs-lookup"><span data-stu-id="689ad-125">The client responds with a hash that includes the user name, password, and nonce, among additional information.</span></span> <span data-ttu-id="689ad-126">使用這種驗證配置的交換所帶來的複雜性與資料雜湊，讓竊取與再利用使用者的認證更加困難。</span><span class="sxs-lookup"><span data-stu-id="689ad-126">The complexity this exchange introduces and the data hashing make it more difficult to steal and reuse the user's credentials with this authentication scheme.</span></span><br /><br /> <span data-ttu-id="689ad-127">摘要驗證需要使用 Windows 網域帳號。</span><span class="sxs-lookup"><span data-stu-id="689ad-127">Digest authentication requires the use of Windows domain accounts.</span></span> <span data-ttu-id="689ad-128">摘要 *領域* 是 Windows 功能變數名稱。</span><span class="sxs-lookup"><span data-stu-id="689ad-128">The digest *realm* is the Windows domain name.</span></span> <span data-ttu-id="689ad-129">因此，您無法以不支援 Windows 網域的作業系統 (例如 Windows XP 家用版) 上執行的伺服器使用摘要驗證。</span><span class="sxs-lookup"><span data-stu-id="689ad-129">Therefore, you cannot use a server running on an operating system that does not support Windows domains, such as Windows XP Home Edition, with Digest authentication.</span></span> <span data-ttu-id="689ad-130">相反地，當用戶端在不支援 Windows 網域的作業系統上執行，驗證期間必須特別指定網域帳號。</span><span class="sxs-lookup"><span data-stu-id="689ad-130">Conversely, when the client runs on an operating system that does not support Windows domains, a domain account must be explicitly specified during the authentication.</span></span>|  
|<span data-ttu-id="689ad-131">NTLM</span><span class="sxs-lookup"><span data-stu-id="689ad-131">NTLM</span></span>|<span data-ttu-id="689ad-132">NT LAN Manager (NTLM) 驗證為摘要式驗證更安全的變異，是一種挑戰/回應配置。</span><span class="sxs-lookup"><span data-stu-id="689ad-132">NT LAN Manager (NTLM) authentication is a challenge-response scheme that is a securer variation of Digest authentication.</span></span> <span data-ttu-id="689ad-133">NTLM 使用 Windows 認證轉換挑戰資料，而非未編碼的使用者名稱與密碼。</span><span class="sxs-lookup"><span data-stu-id="689ad-133">NTLM uses Windows credentials to transform the challenge data instead of the unencoded user name and password.</span></span> <span data-ttu-id="689ad-134">NTLM 驗證需要在用戶端與服務器之間進行多次交換。</span><span class="sxs-lookup"><span data-stu-id="689ad-134">NTLM authentication requires multiple exchanges between the client and server.</span></span> <span data-ttu-id="689ad-135">伺服器與任何介入的 Proxy 必須支援持續性連線以成功完成驗證。</span><span class="sxs-lookup"><span data-stu-id="689ad-135">The server and any intervening proxies must support persistent connections to successfully complete the authentication.</span></span>|  
|<span data-ttu-id="689ad-136">交涉</span><span class="sxs-lookup"><span data-stu-id="689ad-136">Negotiate</span></span>|<span data-ttu-id="689ad-137">交涉驗證會自動在 Kerberos 通訊協定與 NTLM 驗證之間選擇，依可用性而定。</span><span class="sxs-lookup"><span data-stu-id="689ad-137">Negotiate authentication automatically selects between the Kerberos protocol and NTLM authentication, depending on availability.</span></span> <span data-ttu-id="689ad-138">如果 Kerberos 通訊協定可以使用，就選擇它；否則就會嘗試使用 NTLM。</span><span class="sxs-lookup"><span data-stu-id="689ad-138">The Kerberos protocol is used if it is available; otherwise, NTLM is tried.</span></span> <span data-ttu-id="689ad-139">Kerberos 驗證較 NTLM 更大幅改善。</span><span class="sxs-lookup"><span data-stu-id="689ad-139">Kerberos authentication significantly improves upon NTLM.</span></span> <span data-ttu-id="689ad-140">Kerberos 驗證不僅較 NTLM 更快，而且允許使用交互驗證和對遠端機器認證的委派。</span><span class="sxs-lookup"><span data-stu-id="689ad-140">Kerberos authentication is both faster than NTLM and allows the use of mutual authentication and delegation of credentials to remote machines.</span></span>|  
|<span data-ttu-id="689ad-141">Windows Live ID</span><span class="sxs-lookup"><span data-stu-id="689ad-141">Windows Live ID</span></span>|<span data-ttu-id="689ad-142">基礎的 Windows HTTP 服務包括使用聯合通訊協定的驗證。</span><span class="sxs-lookup"><span data-stu-id="689ad-142">The underlying Windows HTTP service includes authentication using federated protocols.</span></span> <span data-ttu-id="689ad-143">不過，WCF 中的標準 HTTP 傳輸不支援使用同盟驗證配置，例如 Microsoft Windows Live ID。</span><span class="sxs-lookup"><span data-stu-id="689ad-143">However, the standard HTTP transports in WCF do not support the use of federated authentication schemes, such as Microsoft Windows Live ID.</span></span> <span data-ttu-id="689ad-144">目前可透過訊息安全性提供對此功能的支援。</span><span class="sxs-lookup"><span data-stu-id="689ad-144">Support for this feature is currently available through the use of message security.</span></span> <span data-ttu-id="689ad-145">如需詳細資訊，請參閱 [同盟和已發行的權杖](federation-and-issued-tokens.md)。</span><span class="sxs-lookup"><span data-stu-id="689ad-145">For more information, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>|  
  
## <a name="choosing-an-authentication-scheme"></a><span data-ttu-id="689ad-146">選擇驗證配置</span><span class="sxs-lookup"><span data-stu-id="689ad-146">Choosing an Authentication Scheme</span></span>  

 <span data-ttu-id="689ad-147">為 HTTP 伺服器選擇潛在驗證配置時，必須考量一些項目，包括：</span><span class="sxs-lookup"><span data-stu-id="689ad-147">When selecting the potential authentication schemes for an HTTP server, a few items to consider include the following:</span></span>  
  
- <span data-ttu-id="689ad-148">考量資源是否需要保護。</span><span class="sxs-lookup"><span data-stu-id="689ad-148">Consider whether the resource needs to be protected.</span></span> <span data-ttu-id="689ad-149">使用 HTTP 驗證需要傳輸更多資料，並且可限制與用戶端的互通性。</span><span class="sxs-lookup"><span data-stu-id="689ad-149">Using HTTP authentication requires transmitting more data and can limit interoperability with clients.</span></span> <span data-ttu-id="689ad-150">允許匿名存取不需要保護的資源。</span><span class="sxs-lookup"><span data-stu-id="689ad-150">Allow anonymous access to resources that do not need to be protected.</span></span>  
  
- <span data-ttu-id="689ad-151">如果資源需要保護，則考慮何種驗證配置提供所需的安全性等級。</span><span class="sxs-lookup"><span data-stu-id="689ad-151">If the resource needs to be protected, consider which authentication schemes provide the required level of security.</span></span> <span data-ttu-id="689ad-152">這裡所討論的驗證配置，最低標準是基礎驗證。</span><span class="sxs-lookup"><span data-stu-id="689ad-152">The weakest standard authentication scheme discussed here is Basic authentication.</span></span> <span data-ttu-id="689ad-153">基礎驗證不會保護使用者的認證資訊。</span><span class="sxs-lookup"><span data-stu-id="689ad-153">Basic authentication does not protect the user's credentials.</span></span> <span data-ttu-id="689ad-154">最高標準驗證配置為交涉驗證，也就是 Kerberos 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="689ad-154">The strongest standard authentication scheme is Negotiate authentication, resulting in the Kerberos protocol.</span></span>  
  
- <span data-ttu-id="689ad-155">伺服器不應存在任何 (以 WWW-Authentication 標頭表示) 不預備接受或未能提供保護資源適當安全的配置。</span><span class="sxs-lookup"><span data-stu-id="689ad-155">A server should not present (in the WWW-Authentication headers) any scheme that it is not prepared to accept or that does not adequately secure the protected resource.</span></span> <span data-ttu-id="689ad-156">用戶端可自行選擇任何伺服器提供的驗證配置。</span><span class="sxs-lookup"><span data-stu-id="689ad-156">Clients are free to choose between any of the authentication schemes the server presents.</span></span> <span data-ttu-id="689ad-157">有些用戶端預設選擇最薄弱的驗證配置，或是伺服器清單中第一項驗證配置。</span><span class="sxs-lookup"><span data-stu-id="689ad-157">Some clients default to a weak authentication scheme or the first authentication scheme in the server's list.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="689ad-158">另請參閱</span><span class="sxs-lookup"><span data-stu-id="689ad-158">See also</span></span>

- [<span data-ttu-id="689ad-159">傳輸安全性概觀</span><span class="sxs-lookup"><span data-stu-id="689ad-159">Transport Security Overview</span></span>](transport-security-overview.md)
- [<span data-ttu-id="689ad-160">使用模擬搭配傳輸安全性</span><span class="sxs-lookup"><span data-stu-id="689ad-160">Using Impersonation with Transport Security</span></span>](using-impersonation-with-transport-security.md)
- [<span data-ttu-id="689ad-161">委派和模擬</span><span class="sxs-lookup"><span data-stu-id="689ad-161">Delegation and Impersonation</span></span>](delegation-and-impersonation-with-wcf.md)
