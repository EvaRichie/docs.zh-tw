---
title: 使用 NAT 與防火牆
ms.date: 03/30/2017
helpviewer_keywords:
- firewalls [WCF]
- NATs [WCF]
ms.assetid: 74db0632-1bf0-428b-89c8-bd53b64332e7
ms.openlocfilehash: 185be9f6e33fcf107226e98d96d6be5c562384d8
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/26/2020
ms.locfileid: "96238323"
---
# <a name="working-with-nats-and-firewalls"></a><span data-ttu-id="9da14-102">使用 NAT 與防火牆</span><span class="sxs-lookup"><span data-stu-id="9da14-102">Working with NATs and Firewalls</span></span>

<span data-ttu-id="9da14-103">網路連線的用戶端與伺服器經常無法擁有直接且開放的通訊路徑。</span><span class="sxs-lookup"><span data-stu-id="9da14-103">The client and server of a network connection frequently do not have a direct and open path for communication.</span></span> <span data-ttu-id="9da14-104">網路上的端點電腦與中繼電腦都會針對封包進行篩選、路由、分析與轉換。</span><span class="sxs-lookup"><span data-stu-id="9da14-104">Packets are filtered, routed, analyzed, and transformed both on the endpoint machines and by intermediate machines on the network.</span></span> <span data-ttu-id="9da14-105">網路位址轉譯 (NAT) 與防火牆都是能夠參與網路通訊的常見中繼應用程式範例。</span><span class="sxs-lookup"><span data-stu-id="9da14-105">Network address translations (NATs) and firewalls are common examples of intermediate applications that can participate in network communication.</span></span>  
  
 <span data-ttu-id="9da14-106">Windows Communication Foundation (WCF) 傳輸和訊息交換模式 (Mep) 會以不同方式回應，也就是 Nat 和防火牆的存在。</span><span class="sxs-lookup"><span data-stu-id="9da14-106">Windows Communication Foundation (WCF) transports, and message exchange patterns (MEPs) react differently to, the presence of NATs and firewalls.</span></span> <span data-ttu-id="9da14-107">本主題將描述 NAT 與防火牆在常見網路拓撲中的運作方式。</span><span class="sxs-lookup"><span data-stu-id="9da14-107">This topic describes how NATs and firewalls function in common network topologies.</span></span> <span data-ttu-id="9da14-108">針對特定的 WCF 傳輸和 Mep 組合提供建議，以協助讓您的應用程式在網路上更穩固的 Nat 和防火牆。</span><span class="sxs-lookup"><span data-stu-id="9da14-108">Recommendations for specific combinations of WCF transports and MEPs are given that help make your applications more robust to NATs and firewalls on the network.</span></span>  
  
## <a name="how-nats-affect-communication"></a><span data-ttu-id="9da14-109">NAT 如何影響通訊</span><span class="sxs-lookup"><span data-stu-id="9da14-109">How NATs Affect Communication</span></span>  

 <span data-ttu-id="9da14-110">NAT 的建立目的，就是讓好幾部電腦共用一個外部 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="9da14-110">NAT was created to enable several machines to share a single external IP address.</span></span> <span data-ttu-id="9da14-111">負責連接埠重新對應的 NAT 會將某個連線的內部 IP 位址與連接埠對應至包含新連接埠號碼的外部 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="9da14-111">A port-remapping NAT maps an internal IP address and port for a connection to an external IP address with a new port number.</span></span> <span data-ttu-id="9da14-112">新的連接埠號碼可讓 NAT 將返回流量與原始通訊進行關聯。</span><span class="sxs-lookup"><span data-stu-id="9da14-112">The new port number allows the NAT to correlate return traffic with the original communication.</span></span> <span data-ttu-id="9da14-113">許多家庭使用者現在都有一個 IP 位址，但它只能進行內部路由，而且需倚賴 NAT 來提供全域封包路由功能。</span><span class="sxs-lookup"><span data-stu-id="9da14-113">Many home users now have an IP address that is only privately routable and rely on a NAT to provide global routing of packets.</span></span>  
  
 <span data-ttu-id="9da14-114">NAT 不提供安全性界限。</span><span class="sxs-lookup"><span data-stu-id="9da14-114">A NAT does not provide a security boundary.</span></span> <span data-ttu-id="9da14-115">然而，常見的 NAT 組態會避免內部電腦被直接定址。</span><span class="sxs-lookup"><span data-stu-id="9da14-115">However, common NAT configurations prevent the internal machines from being directly addressed.</span></span> <span data-ttu-id="9da14-116">這樣就可以同時保護內部電腦免於收到一些來路不明的連線，而且也不容易寫入必須以非同步方式將資料傳回用戶端的伺服器應用程式。</span><span class="sxs-lookup"><span data-stu-id="9da14-116">This both protects the internal machines from some unwanted connections and makes it difficult to write server applications that must asynchronously send data back to the client.</span></span> <span data-ttu-id="9da14-117">NAT 會在封包內重新撰寫位址，讓連線看起來就像是來自 NAT 電腦一樣。</span><span class="sxs-lookup"><span data-stu-id="9da14-117">The NAT rewrites the addresses in packets to make it seem like connections are originating at the NAT machine.</span></span> <span data-ttu-id="9da14-118">這樣一來，當伺服器嘗試向用戶端開啟連線時將會失敗。</span><span class="sxs-lookup"><span data-stu-id="9da14-118">This causes the server to fail when it attempts to open a connection back to the client.</span></span> <span data-ttu-id="9da14-119">如果伺服器使用用戶端認知的位址，就會因為用戶端位址無法公開路由處理而失敗。</span><span class="sxs-lookup"><span data-stu-id="9da14-119">If the server uses the client's perceived address, it fails because the client address cannot be publicly routed.</span></span> <span data-ttu-id="9da14-120">如果伺服器使用 NAT 位址，會因為沒有任何應用程式接聽該電腦而無法連線。</span><span class="sxs-lookup"><span data-stu-id="9da14-120">If the server uses the NAT address, it fails to connect because no application is listening on that machine.</span></span>  
  
 <span data-ttu-id="9da14-121">某些 NAT 支援轉送規則的組態，讓外部電腦得以連接至特定的內部電腦。</span><span class="sxs-lookup"><span data-stu-id="9da14-121">Some NATs support the configuration of forwarding rules to allow external machines to connect to a particular internal machine.</span></span> <span data-ttu-id="9da14-122">不同的 NAT 在設定轉送規則上有不同的指示，我們不建議要求一般使用者對大部分的應用程式更改自己的 NAT 組態。</span><span class="sxs-lookup"><span data-stu-id="9da14-122">The instructions for configuring forwarding rules varies among different NATs, and asking end users to change their NAT configuration is not recommended for most applications.</span></span> <span data-ttu-id="9da14-123">許多終端使用者無法或不想更改特定應用程式的 NAT 組態。</span><span class="sxs-lookup"><span data-stu-id="9da14-123">Many end users either cannot or do not want to change their NAT configuration for a particular application.</span></span>  
  
## <a name="how-firewalls-affect-communication"></a><span data-ttu-id="9da14-124">防火牆如何影響通訊</span><span class="sxs-lookup"><span data-stu-id="9da14-124">How Firewalls Affect Communication</span></span>  

 <span data-ttu-id="9da14-125">*防火牆* 是一種軟體或硬體裝置，可將規則套用至傳遞的流量，以決定是要允許還是拒絕傳送。</span><span class="sxs-lookup"><span data-stu-id="9da14-125">A *firewall* is a software or hardware device that applies rules to the traffic passing through to decide whether to allow or deny passage.</span></span> <span data-ttu-id="9da14-126">您可以設定防火牆來檢查傳入與/或傳出的流量資料流。</span><span class="sxs-lookup"><span data-stu-id="9da14-126">You can configure firewalls to examine incoming and/or outgoing streams of traffic.</span></span> <span data-ttu-id="9da14-127">防火牆會在網路邊緣或端點主機上為網路提供安全性界限。</span><span class="sxs-lookup"><span data-stu-id="9da14-127">The firewall provides a security boundary for the network at either the edge of the network or on the endpoint host.</span></span> <span data-ttu-id="9da14-128">商務使用者通常會將伺服器放在防火牆後面來預防惡意的攻擊行為。</span><span class="sxs-lookup"><span data-stu-id="9da14-128">Business users have traditionally kept their servers behind a firewall to prevent malicious attacks.</span></span> <span data-ttu-id="9da14-129">自 Windows XP SP2 引進個人防火牆之後，防火牆背後的家庭使用者數量也會大幅增加。</span><span class="sxs-lookup"><span data-stu-id="9da14-129">Since the introduction of the personal firewall in Windows XP SP2, the number of home users behind a firewall has greatly increased as well.</span></span> <span data-ttu-id="9da14-130">這樣一來，連線的任一端或兩端都可能具備檢查封包的防火牆功能。</span><span class="sxs-lookup"><span data-stu-id="9da14-130">This makes it likely that one or both ends of a connection have a firewall examining packets.</span></span>  
  
 <span data-ttu-id="9da14-131">不同的防火牆在複雜性與檢查封包的功能等方面的差異很大。</span><span class="sxs-lookup"><span data-stu-id="9da14-131">Firewalls vary greatly in terms of their complexity and capability for examining packets.</span></span> <span data-ttu-id="9da14-132">簡易的防火牆會依據封包中的來源與目的地位址與連接埠來套用規則。</span><span class="sxs-lookup"><span data-stu-id="9da14-132">Simple firewalls apply rules based on the source and destination addresses and ports in packets.</span></span> <span data-ttu-id="9da14-133">智慧型防火牆則可以同時檢查封包內容來做出決定。</span><span class="sxs-lookup"><span data-stu-id="9da14-133">Intelligent firewalls can also examine the contents of packets to make decisions.</span></span> <span data-ttu-id="9da14-134">這些防火牆在組態上大不相同，而且通常適用特定的應用程式。</span><span class="sxs-lookup"><span data-stu-id="9da14-134">These firewalls come in many different configurations and are often used for specialized applications.</span></span>  
  
 <span data-ttu-id="9da14-135">家庭使用者防火牆的常見組態是禁止傳入的連線 (除非先前已對該電腦進行傳出的連線)。</span><span class="sxs-lookup"><span data-stu-id="9da14-135">A common configuration for a home user firewall is to prohibit incoming connections unless an outgoing connection was made to that machine previously.</span></span> <span data-ttu-id="9da14-136">商務使用者防火牆的常見組態是禁止所有連接埠上的傳入連線 (除了特別指定的群組之外)。</span><span class="sxs-lookup"><span data-stu-id="9da14-136">A common configuration for a business user firewall is to prohibit incoming connections on all ports except a group specifically identified.</span></span> <span data-ttu-id="9da14-137">範例：會禁止所有連接埠 (連接埠 80 與 443 除外) 上的連線以提供 HTTP 和 HTTPS 服務的防火牆。</span><span class="sxs-lookup"><span data-stu-id="9da14-137">An example is a firewall that prohibits connections on all ports except for ports 80 and 443 to provide HTTP and HTTPS service.</span></span> <span data-ttu-id="9da14-138">家庭與商務使用者同時透過管理防火牆，允許電腦上受信任的使用者或處理序變更防火牆組態。</span><span class="sxs-lookup"><span data-stu-id="9da14-138">Managed firewalls exist for both home and business users that permit a trusted user or process on the machine to change the firewall configuration.</span></span> <span data-ttu-id="9da14-139">對於不具備企業原則來控管網路使用的家庭使用者而言，管理防火牆是常見的選擇。</span><span class="sxs-lookup"><span data-stu-id="9da14-139">Managed firewalls are more common for home users where there is no corporate policy controlling network usage.</span></span>  
  
## <a name="using-teredo"></a><span data-ttu-id="9da14-140">使用 Teredo</span><span class="sxs-lookup"><span data-stu-id="9da14-140">Using Teredo</span></span>  

 <span data-ttu-id="9da14-141">Teredo 是一種 IPv6 轉換技術，可讓 NAT 後面的電腦具備直接可定址性。</span><span class="sxs-lookup"><span data-stu-id="9da14-141">Teredo is an IPv6 transition technology that enables the direct addressability of machines behind a NAT.</span></span> <span data-ttu-id="9da14-142">Teredo 仰賴可公開且全域路由的伺服器，通告潛在的連線。</span><span class="sxs-lookup"><span data-stu-id="9da14-142">Teredo relies on the use of a server that can be publicly and globally routed to advertise potential connections.</span></span> <span data-ttu-id="9da14-143">Teredo 伺服器會提供應用程式用戶端與伺服器一個共同的會議點，讓彼此交換連線資訊。</span><span class="sxs-lookup"><span data-stu-id="9da14-143">The Teredo server gives the application client and server a common meeting point at which they can exchange connection information.</span></span> <span data-ttu-id="9da14-144">接著這些機器會要求暫時的 Teredo 位址，並透過現有的網路通道來傳送封包。</span><span class="sxs-lookup"><span data-stu-id="9da14-144">The machines then request a temporary Teredo address, and packets are tunneled through the existing network.</span></span> <span data-ttu-id="9da14-145">WCF 中的 teredo 支援需要在作業系統中啟用 IPv6 和 Teredo 支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-145">Teredo support in WCF requires enabling IPv6 and Teredo support in the operating system.</span></span> <span data-ttu-id="9da14-146">Windows XP 及更新版本的作業系統支援 Teredo。</span><span class="sxs-lookup"><span data-stu-id="9da14-146">Windows XP and later operating systems support Teredo.</span></span> <span data-ttu-id="9da14-147">Windows Vista 和更新版本的作業系統預設支援 IPv6，而且只需要使用者啟用 Teredo。</span><span class="sxs-lookup"><span data-stu-id="9da14-147">Windows Vista and later operating systems support IPv6 by default and only require the user to enable Teredo.</span></span> <span data-ttu-id="9da14-148">Windows XP SP2 和 Windows Server 2003 需要使用者同時啟用 IPv6 和 Teredo。</span><span class="sxs-lookup"><span data-stu-id="9da14-148">Windows XP SP2 and Windows Server 2003 require the user to enable both IPv6 and Teredo.</span></span> <span data-ttu-id="9da14-149">如需詳細資訊，請參閱 [Teredo 總覽](/previous-versions/windows/it-pro/windows-xp/bb457011(v=technet.10))。</span><span class="sxs-lookup"><span data-stu-id="9da14-149">For more information, see the [Teredo Overview](/previous-versions/windows/it-pro/windows-xp/bb457011(v=technet.10)).</span></span>  
  
## <a name="choosing-a-transport-and-message-exchange-pattern"></a><span data-ttu-id="9da14-150">選擇傳輸與訊息交換模式</span><span class="sxs-lookup"><span data-stu-id="9da14-150">Choosing a Transport and Message Exchange Pattern</span></span>  

 <span data-ttu-id="9da14-151">選取傳輸與 MEP 需經過三個步驟的處理序：</span><span class="sxs-lookup"><span data-stu-id="9da14-151">Selecting a transport and MEP is a three-step process:</span></span>  
  
1. <span data-ttu-id="9da14-152">分析端點電腦的可定址性。</span><span class="sxs-lookup"><span data-stu-id="9da14-152">Analyze the addressability of the endpoint machines.</span></span> <span data-ttu-id="9da14-153">企業伺服器一般都具備直接定址性，而一般使用者通常都會透過 NAT 來封鎖電腦的可定址性。</span><span class="sxs-lookup"><span data-stu-id="9da14-153">Enterprise servers commonly have direct addressability, while end users commonly have their addressability blocked by NATs.</span></span> <span data-ttu-id="9da14-154">如果兩個端點都位於 NAT 後面，例如終端使用者的對等案例，則您可能需要透過 Teredo 之類的技術來提供可定址性。</span><span class="sxs-lookup"><span data-stu-id="9da14-154">If both endpoints are behind a NAT, such as in peer-to-peer scenarios between end users, then you might need a technology such as Teredo to provide addressability.</span></span>  
  
2. <span data-ttu-id="9da14-155">分析端點電腦的通訊協定與連接埠限制。</span><span class="sxs-lookup"><span data-stu-id="9da14-155">Analyze the protocol and port restrictions of the endpoint machines.</span></span> <span data-ttu-id="9da14-156">企業伺服器通常位於會封鎖許多連接埠、功能強大的防火牆後面。</span><span class="sxs-lookup"><span data-stu-id="9da14-156">Enterprise servers are typically behind strong firewalls that block many ports.</span></span> <span data-ttu-id="9da14-157">然而，連接埠 80 常常開放來允許 HTTP 流量通過，而連接埠 443 則是開放來允許 HTTPS 流量通過。</span><span class="sxs-lookup"><span data-stu-id="9da14-157">However, port 80 is frequently open to permit HTTP traffic, and port 443 is open to permit HTTPS traffic.</span></span> <span data-ttu-id="9da14-158">終端使用者比較不可能對連接埠進行限制，但是可能透過防火牆來允許傳出連線的單向通行。</span><span class="sxs-lookup"><span data-stu-id="9da14-158">End users are less likely to have port restrictions but might be behind a firewall that permits only outgoing connections.</span></span> <span data-ttu-id="9da14-159">某些防火牆會允許在端點上透過應用程式管理，選擇性地開啟某些連線。</span><span class="sxs-lookup"><span data-stu-id="9da14-159">Some firewalls permit management by applications on the endpoint to selectively open connections.</span></span>  
  
3. <span data-ttu-id="9da14-160">計算網路可定址性與連接埠限制所允許的傳輸與 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-160">Compute the transports and MEPs that the addressability and port restrictions of the network permit.</span></span>  
  
 <span data-ttu-id="9da14-161">主從式應用程式的常見拓撲，就是讓位於 NAT 後方且不包含 Teredo 功能的用戶端具備只允許傳出流量的防火牆，而讓可以直接定址的伺服器擁有功能強大的防火牆。</span><span class="sxs-lookup"><span data-stu-id="9da14-161">A common topology for client-server applications is to have clients that are behind a NAT without Teredo with an outbound-only firewall and a server that is directly addressable with a strong firewall.</span></span> <span data-ttu-id="9da14-162">在此情況下，包含雙工 MEP 的 TCP 傳輸以及包含要求-回覆 MEP 的 HTTP 傳輸都能運作正常。</span><span class="sxs-lookup"><span data-stu-id="9da14-162">In this scenario, the TCP transport with a duplex MEP and an HTTP transport with a request-reply MEP work well.</span></span> <span data-ttu-id="9da14-163">對等應用程式的常見拓撲，就是讓兩個端點同時位於 NAT 與防火牆後面。</span><span class="sxs-lookup"><span data-stu-id="9da14-163">A common topology for peer-to-peer applications is to have both endpoints behind NATs and firewalls.</span></span> <span data-ttu-id="9da14-164">在此情況下，還有網路拓撲不明的情況下，請考慮下列建議：</span><span class="sxs-lookup"><span data-stu-id="9da14-164">In this scenario, and in scenarios where the network topology is unknown, consider the following recommendations:</span></span>  
  
- <span data-ttu-id="9da14-165">不使用雙重傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-165">Do not use dual transports.</span></span> <span data-ttu-id="9da14-166">雙重傳輸會開啟更多的連線，進而降低成功連線的機會。</span><span class="sxs-lookup"><span data-stu-id="9da14-166">A dual transport opens more connections, which reduces the chance of connecting successfully.</span></span>  
  
- <span data-ttu-id="9da14-167">支援在原始連線上建立返回通道。</span><span class="sxs-lookup"><span data-stu-id="9da14-167">Support establishing back channels over the originating connection.</span></span> <span data-ttu-id="9da14-168">使用返回通道 (例如在雙工 TCP 中) 會開啟較少的連線，進而增加成功連線的機會。</span><span class="sxs-lookup"><span data-stu-id="9da14-168">Using back channels, such as in duplex TCP, opens fewer connections, which increases the chance of connecting successfully.</span></span>  
  
- <span data-ttu-id="9da14-169">針對註冊端點或轉送流量使用可連接的服務。</span><span class="sxs-lookup"><span data-stu-id="9da14-169">Employ a reachable service for either registering endpoints or relaying traffic.</span></span> <span data-ttu-id="9da14-170">使用全域可連接的連線服務，例如 Teredo 伺服器，會在網路拓撲有所限制或不明的情況下，大幅增加成功連線的機會。</span><span class="sxs-lookup"><span data-stu-id="9da14-170">Using a globally reachable connection service, such as a Teredo server, greatly increases the chance of connecting successfully when the network topology is restrictive or unknown.</span></span>  
  
 <span data-ttu-id="9da14-171">下表將檢查單向、要求-回復和雙工 Mep，以及 WCF 中的標準 TCP、TCP 與 Teredo，以及標準和雙重 HTTP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-171">The following tables examine the one-way, request-reply, and duplex MEPs, and the standard TCP, TCP with Teredo, and standard and dual HTTP transports in WCF.</span></span>  
  
|<span data-ttu-id="9da14-172">可定址性</span><span class="sxs-lookup"><span data-stu-id="9da14-172">Addressability</span></span>|<span data-ttu-id="9da14-173">直接伺服器</span><span class="sxs-lookup"><span data-stu-id="9da14-173">Server Direct</span></span>|<span data-ttu-id="9da14-174">使用 NAT 周遊功能的直接伺服器</span><span class="sxs-lookup"><span data-stu-id="9da14-174">Server Direct with NAT traversal</span></span>|<span data-ttu-id="9da14-175">伺服器 NAT</span><span class="sxs-lookup"><span data-stu-id="9da14-175">Server NAT</span></span>|<span data-ttu-id="9da14-176">使用 NAT 周遊功能的伺服器 NAT</span><span class="sxs-lookup"><span data-stu-id="9da14-176">Server NAT with NAT traversal</span></span>|  
|--------------------|-------------------|--------------------------------------|----------------|-----------------------------------|  
|<span data-ttu-id="9da14-177">直接用戶端</span><span class="sxs-lookup"><span data-stu-id="9da14-177">Client direct</span></span>|<span data-ttu-id="9da14-178">任何傳輸和 MEP</span><span class="sxs-lookup"><span data-stu-id="9da14-178">Any transport and MEP</span></span>|<span data-ttu-id="9da14-179">任何傳輸和 MEP</span><span class="sxs-lookup"><span data-stu-id="9da14-179">Any transport and MEP</span></span>|<span data-ttu-id="9da14-180">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-180">Not supported.</span></span>|<span data-ttu-id="9da14-181">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-181">Not supported.</span></span>|  
|<span data-ttu-id="9da14-182">使用 NAT 周遊功能的直接用戶端</span><span class="sxs-lookup"><span data-stu-id="9da14-182">Client direct with NAT traversal</span></span>|<span data-ttu-id="9da14-183">任何傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-183">Any transport and MEP.</span></span>|<span data-ttu-id="9da14-184">任何傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-184">Any transport and MEP.</span></span>|<span data-ttu-id="9da14-185">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-185">Not supported.</span></span>|<span data-ttu-id="9da14-186">包含 Teredo 的 TCP 與任何 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-186">TCP with Teredo and any MEP.</span></span> <span data-ttu-id="9da14-187">Windows Vista 具有全電腦的設定選項，可支援使用 Teredo 的 HTTP。</span><span class="sxs-lookup"><span data-stu-id="9da14-187">Windows Vista has a machine-wide configuration option to support HTTP with Teredo.</span></span>|  
|<span data-ttu-id="9da14-188">用戶端 NAT</span><span class="sxs-lookup"><span data-stu-id="9da14-188">Client NAT</span></span>|<span data-ttu-id="9da14-189">任何非雙重傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-189">Any non-dual transport and MEP.</span></span> <span data-ttu-id="9da14-190">雙工 MEP 需要 TCP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-190">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="9da14-191">任何非雙重傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-191">Any non-dual transport and MEP.</span></span> <span data-ttu-id="9da14-192">雙工 MEP 需要 TCP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-192">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="9da14-193">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-193">Not supported.</span></span>|<span data-ttu-id="9da14-194">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-194">Not supported.</span></span>|  
|<span data-ttu-id="9da14-195">使用 NAT 周遊功能的用戶端 NAT</span><span class="sxs-lookup"><span data-stu-id="9da14-195">Client NAT with NAT traversal</span></span>|<span data-ttu-id="9da14-196">任何非雙重傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-196">Any non-dual transport and MEP.</span></span> <span data-ttu-id="9da14-197">雙工 MEP 需要 TCP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-197">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="9da14-198">除了雙重 HTTP 與任何 MEP 以外。</span><span class="sxs-lookup"><span data-stu-id="9da14-198">All but dual HTTP and any MEP.</span></span> <span data-ttu-id="9da14-199">雙工 MEP 需要 TCP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-199">Duplex MEP requires TCP transport.</span></span> <span data-ttu-id="9da14-200">雙重 TCP 傳輸需要 Teredo。</span><span class="sxs-lookup"><span data-stu-id="9da14-200">Dual TCP transport requires Teredo.</span></span> <span data-ttu-id="9da14-201">Windows Vista 具有全電腦的設定選項，可支援使用 Teredo 的 HTTP。</span><span class="sxs-lookup"><span data-stu-id="9da14-201">Windows Vista has a machine-wide configuration option to support HTTP with Teredo.</span></span>|<span data-ttu-id="9da14-202">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-202">Not supported.</span></span>|<span data-ttu-id="9da14-203">包含 Teredo 的 TCP 與任何 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-203">TCP with Teredo and any MEP.</span></span> <span data-ttu-id="9da14-204">Windows Vista 具有全電腦的設定選項，可支援使用 Teredo 的 HTTP。</span><span class="sxs-lookup"><span data-stu-id="9da14-204">Windows Vista has a machine-wide configuration option to support HTTP with Teredo.</span></span>|  
  
|<span data-ttu-id="9da14-205">防火牆限制</span><span class="sxs-lookup"><span data-stu-id="9da14-205">Firewall restrictions</span></span>|<span data-ttu-id="9da14-206">開放性伺服器</span><span class="sxs-lookup"><span data-stu-id="9da14-206">Server open</span></span>|<span data-ttu-id="9da14-207">使用管理防火牆的伺服器</span><span class="sxs-lookup"><span data-stu-id="9da14-207">Server with managed firewall</span></span>|<span data-ttu-id="9da14-208">使用僅限 HTTP 防火牆的伺服器</span><span class="sxs-lookup"><span data-stu-id="9da14-208">Server with HTTP-only firewall</span></span>|<span data-ttu-id="9da14-209">使用僅限傳出流量防火牆的伺服器</span><span class="sxs-lookup"><span data-stu-id="9da14-209">Server with outbound-only firewall</span></span>|  
|---------------------------|-----------------|----------------------------------|-------------------------------------|-----------------------------------------|  
|<span data-ttu-id="9da14-210">開放性用戶端</span><span class="sxs-lookup"><span data-stu-id="9da14-210">Client Open</span></span>|<span data-ttu-id="9da14-211">任何傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-211">Any transport and MEP.</span></span>|<span data-ttu-id="9da14-212">任何傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-212">Any transport and MEP.</span></span>|<span data-ttu-id="9da14-213">任何 HTTP 傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-213">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="9da14-214">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-214">Not supported.</span></span>|  
|<span data-ttu-id="9da14-215">使用管理防火牆的用戶端</span><span class="sxs-lookup"><span data-stu-id="9da14-215">Client with managed firewall</span></span>|<span data-ttu-id="9da14-216">任何非雙重傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-216">Any non-dual transport and MEP.</span></span> <span data-ttu-id="9da14-217">雙工 MEP 需要 TCP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-217">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="9da14-218">任何非雙重傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-218">Any non-dual transport and MEP.</span></span> <span data-ttu-id="9da14-219">雙工 MEP 需要 TCP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-219">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="9da14-220">任何 HTTP 傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-220">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="9da14-221">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-221">Not supported.</span></span>|  
|<span data-ttu-id="9da14-222">使用僅限 HTTP 防火牆的用戶端</span><span class="sxs-lookup"><span data-stu-id="9da14-222">Client with HTTP-only firewall</span></span>|<span data-ttu-id="9da14-223">任何 HTTP 傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-223">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="9da14-224">任何 HTTP 傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-224">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="9da14-225">任何 HTTP 傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-225">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="9da14-226">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-226">Not supported.</span></span>|  
|<span data-ttu-id="9da14-227">使用僅限傳出流量防火牆的用戶端</span><span class="sxs-lookup"><span data-stu-id="9da14-227">Client with outbound-only firewall</span></span>|<span data-ttu-id="9da14-228">任何非雙重傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-228">Any non-dual transport and MEP.</span></span> <span data-ttu-id="9da14-229">雙工 MEP 需要 TCP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-229">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="9da14-230">任何非雙重傳輸和 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-230">Any non-dual transport and MEP.</span></span> <span data-ttu-id="9da14-231">雙工 MEP 需要 TCP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9da14-231">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="9da14-232">任何 HTTP 傳輸與任何非雙工 MEP。</span><span class="sxs-lookup"><span data-stu-id="9da14-232">Any HTTP transport and any non-duplex MEP.</span></span>|<span data-ttu-id="9da14-233">不支援。</span><span class="sxs-lookup"><span data-stu-id="9da14-233">Not supported.</span></span>|
