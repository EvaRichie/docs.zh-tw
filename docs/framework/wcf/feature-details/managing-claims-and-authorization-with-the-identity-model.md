---
title: 使用身分識別模型來管理宣告與授權
description: 瞭解 WCF 身分識別模型的主要程式設計概念，這是用來執行授權的宣告型模型。
ms.date: 03/30/2017
helpviewer_keywords:
- authorization [WCF]
- WCF security
- claims [WCF], managing with the Identity Model
- claims [WCF]
- authorization [WCF], managing with the Identity Model
ms.assetid: 099defbb-5d35-434e-9336-1a49b9ec7663
ms.openlocfilehash: c1e17d5a8d9374acdc420a6af65c797f09db352e
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/26/2020
ms.locfileid: "96234852"
---
# <a name="managing-claims-and-authorization-with-the-identity-model"></a><span data-ttu-id="2a2a3-103">使用身分識別模型來管理宣告與授權</span><span class="sxs-lookup"><span data-stu-id="2a2a3-103">Managing Claims and Authorization with the Identity Model</span></span>

<span data-ttu-id="2a2a3-104">授權就是決定哪些實體可以擁有變更、檢視或另外存取電腦資源等權限的程序。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-104">Authorization is the process of determining which entities have permission to change, view, or otherwise access a computer resource.</span></span> <span data-ttu-id="2a2a3-105">例如，在公司裡只有經理可以存取這家公司員工的檔案。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-105">For example, in a business, only managers may be allowed to access the files of their employees.</span></span> <span data-ttu-id="2a2a3-106">Windows Communication Foundation (WCF) 支援兩種機制來執行授權處理。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-106">Windows Communication Foundation (WCF) supports two mechanisms for performing authorization processing.</span></span> <span data-ttu-id="2a2a3-107">第一種機制可讓您使用現有的 Common Language Runtime (CLR) 建構來控制授權。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-107">The first mechanism enables you to control authorization using existing common language runtime (CLR) constructs.</span></span> <span data-ttu-id="2a2a3-108">第二個是以宣告為基礎的模型，稱為「身分 *識別模型」（Identity model*）。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-108">The second is a claims-based model known as the *Identity Model*.</span></span> <span data-ttu-id="2a2a3-109">WCF 會使用身分識別模型來建立傳入訊息的宣告;您可以擴充身分識別模型類別，以支援自訂授權配置的新宣告類型。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-109">WCF uses the Identity Model to create claims from incoming messages; Identity Model classes can be extended to support new claim types for custom authorization schemes.</span></span> <span data-ttu-id="2a2a3-110">本主題將顯示識別模型功能的主要程式設計概念概觀，以及此功能使用之最重要類別的清單。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-110">This topic presents an overview of the major programming concepts of the Identity Model feature, as well as a listing of the most important classes the feature uses.</span></span>  
  
## <a name="identity-model-scenarios"></a><span data-ttu-id="2a2a3-111">識別模型案例</span><span class="sxs-lookup"><span data-stu-id="2a2a3-111">Identity Model Scenarios</span></span>  

 <span data-ttu-id="2a2a3-112">下列案例會顯示使用識別模型。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-112">The following scenarios represent Identity Model use.</span></span>  
  
### <a name="scenario-1-supporting-identity-role-and-group-claims"></a><span data-ttu-id="2a2a3-113">案例 1：支援識別、角色和群組宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-113">Scenario 1: Supporting Identity, Role, and Group Claims</span></span>  

 <span data-ttu-id="2a2a3-114">使用者傳送訊息至 Web 服務。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-114">Users send messages to a Web service.</span></span> <span data-ttu-id="2a2a3-115">Web 服務的存取控制需求使用識別、角色或群組。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-115">The access control requirements of the Web service use identity, roles, or groups.</span></span> <span data-ttu-id="2a2a3-116">訊息寄件者會對應至一組角色或一組群組。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-116">The message sender is mapped to a set of roles or groups.</span></span> <span data-ttu-id="2a2a3-117">角色或群組資訊會用於執行存取檢查。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-117">Role or group information is used to perform access checks.</span></span>  
  
### <a name="scenario-2-supporting-rich-claims"></a><span data-ttu-id="2a2a3-118">案例 2：支援豐富的宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-118">Scenario 2: Supporting Rich Claims</span></span>  

 <span data-ttu-id="2a2a3-119">使用者傳送訊息至 Web 服務。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-119">Users send messages to a Web service.</span></span> <span data-ttu-id="2a2a3-120">Web 服務的存取控制需求需要使用比識別、角色或群組更豐富的模型。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-120">The access control requirements of the Web service require a richer model than identity, roles, or groups.</span></span> <span data-ttu-id="2a2a3-121">Web 服務會使用豐富的宣告架構模型來判定特定使用者是否可以存取特定受保護的資源。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-121">The Web service determines whether a given user has access to a particular protected resource using the rich claims-based model.</span></span> <span data-ttu-id="2a2a3-122">例如，某位使用者可以讀取像是薪資資訊的特定資訊，但是其他使用者不能讀取該資訊。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-122">For example, one user may be able to read particular information, such as salary information, that other users do not have access to.</span></span>  
  
### <a name="scenario-3-mapping-disparate-claims"></a><span data-ttu-id="2a2a3-123">案例 3：對應不同的宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-123">Scenario 3: Mapping Disparate Claims</span></span>  

 <span data-ttu-id="2a2a3-124">使用者傳送訊息至 Web 服務。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-124">A user sends a message to a Web service.</span></span> <span data-ttu-id="2a2a3-125">使用者可能會使用各種不同的方法來指定其認證，即 X.509 憑證、使用者名稱權杖或 Kerberos 權杖。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-125">The user may specify their credentials in a number of different ways: X.509 certificate, user name token, or Kerberos token.</span></span> <span data-ttu-id="2a2a3-126">不論是那一種使用者認證類型，Web 服務都必須以相同方式來執行存取控制檢查。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-126">The Web service is required to perform access control checks in the same way, regardless of the user credential type.</span></span> <span data-ttu-id="2a2a3-127">如果在經過一段時間後有其他認證類型也受到支援，系統也應該隨著演進。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-127">If additional credential types are supported over time, the system should evolve accordingly.</span></span>  
  
### <a name="scenario-4-determining-access-to-multiple-resources"></a><span data-ttu-id="2a2a3-128">案例 4：判定多個資源的存取</span><span class="sxs-lookup"><span data-stu-id="2a2a3-128">Scenario 4: Determining Access to Multiple Resources</span></span>  

 <span data-ttu-id="2a2a3-129">Web 服務嘗試存取多個資源。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-129">A Web service attempts to access multiple resources.</span></span> <span data-ttu-id="2a2a3-130">此服務會將與使用者關聯的宣告與存取該資源時所需要的宣告進行比較，以判定特定使用者擁有哪一個受保護資源的存取權限。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-130">The service determines which protected resources a given user has access to by comparing the claims associated with the user with the claims required to access the resource.</span></span>  
  
## <a name="identity-model-terms"></a><span data-ttu-id="2a2a3-131">識別模型詞彙</span><span class="sxs-lookup"><span data-stu-id="2a2a3-131">Identity Model Terms</span></span>  

 <span data-ttu-id="2a2a3-132">下列清單會定義用來描述識別模型概念的重要詞彙。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-132">The following list defines key terms used to describe Identity Model concepts.</span></span>  
  
 <span data-ttu-id="2a2a3-133">授權原則</span><span class="sxs-lookup"><span data-stu-id="2a2a3-133">Authorization policy</span></span>  
 <span data-ttu-id="2a2a3-134">一組規則，可將一組輸入宣告對應至一組輸出宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-134">A set of rules for mapping a set of input claims to a set of output claims.</span></span> <span data-ttu-id="2a2a3-135">評估授權原則，便可使宣告集新增至評估內容以及隨後的授權內容中。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-135">Evaluating authorization policy results in claim sets being added to an evaluation context and subsequently an authorization context.</span></span>  
  
 <span data-ttu-id="2a2a3-136">授權內容</span><span class="sxs-lookup"><span data-stu-id="2a2a3-136">Authorization context</span></span>  
 <span data-ttu-id="2a2a3-137">一組宣告集，以及零或更多個屬性。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-137">A set of claim sets and zero or more properties.</span></span> <span data-ttu-id="2a2a3-138">評估一個或多個授權原則所產生的結果。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-138">The result of evaluating one or more authorization policies.</span></span>  
  
 <span data-ttu-id="2a2a3-139">宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-139">Claim</span></span>  
 <span data-ttu-id="2a2a3-140">宣告類型、權限和值的組合。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-140">A combination of a claim type, right, and a value.</span></span>  
  
 <span data-ttu-id="2a2a3-141">宣告集</span><span class="sxs-lookup"><span data-stu-id="2a2a3-141">Claim set</span></span>  
 <span data-ttu-id="2a2a3-142">由特定簽發者所發行的一組宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-142">A set of claims issued by a particular issuer.</span></span>  
  
 <span data-ttu-id="2a2a3-143">宣告類型</span><span class="sxs-lookup"><span data-stu-id="2a2a3-143">Claim type</span></span>  
 <span data-ttu-id="2a2a3-144">宣告的種類。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-144">A kind of claim.</span></span> <span data-ttu-id="2a2a3-145">由識別模型 API 定義的宣告，就是 <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> 類別的屬性。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-145">Claims defined by the Identity Model API are properties of the <xref:System.IdentityModel.Claims.Claim.ClaimType%2A> class.</span></span> <span data-ttu-id="2a2a3-146">系統提供的宣告類型範例包括：<xref:System.IdentityModel.Claims.ClaimTypes.Dns%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Email%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Hash%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Rsa%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Sid%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Spn%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.System%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Thumbprint%2A>、<xref:System.IdentityModel.Claims.ClaimTypes.Uri%2A> 和 <xref:System.IdentityModel.Claims.ClaimTypes.X500DistinguishedName%2A>。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-146">Examples of system-provided claim types are <xref:System.IdentityModel.Claims.ClaimTypes.Dns%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Email%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Hash%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Name%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Rsa%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Sid%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Spn%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.System%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Thumbprint%2A>, <xref:System.IdentityModel.Claims.ClaimTypes.Uri%2A>, and <xref:System.IdentityModel.Claims.ClaimTypes.X500DistinguishedName%2A>.</span></span>  
  
 <span data-ttu-id="2a2a3-147">評估內容</span><span class="sxs-lookup"><span data-stu-id="2a2a3-147">Evaluation context</span></span>  
 <span data-ttu-id="2a2a3-148">評估其中之授權原則的內容。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-148">A context in which an authorization policy is evaluated.</span></span> <span data-ttu-id="2a2a3-149">包含屬性和宣告集。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-149">Contains properties and claim sets.</span></span> <span data-ttu-id="2a2a3-150">完成評估之後，便會成為授權內容的基礎。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-150">Becomes the basis of an authorization context once evaluation is complete.</span></span>  
  
 <span data-ttu-id="2a2a3-151">識別宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-151">Identity claim</span></span>  
 <span data-ttu-id="2a2a3-152">所擁有權限即為識別的宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-152">A claim whose right is identity.</span></span>  
  
 <span data-ttu-id="2a2a3-153">Issuer</span><span class="sxs-lookup"><span data-stu-id="2a2a3-153">Issuer</span></span>  
 <span data-ttu-id="2a2a3-154">宣告集，其包含至少一個識別宣告且被視為已發行其他宣告集。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-154">A claim set that contains at least one identity claim and is considered to have issued another claim set.</span></span>  
  
 <span data-ttu-id="2a2a3-155">屬性</span><span class="sxs-lookup"><span data-stu-id="2a2a3-155">Properties</span></span>  
 <span data-ttu-id="2a2a3-156">一組與評估內容或授權內容相關聯的資訊。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-156">A set of information associated with an evaluation context or authorization context.</span></span>  
  
 <span data-ttu-id="2a2a3-157">受保護資源</span><span class="sxs-lookup"><span data-stu-id="2a2a3-157">Protected resource</span></span>  
 <span data-ttu-id="2a2a3-158">指系統中僅能在符合特定需求時才能予以使用、存取或操作的內容。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-158">Something in the system that can only be used, accessed, or otherwise manipulated if certain requirements are first met.</span></span>  
  
 <span data-ttu-id="2a2a3-159">Right</span><span class="sxs-lookup"><span data-stu-id="2a2a3-159">Right</span></span>  
 <span data-ttu-id="2a2a3-160">指關於某項資源的能力。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-160">A capability over a resource.</span></span> <span data-ttu-id="2a2a3-161">由識別模型 API 定義的權限，就是 <xref:System.IdentityModel.Claims.Rights> 類別的屬性。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-161">Rights defined by the Identity Model API are properties of the <xref:System.IdentityModel.Claims.Rights> class.</span></span> <span data-ttu-id="2a2a3-162">系統提供的權限範例包括 <xref:System.IdentityModel.Claims.Rights.Identity%2A> 和 <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-162">Examples of system-provided rights are <xref:System.IdentityModel.Claims.Rights.Identity%2A> and <xref:System.IdentityModel.Claims.Rights.PossessProperty%2A>.</span></span>  
  
 <span data-ttu-id="2a2a3-163">值</span><span class="sxs-lookup"><span data-stu-id="2a2a3-163">Value</span></span>  
 <span data-ttu-id="2a2a3-164">指可透過其中來宣告權限的內容。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-164">Something over which a right is claimed.</span></span>  
  
## <a name="claims"></a><span data-ttu-id="2a2a3-165">宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-165">Claims</span></span>  

 <span data-ttu-id="2a2a3-166">識別模型為宣告架構的系統。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-166">The Identity Model is a claims-based system.</span></span> <span data-ttu-id="2a2a3-167">宣告會描述與系統中某些實體關聯的功能，這類實體通常是指該系統的使用者。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-167">Claims describe the capabilities associated with some entity in the system, often a user of that system.</span></span> <span data-ttu-id="2a2a3-168">與特定實體關聯的一組宣告可以視為金鑰。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-168">The set of claims associated with a given entity can be thought of as a key.</span></span> <span data-ttu-id="2a2a3-169">這些特定宣告會定義該金鑰的形狀，就像是用來開啟門鎖的實體鑰匙。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-169">The particular claims define the shape of that key, similar to a physical key used to open a lock in a door.</span></span> <span data-ttu-id="2a2a3-170">宣告可用來獲得資源的存取權。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-170">Claims are used to gain access to resources.</span></span> <span data-ttu-id="2a2a3-171">判定特定受保護資源之權限的方式，就是比較存取該資源時所需要的宣告和正在嘗試存取之實體的相關聯宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-171">Access to a given protected resource is determined by comparing the claims needed to access that resource with the claims associated with the entity attempting access.</span></span>  
  
 <span data-ttu-id="2a2a3-172">宣告就是權限對於特定值的運算式。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-172">A claim is the expression of a right with respect to a particular value.</span></span> <span data-ttu-id="2a2a3-173">權限可以是 "Read"、"Write" 或 "Execute" 或其他權限。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-173">A right could be something like "Read", "Write", or "Execute."</span></span> <span data-ttu-id="2a2a3-174">值可以是資料庫、檔案、信箱或屬性。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-174">A value could be a database, a file, a mailbox, or a property.</span></span> <span data-ttu-id="2a2a3-175">宣告也具有宣告類型，</span><span class="sxs-lookup"><span data-stu-id="2a2a3-175">Claims also have a claim type.</span></span> <span data-ttu-id="2a2a3-176">宣告類型和權限的組合會提供可指定關於特定值之能力的機制。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-176">The combination of claim type and right provides the mechanism for specifying capabilities with respect to the value.</span></span> <span data-ttu-id="2a2a3-177">例如，型別為 "File" 的宣告，在值 "Biography.doc" 上具有右邊 "Read"，表示與這類宣告相關聯的實體具有檔案 Biography.doc 的讀取權限。"Name" 類型的宣告，在值 "聖馬丁" 上具有右邊 "PossessProperty"，表示與這類宣告相關聯的實體擁有值為 "聖馬丁" 的名稱屬性。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-177">For example, a claim of type "File", with right "Read" over the value "Biography.doc", indicates that the entity with which such a claim is associated has read access to the file Biography.doc. A claim of type "Name", with right "PossessProperty" over the value "Martin", indicates that the entity with which such a claim is associated possesses a Name property with the value "Martin".</span></span>  
  
 <span data-ttu-id="2a2a3-178">雖然各種宣告類型和權限都會定義成為識別模型的一部分，但是系統仍具備擴充性，可以讓各種系統建置於識別模型基礎架構的頂端，以便視需要定義其他宣告類型和權限。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-178">Although various claim types and rights are defined as part of the Identity Model, the system is extensible, allowing the various systems, building on top of the Identity Model infrastructure, to define additional claim types and rights as required.</span></span>  
  
### <a name="identity-claims"></a><span data-ttu-id="2a2a3-179">識別宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-179">Identity Claims</span></span>  

 <span data-ttu-id="2a2a3-180">識別的權限是一種特殊權限。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-180">One particular right is that of identity.</span></span> <span data-ttu-id="2a2a3-181">擁有此權限的宣告發出關於實體之識別的陳述式。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-181">Claims that possess this right make a statement about the identity of the entity.</span></span> <span data-ttu-id="2a2a3-182">例如，「使用者主體名稱」類型的宣告 (UPN) 值為「」 someone@example.com ，而「身分識別」右邊表示特定網域中的特定身分識別。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-182">For example, a claim of type "user principal name" (UPN) with a value of "someone@example.com" and a right of Identity indicates a particular identity in a particular domain.</span></span>  
  
#### <a name="system-identity-claim"></a><span data-ttu-id="2a2a3-183">系統識別宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-183">System Identity Claim</span></span>  

 <span data-ttu-id="2a2a3-184">識別模型定義一個識別宣告：系統。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-184">The Identity Model defines one identity claim: System.</span></span> <span data-ttu-id="2a2a3-185">此系統識別宣告表示實體為目前的應用程式或系統。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-185">The System identity claim indicates that an entity is the current application or system.</span></span>  
  
### <a name="sets-of-claims"></a><span data-ttu-id="2a2a3-186">宣告集</span><span class="sxs-lookup"><span data-stu-id="2a2a3-186">Sets of Claims</span></span>  

 <span data-ttu-id="2a2a3-187">表示識別的宣告模型是很重要的，因為宣告永遠都是由系統中的某些實體發行的，即使該實體只是某些「自我」的概念。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-187">The model of claims that represent identity is important because claims are always issued by some entity in the system, even if that entity is ultimately some concept of "self".</span></span> <span data-ttu-id="2a2a3-188">宣告會聚集起來分類為集合，且每個集合都會有簽發者。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-188">Claims are grouped together as a set and each set has an issuer.</span></span> <span data-ttu-id="2a2a3-189">而簽發者就只是一組宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-189">An issuer is just a set of claims.</span></span> <span data-ttu-id="2a2a3-190">此類遞迴關係最終必須結束，而且任何宣告集都可以成為自己的簽發者。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-190">Such a recursive relationship must eventually end and any claim set can be its own issuer.</span></span>  
  
 <span data-ttu-id="2a2a3-191">下列圖表顯示三個宣告集範例，其中一個宣告集是以另一個宣告集做為其簽發者，而該簽發者宣告集又以系統宣告集做為其簽發者。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-191">The following figure shows an example of three sets of claims where one set of claims has, as its issuer, another set of claims, which in turn has the System claim set as its issuer.</span></span> <span data-ttu-id="2a2a3-192">因此，這些宣告集會形成具有任意深度的階層。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-192">Therefore, sets of claims form a hierarchy that may be arbitrarily deep.</span></span>  
  
 ![階層內的宣告集。](./media/managing-claims-and-authorization-with-the-identity-model/claims-sets-hierarchy.gif)  
  
 <span data-ttu-id="2a2a3-194">多組宣告可能會有相同的發行宣告集，如下圖所示：</span><span class="sxs-lookup"><span data-stu-id="2a2a3-194">Multiple sets of claims may have the same issuing claim set, as illustrated in the following figure:</span></span>
  
 ![多組宣告具有相同的發行宣告集。](./media/managing-claims-and-authorization-with-the-identity-model/multiple-claim-sets-same-issuing-claim-set.gif)  
  
 <span data-ttu-id="2a2a3-196">除了宣告集為自己本身簽發者的情況，識別模型並不支援讓宣告集形成迴圈。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-196">With the exception of a claim set that is its own issuer, the Identity Model does not provide any support for claim sets to form a loop.</span></span> <span data-ttu-id="2a2a3-197">因此，絕對不會出現宣告集 A 是由宣告集 B 發行，而宣告集 B 本身又是由宣告集 A 發行的狀況。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-197">Thus a situation where claim set A is issued by claim set B, which is itself issued by claim set A, can never arise.</span></span> <span data-ttu-id="2a2a3-198">此外，識別模型也不支援宣告集擁有多個簽發者。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-198">Also, the Identity Model does not provide any support for claim sets to have multiple issuers.</span></span> <span data-ttu-id="2a2a3-199">如果有兩個或多個簽發者必須發行特定的宣告集，您就必須使用多個宣告集來讓每個宣告集都包含相同的宣告，但卻擁有不同的簽發者。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-199">If two or more issuers must issue a given set of claims, then you must use multiple claim sets, each containing the same claims, but having different issuers.</span></span>  
  
### <a name="the-origin-of-claims"></a><span data-ttu-id="2a2a3-200">宣告的來源</span><span class="sxs-lookup"><span data-stu-id="2a2a3-200">The Origin of Claims</span></span>  

 <span data-ttu-id="2a2a3-201">宣告可以來自多個來源。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-201">Claims can come from a variety of sources.</span></span> <span data-ttu-id="2a2a3-202">其中一個常見的宣告來源就是使用者所提供的認證，例如屬於傳送給 Web 服務之訊息的一部分。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-202">One common source of claims is credentials presented by a user, for example as part of a message sent to a Web service.</span></span> <span data-ttu-id="2a2a3-203">系統會驗證此類宣告，接著這些宣告就會成為與使用者關聯之宣告集的一部分。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-203">The system validates such claims, and they become part of a set of claims associated with the user.</span></span> <span data-ttu-id="2a2a3-204">其他的系統元件也可以成為宣告來源，包括但不限於作業系統、網路堆疊、執行階段環境或應用程式。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-204">Other system components may also be sources of claims, including, but not limited to, the operating system, the network stack, the run-time environment, or the application.</span></span> <span data-ttu-id="2a2a3-205">此外，遠端服務也可以成為宣告來源。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-205">In addition, remote services may also be a source of claims.</span></span>  
  
### <a name="authorization-policies"></a><span data-ttu-id="2a2a3-206">授權原則</span><span class="sxs-lookup"><span data-stu-id="2a2a3-206">Authorization Policies</span></span>  

 <span data-ttu-id="2a2a3-207">在識別模型中，在評估授權原則程序時會產生宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-207">In the Identity Model, claims are generated as part of the process of evaluating the authorization policy.</span></span> <span data-ttu-id="2a2a3-208">授權原則會檢查 (可能為空白的) 現有的宣告集，而且可能會選擇新增以既有宣告為基礎的額外宣告，以及新增其進行處置時的額外資訊。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-208">An authorization policy examines the (possibly empty) set of existing claims and may choose to add additional claims based on the claims already present and additional information at its disposal.</span></span> <span data-ttu-id="2a2a3-209">這樣會提供宣告之間的對應基礎。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-209">This provides the basis of mapping between claims.</span></span> <span data-ttu-id="2a2a3-210">系統中是否存在宣告會影響授權原則的行為，也就是會決定是否會新增額外的宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-210">The presence or absence of claims in the system influences the behavior of an authorization policy with respect to whether it adds additional claims.</span></span>  
  
 <span data-ttu-id="2a2a3-211">例如，授權原則可以存取包含了使用系統之各個實體生日的資料庫。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-211">For example, the authorization policy has access to a database that includes the birthdates of the various entities using the system.</span></span> <span data-ttu-id="2a2a3-212">授權原則會使用該資訊，在內容中新增 "Over18" 的宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-212">The authorization policy uses that information to add an "Over18" claim to the context.</span></span> <span data-ttu-id="2a2a3-213">請注意，此處的 Over18 宣告並不會洩漏實體的任何資訊，而只是用於表示其超過 18 歲。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-213">Note that this Over18 claim does not disclose any information about the entity other than the fact that it is over 18 years of age.</span></span> <span data-ttu-id="2a2a3-214">請注意，對 'Over18' 宣告的解譯會依據對該宣告語意的瞭解而有不同。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-214">Note that interpretation of the 'Over18' claim depends on understanding the semantics of that claim.</span></span> <span data-ttu-id="2a2a3-215">新增此宣告的授權原則多少都會瞭解這些語意。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-215">The authorization policy that added the claim understands those semantics at some level.</span></span> <span data-ttu-id="2a2a3-216">負責後續檢查原則評估所產生之宣告的程式碼也會獲悉這些語意。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-216">Code that subsequently examines the claims that result from policy evaluation also be informed of those semantics.</span></span>  
  
 <span data-ttu-id="2a2a3-217">特定的授權原則可能會要求對其進行多次評估，因為其他授權原則會新增宣告，該授權原則也可能會新增更多的宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-217">A given authorization policy may require that it be evaluated multiple times because, as other authorization policies add claims, that authorization policy might add yet more claims.</span></span> <span data-ttu-id="2a2a3-218">識別模型是設計成可持續進行評估，直到內容中不再由任何授權原則有效地新增宣告為止。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-218">Identity Model is designed to continue evaluation until no more claims are added to the context by any of the authorization policies in force.</span></span> <span data-ttu-id="2a2a3-219">這個持續進行的授權原則評估可避免對於授權原則強制要求執行任何特定的評估順序；也就是說，它們可以依照任意順序來進行評估。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-219">This continued evaluation of authorization policies prevents the requirement to enforce any specific evaluation order with respect to authorization policies; they can be evaluated in any order.</span></span> <span data-ttu-id="2a2a3-220">例如，假設原則 X 必須等到原則 A 新增了宣告 B 才會新增宣告 Z，則如果是原則 X 先進行評估，它一開始並不會新增宣告 Z。之後，對原則 A 進行評估並新增宣告 B。接著原則 X 就會進行第二次評估，而且這次也會新增宣告 Z。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-220">For example, if policy X only adds Claim Z if policy A has added Claim B, then if X is evaluated first, it initially does not add the Claim Z. Subsequently, A is evaluated and adds Claim B. X is then evaluated a second time, and this time it adds Claim Z.</span></span>  
  
 <span data-ttu-id="2a2a3-221">特定系統可能擁有多個有效的授權原則。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-221">A given system may have many authorization policies in force.</span></span>  
  
### <a name="a-key-making-machine"></a><span data-ttu-id="2a2a3-222">打造鑰匙的機器</span><span class="sxs-lookup"><span data-stu-id="2a2a3-222">A Key-Making Machine</span></span>  

 <span data-ttu-id="2a2a3-223">評估一組相關聯的授權原則，就像是在操作打造鑰匙的機器。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-223">Evaluating a group of associated authorization policies is like using a machine that makes keys.</span></span> <span data-ttu-id="2a2a3-224">授權原則會分別進行評估並產生宣告集，同時逐漸建構出金鑰的形狀。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-224">The authorization policies are each evaluated and sets of claims are generated, building up the shape of the key.</span></span> <span data-ttu-id="2a2a3-225">一旦金鑰成形後，就可以用來嘗試打開某些鎖。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-225">Once the shape of the key is completed, it can be used to try to open some locks.</span></span> <span data-ttu-id="2a2a3-226">金鑰的形狀會儲存在「授權內容」中，而授權內容是由授權管理員所建立。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-226">The shape of the key is stored in an "authorization context," which is created by an authorization manager.</span></span>  
  
### <a name="authorization-context"></a><span data-ttu-id="2a2a3-227">授權內容</span><span class="sxs-lookup"><span data-stu-id="2a2a3-227">Authorization Context</span></span>  

 <span data-ttu-id="2a2a3-228">授權管理員會以上述方式來評估各種授權原則，評估所產生的結果就是授權內容 (一組宣告集和某些關聯屬性的集合)。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-228">An authorization manager evaluates the various authorization policies as described, and the result is an authorization context (a set of claim sets and some associated properties).</span></span> <span data-ttu-id="2a2a3-229">授權內容可以加以檢查來判定內容中包括了哪些宣告、各種宣告之間的關係 (例如，發行宣告集)，最後還可以針對這些宣告必須符合才可存取資源之特定需求來比較宣告。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-229">The authorization context can be examined to determine what claims are present in that context, the relationships between those various claims (for example, the issuing claim set), and ultimately compare them against some requirements they must meet to access a resource.</span></span>  
  
### <a name="locks"></a><span data-ttu-id="2a2a3-230">鎖定</span><span class="sxs-lookup"><span data-stu-id="2a2a3-230">Locks</span></span>  

 <span data-ttu-id="2a2a3-231">如果授權內容 (宣告集) 是鑰匙，則在為了存取特定受保護資源而必須滿足的各種需求就構成了一個鎖，而鑰匙必須與這個鎖相配。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-231">If an authorization context (a set of claims) is a key, then the requirements that must be satisfied to grant access to a particular protected resource constitute the lock that the key must fit.</span></span> <span data-ttu-id="2a2a3-232">識別模型並不會規定此需求的表示方式，但是這些需求會在系統的宣告架構性質驅動之下，進行比對授權內容中的宣告與某些必要的宣告集。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-232">Identity Model does not formalize how such requirements are expressed but they do, given the claim-based nature of the system, involve comparing the claims in the authorization context against some set of required claims.</span></span>  
  
### <a name="a-recap"></a><span data-ttu-id="2a2a3-233">概述</span><span class="sxs-lookup"><span data-stu-id="2a2a3-233">A Recap</span></span>  

 <span data-ttu-id="2a2a3-234">識別模型是以宣告的概念為基礎。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-234">Identity Model is based around the concept of claims.</span></span> <span data-ttu-id="2a2a3-235">宣告會分類為集合，並於授權內容完成彙總。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-235">Claims are grouped into sets and aggregated in an authorization context.</span></span> <span data-ttu-id="2a2a3-236">授權內容包含有宣告集，而且它是在評估一個或多個與授權管理員關聯的授權原則之後所產生的。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-236">An authorization context contains a set of claims and is the result of evaluating one or more authorization policies associated with an authorization manager.</span></span> <span data-ttu-id="2a2a3-237">這些宣告集可以加以檢查，以判定是否符合存取需求。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-237">These claim sets can be examined to determine if access requirements have been met.</span></span> <span data-ttu-id="2a2a3-238">下圖顯示各種識別模型概念之間的關係。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-238">The following figure shows the relationships between these various Identity Model concepts.</span></span>  
  
 <span data-ttu-id="2a2a3-239">![管理宣告與授權](media/xsi-recap.gif "xsi_recap")</span><span class="sxs-lookup"><span data-stu-id="2a2a3-239">![Managing claims and authorization](media/xsi-recap.gif "xsi_recap")</span></span>  
  
## <a name="wcf-and-identity-model"></a><span data-ttu-id="2a2a3-240">WCF 和識別模型</span><span class="sxs-lookup"><span data-stu-id="2a2a3-240">WCF and Identity Model</span></span>  

 <span data-ttu-id="2a2a3-241">WCF 會使用身分識別模型基礎結構作為執行授權的基礎。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-241">WCF uses the Identity Model infrastructure as the basis for performing authorization.</span></span> <span data-ttu-id="2a2a3-242">在 WCF 中， <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> 類別可讓您指定 *授權* 原則做為服務的一部分。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-242">In WCF, the <xref:System.ServiceModel.Description.ServiceAuthorizationBehavior> class allows you to specify *authorization* policies as part of a service.</span></span> <span data-ttu-id="2a2a3-243">這類授權原則稱為 *外部授權原則*，而且可以根據本機原則或與遠端服務的互動來執行宣告處理。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-243">Such authorization policies are known as *external authorization policies*, and they can perform claim processing based on local policy or by interaction with a remote service.</span></span> <span data-ttu-id="2a2a3-244">由類別表示的授權管理員 <xref:System.ServiceModel.ServiceAuthorizationManager> 會評估外部授權原則，以及可辨識不同認證類型 (權杖的授權原則) ，並使用適用于傳入訊息的宣告，填入所謂的 *授權* 內容。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-244">The authorization manager, represented by the <xref:System.ServiceModel.ServiceAuthorizationManager> class evaluates external authorization policies together with authorization policies that recognize the various credential types (tokens) and populates what is called an *authorization context* with the claims appropriate to an incoming message.</span></span> <span data-ttu-id="2a2a3-245">授權內容會以 <xref:System.IdentityModel.Policy.AuthorizationContext> 類別表示。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-245">The authorization context is represented by the <xref:System.IdentityModel.Policy.AuthorizationContext> class.</span></span>  
  
## <a name="identity-model-programming"></a><span data-ttu-id="2a2a3-246">識別模型程式設計</span><span class="sxs-lookup"><span data-stu-id="2a2a3-246">Identity Model Programming</span></span>  

 <span data-ttu-id="2a2a3-247">下表描述可用來程式設計識別模型延伸的物件模型。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-247">The following table describes the object model used to program Identity Model extensions.</span></span> <span data-ttu-id="2a2a3-248">這些類別全部都存在於 <xref:System.IdentityModel.Policy> 或 <xref:System.IdentityModel.Claims> 命名空間 (Namespace) 中。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-248">These classes all exist in either the <xref:System.IdentityModel.Policy> or the <xref:System.IdentityModel.Claims> namespaces.</span></span>  
  
|<span data-ttu-id="2a2a3-249">類別</span><span class="sxs-lookup"><span data-stu-id="2a2a3-249">Class</span></span>|<span data-ttu-id="2a2a3-250">描述</span><span class="sxs-lookup"><span data-stu-id="2a2a3-250">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="2a2a3-251">授權元件</span><span class="sxs-lookup"><span data-stu-id="2a2a3-251">Authorization Component</span></span>|<span data-ttu-id="2a2a3-252">識別模型類別，它會實作 <xref:System.IdentityModel.Policy.IAuthorizationComponent> 介面。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-252">An Identity Model class that implements the <xref:System.IdentityModel.Policy.IAuthorizationComponent> interface.</span></span>|  
|<xref:System.IdentityModel.Policy.IAuthorizationComponent>|<span data-ttu-id="2a2a3-253">提供單一隻讀字串屬性的介面： Id。這個屬性的值對於系統中執行此介面的每個實例而言是唯一的。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-253">An interface that provides a single read-only string property: Id. The value of this property is unique for each instance in the system that implements this interface.</span></span>|  
|<xref:System.IdentityModel.Policy.AuthorizationContext>|<span data-ttu-id="2a2a3-254">包含 *authorization component* 一組包含 `ClaimSet` 零或多個屬性之實例的授權元件，也就是評估一或多個授權原則的結果。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-254">An *authorization component* that contains a set of `ClaimSet` instances with zero or more properties; the result of evaluating one or more Authorization Policies.</span></span>|  
|<xref:System.IdentityModel.Claims.Claim>|<span data-ttu-id="2a2a3-255">宣告類型、權限和值的組合。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-255">A combination of a claim type, right, and value.</span></span> <span data-ttu-id="2a2a3-256">權限和值的部分是受宣告類型所限制。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-256">The right and value parts are constrained by the claim type.</span></span>|  
|<xref:System.IdentityModel.Claims.ClaimSet>|<span data-ttu-id="2a2a3-257">抽象基底類別。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-257">An abstract base class.</span></span> <span data-ttu-id="2a2a3-258">`Claim` 執行個體的集合。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-258">A collection of `Claim` instances.</span></span>|  
|<xref:System.IdentityModel.Claims.DefaultClaimSet>|<span data-ttu-id="2a2a3-259">密封類別。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-259">A sealed class.</span></span> <span data-ttu-id="2a2a3-260">`ClaimSet` 類別的實作。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-260">An implementation of the `ClaimSet` class.</span></span>|  
|<xref:System.IdentityModel.Policy.EvaluationContext>|<span data-ttu-id="2a2a3-261">抽象基底類別。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-261">An abstract base class.</span></span> <span data-ttu-id="2a2a3-262">它是在原則評估期間傳遞至授權原則。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-262">Passed to an authorization policy during policy evaluation.</span></span>|  
|<xref:System.IdentityModel.Policy.IAuthorizationPolicy>|<span data-ttu-id="2a2a3-263">`IAuthorizationComponent`由授權原則類別衍生和執行的介面。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-263">An interface derived from `IAuthorizationComponent` and implemented by authorization policy classes.</span></span>|  
|<xref:System.IdentityModel.Claims.Rights>|<span data-ttu-id="2a2a3-264">靜態類別，包含預先定義的權限值。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-264">A static class that contains predefined right values.</span></span>|  
  
 <span data-ttu-id="2a2a3-265">下列類別也會用於識別模型程式設計中，但不存在於 <xref:System.IdentityModel.Policy> 或 <xref:System.IdentityModel.Claims> 命名空間。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-265">The following classes are also used for Identity Model programming, but are not found in the <xref:System.IdentityModel.Policy> or <xref:System.IdentityModel.Claims> namespaces.</span></span>  
  
|<span data-ttu-id="2a2a3-266">類別</span><span class="sxs-lookup"><span data-stu-id="2a2a3-266">Class</span></span>|<span data-ttu-id="2a2a3-267">描述</span><span class="sxs-lookup"><span data-stu-id="2a2a3-267">Description</span></span>|  
|-----------|-----------------|  
|<xref:System.ServiceModel.ServiceAuthorizationManager>|<span data-ttu-id="2a2a3-268">類別，它可提供方法 (<xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A>) 來對服務中的每項作業執行宣告架構的授權檢查。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-268">A class that provides a method— <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A>—to perform claim-based authorization checks for each operation in a service.</span></span> <span data-ttu-id="2a2a3-269">您必須衍生自類別並覆寫該方法。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-269">You must derive from the class and override the method.</span></span>|  
|<xref:System.ServiceModel.Description.ServiceAuthorizationBehavior>|<span data-ttu-id="2a2a3-270">密封類別，它會提供當服務與授權有關時與該服務行為關聯的各種屬性。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-270">A sealed class that provides various properties related to the behavior of a service as it pertains to authorization.</span></span>|  
|<xref:System.ServiceModel.ServiceSecurityContext>|<span data-ttu-id="2a2a3-271">類別，它會提供適用於目前執行中 (或即將執行) 之作業的安全性內容，其中包括授權內容。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-271">A class that provides security context, including authorization context, for the currently running (or about to be run) operation.</span></span> <span data-ttu-id="2a2a3-272">這個類別的執行個體為 <xref:System.ServiceModel.OperationContext> 的一部分。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-272">An instance of this class is part of the <xref:System.ServiceModel.OperationContext>.</span></span>|  
  
### <a name="significant-members"></a><span data-ttu-id="2a2a3-273">顯著性成員</span><span class="sxs-lookup"><span data-stu-id="2a2a3-273">Significant Members</span></span>  

 <span data-ttu-id="2a2a3-274">下列成員經常用來建立新的宣告類型。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-274">The following members are commonly used to create new claim types.</span></span>  
  
|<span data-ttu-id="2a2a3-275">member</span><span class="sxs-lookup"><span data-stu-id="2a2a3-275">Member</span></span>|<span data-ttu-id="2a2a3-276">描述</span><span class="sxs-lookup"><span data-stu-id="2a2a3-276">Description</span></span>|  
|------------|-----------------|  
|<xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A>|<span data-ttu-id="2a2a3-277">衍生類別會實作這個方法，以便在執行服務中的作業之前先執行宣告架構的存取檢查。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-277">Derived classes implement this method to perform claim-based access checks prior to running operations in a service.</span></span> <span data-ttu-id="2a2a3-278">在已提供 <xref:System.ServiceModel.OperationContext> 或其他地方的任何資訊以及所有資訊，可以在做出存取檢查決策時加以檢查。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-278">Any and all information in the supplied <xref:System.ServiceModel.OperationContext>, or elsewhere, can be examined when making the access check decision.</span></span> <span data-ttu-id="2a2a3-279">如果 <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A> 傳回 `true`，則會授與存取並允許作業執行。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-279">If <xref:System.ServiceModel.ServiceAuthorizationManager.CheckAccessCore%2A> returns `true`, then access is granted and the operation is allowed to run.</span></span> <span data-ttu-id="2a2a3-280">如果 `CheckAccessCore` 傳回 `false`，則會拒絕存取且不會執行作業。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-280">If `CheckAccessCore` returns `false`, then access is denied and the operation does not run.</span></span> <span data-ttu-id="2a2a3-281">如需範例，請參閱 how [to：為服務建立自訂授權管理員](../extending/how-to-create-a-custom-authorization-manager-for-a-service.md)。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-281">For an example, see [How to: Create a Custom Authorization Manager for a Service](../extending/how-to-create-a-custom-authorization-manager-for-a-service.md).</span></span>|  
|<xref:System.ServiceModel.Description.ServiceAuthorizationBehavior.ServiceAuthorizationManager%2A>|<span data-ttu-id="2a2a3-282">傳回服務的 <xref:System.ServiceModel.ServiceAuthorizationManager>。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-282">Returns the <xref:System.ServiceModel.ServiceAuthorizationManager> for the service.</span></span> <span data-ttu-id="2a2a3-283"><xref:System.ServiceModel.ServiceAuthorizationManager> 負責做出授權決策。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-283">The <xref:System.ServiceModel.ServiceAuthorizationManager> is responsible for making authorization decisions.</span></span>|  
|<xref:System.ServiceModel.Description.ServiceAuthorizationBehavior.ExternalAuthorizationPolicies%2A>|<span data-ttu-id="2a2a3-284">對此服務所指定的自訂授權原則集合。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-284">The collection of custom authorization policies specified for the service.</span></span> <span data-ttu-id="2a2a3-285">除了與傳入訊息中之認證關聯的原則以外，這些原則也會加以評估。</span><span class="sxs-lookup"><span data-stu-id="2a2a3-285">These policies are evaluated in addition to those policies associated with credentials in incoming messages.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="2a2a3-286">另請參閱</span><span class="sxs-lookup"><span data-stu-id="2a2a3-286">See also</span></span>

- <xref:System.IdentityModel.Policy.AuthorizationContext>
- <xref:System.IdentityModel.Claims.Claim>
- <xref:System.IdentityModel.Policy.EvaluationContext>
- <xref:System.IdentityModel.Policy.IAuthorizationComponent>
- <xref:System.IdentityModel.Policy.IAuthorizationPolicy>
- <xref:System.IdentityModel.Claims.Rights>
- <xref:System.IdentityModel.Claims>
- <xref:System.IdentityModel.Policy>
- <xref:System.IdentityModel.Tokens>
- <xref:System.IdentityModel.Selectors>
- [<span data-ttu-id="2a2a3-287">宣告與權杖</span><span class="sxs-lookup"><span data-stu-id="2a2a3-287">Claims and Tokens</span></span>](claims-and-tokens.md)
- [<span data-ttu-id="2a2a3-288">宣告與拒絕資源的存取</span><span class="sxs-lookup"><span data-stu-id="2a2a3-288">Claims and Denying Access to Resources</span></span>](claims-and-denying-access-to-resources.md)
- [<span data-ttu-id="2a2a3-289">宣告建立與資源值</span><span class="sxs-lookup"><span data-stu-id="2a2a3-289">Claim Creation and Resource Values</span></span>](claim-creation-and-resource-values.md)
- [<span data-ttu-id="2a2a3-290">作法：建立自訂宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-290">How to: Create a Custom Claim</span></span>](../extending/how-to-create-a-custom-claim.md)
- [<span data-ttu-id="2a2a3-291">作法：比較宣告</span><span class="sxs-lookup"><span data-stu-id="2a2a3-291">How to: Compare Claims</span></span>](../extending/how-to-compare-claims.md)
- [<span data-ttu-id="2a2a3-292">作法：建立自訂授權原則</span><span class="sxs-lookup"><span data-stu-id="2a2a3-292">How to: Create a Custom Authorization Policy</span></span>](../extending/how-to-create-a-custom-authorization-policy.md)
- [<span data-ttu-id="2a2a3-293">作法：為服務建立自訂授權管理員</span><span class="sxs-lookup"><span data-stu-id="2a2a3-293">How to: Create a Custom Authorization Manager for a Service</span></span>](../extending/how-to-create-a-custom-authorization-manager-for-a-service.md)
- [<span data-ttu-id="2a2a3-294">安全性概觀</span><span class="sxs-lookup"><span data-stu-id="2a2a3-294">Security Overview</span></span>](security-overview.md)
- [<span data-ttu-id="2a2a3-295">授權</span><span class="sxs-lookup"><span data-stu-id="2a2a3-295">Authorization</span></span>](authorization-in-wcf.md)
