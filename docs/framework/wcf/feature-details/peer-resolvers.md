---
title: 對等解析程式
ms.date: 03/30/2017
ms.assetid: d86d12a1-7358-450f-9727-b6afb95adb9c
ms.openlocfilehash: ef72f44a7dd7f3e8f3108e4f77dcdbdf8ef1b1b7
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/15/2020
ms.locfileid: "90554628"
---
# <a name="peer-resolvers"></a><span data-ttu-id="84448-102">對等解析程式</span><span class="sxs-lookup"><span data-stu-id="84448-102">Peer Resolvers</span></span>
<span data-ttu-id="84448-103">為了連線至網狀結構，對等節點會需要其他節點的 IP 位址。</span><span class="sxs-lookup"><span data-stu-id="84448-103">In order to connect to a mesh, a peer node requires the IP addresses of other nodes.</span></span> <span data-ttu-id="84448-104">IP 位址是透過連絡解析程式服務取得，解析程式服務會取得網狀結構識別碼，並傳回其中位址會對應至以該特定網狀結構識別碼登錄之節點的位址清單。</span><span class="sxs-lookup"><span data-stu-id="84448-104">IP addresses are obtained by contacting a resolver service, which takes the mesh ID and returns a list of addresses corresponding to nodes registered with that particular mesh ID.</span></span> <span data-ttu-id="84448-105">解析程式會保留已登錄位址的清單，而透過服務登錄網狀結構中的每個節點就可建立此清單。</span><span class="sxs-lookup"><span data-stu-id="84448-105">The resolver keeps a list of registered addresses, which it creates by having each node in the mesh register with the service.</span></span>  
  
 <span data-ttu-id="84448-106">您可以透過 `Resolver` 的 <xref:System.ServiceModel.NetPeerTcpBinding> 屬性，指定要使用的 PeerResolver 服務。</span><span class="sxs-lookup"><span data-stu-id="84448-106">You can specify which PeerResolver service to use through the `Resolver` property of the <xref:System.ServiceModel.NetPeerTcpBinding>.</span></span>  
  
## <a name="supported-peer-resolvers"></a><span data-ttu-id="84448-107">支援的對等解析程式</span><span class="sxs-lookup"><span data-stu-id="84448-107">Supported Peer Resolvers</span></span>  
 <span data-ttu-id="84448-108">對等通道支援兩種類型的解析程式，也就是對等名稱解析通訊協定 (Peer Name Resolution Protocol，PNRP) 和自訂解析程式服務。</span><span class="sxs-lookup"><span data-stu-id="84448-108">Peer Channel supports two types of resolvers: Peer Name Resolution Protocol (PNRP), and custom resolver services.</span></span>  
  
 <span data-ttu-id="84448-109">根據預設，對等通道會使用 PNRP 對等解析程式服務探索網狀結構中的對等和鄰接項目。</span><span class="sxs-lookup"><span data-stu-id="84448-109">By default, Peer Channel uses the PNRP peer resolver service for discovery of peers and neighbors in the mesh.</span></span> <span data-ttu-id="84448-110">針對無法使用或不適用 PNRP 的情況/平臺，Windows Communication Foundation (WCF) 提供以伺服器為基礎的替代探索服務，也就是 <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> 。</span><span class="sxs-lookup"><span data-stu-id="84448-110">For situations/platforms where PNRP is not available or feasible, Windows Communication Foundation (WCF) provides an alternative, server-based discovery service - the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>.</span></span> <span data-ttu-id="84448-111">您也可以透過撰寫實作 <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> 介面的類別，明確定義自訂的解析程式服務。</span><span class="sxs-lookup"><span data-stu-id="84448-111">You can also explicitly define a custom resolver service by writing a class that implements the <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> interface.</span></span>  
  
### <a name="peer-name-resolution-protocol-pnrp"></a><span data-ttu-id="84448-112">對等名稱解析通訊協定 (PNRP)</span><span class="sxs-lookup"><span data-stu-id="84448-112">Peer Name Resolution Protocol (PNRP)</span></span>  
 <span data-ttu-id="84448-113">PNRP 是 Windows Vista 的預設解析程式，是分散式的無伺服器名稱解析程式服務。</span><span class="sxs-lookup"><span data-stu-id="84448-113">PNRP, the default resolver for Windows Vista, is a distributed, serverless name resolver service.</span></span> <span data-ttu-id="84448-114">您也可以透過安裝 Advanced 網路套件，在 Windows XP SP2 上使用 PNRP。</span><span class="sxs-lookup"><span data-stu-id="84448-114">PNRP can also be used on Windows XP SP2 by installing the Advanced Networking Pack.</span></span> <span data-ttu-id="84448-115">如果執行相同版本 PNRP 的兩個用戶端符合特定條件 (例如沒有中介的公司防火牆)，就可以使用此通訊協定找到彼此。</span><span class="sxs-lookup"><span data-stu-id="84448-115">Any two clients running the same version of PNRP can locate each other using this protocol, provided they meet certain conditions (such as the lack of an intervening corporate firewall).</span></span> <span data-ttu-id="84448-116">請注意，Windows Vista 隨附的 PNRP 版本比 Advanced 網路套件中包含的版本還新。</span><span class="sxs-lookup"><span data-stu-id="84448-116">Note that the version of PNRP that ships with Windows Vista is newer than the version included in the Advanced Networking Pack.</span></span> <span data-ttu-id="84448-117">請檢查 Microsoft 下載中心，以取得適用于 Windows XP SP2 的 PNRP 更新。</span><span class="sxs-lookup"><span data-stu-id="84448-117">Check the Microsoft Download Center for updates to PNRP for Windows XP SP2.</span></span>  
  
### <a name="custom-resolver-services"></a><span data-ttu-id="84448-118">自訂解析程式服務</span><span class="sxs-lookup"><span data-stu-id="84448-118">Custom Resolver Services</span></span>  
 <span data-ttu-id="84448-119">當 PNRP 服務無法使用，或您想要完整控制網狀結構成型時，您可以使用自訂的伺服器解析程式服務。</span><span class="sxs-lookup"><span data-stu-id="84448-119">When the PNRP service is unavailable, or you want complete control over mesh shaping, you can use a custom, server-based resolver service.</span></span> <span data-ttu-id="84448-120">您可以透過撰寫實作 <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> 介面的解析程式類別，或是使用產品所提供的預設實作 <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>，明確定義這項服務。</span><span class="sxs-lookup"><span data-stu-id="84448-120">You can explicitly define this service by writing a resolver class implementing the <xref:System.ServiceModel.PeerResolvers.IPeerResolverContract> interface, or by using the in-box default implementation, <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService>.</span></span>  
  
 <span data-ttu-id="84448-121">根據服務的預設實作，如果用戶端沒有明確重新整理登錄，用戶端登錄會在特定的時間量之後到期。</span><span class="sxs-lookup"><span data-stu-id="84448-121">Under the default implementation of the service, client registrations expire after a certain amount of time if the client does not explicitly refresh the registration.</span></span> <span data-ttu-id="84448-122">使用解析程式服務的用戶端必須注意用戶端伺服器延遲時間的上限，才能順利即時重新整理登錄。</span><span class="sxs-lookup"><span data-stu-id="84448-122">Clients using the resolver service must be aware of the upper bound on client-server latency in order to successfully refresh registrations in time.</span></span> <span data-ttu-id="84448-123">這牽涉到在解析程式服務上選擇適當的重新整理逾時值 (`RefreshInterval`)。</span><span class="sxs-lookup"><span data-stu-id="84448-123">This involves choosing an appropriate refresh time-out (`RefreshInterval`) on the resolver service.</span></span> <span data-ttu-id="84448-124"> (需詳細資訊，請參閱 [Custompeerresolverservice 內部內部：用戶端註冊](inside-the-custompeerresolverservice-client-registrations.md)。 ) </span><span class="sxs-lookup"><span data-stu-id="84448-124">(For more information, see [Inside the CustomPeerResolverService: Client Registrations](inside-the-custompeerresolverservice-client-registrations.md).)</span></span>  
  
 <span data-ttu-id="84448-125">應用程式撰寫者也必須考慮如何保障用戶端和自訂解析程式服務之間的連線安全。</span><span class="sxs-lookup"><span data-stu-id="84448-125">The application writer must also consider securing the connection between clients and the custom resolver service.</span></span> <span data-ttu-id="84448-126">在用戶端用來連絡解析程式服務的 <xref:System.ServiceModel.NetTcpBinding> 上使用安全性設定，即可保障連線的安全。</span><span class="sxs-lookup"><span data-stu-id="84448-126">You may do this by using security settings on the <xref:System.ServiceModel.NetTcpBinding> that clients use to contact the resolver service.</span></span> <span data-ttu-id="84448-127">您必須在用於建立對等通道的 `ChannelFactory` 上指定認證 (若使用的話)。</span><span class="sxs-lookup"><span data-stu-id="84448-127">You must specify credentials (if used) on the `ChannelFactory` used to create Peer Channel.</span></span> <span data-ttu-id="84448-128">這些認證會傳遞至用來建立自訂解析程式之通道的 `ChannelFactory`。</span><span class="sxs-lookup"><span data-stu-id="84448-128">These credentials are passed to the `ChannelFactory` used to create channels to the custom resolver.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="84448-129">使用本機和即席網路搭配自訂解析程式時，強烈建議使用或支援連結-本機或即席網路的應用程式要包含一種邏輯，這個邏輯會在連線時選取要使用的單一連結-本機位址。</span><span class="sxs-lookup"><span data-stu-id="84448-129">When using local and impromptu networks with a custom resolver, it is strongly advised that applications using or supporting link-local or impromptu networks include logic that selects a single link-local address to use when connecting.</span></span> <span data-ttu-id="84448-130">這樣可防止具有多個連結-本機位址的電腦所可能導致的混淆。</span><span class="sxs-lookup"><span data-stu-id="84448-130">This prevents any confusion potentially caused by computers with multiple link-local addresses.</span></span> <span data-ttu-id="84448-131">為了與此作業保持一致，對等通道每次只會支援使用單一的連結-本機位址。</span><span class="sxs-lookup"><span data-stu-id="84448-131">In accordance with this, Peer Channel only supports using a single link-local address at any one time.</span></span> <span data-ttu-id="84448-132">您可以使用 `ListenIpAddress` 上的 <xref:System.ServiceModel.NetPeerTcpBinding> 屬性來指定這個位址。</span><span class="sxs-lookup"><span data-stu-id="84448-132">You may specify this address with the `ListenIpAddress` property on the <xref:System.ServiceModel.NetPeerTcpBinding>.</span></span>  
  
 <span data-ttu-id="84448-133">如需如何執行自訂解析程式的示範，請參閱 [對等通道自訂對等解析程式](/previous-versions/dotnet/netframework-3.5/ms751466(v=vs.90))。</span><span class="sxs-lookup"><span data-stu-id="84448-133">For a demonstration of how to implement a custom resolver, see [Peer Channel Custom Peer Resolver](/previous-versions/dotnet/netframework-3.5/ms751466(v=vs.90)).</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="84448-134">本節內容</span><span class="sxs-lookup"><span data-stu-id="84448-134">In This Section</span></span>  
 [<span data-ttu-id="84448-135">CustomPeerResolverService 內部：用戶端註冊</span><span class="sxs-lookup"><span data-stu-id="84448-135">Inside the CustomPeerResolverService: Client Registrations</span></span>](inside-the-custompeerresolverservice-client-registrations.md)  
  
## <a name="see-also"></a><span data-ttu-id="84448-136">另請參閱</span><span class="sxs-lookup"><span data-stu-id="84448-136">See also</span></span>

- [<span data-ttu-id="84448-137">對等通道概念</span><span class="sxs-lookup"><span data-stu-id="84448-137">Peer Channel Concepts</span></span>](peer-channel-concepts.md)
- [<span data-ttu-id="84448-138">對等通道安全性</span><span class="sxs-lookup"><span data-stu-id="84448-138">Peer Channel Security</span></span>](peer-channel-security.md)
- [<span data-ttu-id="84448-139">建置對等通道應用程式</span><span class="sxs-lookup"><span data-stu-id="84448-139">Building a Peer Channel Application</span></span>](building-a-peer-channel-application.md)
