---
title: 活動清單
ms.date: 03/30/2017
ms.assetid: 5540e185-ce8e-4db3-83b0-2b9f5bf71829
ms.openlocfilehash: 8d43cc878d54efbd4908f92c3405bef2c7956f94
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/09/2020
ms.locfileid: "84602163"
---
# <a name="activity-list"></a><span data-ttu-id="581cd-102">活動清單</span><span class="sxs-lookup"><span data-stu-id="581cd-102">Activity List</span></span>
<span data-ttu-id="581cd-103">本主題列出 Windows Communication Foundation （WCF）所定義的所有活動。</span><span class="sxs-lookup"><span data-stu-id="581cd-103">This topic lists all the activities defined by Windows Communication Foundation (WCF).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="581cd-104">您也可以使用程式設計方式來定義活動，以便將使用者追蹤加以群組。</span><span class="sxs-lookup"><span data-stu-id="581cd-104">You can also define activities programmatically to group user traces.</span></span> <span data-ttu-id="581cd-105">如需詳細資訊，請參閱[發出使用者程式碼追蹤](emitting-user-code-traces.md)。</span><span class="sxs-lookup"><span data-stu-id="581cd-105">For more information, see [Emitting User-Code Traces](emitting-user-code-traces.md).</span></span>  
  
## <a name="servicemodel-activities"></a><span data-ttu-id="581cd-106">ServiceModel 活動</span><span class="sxs-lookup"><span data-stu-id="581cd-106">ServiceModel Activities</span></span>  
 <span data-ttu-id="581cd-107">下表列出主要使用方式案例的所有活動。</span><span class="sxs-lookup"><span data-stu-id="581cd-107">The following table lists all activities for major usage scenarios.</span></span>  
  
|<span data-ttu-id="581cd-108">標籤</span><span class="sxs-lookup"><span data-stu-id="581cd-108">Label</span></span>|<span data-ttu-id="581cd-109">活動名稱</span><span class="sxs-lookup"><span data-stu-id="581cd-109">Activity Name</span></span>|<span data-ttu-id="581cd-110">活動類型</span><span class="sxs-lookup"><span data-stu-id="581cd-110">Activity Type</span></span>|<span data-ttu-id="581cd-111">描述</span><span class="sxs-lookup"><span data-stu-id="581cd-111">Description</span></span>|  
|-----------|-------------------|-------------------|-----------------|  
|<span data-ttu-id="581cd-112">A、M</span><span class="sxs-lookup"><span data-stu-id="581cd-112">A, M</span></span>|<span data-ttu-id="581cd-113">環境活動</span><span class="sxs-lookup"><span data-stu-id="581cd-113">Ambient activity</span></span>|<span data-ttu-id="581cd-114">N/A (此活動非由 ServiceModel 控制)</span><span class="sxs-lookup"><span data-stu-id="581cd-114">N/A (this is not controlled by ServiceModel)</span></span>|<span data-ttu-id="581cd-115">在任何 ServiceModel 程式碼的呼叫 (用戶端或伺服器端) 之前，於 TLS 內設定其識別碼的活動。</span><span class="sxs-lookup"><span data-stu-id="581cd-115">The activity whose ID is set in TLS before any calls to ServiceModel code (client side or server side).</span></span><br /><br /> <span data-ttu-id="581cd-116">範例：在 WCF 用戶端或 serviceHost 上呼叫 open 的活動。會呼叫 open。</span><span class="sxs-lookup"><span data-stu-id="581cd-116">Example: An activity where  open is called on the WCF client or serviceHost.open is called.</span></span>|  
|<span data-ttu-id="581cd-117">B</span><span class="sxs-lookup"><span data-stu-id="581cd-117">B</span></span>|<span data-ttu-id="581cd-118">建構</span><span class="sxs-lookup"><span data-stu-id="581cd-118">Construct</span></span><br /><br /> <span data-ttu-id="581cd-119">ChannelFactory。</span><span class="sxs-lookup"><span data-stu-id="581cd-119">ChannelFactory.</span></span> <span data-ttu-id="581cd-120">ContractType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="581cd-120">ContractType : ‘[Type]’.</span></span>|<span data-ttu-id="581cd-121">建構</span><span class="sxs-lookup"><span data-stu-id="581cd-121">Construct</span></span>||  
|<span data-ttu-id="581cd-122">C</span><span class="sxs-lookup"><span data-stu-id="581cd-122">C</span></span>|<span data-ttu-id="581cd-123">開啟</span><span class="sxs-lookup"><span data-stu-id="581cd-123">Open</span></span><br /><br /> <span data-ttu-id="581cd-124">[ClientBase&#124;ChannelFactory]。</span><span class="sxs-lookup"><span data-stu-id="581cd-124">[ClientBase&#124;ChannelFactory].</span></span> <span data-ttu-id="581cd-125">ContractType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="581cd-125">ContractType : ‘[Type]’.</span></span>|<span data-ttu-id="581cd-126">開啟</span><span class="sxs-lookup"><span data-stu-id="581cd-126">Open</span></span>||  
|<span data-ttu-id="581cd-127">I</span><span class="sxs-lookup"><span data-stu-id="581cd-127">I</span></span>|<span data-ttu-id="581cd-128">關閉 [ClientBase&#124;ChannelFactory]。</span><span class="sxs-lookup"><span data-stu-id="581cd-128">Close [ClientBase&#124;ChannelFactory].</span></span> <span data-ttu-id="581cd-129">ContractType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="581cd-129">ContractType : ‘[Type]’.</span></span>|<span data-ttu-id="581cd-130">關閉</span><span class="sxs-lookup"><span data-stu-id="581cd-130">Close</span></span>||  
|<span data-ttu-id="581cd-131">M</span><span class="sxs-lookup"><span data-stu-id="581cd-131">M</span></span>|<span data-ttu-id="581cd-132">建構 ServiceHost。</span><span class="sxs-lookup"><span data-stu-id="581cd-132">Construct ServiceHost.</span></span> <span data-ttu-id="581cd-133">ServiceType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="581cd-133">ServiceType: ‘[Type]’.</span></span>|<span data-ttu-id="581cd-134">建構</span><span class="sxs-lookup"><span data-stu-id="581cd-134">Construct</span></span>||  
|<span data-ttu-id="581cd-135">N</span><span class="sxs-lookup"><span data-stu-id="581cd-135">N</span></span>|<span data-ttu-id="581cd-136">開啟 ServiceHost。</span><span class="sxs-lookup"><span data-stu-id="581cd-136">Open ServiceHost.</span></span> <span data-ttu-id="581cd-137">ServiceType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="581cd-137">ServiceType: ‘[Type]’.</span></span>|<span data-ttu-id="581cd-138">開啟</span><span class="sxs-lookup"><span data-stu-id="581cd-138">Open</span></span>||  
|<span data-ttu-id="581cd-139">Z</span><span class="sxs-lookup"><span data-stu-id="581cd-139">Z</span></span>|<span data-ttu-id="581cd-140">關閉 ServiceHost。</span><span class="sxs-lookup"><span data-stu-id="581cd-140">Close ServiceHost.</span></span> <span data-ttu-id="581cd-141">ServiceType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="581cd-141">ServiceType: ‘[Type]’.</span></span>|<span data-ttu-id="581cd-142">關閉</span><span class="sxs-lookup"><span data-stu-id="581cd-142">Close</span></span>||  
|<span data-ttu-id="581cd-143">O</span><span class="sxs-lookup"><span data-stu-id="581cd-143">O</span></span>|<span data-ttu-id="581cd-144">在 ‘[address]’ 接聽。</span><span class="sxs-lookup"><span data-stu-id="581cd-144">Listen at ‘[address]’.</span></span>|<span data-ttu-id="581cd-145">ListenAt</span><span class="sxs-lookup"><span data-stu-id="581cd-145">ListenAt</span></span>|<span data-ttu-id="581cd-146">這個活動和下一個活動是傳輸特有的。</span><span class="sxs-lookup"><span data-stu-id="581cd-146">This and the next activity are transport-specific.</span></span> <span data-ttu-id="581cd-147">ListenAt 活動代表對應至通道接聽程式正在接聽之位址的內容。</span><span class="sxs-lookup"><span data-stu-id="581cd-147">The ListenAt activity represents the content that maps to the address where the channel listener listens at.</span></span> <span data-ttu-id="581cd-148">在 MSMQ 中，則因為佇列對應至一個位址，所以這個活動代表佇列本身。</span><span class="sxs-lookup"><span data-stu-id="581cd-148">In the case of MSMQ, it is the queue itself since the queue maps to one address.</span></span> <span data-ttu-id="581cd-149">在連線導向的傳輸下，這個活動會接聽傳入連線，若為 MSMQ，則會接聽 MSMQ 訊息。</span><span class="sxs-lookup"><span data-stu-id="581cd-149">This activity listens for incoming connections in the case of connection-oriented transports, for MSMQ messages in the case of MSMQ.</span></span> <span data-ttu-id="581cd-150">這個活動是在 ServiceHost.Open() 期間建立，其中會包含建立及處置接聽項的相關追蹤，以及向外傳輸至所有 ReceiveBytes 活動的相關追蹤。</span><span class="sxs-lookup"><span data-stu-id="581cd-150">This activity is created during ServiceHost.Open(), and contains the traces related to creating and disposing the listener, as well as transferring out to all ReceiveBytes activities.</span></span>|  
|<span data-ttu-id="581cd-151">P</span><span class="sxs-lookup"><span data-stu-id="581cd-151">P</span></span>|<span data-ttu-id="581cd-152">在連線 ‘[address]’ 接收位元組。</span><span class="sxs-lookup"><span data-stu-id="581cd-152">Receive bytes on connection ‘[address]’.</span></span> <span data-ttu-id="581cd-153">接收 MSMQ 訊息。</span><span class="sxs-lookup"><span data-stu-id="581cd-153">Receive MSMQ message.</span></span>|<span data-ttu-id="581cd-154">ReceiveBytes</span><span class="sxs-lookup"><span data-stu-id="581cd-154">ReceiveBytes</span></span>|<span data-ttu-id="581cd-155">在此活動中，最後會取得 WCF 訊息的資料會被處理。</span><span class="sxs-lookup"><span data-stu-id="581cd-155">In this activity, data that will eventually get a WCF message is processed.</span></span> <span data-ttu-id="581cd-156">在連線導向傳輸或 http 的情形下，會等待傳入位元組。</span><span class="sxs-lookup"><span data-stu-id="581cd-156">Incoming bytes are waited in the case of connection-oriented transport or http.</span></span> <span data-ttu-id="581cd-157">對於 TCP/具名管道，此活動的存留期就是連線的存留期，因為它是在建立連線時建立的。</span><span class="sxs-lookup"><span data-stu-id="581cd-157">For TCP/named-pipe, the lifetime of this activity is the lifetime of the connection, as it is created when the connection is created.</span></span> <span data-ttu-id="581cd-158">如果是 http，此活動的存留期會是訊息要求的存留期，並且會在訊息傳送時建立。</span><span class="sxs-lookup"><span data-stu-id="581cd-158">For http, it is of the lifetime of a message request and is created when the message is sent.</span></span> <span data-ttu-id="581cd-159">這個活動包含建立及處置連線的相關追蹤 (如果有的話)，並且會向外傳輸至所有訊息 (物件) 處理活動。</span><span class="sxs-lookup"><span data-stu-id="581cd-159">This activity contains the traces related to creating and disposing the connection if applicable, as well as transfers out to all message (object) processing activities.</span></span><br /><br /> <span data-ttu-id="581cd-160">在 MSMQ 的情況下，則會是擷取 MSMQ 訊息的活動。</span><span class="sxs-lookup"><span data-stu-id="581cd-160">In the case of MSMQ, it is the activity where the MSMQ message is retrieved.</span></span>|  
|<span data-ttu-id="581cd-161">Q</span><span class="sxs-lookup"><span data-stu-id="581cd-161">Q</span></span>|<span data-ttu-id="581cd-162">處理訊息 [number] </span><span class="sxs-lookup"><span data-stu-id="581cd-162">Process message [number].</span></span> <span data-ttu-id="581cd-163">(注意，[number] 是從 1 開始，依序遞增的值)。</span><span class="sxs-lookup"><span data-stu-id="581cd-163">(Note, [number] is a monotonically increasing value which starts at 1.)</span></span>|<span data-ttu-id="581cd-164">ProcessMessage</span><span class="sxs-lookup"><span data-stu-id="581cd-164">ProcessMessage</span></span>|<span data-ttu-id="581cd-165">處理傳入訊息。</span><span class="sxs-lookup"><span data-stu-id="581cd-165">Process an incoming message.</span></span> <span data-ttu-id="581cd-166">此活動會在收到的所有資料（位元組、MSMQ 訊息）形成 WCF 訊息物件時啟動。</span><span class="sxs-lookup"><span data-stu-id="581cd-166">This activity starts when all the data (bytes, MSMQ message) are received to form a WCF message object.</span></span> <span data-ttu-id="581cd-167">這個活動內的追蹤負責標頭處理作業。</span><span class="sxs-lookup"><span data-stu-id="581cd-167">Traces within this activity deal with header processing.</span></span><br /><br /> <span data-ttu-id="581cd-168">形成可分派的訊息後，便會在查詢對應的活動識別碼後切換至 ServiceHost ProcessAction 活動。</span><span class="sxs-lookup"><span data-stu-id="581cd-168">Once a message that can be dispatched is formed, the ServiceHost ProcessAction activity is switched to after looking up the corresponding Activity ID.</span></span>|  
|<span data-ttu-id="581cd-169">D、S</span><span class="sxs-lookup"><span data-stu-id="581cd-169">D, S</span></span>|<span data-ttu-id="581cd-170">處理動作 ‘[action]’。</span><span class="sxs-lookup"><span data-stu-id="581cd-170">Process action ‘[action]’.</span></span>|<span data-ttu-id="581cd-171">ProcessAction</span><span class="sxs-lookup"><span data-stu-id="581cd-171">ProcessAction</span></span>|<span data-ttu-id="581cd-172">透過傳輸/安全性/RM 堆疊處理訊息，以便在接收時將訊息分派給使用者程式碼，傳送時則使用相反的順序來處理。</span><span class="sxs-lookup"><span data-stu-id="581cd-172">Process the message through the Transport/Security/RM stack for dispatching the message to user code on receive, and in the reverse order on send.</span></span><br /><br /> <span data-ttu-id="581cd-173">在伺服器上，此活動會使用傳播的活動識別碼（如果是透過「活動傳播」在訊息標頭中傳送）;否則，會建立新的 GUID。</span><span class="sxs-lookup"><span data-stu-id="581cd-173">On the server, this activity uses the propagated Activity ID if it is sent in the message header via "Activity Propagation"; otherwise, a new GUID is created.</span></span><br /><br /> <span data-ttu-id="581cd-174">要求/回覆合約的回應訊息也會在該活動中處理。</span><span class="sxs-lookup"><span data-stu-id="581cd-174">The response message for request/reply contracts is also processed in that activity.</span></span>|  
|<span data-ttu-id="581cd-175">T</span><span class="sxs-lookup"><span data-stu-id="581cd-175">T</span></span>|<span data-ttu-id="581cd-176">執行 ‘[IContract.Operation]’。</span><span class="sxs-lookup"><span data-stu-id="581cd-176">Execute ‘[IContract.Operation]’.</span></span>|<span data-ttu-id="581cd-177">ExecuteUserCode</span><span class="sxs-lookup"><span data-stu-id="581cd-177">ExecuteUserCode</span></span>|<span data-ttu-id="581cd-178">在服務端分派後執行使用者程式碼。</span><span class="sxs-lookup"><span data-stu-id="581cd-178">Execute user code after dispatch on the service side.</span></span> <span data-ttu-id="581cd-179">這個活動會提供界限，從使用者提供的程式碼描述 ServiceHost 程式碼。</span><span class="sxs-lookup"><span data-stu-id="581cd-179">This activity provides a boundary to delineate ServiceHost code from user-provided code.</span></span>|  
  
## <a name="security-activities"></a><span data-ttu-id="581cd-180">安全性活動</span><span class="sxs-lookup"><span data-stu-id="581cd-180">Security Activities</span></span>  
 <span data-ttu-id="581cd-181">下表列出與安全性相關的所有活動。</span><span class="sxs-lookup"><span data-stu-id="581cd-181">The following table lists all activities related to Security.</span></span>  
  
|<span data-ttu-id="581cd-182">活動名稱</span><span class="sxs-lookup"><span data-stu-id="581cd-182">Activity Name</span></span>|<span data-ttu-id="581cd-183">活動類型</span><span class="sxs-lookup"><span data-stu-id="581cd-183">Activity Type</span></span>|<span data-ttu-id="581cd-184">描述</span><span class="sxs-lookup"><span data-stu-id="581cd-184">Description</span></span>|  
|-------------------|-------------------|-----------------|  
|<span data-ttu-id="581cd-185">設定安全工作階段</span><span class="sxs-lookup"><span data-stu-id="581cd-185">Setup secure session</span></span>|<span data-ttu-id="581cd-186">SetupSecurity</span><span class="sxs-lookup"><span data-stu-id="581cd-186">SetupSecurity</span></span>|<span data-ttu-id="581cd-187">只存在於用戶端。</span><span class="sxs-lookup"><span data-stu-id="581cd-187">Exists on the client side only.</span></span> <span data-ttu-id="581cd-188">包含所有的 RST\*/SCT 交換，以驗證及設定安全性內容。</span><span class="sxs-lookup"><span data-stu-id="581cd-188">Contains all RST\*/SCT exchanges for authentication and setting the security context.</span></span> <span data-ttu-id="581cd-189">如果 `propagateActivity` = `true` 為，則此活動會與服務的對應處理動作 RST \* /SCT 活動合併。</span><span class="sxs-lookup"><span data-stu-id="581cd-189">If `propagateActivity`=`true`, this activity is merged with the service’s corresponding Process Action RST\*/SCT activities.</span></span>|  
|<span data-ttu-id="581cd-190">關閉安全工作階段</span><span class="sxs-lookup"><span data-stu-id="581cd-190">Close secure session</span></span>|<span data-ttu-id="581cd-191">SetupSecurity</span><span class="sxs-lookup"><span data-stu-id="581cd-191">SetupSecurity</span></span>|<span data-ttu-id="581cd-192">存在於用戶端。</span><span class="sxs-lookup"><span data-stu-id="581cd-192">Exists on the client side.</span></span> <span data-ttu-id="581cd-193">內含「取消」訊息交換，以關閉安全工作階段。</span><span class="sxs-lookup"><span data-stu-id="581cd-193">Contains the Cancel message exchange for closing the secure session.</span></span> <span data-ttu-id="581cd-194">如果 `propagateActivity` = `true` 為，則此活動會與服務的「取消」處理動作合併。</span><span class="sxs-lookup"><span data-stu-id="581cd-194">If `propagateActivity`=`true`, this activity is merged with the Process Action "Cancel" from the service.</span></span>|  
  
 <span data-ttu-id="581cd-195">下表列出與 COM+ 相關的所有活動。</span><span class="sxs-lookup"><span data-stu-id="581cd-195">The following table lists all activities related to COM+.</span></span>  
  
|<span data-ttu-id="581cd-196">活動名稱</span><span class="sxs-lookup"><span data-stu-id="581cd-196">Activity Name</span></span>|<span data-ttu-id="581cd-197">活動類型</span><span class="sxs-lookup"><span data-stu-id="581cd-197">Activity Type</span></span>|<span data-ttu-id="581cd-198">描述</span><span class="sxs-lookup"><span data-stu-id="581cd-198">Description</span></span>|  
|-------------------|-------------------|-----------------|  
|<span data-ttu-id="581cd-199">建立 COM+ 執行個體</span><span class="sxs-lookup"><span data-stu-id="581cd-199">Create COM+ instance</span></span>|<span data-ttu-id="581cd-200">TransferToCOMPlus</span><span class="sxs-lookup"><span data-stu-id="581cd-200">TransferToCOMPlus</span></span>|<span data-ttu-id="581cd-201">1個活動實例，用於每個來自 WCF 程式碼的 COM + 呼叫</span><span class="sxs-lookup"><span data-stu-id="581cd-201">1 activity instance for each COM+ call from WCF code</span></span>|  
|<span data-ttu-id="581cd-202">執行 COM +\<operation></span><span class="sxs-lookup"><span data-stu-id="581cd-202">Execute COM+ \<operation></span></span>|<span data-ttu-id="581cd-203">TransferToCOMPlus</span><span class="sxs-lookup"><span data-stu-id="581cd-203">TransferToCOMPlus</span></span>|<span data-ttu-id="581cd-204">1個活動實例，用於每個來自 WCF 程式碼的 COM + 呼叫</span><span class="sxs-lookup"><span data-stu-id="581cd-204">1 activity instance for each COM+ call from WCF code</span></span>|  
  
## <a name="wmi-activities"></a><span data-ttu-id="581cd-205">WMI 活動</span><span class="sxs-lookup"><span data-stu-id="581cd-205">WMI Activities</span></span>  
 <span data-ttu-id="581cd-206">下表列出與 WMI 相關的所有活動。</span><span class="sxs-lookup"><span data-stu-id="581cd-206">The following table lists all activities related to WMI.</span></span>  
  
|<span data-ttu-id="581cd-207">活動名稱</span><span class="sxs-lookup"><span data-stu-id="581cd-207">Activity Name</span></span>|<span data-ttu-id="581cd-208">活動類型</span><span class="sxs-lookup"><span data-stu-id="581cd-208">Activity Type</span></span>|<span data-ttu-id="581cd-209">描述</span><span class="sxs-lookup"><span data-stu-id="581cd-209">Description</span></span>|  
|-------------------|-------------------|-----------------|  
|<span data-ttu-id="581cd-210">WMI get</span><span class="sxs-lookup"><span data-stu-id="581cd-210">WMI get</span></span>|<span data-ttu-id="581cd-211">WMIGetObject</span><span class="sxs-lookup"><span data-stu-id="581cd-211">WMIGetObject</span></span>|<span data-ttu-id="581cd-212">使用者會從 WMI 擷取資料。</span><span class="sxs-lookup"><span data-stu-id="581cd-212">User is retrieving data from WMI.</span></span>|  
|<span data-ttu-id="581cd-213">WMI put</span><span class="sxs-lookup"><span data-stu-id="581cd-213">WMI put</span></span>|<span data-ttu-id="581cd-214">WmiPutInstance</span><span class="sxs-lookup"><span data-stu-id="581cd-214">WmiPutInstance</span></span>|<span data-ttu-id="581cd-215">使用者會以 WMI 更新資料。</span><span class="sxs-lookup"><span data-stu-id="581cd-215">User is updating data with WMI.</span></span>|
