---
title: 活動清單
ms.date: 03/30/2017
ms.assetid: 5540e185-ce8e-4db3-83b0-2b9f5bf71829
ms.openlocfilehash: d28ae2e4750c718c35105d090aff8d085025b9d6
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/26/2020
ms.locfileid: "96236087"
---
# <a name="activity-list"></a><span data-ttu-id="7ae15-102">活動清單</span><span class="sxs-lookup"><span data-stu-id="7ae15-102">Activity List</span></span>

<span data-ttu-id="7ae15-103">本主題列出 Windows Communication Foundation (WCF) 所定義的所有活動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-103">This topic lists all the activities defined by Windows Communication Foundation (WCF).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="7ae15-104">您也可以使用程式設計方式來定義活動，以便將使用者追蹤加以群組。</span><span class="sxs-lookup"><span data-stu-id="7ae15-104">You can also define activities programmatically to group user traces.</span></span> <span data-ttu-id="7ae15-105">如需詳細資訊，請參閱 [發出 User-Code 追蹤](emitting-user-code-traces.md)。</span><span class="sxs-lookup"><span data-stu-id="7ae15-105">For more information, see [Emitting User-Code Traces](emitting-user-code-traces.md).</span></span>  
  
## <a name="servicemodel-activities"></a><span data-ttu-id="7ae15-106">ServiceModel 活動</span><span class="sxs-lookup"><span data-stu-id="7ae15-106">ServiceModel Activities</span></span>  

 <span data-ttu-id="7ae15-107">下表列出主要使用方式案例的所有活動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-107">The following table lists all activities for major usage scenarios.</span></span>  
  
|<span data-ttu-id="7ae15-108">標籤</span><span class="sxs-lookup"><span data-stu-id="7ae15-108">Label</span></span>|<span data-ttu-id="7ae15-109">活動名稱</span><span class="sxs-lookup"><span data-stu-id="7ae15-109">Activity Name</span></span>|<span data-ttu-id="7ae15-110">活動類型</span><span class="sxs-lookup"><span data-stu-id="7ae15-110">Activity Type</span></span>|<span data-ttu-id="7ae15-111">描述</span><span class="sxs-lookup"><span data-stu-id="7ae15-111">Description</span></span>|  
|-----------|-------------------|-------------------|-----------------|  
|<span data-ttu-id="7ae15-112">A、M</span><span class="sxs-lookup"><span data-stu-id="7ae15-112">A, M</span></span>|<span data-ttu-id="7ae15-113">環境活動</span><span class="sxs-lookup"><span data-stu-id="7ae15-113">Ambient activity</span></span>|<span data-ttu-id="7ae15-114">N/A (此活動非由 ServiceModel 控制)</span><span class="sxs-lookup"><span data-stu-id="7ae15-114">N/A (this is not controlled by ServiceModel)</span></span>|<span data-ttu-id="7ae15-115">在任何 ServiceModel 程式碼的呼叫 (用戶端或伺服器端) 之前，於 TLS 內設定其識別碼的活動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-115">The activity whose ID is set in TLS before any calls to ServiceModel code (client side or server side).</span></span><br /><br /> <span data-ttu-id="7ae15-116">範例：在 WCF 用戶端或 serviceHost 上呼叫 open 的活動。會呼叫 open。</span><span class="sxs-lookup"><span data-stu-id="7ae15-116">Example: An activity where  open is called on the WCF client or serviceHost.open is called.</span></span>|  
|<span data-ttu-id="7ae15-117">B</span><span class="sxs-lookup"><span data-stu-id="7ae15-117">B</span></span>|<span data-ttu-id="7ae15-118">建構</span><span class="sxs-lookup"><span data-stu-id="7ae15-118">Construct</span></span><br /><br /> <span data-ttu-id="7ae15-119">ChannelFactory。</span><span class="sxs-lookup"><span data-stu-id="7ae15-119">ChannelFactory.</span></span> <span data-ttu-id="7ae15-120">ContractType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="7ae15-120">ContractType : ‘[Type]’.</span></span>|<span data-ttu-id="7ae15-121">建構</span><span class="sxs-lookup"><span data-stu-id="7ae15-121">Construct</span></span>||  
|<span data-ttu-id="7ae15-122">C</span><span class="sxs-lookup"><span data-stu-id="7ae15-122">C</span></span>|<span data-ttu-id="7ae15-123">開啟</span><span class="sxs-lookup"><span data-stu-id="7ae15-123">Open</span></span><br /><br /> <span data-ttu-id="7ae15-124">[ClientBase&#124;ChannelFactory]。</span><span class="sxs-lookup"><span data-stu-id="7ae15-124">[ClientBase&#124;ChannelFactory].</span></span> <span data-ttu-id="7ae15-125">ContractType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="7ae15-125">ContractType : ‘[Type]’.</span></span>|<span data-ttu-id="7ae15-126">開啟</span><span class="sxs-lookup"><span data-stu-id="7ae15-126">Open</span></span>||  
|<span data-ttu-id="7ae15-127">I</span><span class="sxs-lookup"><span data-stu-id="7ae15-127">I</span></span>|<span data-ttu-id="7ae15-128">關閉 [ClientBase&#124;ChannelFactory]。</span><span class="sxs-lookup"><span data-stu-id="7ae15-128">Close [ClientBase&#124;ChannelFactory].</span></span> <span data-ttu-id="7ae15-129">ContractType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="7ae15-129">ContractType : ‘[Type]’.</span></span>|<span data-ttu-id="7ae15-130">關閉</span><span class="sxs-lookup"><span data-stu-id="7ae15-130">Close</span></span>||  
|<span data-ttu-id="7ae15-131">M</span><span class="sxs-lookup"><span data-stu-id="7ae15-131">M</span></span>|<span data-ttu-id="7ae15-132">建構 ServiceHost。</span><span class="sxs-lookup"><span data-stu-id="7ae15-132">Construct ServiceHost.</span></span> <span data-ttu-id="7ae15-133">ServiceType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="7ae15-133">ServiceType: ‘[Type]’.</span></span>|<span data-ttu-id="7ae15-134">建構</span><span class="sxs-lookup"><span data-stu-id="7ae15-134">Construct</span></span>||  
|<span data-ttu-id="7ae15-135">N</span><span class="sxs-lookup"><span data-stu-id="7ae15-135">N</span></span>|<span data-ttu-id="7ae15-136">開啟 ServiceHost。</span><span class="sxs-lookup"><span data-stu-id="7ae15-136">Open ServiceHost.</span></span> <span data-ttu-id="7ae15-137">ServiceType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="7ae15-137">ServiceType: ‘[Type]’.</span></span>|<span data-ttu-id="7ae15-138">開啟</span><span class="sxs-lookup"><span data-stu-id="7ae15-138">Open</span></span>||  
|<span data-ttu-id="7ae15-139">Z</span><span class="sxs-lookup"><span data-stu-id="7ae15-139">Z</span></span>|<span data-ttu-id="7ae15-140">關閉 ServiceHost。</span><span class="sxs-lookup"><span data-stu-id="7ae15-140">Close ServiceHost.</span></span> <span data-ttu-id="7ae15-141">ServiceType：‘[Type]’。</span><span class="sxs-lookup"><span data-stu-id="7ae15-141">ServiceType: ‘[Type]’.</span></span>|<span data-ttu-id="7ae15-142">關閉</span><span class="sxs-lookup"><span data-stu-id="7ae15-142">Close</span></span>||  
|<span data-ttu-id="7ae15-143">O</span><span class="sxs-lookup"><span data-stu-id="7ae15-143">O</span></span>|<span data-ttu-id="7ae15-144">在 ‘[address]’ 接聽。</span><span class="sxs-lookup"><span data-stu-id="7ae15-144">Listen at ‘[address]’.</span></span>|<span data-ttu-id="7ae15-145">ListenAt</span><span class="sxs-lookup"><span data-stu-id="7ae15-145">ListenAt</span></span>|<span data-ttu-id="7ae15-146">這個活動和下一個活動是傳輸特有的。</span><span class="sxs-lookup"><span data-stu-id="7ae15-146">This and the next activity are transport-specific.</span></span> <span data-ttu-id="7ae15-147">ListenAt 活動代表對應至通道接聽程式正在接聽之位址的內容。</span><span class="sxs-lookup"><span data-stu-id="7ae15-147">The ListenAt activity represents the content that maps to the address where the channel listener listens at.</span></span> <span data-ttu-id="7ae15-148">在 MSMQ 中，則因為佇列對應至一個位址，所以這個活動代表佇列本身。</span><span class="sxs-lookup"><span data-stu-id="7ae15-148">In the case of MSMQ, it is the queue itself since the queue maps to one address.</span></span> <span data-ttu-id="7ae15-149">在連線導向的傳輸下，這個活動會接聽傳入連線，若為 MSMQ，則會接聽 MSMQ 訊息。</span><span class="sxs-lookup"><span data-stu-id="7ae15-149">This activity listens for incoming connections in the case of connection-oriented transports, for MSMQ messages in the case of MSMQ.</span></span> <span data-ttu-id="7ae15-150">這個活動是在 ServiceHost.Open() 期間建立，其中會包含建立及處置接聽項的相關追蹤，以及向外傳輸至所有 ReceiveBytes 活動的相關追蹤。</span><span class="sxs-lookup"><span data-stu-id="7ae15-150">This activity is created during ServiceHost.Open(), and contains the traces related to creating and disposing the listener, as well as transferring out to all ReceiveBytes activities.</span></span>|  
|<span data-ttu-id="7ae15-151">P</span><span class="sxs-lookup"><span data-stu-id="7ae15-151">P</span></span>|<span data-ttu-id="7ae15-152">在連線 ‘[address]’ 接收位元組。</span><span class="sxs-lookup"><span data-stu-id="7ae15-152">Receive bytes on connection ‘[address]’.</span></span> <span data-ttu-id="7ae15-153">接收 MSMQ 訊息。</span><span class="sxs-lookup"><span data-stu-id="7ae15-153">Receive MSMQ message.</span></span>|<span data-ttu-id="7ae15-154">ReceiveBytes</span><span class="sxs-lookup"><span data-stu-id="7ae15-154">ReceiveBytes</span></span>|<span data-ttu-id="7ae15-155">在此活動中，最後會取得 WCF 訊息的資料會被處理。</span><span class="sxs-lookup"><span data-stu-id="7ae15-155">In this activity, data that will eventually get a WCF message is processed.</span></span> <span data-ttu-id="7ae15-156">在連線導向傳輸或 http 的情形下，會等待傳入位元組。</span><span class="sxs-lookup"><span data-stu-id="7ae15-156">Incoming bytes are waited in the case of connection-oriented transport or http.</span></span> <span data-ttu-id="7ae15-157">對於 TCP/具名管道，此活動的存留期就是連線的存留期，因為它是在建立連線時建立的。</span><span class="sxs-lookup"><span data-stu-id="7ae15-157">For TCP/named-pipe, the lifetime of this activity is the lifetime of the connection, as it is created when the connection is created.</span></span> <span data-ttu-id="7ae15-158">如果是 http，此活動的存留期會是訊息要求的存留期，並且會在訊息傳送時建立。</span><span class="sxs-lookup"><span data-stu-id="7ae15-158">For http, it is of the lifetime of a message request and is created when the message is sent.</span></span> <span data-ttu-id="7ae15-159">這個活動包含建立及處置連線的相關追蹤 (如果有的話)，並且會向外傳輸至所有訊息 (物件) 處理活動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-159">This activity contains the traces related to creating and disposing the connection if applicable, as well as transfers out to all message (object) processing activities.</span></span><br /><br /> <span data-ttu-id="7ae15-160">在 MSMQ 的情況下，則會是擷取 MSMQ 訊息的活動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-160">In the case of MSMQ, it is the activity where the MSMQ message is retrieved.</span></span>|  
|<span data-ttu-id="7ae15-161">Q</span><span class="sxs-lookup"><span data-stu-id="7ae15-161">Q</span></span>|<span data-ttu-id="7ae15-162">處理訊息 [number] </span><span class="sxs-lookup"><span data-stu-id="7ae15-162">Process message [number].</span></span> <span data-ttu-id="7ae15-163">(注意，[number] 是從 1 開始，依序遞增的值)。</span><span class="sxs-lookup"><span data-stu-id="7ae15-163">(Note, [number] is a monotonically increasing value which starts at 1.)</span></span>|<span data-ttu-id="7ae15-164">ProcessMessage</span><span class="sxs-lookup"><span data-stu-id="7ae15-164">ProcessMessage</span></span>|<span data-ttu-id="7ae15-165">處理傳入訊息。</span><span class="sxs-lookup"><span data-stu-id="7ae15-165">Process an incoming message.</span></span> <span data-ttu-id="7ae15-166">此活動會在所有資料 (位元組、MSMQ 訊息) 收到，以構成 WCF 訊息物件時啟動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-166">This activity starts when all the data (bytes, MSMQ message) are received to form a WCF message object.</span></span> <span data-ttu-id="7ae15-167">這個活動內的追蹤負責標頭處理作業。</span><span class="sxs-lookup"><span data-stu-id="7ae15-167">Traces within this activity deal with header processing.</span></span><br /><br /> <span data-ttu-id="7ae15-168">形成可分派的訊息後，便會在查詢對應的活動識別碼後切換至 ServiceHost ProcessAction 活動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-168">Once a message that can be dispatched is formed, the ServiceHost ProcessAction activity is switched to after looking up the corresponding Activity ID.</span></span>|  
|<span data-ttu-id="7ae15-169">D、S</span><span class="sxs-lookup"><span data-stu-id="7ae15-169">D, S</span></span>|<span data-ttu-id="7ae15-170">處理動作 ‘[action]’。</span><span class="sxs-lookup"><span data-stu-id="7ae15-170">Process action ‘[action]’.</span></span>|<span data-ttu-id="7ae15-171">ProcessAction</span><span class="sxs-lookup"><span data-stu-id="7ae15-171">ProcessAction</span></span>|<span data-ttu-id="7ae15-172">透過傳輸/安全性/RM 堆疊處理訊息，以便在接收時將訊息分派給使用者程式碼，傳送時則使用相反的順序來處理。</span><span class="sxs-lookup"><span data-stu-id="7ae15-172">Process the message through the Transport/Security/RM stack for dispatching the message to user code on receive, and in the reverse order on send.</span></span><br /><br /> <span data-ttu-id="7ae15-173">在伺服器上，此活動會使用傳播的活動識別碼（如果透過「活動傳播」在訊息標頭中傳送）;否則會建立新的 GUID。</span><span class="sxs-lookup"><span data-stu-id="7ae15-173">On the server, this activity uses the propagated Activity ID if it is sent in the message header via "Activity Propagation"; otherwise, a new GUID is created.</span></span><br /><br /> <span data-ttu-id="7ae15-174">要求/回覆合約的回應訊息也會在該活動中處理。</span><span class="sxs-lookup"><span data-stu-id="7ae15-174">The response message for request/reply contracts is also processed in that activity.</span></span>|  
|<span data-ttu-id="7ae15-175">T</span><span class="sxs-lookup"><span data-stu-id="7ae15-175">T</span></span>|<span data-ttu-id="7ae15-176">執行 ‘[IContract.Operation]’。</span><span class="sxs-lookup"><span data-stu-id="7ae15-176">Execute ‘[IContract.Operation]’.</span></span>|<span data-ttu-id="7ae15-177">ExecuteUserCode</span><span class="sxs-lookup"><span data-stu-id="7ae15-177">ExecuteUserCode</span></span>|<span data-ttu-id="7ae15-178">在服務端分派後執行使用者程式碼。</span><span class="sxs-lookup"><span data-stu-id="7ae15-178">Execute user code after dispatch on the service side.</span></span> <span data-ttu-id="7ae15-179">這個活動會提供界限，從使用者提供的程式碼描述 ServiceHost 程式碼。</span><span class="sxs-lookup"><span data-stu-id="7ae15-179">This activity provides a boundary to delineate ServiceHost code from user-provided code.</span></span>|  
  
## <a name="security-activities"></a><span data-ttu-id="7ae15-180">安全性活動</span><span class="sxs-lookup"><span data-stu-id="7ae15-180">Security Activities</span></span>  

 <span data-ttu-id="7ae15-181">下表列出與安全性相關的所有活動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-181">The following table lists all activities related to Security.</span></span>  
  
|<span data-ttu-id="7ae15-182">活動名稱</span><span class="sxs-lookup"><span data-stu-id="7ae15-182">Activity Name</span></span>|<span data-ttu-id="7ae15-183">活動類型</span><span class="sxs-lookup"><span data-stu-id="7ae15-183">Activity Type</span></span>|<span data-ttu-id="7ae15-184">描述</span><span class="sxs-lookup"><span data-stu-id="7ae15-184">Description</span></span>|  
|-------------------|-------------------|-----------------|  
|<span data-ttu-id="7ae15-185">設定安全工作階段</span><span class="sxs-lookup"><span data-stu-id="7ae15-185">Setup secure session</span></span>|<span data-ttu-id="7ae15-186">SetupSecurity</span><span class="sxs-lookup"><span data-stu-id="7ae15-186">SetupSecurity</span></span>|<span data-ttu-id="7ae15-187">只存在於用戶端。</span><span class="sxs-lookup"><span data-stu-id="7ae15-187">Exists on the client side only.</span></span> <span data-ttu-id="7ae15-188">包含所有的 RST\*/SCT 交換，以驗證及設定安全性內容。</span><span class="sxs-lookup"><span data-stu-id="7ae15-188">Contains all RST\*/SCT exchanges for authentication and setting the security context.</span></span> <span data-ttu-id="7ae15-189">如果 `propagateActivity` = `true` 為，則此活動會與服務的對應處理動作 RST \* /SCT 活動合併。</span><span class="sxs-lookup"><span data-stu-id="7ae15-189">If `propagateActivity`=`true`, this activity is merged with the service’s corresponding Process Action RST\*/SCT activities.</span></span>|  
|<span data-ttu-id="7ae15-190">關閉安全工作階段</span><span class="sxs-lookup"><span data-stu-id="7ae15-190">Close secure session</span></span>|<span data-ttu-id="7ae15-191">SetupSecurity</span><span class="sxs-lookup"><span data-stu-id="7ae15-191">SetupSecurity</span></span>|<span data-ttu-id="7ae15-192">存在於用戶端。</span><span class="sxs-lookup"><span data-stu-id="7ae15-192">Exists on the client side.</span></span> <span data-ttu-id="7ae15-193">內含「取消」訊息交換，以關閉安全工作階段。</span><span class="sxs-lookup"><span data-stu-id="7ae15-193">Contains the Cancel message exchange for closing the secure session.</span></span> <span data-ttu-id="7ae15-194">如果 `propagateActivity` = `true` 為，則此活動會與服務的「取消」處理動作合併。</span><span class="sxs-lookup"><span data-stu-id="7ae15-194">If `propagateActivity`=`true`, this activity is merged with the Process Action "Cancel" from the service.</span></span>|  
  
 <span data-ttu-id="7ae15-195">下表列出與 COM+ 相關的所有活動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-195">The following table lists all activities related to COM+.</span></span>  
  
|<span data-ttu-id="7ae15-196">活動名稱</span><span class="sxs-lookup"><span data-stu-id="7ae15-196">Activity Name</span></span>|<span data-ttu-id="7ae15-197">活動類型</span><span class="sxs-lookup"><span data-stu-id="7ae15-197">Activity Type</span></span>|<span data-ttu-id="7ae15-198">描述</span><span class="sxs-lookup"><span data-stu-id="7ae15-198">Description</span></span>|  
|-------------------|-------------------|-----------------|  
|<span data-ttu-id="7ae15-199">建立 COM+ 執行個體</span><span class="sxs-lookup"><span data-stu-id="7ae15-199">Create COM+ instance</span></span>|<span data-ttu-id="7ae15-200">TransferToCOMPlus</span><span class="sxs-lookup"><span data-stu-id="7ae15-200">TransferToCOMPlus</span></span>|<span data-ttu-id="7ae15-201">每個來自 WCF 程式碼的 COM + 呼叫1個活動實例</span><span class="sxs-lookup"><span data-stu-id="7ae15-201">1 activity instance for each COM+ call from WCF code</span></span>|  
|<span data-ttu-id="7ae15-202">執行 COM + \<operation></span><span class="sxs-lookup"><span data-stu-id="7ae15-202">Execute COM+ \<operation></span></span>|<span data-ttu-id="7ae15-203">TransferToCOMPlus</span><span class="sxs-lookup"><span data-stu-id="7ae15-203">TransferToCOMPlus</span></span>|<span data-ttu-id="7ae15-204">每個來自 WCF 程式碼的 COM + 呼叫1個活動實例</span><span class="sxs-lookup"><span data-stu-id="7ae15-204">1 activity instance for each COM+ call from WCF code</span></span>|  
  
## <a name="wmi-activities"></a><span data-ttu-id="7ae15-205">WMI 活動</span><span class="sxs-lookup"><span data-stu-id="7ae15-205">WMI Activities</span></span>  

 <span data-ttu-id="7ae15-206">下表列出與 WMI 相關的所有活動。</span><span class="sxs-lookup"><span data-stu-id="7ae15-206">The following table lists all activities related to WMI.</span></span>  
  
|<span data-ttu-id="7ae15-207">活動名稱</span><span class="sxs-lookup"><span data-stu-id="7ae15-207">Activity Name</span></span>|<span data-ttu-id="7ae15-208">活動類型</span><span class="sxs-lookup"><span data-stu-id="7ae15-208">Activity Type</span></span>|<span data-ttu-id="7ae15-209">描述</span><span class="sxs-lookup"><span data-stu-id="7ae15-209">Description</span></span>|  
|-------------------|-------------------|-----------------|  
|<span data-ttu-id="7ae15-210">WMI get</span><span class="sxs-lookup"><span data-stu-id="7ae15-210">WMI get</span></span>|<span data-ttu-id="7ae15-211">WMIGetObject</span><span class="sxs-lookup"><span data-stu-id="7ae15-211">WMIGetObject</span></span>|<span data-ttu-id="7ae15-212">使用者會從 WMI 擷取資料。</span><span class="sxs-lookup"><span data-stu-id="7ae15-212">User is retrieving data from WMI.</span></span>|  
|<span data-ttu-id="7ae15-213">WMI put</span><span class="sxs-lookup"><span data-stu-id="7ae15-213">WMI put</span></span>|<span data-ttu-id="7ae15-214">WmiPutInstance</span><span class="sxs-lookup"><span data-stu-id="7ae15-214">WmiPutInstance</span></span>|<span data-ttu-id="7ae15-215">使用者會以 WMI 更新資料。</span><span class="sxs-lookup"><span data-stu-id="7ae15-215">User is updating data with WMI.</span></span>|
