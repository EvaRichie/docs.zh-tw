---
title: Windows Communication Foundation 4.5 的新功能
description: 本文說明 Windows Communication Foundation (WCF) 4.5 版的新功能，以及其他資源的連結。
ms.date: 03/30/2017
helpviewer_keywords:
- WCF [WCF], what's new
- Windows Communication Foundation [WCF], what's new
ms.assetid: 7e93fe73-af93-46b5-9f63-32f761ee40cf
ms.openlocfilehash: 76b52cedd1e2e64805e2ad47e582d07ca70415cc
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/24/2020
ms.locfileid: "95731549"
---
# <a name="whats-new-in-windows-communication-foundation-45"></a><span data-ttu-id="f94c8-103">Windows Communication Foundation 4.5 的新功能</span><span class="sxs-lookup"><span data-stu-id="f94c8-103">What's New in Windows Communication Foundation 4.5</span></span>

<span data-ttu-id="f94c8-104">本主題討論 Windows Communication Foundation (WCF) 4.5 版的新功能。</span><span class="sxs-lookup"><span data-stu-id="f94c8-104">This topic discusses features new to Windows Communication Foundation (WCF) version 4.5.</span></span>

## <a name="wcf-simplification-features"></a><span data-ttu-id="f94c8-105">WCF 簡化功能</span><span class="sxs-lookup"><span data-stu-id="f94c8-105">WCF Simplification Features</span></span>

<span data-ttu-id="f94c8-106">為了使 WCF 4.5 應用程式更容易開發和維護，我們已投入了大量的努力。</span><span class="sxs-lookup"><span data-stu-id="f94c8-106">Much work has been done to make WCF 4.5 applications easier to develop and maintain.</span></span> <span data-ttu-id="f94c8-107">如需詳細資訊，請參閱 [WCF 簡化功能](wcf-simplification-features.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-107">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="task-based-async-support"></a><span data-ttu-id="f94c8-108">以工作為基礎的非同步支援</span><span class="sxs-lookup"><span data-stu-id="f94c8-108">Task-based Async Support</span></span>

<span data-ttu-id="f94c8-109">根據預設，[加入服務參考] 可產生傳回工作的非同步服務作業方法。</span><span class="sxs-lookup"><span data-stu-id="f94c8-109">By default, Add Service Reference generates Task-returning async service operation methods.</span></span> <span data-ttu-id="f94c8-110">也可使用同步和非同步方法。</span><span class="sxs-lookup"><span data-stu-id="f94c8-110">This is done for both synchronous and asynchronous methods.</span></span> <span data-ttu-id="f94c8-111">使用這種全新且以工作為基礎的非同步程式設計模型，可讓您以非同步方式呼叫服務作業。</span><span class="sxs-lookup"><span data-stu-id="f94c8-111">This allows you to call the service operations asynchronously using the new Task based async programming model.</span></span> <span data-ttu-id="f94c8-112">當您呼叫所產生的 Proxy 方法時，WCF 會建構 Task 物件以代表非同步作業，並將該 Task 傳回給您。</span><span class="sxs-lookup"><span data-stu-id="f94c8-112">When you call the generated proxy method, WCF constructs a Task object to represent the asynchronous operation and returns that Task to you.</span></span> <span data-ttu-id="f94c8-113">此工作會在作業完成時完成。</span><span class="sxs-lookup"><span data-stu-id="f94c8-113">The Task completes when the operation completes.</span></span> <span data-ttu-id="f94c8-114">在執行非同步作業時，您可以將它實作為以工作為基礎的非同步作業。</span><span class="sxs-lookup"><span data-stu-id="f94c8-114">When implementing an async operation you can implement it as a task-based async operation.</span></span> <span data-ttu-id="f94c8-115">如需詳細資訊，請參閱 [同步和非同步作業](synchronous-and-asynchronous-operations.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-115">For more information see, [Synchronous and Asynchronous Operations](synchronous-and-asynchronous-operations.md).</span></span>

### <a name="simplified-generated-configuration-files"></a><span data-ttu-id="f94c8-116">簡化產生的組態檔</span><span class="sxs-lookup"><span data-stu-id="f94c8-116">Simplified Generated Configuration Files</span></span>

<span data-ttu-id="f94c8-117">當您在 Visual Studio 中加入服務參考，或使用 SvcUtil.exe 工具時，用戶端組態檔就會產生。</span><span class="sxs-lookup"><span data-stu-id="f94c8-117">When you add a service reference in Visual Studio or use the SvcUtil.exe tool, a client configuration file is generated.</span></span> <span data-ttu-id="f94c8-118">在舊版 WCF 中，這些組態檔會包含所有繫結屬性的值，即使值為預設值，也是如此。</span><span class="sxs-lookup"><span data-stu-id="f94c8-118">In previous versions of WCF these configuration files contained the value of every binding property even if its value is the default value.</span></span> <span data-ttu-id="f94c8-119">在 WCF 4.5 中產生的組態檔只會包含那些設定成非預設值的繫結屬性。</span><span class="sxs-lookup"><span data-stu-id="f94c8-119">In WCF 4.5 the generated configuration files contain only those binding properties that are set to a non-default value.</span></span>

<span data-ttu-id="f94c8-120">如需詳細資訊，請參閱 [WCF 簡化功能](wcf-simplification-features.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-120">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="contract-first-development"></a><span data-ttu-id="f94c8-121">合約優先開發</span><span class="sxs-lookup"><span data-stu-id="f94c8-121">Contract-First Development</span></span>

<span data-ttu-id="f94c8-122">WCF 現可支援合約優先開發。</span><span class="sxs-lookup"><span data-stu-id="f94c8-122">WCF now has support for contract-first development.</span></span> <span data-ttu-id="f94c8-123">svcutil.exe 具有/serviceContract 參數，可讓您從 WSDL 檔案產生服務和資料合約。</span><span class="sxs-lookup"><span data-stu-id="f94c8-123">The svcutil.exe has a /serviceContract switch which allows you to generate service and data contracts from a WSDL document.</span></span>

### <a name="add-service-reference-from-a-portable-subset-project"></a><span data-ttu-id="f94c8-124">從可攜式子集專案加入服務參考</span><span class="sxs-lookup"><span data-stu-id="f94c8-124">Add Service Reference from a Portable Subset Project</span></span>

<span data-ttu-id="f94c8-125">可移植子集專案可讓 .NET 元件程式設計人員維護單一來源樹狀結構和組建系統，同時仍支援多個 .NET 平臺 (桌面、Silverlight、Windows Phone 和 Xbox) 。</span><span class="sxs-lookup"><span data-stu-id="f94c8-125">Portable subset projects enable .NET assembly programmers to maintain a single source tree and build system while still supporting multiple .NET platforms (desktop, Silverlight, Windows Phone, and Xbox).</span></span> <span data-ttu-id="f94c8-126">便攜子集專案只參考可在任何 .NET 平臺上使用之元件的 .NET 可移植程式庫。</span><span class="sxs-lookup"><span data-stu-id="f94c8-126">Portable subset projects only reference .NET portable libraries that are assemblies that can be used on any .NET platform.</span></span> <span data-ttu-id="f94c8-127">開發人員的體驗與在任何其他 WCF 用戶端應用程式內加入服務參考相同。</span><span class="sxs-lookup"><span data-stu-id="f94c8-127">The developer experience is the same as adding a service reference within any other WCF client application.</span></span> <span data-ttu-id="f94c8-128">如需詳細資訊，請參閱 [便攜子集專案中的加入服務參考](add-service-reference-in-a-portable-subset-project.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-128">For more information, see [Add Service Reference in a Portable Subset Project](add-service-reference-in-a-portable-subset-project.md).</span></span>

### <a name="aspnet-compatibility-mode-default-changed"></a><span data-ttu-id="f94c8-129">ASP.NET 相容模式預設值已變更</span><span class="sxs-lookup"><span data-stu-id="f94c8-129">ASP.NET Compatibility Mode Default Changed</span></span>

<span data-ttu-id="f94c8-130">WCF 會在寫入 WCF 服務時提供 ASP.NET 相容模式，將 ASP.NET HTTP 管線功能的完整存取權限授與開發人員。</span><span class="sxs-lookup"><span data-stu-id="f94c8-130">WCF provides ASP.NET compatibility mode to grant developers full access to the features in the ASP.NET HTTP pipeline when writing WCF services.</span></span> <span data-ttu-id="f94c8-131">若要使用此模式，您必須 `aspNetCompatibilityEnabled` 在 web.config 的區段中，將屬性設定為 true [\<serviceHostingEnvironment>](../configure-apps/file-schema/wcf/servicehostingenvironment.md) 。此外，此 appDomain 中的任何服務都必須將 `RequirementsMode` 其上的屬性 <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> 設定 <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> 為 <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required> 或。</span><span class="sxs-lookup"><span data-stu-id="f94c8-131">To use this mode, you must set the `aspNetCompatibilityEnabled` attribute to true in the [\<serviceHostingEnvironment>](../configure-apps/file-schema/wcf/servicehostingenvironment.md) section of web.config. Additionally, any service in this appDomain needs to have the `RequirementsMode` property on its <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> or <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Required>.</span></span> <span data-ttu-id="f94c8-132">依預設 <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> ，現在會設定為 <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed> 。</span><span class="sxs-lookup"><span data-stu-id="f94c8-132">By default <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsAttribute> is now set to <xref:System.ServiceModel.Activation.AspNetCompatibilityRequirementsMode.Allowed>.</span></span> <span data-ttu-id="f94c8-133">如需詳細資訊，請參閱 [WCF 服務和 ASP.NET](./feature-details/wcf-services-and-aspnet.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-133">For more information, see [WCF Services and ASP.NET](./feature-details/wcf-services-and-aspnet.md).</span></span>

### <a name="new-transport-default-values"></a><span data-ttu-id="f94c8-134">新的傳輸預設值</span><span class="sxs-lookup"><span data-stu-id="f94c8-134">New Transport Default Values</span></span>

<span data-ttu-id="f94c8-135">為了簡化組態，我們已變更一些傳輸屬性的預設值。</span><span class="sxs-lookup"><span data-stu-id="f94c8-135">In order to simplify configuration a number of transport property default values have changed.</span></span> <span data-ttu-id="f94c8-136">如需詳細資訊，請參閱 [WCF 簡化功能](wcf-simplification-features.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-136">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="xmldictionaryreaderquotas"></a><span data-ttu-id="f94c8-137">XmlDictionaryReaderQuotas</span><span class="sxs-lookup"><span data-stu-id="f94c8-137">XmlDictionaryReaderQuotas</span></span>

<span data-ttu-id="f94c8-138"><xref:System.Xml.XmlDictionaryReaderQuotas> 包含 XML 字典讀取器的可設定配額值，這些值會限制編碼器在建立訊息時使用的記憶體量。</span><span class="sxs-lookup"><span data-stu-id="f94c8-138"><xref:System.Xml.XmlDictionaryReaderQuotas> contains configurable quota values for XML dictionary readers which limit the amount of memory utilized by an encoder while creating a message.</span></span> <span data-ttu-id="f94c8-139">雖然這些配額是可設定的，但變更為預設值可降低開發人員必須明確設定這些值的機率。</span><span class="sxs-lookup"><span data-stu-id="f94c8-139">While these quotas are configurable, the default values have changed to lessen the possibility that a developer will have to set them explicitly.</span></span> <span data-ttu-id="f94c8-140">如需詳細資訊，請參閱 [WCF 簡化功能](wcf-simplification-features.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-140">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

### <a name="wcf-configuration-validation"></a><span data-ttu-id="f94c8-141">WCF 組態驗證</span><span class="sxs-lookup"><span data-stu-id="f94c8-141">WCF Configuration Validation</span></span>

<span data-ttu-id="f94c8-142">Visual Studio 現在有一部分建置流程會針對專案中定義的屬性來驗證 WCF 組態檔。</span><span class="sxs-lookup"><span data-stu-id="f94c8-142">As part of the build process within Visual Studio, WCF configuration files are now validated for attributes defined within the project.</span></span> <span data-ttu-id="f94c8-143">如果驗證失敗，將會在 Visual Studio 中顯示驗證錯誤或警告的清單。</span><span class="sxs-lookup"><span data-stu-id="f94c8-143">A list of validation errors or warnings is displayed in Visual Studio if the validation fails.</span></span>

### <a name="xml-editor-tooltips"></a><span data-ttu-id="f94c8-144">XML 編輯器工具提示</span><span class="sxs-lookup"><span data-stu-id="f94c8-144">XML Editor Tooltips</span></span>

<span data-ttu-id="f94c8-145">為了協助新的和現有的 WCF 服務開發人員設定其服務，現在每個屬於服務組態檔之一部分的組態項目及其屬性，Visual Studio XML 編輯器都有提供工具提示。</span><span class="sxs-lookup"><span data-stu-id="f94c8-145">In order to help new and existing WCF service developers to configure their services, the Visual Studio XML editor now provides tooltips for every configuration element and its properties that is part of the service configuration file.</span></span>

## <a name="streaming-improvements"></a><span data-ttu-id="f94c8-146">資料流的改進</span><span class="sxs-lookup"><span data-stu-id="f94c8-146">Streaming Improvements</span></span>

<span data-ttu-id="f94c8-147">加入對真正非同步資料流處理的支援，如果接收端不是正在讀取或是讀取速度緩慢，傳送端現在不會封鎖執行緒，延展性因此提升。</span><span class="sxs-lookup"><span data-stu-id="f94c8-147">Added support for true asynchronous streaming where the send side now does not block threads if the receive side is not reading or slow in reading thereby increasing scalability.</span></span> <span data-ttu-id="f94c8-148">移除對用戶端發送資料流訊息至 IIS 裝載之 WCF 服務時的訊息緩衝限制。</span><span class="sxs-lookup"><span data-stu-id="f94c8-148">Removed the limitation of message buffering when a client sends a streamed message to an IIS hosted WCF service.</span></span> <span data-ttu-id="f94c8-149">如需詳細資訊，請參閱 [WCF 簡化功能](wcf-simplification-features.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-149">For more information, see [WCF Simplification Features](wcf-simplification-features.md).</span></span>

## <a name="simplifying-exposing-an-endpoint-over-https-with-iis"></a><span data-ttu-id="f94c8-150">簡化透過 HTTPS 向 IIS 公開端點</span><span class="sxs-lookup"><span data-stu-id="f94c8-150">Simplifying Exposing an Endpoint Over HTTPS with IIS</span></span>

<span data-ttu-id="f94c8-151">已加入 HTTPS 通訊協定對應以簡化透過 HTTPS 公開端點的程序。</span><span class="sxs-lookup"><span data-stu-id="f94c8-151">An HTTPS protocol mapping has been added to simplify exposing an endpoint over HTTPS.</span></span> <span data-ttu-id="f94c8-152">若要啟用 HTTPS 端點，請確定您的網站已設定 HTTPS 繫結和 SSL 憑證，然後只需為裝載服務的虛擬目錄啟用 HTTPS 即可。</span><span class="sxs-lookup"><span data-stu-id="f94c8-152">To enable an HTTPS endpoint, ensure your website has an HTTPS binding and SSL certificate configured, and then simply enable HTTPS for the virtual directory that hosts the service.</span></span> <span data-ttu-id="f94c8-153">如果服務的中繼資料已啟用，也會透過 HTTPS 加以公開。</span><span class="sxs-lookup"><span data-stu-id="f94c8-153">If metadata is enabled for the service, it will be exposed over HTTPS as well.</span></span>

## <a name="generating-a-single-wsdl-document"></a><span data-ttu-id="f94c8-154">產生單一 WSDL 文件</span><span class="sxs-lookup"><span data-stu-id="f94c8-154">Generating a Single WSDL Document</span></span>

<span data-ttu-id="f94c8-155">某些協力廠商 WSDL 處理堆疊無法處理透過 xsd:import 相依於其他文件的 WSDL 文件。</span><span class="sxs-lookup"><span data-stu-id="f94c8-155">Some third-party WSDL processing stacks are not able to process WSDL documents that have dependencies on other documents through a xsd:import.</span></span> <span data-ttu-id="f94c8-156">WCF 現在允許您指定以單一文件來傳回所有 WSDL 資訊。</span><span class="sxs-lookup"><span data-stu-id="f94c8-156">WCF now allows you to specify that all WSDL information be returned in a single document.</span></span> <span data-ttu-id="f94c8-157">要求從服務要求中繼資料時，將 "？ singleWSDL" 附加至 URI。</span><span class="sxs-lookup"><span data-stu-id="f94c8-157">To request a single WSDL document append "?singleWSDL" to the URI when requesting metadata from the service.</span></span>

## <a name="websocket-support"></a><span data-ttu-id="f94c8-158">WebSocket 支援</span><span class="sxs-lookup"><span data-stu-id="f94c8-158">WebSocket Support</span></span>

<span data-ttu-id="f94c8-159">WebSockets 是透過連接埠 80 和 443 提供真正雙向通訊的技術，其效能特性與 TCP 類似。</span><span class="sxs-lookup"><span data-stu-id="f94c8-159">WebSockets is a technology that provides true bidirectional communication over ports 80 and 443 with performance characteristics similar to TCP.</span></span> <span data-ttu-id="f94c8-160">為了支援透過 WebSocket 傳輸進行通訊，我們已加入兩個新的繫結。</span><span class="sxs-lookup"><span data-stu-id="f94c8-160">Two new bindings have been added to support communication over a WebSocket transport.</span></span> <span data-ttu-id="f94c8-161"><xref:System.ServiceModel.NetHttpBinding> 和 <xref:System.ServiceModel.NetHttpsBinding>。</span><span class="sxs-lookup"><span data-stu-id="f94c8-161"><xref:System.ServiceModel.NetHttpBinding> and <xref:System.ServiceModel.NetHttpsBinding>.</span></span> <span data-ttu-id="f94c8-162">如需詳細資訊，請參閱： [系統提供](system-provided-bindings.md)的系結。</span><span class="sxs-lookup"><span data-stu-id="f94c8-162">For more information see: [System-Provided Bindings](system-provided-bindings.md).</span></span>

## <a name="new-transport-default-values"></a><span data-ttu-id="f94c8-163">新的傳輸預設值</span><span class="sxs-lookup"><span data-stu-id="f94c8-163">New Transport Default Values</span></span>

<span data-ttu-id="f94c8-164">下列資料表說明已變更的設定以及可找到其他資訊的位置。</span><span class="sxs-lookup"><span data-stu-id="f94c8-164">The following table describes the settings that have changed and where to find additional information.</span></span>

|<span data-ttu-id="f94c8-165">屬性</span><span class="sxs-lookup"><span data-stu-id="f94c8-165">Property</span></span>|<span data-ttu-id="f94c8-166">開啟</span><span class="sxs-lookup"><span data-stu-id="f94c8-166">On</span></span>|<span data-ttu-id="f94c8-167">新的預設值</span><span class="sxs-lookup"><span data-stu-id="f94c8-167">New Default</span></span>|<span data-ttu-id="f94c8-168">如需詳細資訊，請參閱</span><span class="sxs-lookup"><span data-stu-id="f94c8-168">For more information see</span></span>|
|--------------|--------|-----------------|------------------------------|
|<span data-ttu-id="f94c8-169">channelInitializationTimeout</span><span class="sxs-lookup"><span data-stu-id="f94c8-169">channelInitializationTimeout</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="f94c8-170">30 秒</span><span class="sxs-lookup"><span data-stu-id="f94c8-170">30 seconds</span></span>|<xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.ChannelInitializationTimeout%2A>|
|<span data-ttu-id="f94c8-171">listenBacklog</span><span class="sxs-lookup"><span data-stu-id="f94c8-171">listenBacklog</span></span>|<xref:System.ServiceModel.NetTcpBinding>|<span data-ttu-id="f94c8-172">12 \* 處理器的數量</span><span class="sxs-lookup"><span data-stu-id="f94c8-172">12 \* number of processors</span></span>|<xref:System.ServiceModel.NetTcpBinding.ListenBacklog%2A>|
|<span data-ttu-id="f94c8-173">maxPendingAccepts</span><span class="sxs-lookup"><span data-stu-id="f94c8-173">maxPendingAccepts</span></span>|<span data-ttu-id="f94c8-174">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="f94c8-174">ConnectionOrientedTransportBindingElement</span></span><br /><br /> <span data-ttu-id="f94c8-175">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="f94c8-175">SMSvcHost.exe</span></span>|<span data-ttu-id="f94c8-176">2 \* 用於傳輸的處理器數量</span><span class="sxs-lookup"><span data-stu-id="f94c8-176">2 \* number of processors for transport</span></span><br /><br /> <span data-ttu-id="f94c8-177">SMSvcHost.exe 4 個 \* 處理器數目</span><span class="sxs-lookup"><span data-stu-id="f94c8-177">4 \* number of processors for SMSvcHost.exe</span></span>|<span data-ttu-id="f94c8-178"><xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A> [設定 Net.TCP Port Sharing Service](./feature-details/configuring-the-net-tcp-port-sharing-service.md)</span><span class="sxs-lookup"><span data-stu-id="f94c8-178"><xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingAccepts%2A> [Configuring the Net.TCP Port Sharing Service](./feature-details/configuring-the-net-tcp-port-sharing-service.md)</span></span>|
|<span data-ttu-id="f94c8-179">maxPendingConnections</span><span class="sxs-lookup"><span data-stu-id="f94c8-179">maxPendingConnections</span></span>|<span data-ttu-id="f94c8-180">ConnectionOrientedTransportBindingElement</span><span class="sxs-lookup"><span data-stu-id="f94c8-180">ConnectionOrientedTransportBindingElement</span></span>|<span data-ttu-id="f94c8-181">12 \* 處理器的數量</span><span class="sxs-lookup"><span data-stu-id="f94c8-181">12 \* number of processors</span></span>|<xref:System.ServiceModel.Channels.ConnectionOrientedTransportBindingElement.MaxPendingConnections%2A>|
|<span data-ttu-id="f94c8-182">receiveTimeout</span><span class="sxs-lookup"><span data-stu-id="f94c8-182">receiveTimeout</span></span>|<span data-ttu-id="f94c8-183">SMSvcHost.exe</span><span class="sxs-lookup"><span data-stu-id="f94c8-183">SMSvcHost.exe</span></span>|<span data-ttu-id="f94c8-184">30 秒</span><span class="sxs-lookup"><span data-stu-id="f94c8-184">30 seconds</span></span>|[<span data-ttu-id="f94c8-185">設定 Net.TCP Port Sharing Service</span><span class="sxs-lookup"><span data-stu-id="f94c8-185">Configuring the Net.TCP Port Sharing Service</span></span>](./feature-details/configuring-the-net-tcp-port-sharing-service.md)|

## <a name="xml-editor-tooltips"></a><span data-ttu-id="f94c8-186">XML 編輯器工具提示</span><span class="sxs-lookup"><span data-stu-id="f94c8-186">XML Editor Tooltips</span></span>

<span data-ttu-id="f94c8-187">為了協助新的和現有的 WCF 服務開發人員設定其服務，現在每個屬於服務組態檔之一部分的組態項目及其屬性，Visual Studio XML 編輯器都有提供工具提示。</span><span class="sxs-lookup"><span data-stu-id="f94c8-187">In order to help new and existing WCF service developers to configure their services, the Visual Studio XML editor now provides tooltips for every configuration element and its properties that is part of the service configuration file.</span></span>

## <a name="configuring-wcf-services-in-code"></a><span data-ttu-id="f94c8-188">在程式碼中設定 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="f94c8-188">Configuring WCF Services in Code</span></span>

<span data-ttu-id="f94c8-189">Windows Communication Foundation (WCF) 可讓開發人員使用設定檔或程式碼來設定服務。</span><span class="sxs-lookup"><span data-stu-id="f94c8-189">Windows Communication Foundation (WCF) allows developers to configure services using configuration files or code.</span></span> <span data-ttu-id="f94c8-190">當服務需要在部署後進行設定時，組態檔非常有用。</span><span class="sxs-lookup"><span data-stu-id="f94c8-190">Configuration files are useful when a service needs to be configured after being deployed.</span></span> <span data-ttu-id="f94c8-191">使用組態檔時，IT 專業人員只需更新組態檔，不必重新編譯。</span><span class="sxs-lookup"><span data-stu-id="f94c8-191">When using configuration files, an IT professional only needs to update the configuration file, no recompilation is required.</span></span> <span data-ttu-id="f94c8-192">但是組態檔可能會很複雜而難以維護。</span><span class="sxs-lookup"><span data-stu-id="f94c8-192">Configuration files, however, can be complex and difficult to maintain.</span></span> <span data-ttu-id="f94c8-193">由於不支援組態檔偵錯，而且組態項目是以名稱來參考，這使得製作組態檔容易出錯且難度增加。</span><span class="sxs-lookup"><span data-stu-id="f94c8-193">There is no support for debugging configuration files and configuration elements are referenced by names which makes authoring configuration files error-prone and difficult.</span></span> <span data-ttu-id="f94c8-194">WCF 也可讓您在程式碼中設定服務。</span><span class="sxs-lookup"><span data-stu-id="f94c8-194">WCF also allows you to configure services in code.</span></span> <span data-ttu-id="f94c8-195">在舊版 WCF (4.0 和舊版中) 在自我裝載的案例中，以程式碼來設定服務很容易，類別可讓 <xref:System.ServiceModel.ServiceHost> 您在呼叫 ServiceHost 之前設定端點和行為。開啟。</span><span class="sxs-lookup"><span data-stu-id="f94c8-195">In earlier versions of WCF (4.0 and earlier) configuring services in code was easy in self-hosted scenarios, the <xref:System.ServiceModel.ServiceHost> class allowed you to configure endpoints and behaviors prior to calling ServiceHost.Open.</span></span> <span data-ttu-id="f94c8-196">但是在 Web 裝載案例中，您就無法存取 <xref:System.ServiceModel.ServiceHost> 類別。</span><span class="sxs-lookup"><span data-stu-id="f94c8-196">In web hosted scenarios, however, you don’t have access to the <xref:System.ServiceModel.ServiceHost> class.</span></span> <span data-ttu-id="f94c8-197">為了設定 Web 裝載服務，您需要建立會建立 `System.ServiceModel.ServiceHostFactory` 的 <xref:System.ServiceModel.Activation.ServiceHostFactory>，並執行任何所需的設定。</span><span class="sxs-lookup"><span data-stu-id="f94c8-197">To configure a web hosted service you were required to create a `System.ServiceModel.ServiceHostFactory` that created the <xref:System.ServiceModel.Activation.ServiceHostFactory> and performed any needed configuration.</span></span> <span data-ttu-id="f94c8-198">從 .NET Framework 4.5 開始，WCF 提供更簡單的方法，讓您在程式碼中同時設定自我裝載和 web 託管服務。</span><span class="sxs-lookup"><span data-stu-id="f94c8-198">Starting with .NET Framework 4.5, WCF provides an easier way to configure both self-hosted and web hosted services in code.</span></span> <span data-ttu-id="f94c8-199">如需詳細資訊，請參閱 [在程式碼中設定 WCF 服務](configuring-wcf-services-in-code.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-199">For more information, see [Configuring WCF Services in Code](configuring-wcf-services-in-code.md).</span></span>

## <a name="channelfactory-caching"></a><span data-ttu-id="f94c8-200">ChannelFactory 快取</span><span class="sxs-lookup"><span data-stu-id="f94c8-200">ChannelFactory Caching</span></span>

<span data-ttu-id="f94c8-201">WCF 用戶端應用程式會使用 <xref:System.ServiceModel.ChannelFactory%601> 類別來建立與 WCF 服務的通訊通道。</span><span class="sxs-lookup"><span data-stu-id="f94c8-201">WCF client applications use the <xref:System.ServiceModel.ChannelFactory%601> class to create a communication channel with a WCF service.</span></span> <span data-ttu-id="f94c8-202">建立 <xref:System.ServiceModel.ChannelFactory%601> 執行個體會產生額外負荷，因為這涉及到下列作業：</span><span class="sxs-lookup"><span data-stu-id="f94c8-202">Creating <xref:System.ServiceModel.ChannelFactory%601> instances incurs some overhead because it involves the following operations:</span></span>

1. <span data-ttu-id="f94c8-203">建構 <xref:System.ServiceModel.Description.ContractDescription> 樹狀</span><span class="sxs-lookup"><span data-stu-id="f94c8-203">Constructing the <xref:System.ServiceModel.Description.ContractDescription> tree</span></span>

2. <span data-ttu-id="f94c8-204">反映所有必要的 CLR 型別</span><span class="sxs-lookup"><span data-stu-id="f94c8-204">Reflecting all of the required CLR types</span></span>

3. <span data-ttu-id="f94c8-205">建構通道堆疊</span><span class="sxs-lookup"><span data-stu-id="f94c8-205">Constructing the channel stack</span></span>

4. <span data-ttu-id="f94c8-206">處置資源</span><span class="sxs-lookup"><span data-stu-id="f94c8-206">Disposing of resources</span></span>

<span data-ttu-id="f94c8-207">為了盡量減少這種負荷，WCF 可以在您使用 WCF 用戶端 Proxy 時快取通道處理站。</span><span class="sxs-lookup"><span data-stu-id="f94c8-207">To help minimize this overhead, WCF can cache channel factories when you are using a WCF client proxy.</span></span> <span data-ttu-id="f94c8-208">如需詳細資訊，請參閱通道處理站 [和](./feature-details/channel-factory-and-caching.md)快取。</span><span class="sxs-lookup"><span data-stu-id="f94c8-208">For more information, see [Channel Factory and Caching](./feature-details/channel-factory-and-caching.md).</span></span>

## <a name="compression-and-the-binary-encoder"></a><span data-ttu-id="f94c8-209">壓縮和二進位編碼器</span><span class="sxs-lookup"><span data-stu-id="f94c8-209">Compression and the Binary Encoder</span></span>

<span data-ttu-id="f94c8-210">從 WCF 4.5 開始，WCF 二進位編碼器加入壓縮的支援。</span><span class="sxs-lookup"><span data-stu-id="f94c8-210">Beginning with WCF 4.5 the WCF binary encoder adds support for compression.</span></span> <span data-ttu-id="f94c8-211">壓縮型別是透過 <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> 屬性來設定。</span><span class="sxs-lookup"><span data-stu-id="f94c8-211">The type of compression is configured with the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> property.</span></span> <span data-ttu-id="f94c8-212">用戶端和服務都必須設定 <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> 屬性。</span><span class="sxs-lookup"><span data-stu-id="f94c8-212">Both the client and the service must configure the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A> property.</span></span> <span data-ttu-id="f94c8-213">壓縮適用於 HTTP、HTTPS 和 TCP 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="f94c8-213">Compression will work for HTTP, HTTPS, and TCP protocols.</span></span> <span data-ttu-id="f94c8-214">如果用戶端指定要使用壓縮，但服務不支援這項功能，則會擲回通訊協定例外狀況以表示通訊協定不相符。</span><span class="sxs-lookup"><span data-stu-id="f94c8-214">If a client specifies to use compression but the service does not support it a protocol exception is thrown indicating a protocol mismatch.</span></span> <span data-ttu-id="f94c8-215">如需詳細資訊，請參閱 [選擇訊息編碼器](./feature-details/choosing-a-message-encoder.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-215">For more information, see [Choosing a Message Encoder](./feature-details/choosing-a-message-encoder.md).</span></span>

## <a name="udp"></a><span data-ttu-id="f94c8-216">UDP</span><span class="sxs-lookup"><span data-stu-id="f94c8-216">UDP</span></span>

<span data-ttu-id="f94c8-217">已新增 UDP 傳輸的支援，可讓開發人員撰寫使用「引發並忘記」訊息的服務。</span><span class="sxs-lookup"><span data-stu-id="f94c8-217">Support has been added for a UDP transport which allows developers to write services that use "fire and forget" messaging.</span></span> <span data-ttu-id="f94c8-218">用戶端傳送訊息給服務，而不期待服務發出任何回應。</span><span class="sxs-lookup"><span data-stu-id="f94c8-218">A client sends a message to a service and expects no response from the service.</span></span>

## <a name="multiple-authentication-support"></a><span data-ttu-id="f94c8-219">多重驗證支援</span><span class="sxs-lookup"><span data-stu-id="f94c8-219">Multiple Authentication Support</span></span>

<span data-ttu-id="f94c8-220">已加入支援，如同 IIS 的支援一樣，在使用 HTTP 傳輸與傳輸安全性時，於單一 WCF 端點上支援多個驗證模式。</span><span class="sxs-lookup"><span data-stu-id="f94c8-220">Support has been added to support multiple authentication modes, as supported by IIS, on a single WCF endpoint when using the HTTP transport and transport security.</span></span> <span data-ttu-id="f94c8-221">IIS 允許您在虛擬目錄上啟用多個驗證模式，這項功能可讓單一 WCF 端點支援裝載 WCF 服務之虛擬目錄所啟用的多個驗證模式。</span><span class="sxs-lookup"><span data-stu-id="f94c8-221">IIS allows you to enable multiple authentication modes on a virtual directory, this feature allows a single WCF endpoint to support the multiple authentication modes enabled for the virtual directory where the WCF service is hosted.</span></span>

## <a name="idn-support"></a><span data-ttu-id="f94c8-222">IDN 支援</span><span class="sxs-lookup"><span data-stu-id="f94c8-222">IDN Support</span></span>

<span data-ttu-id="f94c8-223">已加入支援，並允許具有國際化網域名稱的 WCF 服務。</span><span class="sxs-lookup"><span data-stu-id="f94c8-223">Support has been added to allow for WCF services with Internationalized Domain Names.</span></span> <span data-ttu-id="f94c8-224">如需詳細資訊，請參閱 [WCF 和國際化功能變數名稱](./feature-details/wcf-and-internationalized-domain-names.md)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-224">For more information see [WCF and Internationalized Domain Names](./feature-details/wcf-and-internationalized-domain-names.md).</span></span>

## <a name="httpclient"></a><span data-ttu-id="f94c8-225">HttpClient</span><span class="sxs-lookup"><span data-stu-id="f94c8-225">HttpClient</span></span>

<span data-ttu-id="f94c8-226">已加入名稱為 <xref:System.Net.Http.HttpClient> 的新類別，使得處理 HTTP 要求大為方便。</span><span class="sxs-lookup"><span data-stu-id="f94c8-226">A new class called <xref:System.Net.Http.HttpClient> has been added to make working with HTTP requests much easier.</span></span> <span data-ttu-id="f94c8-227">如需詳細資訊，請參閱 [讓應用程式以社交和連線至 HTTP 服務](https://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-581T) 和 [Http 用戶端範例](https://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664)。</span><span class="sxs-lookup"><span data-stu-id="f94c8-227">For more info, see [Making apps social and connected with HTTP services](https://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-581T) and the [HTTP Client Sample](https://code.msdn.microsoft.com/windowsapps/HttpClient-sample-55700664).</span></span>

## <a name="configuration-intellisense"></a><span data-ttu-id="f94c8-228">組態 Intellisense</span><span class="sxs-lookup"><span data-stu-id="f94c8-228">Configuration Intellisense</span></span>

<span data-ttu-id="f94c8-229">在組態檔中，對於專案內定義之自訂屬性的屬性值現可支援 Intellisense 功能，以協助您快速準確地處理組態檔。</span><span class="sxs-lookup"><span data-stu-id="f94c8-229">Attribute values in configuration files for custom attributes defined in the project now support intellisense to facilitate working with configurations quickly and accurately.</span></span>

## <a name="configuration-tooltips"></a><span data-ttu-id="f94c8-230">組態工具提示</span><span class="sxs-lookup"><span data-stu-id="f94c8-230">Configuration tooltips</span></span>

<span data-ttu-id="f94c8-231">WCF 元素和屬性現在會在 XML 編輯器中有工具提示，以更輕鬆且精確地識別元素或屬性的用途。</span><span class="sxs-lookup"><span data-stu-id="f94c8-231">WCF elements and attributes now have tooltips in the XML editor, to more easily and accurately identify the purpose of the element or attribute.</span></span>

## <a name="paste-data-as-classes"></a><span data-ttu-id="f94c8-232">貼上資料做為類別</span><span class="sxs-lookup"><span data-stu-id="f94c8-232">Paste Data as Classes</span></span>

<span data-ttu-id="f94c8-233">在 WCF 專案中，定義於 XML 的資料型別 (例如服務中所公開的項目) 可以直接貼到程式碼頁面上。</span><span class="sxs-lookup"><span data-stu-id="f94c8-233">In a WCF project, data types defined in XML (such as are exposed in a service) can be pasted directly into a code page.</span></span> <span data-ttu-id="f94c8-234">XML 型別會以 CLR 型別貼上。</span><span class="sxs-lookup"><span data-stu-id="f94c8-234">The XML type will be pasted as a CLR type.</span></span> <span data-ttu-id="f94c8-235">如需詳細資訊，請參閱 [從 XML 產生資料類型類別](generating-data-type-classes-from-xml.md) 。</span><span class="sxs-lookup"><span data-stu-id="f94c8-235">See [Generating Data Type Classes from XML](generating-data-type-classes-from-xml.md) for more details.</span></span>

## <a name="webservicehost-and-default-endpoints"></a><span data-ttu-id="f94c8-236">WebServiceHost 和預設端點</span><span class="sxs-lookup"><span data-stu-id="f94c8-236">WebServiceHost and default endpoints</span></span>

<span data-ttu-id="f94c8-237">在 Visual Studio 2010 中，不論您是否明確指定端點，WebServiceHost 都會自動建立預設端點。</span><span class="sxs-lookup"><span data-stu-id="f94c8-237">In Visual Studio 2010, WebServiceHost automatically created a default endpoint whether you explicitly specified an endpoint or not.</span></span> <span data-ttu-id="f94c8-238">在 Visual Studio 2012 和更新版本中，如果未明確新增任何端點，WebServiceHost 只會建立預設端點。</span><span class="sxs-lookup"><span data-stu-id="f94c8-238">In Visual Studio 2012 and later, WebServiceHost only creates a default endpoint if no endpoints are explicitly added.</span></span> <span data-ttu-id="f94c8-239">如果您的用戶端預期預設端點，您可以明確地新增端點並將用戶端指向該端點。</span><span class="sxs-lookup"><span data-stu-id="f94c8-239">If your client is expecting the default endpoint you can explicitly add an endpoint and point the client to it.</span></span> <span data-ttu-id="f94c8-240">或者，您可以將下列設定加入您應用程式的組態檔，告知 WCF 還原成之前的行為</span><span class="sxs-lookup"><span data-stu-id="f94c8-240">Alternatively, you can tell WCF to revert back to the previous behavior by adding the following setting to you application’s configuration file</span></span>

```xml
<appSettings>
    <add key="wcf:webservicehost:enableautomaticendpointscompatability" value="true"/>
  </appSettings>
```

## <a name="ihttpcookiecontainermanager"></a><span data-ttu-id="f94c8-241">IHttpCookieContainerManager</span><span class="sxs-lookup"><span data-stu-id="f94c8-241">IHttpCookieContainerManager</span></span>

<span data-ttu-id="f94c8-242">這個由 <xref:System.ServiceModel.Channels.IChannelFactory%601> 公開的介面，可讓您在用戶端上更輕鬆地使用 Cookie。</span><span class="sxs-lookup"><span data-stu-id="f94c8-242">This interface, exposed by <xref:System.ServiceModel.Channels.IChannelFactory%601>, makes working with cookies on the client side much easier.</span></span> <span data-ttu-id="f94c8-243">當繫結上的 AllowCookies 設定為 true 時，您可使用下列程式碼存取 Cookie：</span><span class="sxs-lookup"><span data-stu-id="f94c8-243">When AllowCookies is set to true on the binding, you can access cookies by using the following code:</span></span>

```csharp
IHttpCookieContainerManager cookieManager = factory.GetProperty<IHttpCookieContainerManager>();
System.Net.CookieContainer container = cookieManager.CookieContainer;
```

<span data-ttu-id="f94c8-244">之後，您即可從 <xref:System.Net.CookieContainer> 擷取或設定 Cookie。</span><span class="sxs-lookup"><span data-stu-id="f94c8-244">You can then retrieve or set the cookies from the <xref:System.Net.CookieContainer>.</span></span> <span data-ttu-id="f94c8-245">當 AllowCookies 設為 false 時，您可使用 <xref:System.ServiceModel.OperationContext> 手動擷取 Cookie，並使用另一個 <xref:System.ServiceModel.OperationContext> 或訊息偵測器，在其他要求中傳送此 Cookie。</span><span class="sxs-lookup"><span data-stu-id="f94c8-245">When AllowCookies is set to false, you can manually retrieve the cookies using <xref:System.ServiceModel.OperationContext> and send it in other requests using another <xref:System.ServiceModel.OperationContext> or message inspector.</span></span> <span data-ttu-id="f94c8-246">IHttpCookieContainerManager 介面可讓您驗證使用者與服務，並使用該服務傳回的驗證 Cookie 來驗證其他服務。</span><span class="sxs-lookup"><span data-stu-id="f94c8-246">The IHttpCookieContainerManager interface allows you to authenticate a user with a service and use the authentication cookie returned by that service to authenticate with other services.</span></span>
