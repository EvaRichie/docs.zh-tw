---
title: .NET Framework 效能
description: 設計和規劃 .NET 應用程式中的效能。 使用 Microsoft 提供的工具來測量應用程式的效能並進行改進。
ms.date: 03/30/2017
helpviewer_keywords:
- performance [.NET Framework]
- reliability [.NET Framework]
ms.assetid: c1676cca-3f1a-41ec-b469-9029566074fc
ms.openlocfilehash: f15cd9b38285e88dac727bcfe51c8dc542a735f6
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/26/2020
ms.locfileid: "96277981"
---
# <a name="net-framework-performance"></a><span data-ttu-id="03031-104">.NET Framework 效能</span><span class="sxs-lookup"><span data-stu-id="03031-104">.NET Framework Performance</span></span>

<span data-ttu-id="03031-105">如果您想建立高效能的應用程式，您應該以設計應用程式之其他任何功能的相同方式，來設計及規劃效能。</span><span class="sxs-lookup"><span data-stu-id="03031-105">If you want to create apps with great performance, you should design and plan for performance just as you would design any other feature of your app.</span></span> <span data-ttu-id="03031-106">您可以使用 Microsoft 提供的工具來測量應用程式的效能，並在必要時改進記憶體使用量、程式碼輸送量和回應性。</span><span class="sxs-lookup"><span data-stu-id="03031-106">You can use the tools provided by Microsoft to measure your app's performance, and, if needed, make improvements to memory use, code throughput, and responsiveness.</span></span> <span data-ttu-id="03031-107">本主題列出 Microsoft 提供的效能分析工具，並提供涵蓋應用程式開發之特定區域效能的其他主題連結。</span><span class="sxs-lookup"><span data-stu-id="03031-107">This topic lists the performance analysis tools that Microsoft provides, and provides links to other topics that cover performance for specific areas of app development.</span></span>  
  
## <a name="designing-and-planning-for-performance"></a><span data-ttu-id="03031-108">設計及規劃效能</span><span class="sxs-lookup"><span data-stu-id="03031-108">Designing and planning for performance</span></span>  

 <span data-ttu-id="03031-109">如果您需要高效能的應用程式，您必須以設計其他任何功能的相同方式，將效能設計到應用程式中。</span><span class="sxs-lookup"><span data-stu-id="03031-109">If you want a great performing app, you must design performance into your app just as you would design any other feature.</span></span> <span data-ttu-id="03031-110">您應該判斷應用程式的效能關鍵案例、設定效能目標，並及早且經常地測量這些應用程式案例的效能。</span><span class="sxs-lookup"><span data-stu-id="03031-110">You should determine the performance-critical scenarios in your app, set performance goals, and measure performance for these app scenarios early and often.</span></span> <span data-ttu-id="03031-111">由於每個應用程式都不同，並有不同的效能關鍵執行路徑，因此及早判斷這些路徑並集中工作，可讓您提升生產力。</span><span class="sxs-lookup"><span data-stu-id="03031-111">Because each app is different and has different performance-critical execution paths, determining those paths early and focusing your efforts enable you to maximize your productivity.</span></span>  
  
 <span data-ttu-id="03031-112">您不需要完全熟悉您的目標平台，即可建立高效能的應用程式。</span><span class="sxs-lookup"><span data-stu-id="03031-112">You don’t have to be completely familiar with your target platform to create a high-performance app.</span></span> <span data-ttu-id="03031-113">不過，您應該了解目標平台中的哪些組件會嚴重降低效能。</span><span class="sxs-lookup"><span data-stu-id="03031-113">However, you should develop an understanding of which parts of your target platform are costly in terms of performance.</span></span> <span data-ttu-id="03031-114">您可以在開發流程初期測量效能，來達成此目的。</span><span class="sxs-lookup"><span data-stu-id="03031-114">You can do this by measuring performance early in your development process.</span></span>  
  
 <span data-ttu-id="03031-115">若要判斷哪些區域對效能很重要，以及建立您的效能目標，請一律考量使用者體驗。</span><span class="sxs-lookup"><span data-stu-id="03031-115">To determine the areas that are crucial to performance and to establish your performance goals, always consider the user experience.</span></span> <span data-ttu-id="03031-116">啟動時間和回應性是影響使用者對應用程式觀感的兩個主要區域。</span><span class="sxs-lookup"><span data-stu-id="03031-116">Startup time and responsiveness are two key areas that will affect the user’s perception of your app.</span></span> <span data-ttu-id="03031-117">如果您的應用程式使用大量記憶體，可能對使用者顯得遲緩或影響在系統上執行的其他應用程式，或者在某些情況下，造成 Windows 市集或 Windows Phone 市集提交流程失敗。</span><span class="sxs-lookup"><span data-stu-id="03031-117">If your app uses a lot of memory, it may appear sluggish to the user or affect other apps running on the system, or, in some cases, it could fail the Windows Store or Windows Phone Store submission process.</span></span> <span data-ttu-id="03031-118">此外，如果您判斷程式碼中有哪些部分較常執行，則可以確保程式碼中的這些部分經過適當的最佳化。</span><span class="sxs-lookup"><span data-stu-id="03031-118">Also, if you determine which parts of your code execute more frequently, you can make sure that these portions of your code are well optimized.</span></span>  
  
## <a name="analyzing-performance"></a><span data-ttu-id="03031-119">分析效能</span><span class="sxs-lookup"><span data-stu-id="03031-119">Analyzing performance</span></span>  

 <span data-ttu-id="03031-120">在您的整體開發計劃中，於開發時設定應用程式效能的測量點，並將結果與您之前設定的目標進行比較。</span><span class="sxs-lookup"><span data-stu-id="03031-120">As part of your overall development plan, set points during development where you will measure the performance of your app and compare the results with the goals you set previously.</span></span> <span data-ttu-id="03031-121">在您預期使用者會有的環境和硬體中測量您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="03031-121">Measure your app in the environment and hardware that you expect your users to have.</span></span> <span data-ttu-id="03031-122">及早分析應用程式的效能，通常可以變更日後在開發週期中修復時可能所費不貲的架構決策。</span><span class="sxs-lookup"><span data-stu-id="03031-122">By analyzing your app’s performance early and often you can change architectural decisions that would be costly and expensive to fix later in the development cycle.</span></span> <span data-ttu-id="03031-123">下列各節說明您可用來分析應用程式的效能工具，並討論這些工具使用的事件追蹤。</span><span class="sxs-lookup"><span data-stu-id="03031-123">The following sections describe performance tools you can use to analyze your apps and discuss event tracing, which is used by these tools.</span></span>  
  
### <a name="performance-tools"></a><span data-ttu-id="03031-124">效能工具</span><span class="sxs-lookup"><span data-stu-id="03031-124">Performance tools</span></span>  

 <span data-ttu-id="03031-125">以下是您可以搭配 .NET Framework 應用程式使用的一些效能工具。</span><span class="sxs-lookup"><span data-stu-id="03031-125">Here are some of the performance tools you can use with your .NET Framework apps.</span></span>  
  
|<span data-ttu-id="03031-126">工具</span><span class="sxs-lookup"><span data-stu-id="03031-126">Tool</span></span>|<span data-ttu-id="03031-127">描述</span><span class="sxs-lookup"><span data-stu-id="03031-127">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="03031-128">Visual Studio 效能分析</span><span class="sxs-lookup"><span data-stu-id="03031-128">Visual Studio Performance Analysis</span></span>|<span data-ttu-id="03031-129">用來分析要部署至執行 Windows 作業系統的電腦之 .NET Framework 應用程式的 CPU 使用率。</span><span class="sxs-lookup"><span data-stu-id="03031-129">Use to analyze the CPU usage of your .NET Framework apps that will be deployed to computers that are running the Windows operating system.</span></span><br /><br /> <span data-ttu-id="03031-130">當您開啟專案之後，可從 Visual Studio 的 [偵錯] 功能表中取得這項工具。</span><span class="sxs-lookup"><span data-stu-id="03031-130">This tool is available from the **Debug** menu in Visual Studio after you open a project.</span></span> <span data-ttu-id="03031-131">如需詳細資訊，請參閱[效能總管](/visualstudio/profiling/performance-explorer)。</span><span class="sxs-lookup"><span data-stu-id="03031-131">For more information, see [Performance Explorer](/visualstudio/profiling/performance-explorer).</span></span> <span data-ttu-id="03031-132">**注意：** 以 Windows Phone 為目標時，請使用 Windows Phone 應用程式分析 (請參閱下一列)。</span><span class="sxs-lookup"><span data-stu-id="03031-132">**Note:**  Use Windows Phone Application Analysis (see next row) when targeting Windows Phone.</span></span>|  
|<span data-ttu-id="03031-133">Windows Phone 應用程式分析</span><span class="sxs-lookup"><span data-stu-id="03031-133">Windows Phone Application Analysis</span></span>|<span data-ttu-id="03031-134">用來分析您的 Windows Phone 應用程式中的 CPU 和記憶體、網路資料傳輸速率、應用程式回應性和耗電量。</span><span class="sxs-lookup"><span data-stu-id="03031-134">Use to analyze the CPU and memory, network data transfer rate, app responsiveness, and battery consumption in your Windows Phone apps.</span></span><br /><br /> <span data-ttu-id="03031-135">當您安裝 [Windows Phone SDK](https://go.microsoft.com/fwlink/?LinkId=265773) 之後，可針對 Windows Phone 專案，從 Visual Studio 的 [偵錯] 功能表中取得這項工具。</span><span class="sxs-lookup"><span data-stu-id="03031-135">This tool is available from the **Debug** menu for a Windows Phone project in Visual Studio after you install the [Windows Phone SDK](https://go.microsoft.com/fwlink/?LinkId=265773).</span></span> <span data-ttu-id="03031-136">如需詳細資訊，請參閱 [Windows Phone 8 的應用程式分析](/previous-versions/windows/apps/jj215908(v=vs.105))。</span><span class="sxs-lookup"><span data-stu-id="03031-136">For more information, see [App profiling for Windows Phone 8](/previous-versions/windows/apps/jj215908(v=vs.105)).</span></span>|  
|[<span data-ttu-id="03031-137">PerfView</span><span class="sxs-lookup"><span data-stu-id="03031-137">PerfView</span></span>](https://www.microsoft.com/download/details.aspx?id=28567)|<span data-ttu-id="03031-138">用來識別 CPU 和記憶體相關的效能問題。</span><span class="sxs-lookup"><span data-stu-id="03031-138">Use to identify CPU and memory-related performance issues.</span></span> <span data-ttu-id="03031-139">這項工具使用 Windows 事件追蹤 (ETW) 和 CLR 程式碼分析應用程式開發介面，提供進階的記憶體和 CPU 調查，以及有關記憶體回收和 JIT 編譯的資訊。</span><span class="sxs-lookup"><span data-stu-id="03031-139">This tool uses event tracing for Windows (ETW)  and CLR profiling APIs to provide advanced memory and CPU investigations as well as information about garbage collection and JIT compilation.</span></span> <span data-ttu-id="03031-140">如需如何使用 PerfView 的詳細資訊，請參閱應用程式中隨附的教學課程和說明檔、[Channel 9 影片教學課程](https://channel9.msdn.com/Series/PerfView-Tutorial)和[部落格文章](/archive/blogs/vancem/)。</span><span class="sxs-lookup"><span data-stu-id="03031-140">For more information about how to use PerfView, see the tutorial and help files that are included with the app, [Channel 9 video tutorials](https://channel9.msdn.com/Series/PerfView-Tutorial), and [blog posts](/archive/blogs/vancem/).</span></span><br /><br /> <span data-ttu-id="03031-141">若是記憶體特定問題，請參閱 [Using PerfView for Memory Investigations](https://channel9.msdn.com/Series/PerfView-Tutorial/PerfView-Tutorial-9-NET-Memory-Investigation-Basics-of-GC-Heap-Snapshots) (使用 PerfView 進行記憶體調查)。</span><span class="sxs-lookup"><span data-stu-id="03031-141">For memory-specific issues, see [Using PerfView for Memory Investigations](https://channel9.msdn.com/Series/PerfView-Tutorial/PerfView-Tutorial-9-NET-Memory-Investigation-Basics-of-GC-Heap-Snapshots).</span></span>|  
|[<span data-ttu-id="03031-142">Windows Performance Analyzer</span><span class="sxs-lookup"><span data-stu-id="03031-142">Windows Performance Analyzer</span></span>](https://www.microsoft.com/p/windows-performance-analyzer/9n0w1b2bxgnz?activetab=pivot:overviewtab)|<span data-ttu-id="03031-143">當多個應用程式在相同電腦上執行時，用來判斷整個系統效能，例如應用程式的記憶體和儲存體使用。</span><span class="sxs-lookup"><span data-stu-id="03031-143">Use to determine overall system performance such as your app's memory and storage use when multiple apps are running on the same computer.</span></span> <span data-ttu-id="03031-144">您可以從下載中心取得此工具，作為 Windows 8 的 Windows 評定及部署套件 (ADK) 的一部分。</span><span class="sxs-lookup"><span data-stu-id="03031-144">This tool is available from the download center as part of the Windows Assessment and Deployment Kit (ADK) for Windows 8.</span></span> <span data-ttu-id="03031-145">如需詳細資訊，請參閱 [Windows Performance Analyzer](/windows-hardware/test/wpt/windows-performance-analyzer)。</span><span class="sxs-lookup"><span data-stu-id="03031-145">For more information, see [Windows Performance Analyzer](/windows-hardware/test/wpt/windows-performance-analyzer).</span></span>|
  
### <a name="event-tracing-for-windows-etw"></a><span data-ttu-id="03031-146">Windows 事件追蹤 (ETW)</span><span class="sxs-lookup"><span data-stu-id="03031-146">Event tracing for Windows (ETW)</span></span>  

 <span data-ttu-id="03031-147">ETW 是一項技術，可讓您取得有關執行中程式碼的診斷資訊，對於之前所提到的許多效能工具而言，是不可或缺的一項技術。</span><span class="sxs-lookup"><span data-stu-id="03031-147">ETW is a technique that lets you obtain diagnostic information about running code and is essential for many of the performance tools mentioned previously.</span></span> <span data-ttu-id="03031-148">ETW 會在 .NET Framework 應用程式和 Windows 引發特定事件時建立記錄檔。</span><span class="sxs-lookup"><span data-stu-id="03031-148">ETW creates logs when particular events are raised by .NET Framework apps and Windows.</span></span> <span data-ttu-id="03031-149">透過 ETW，您可以動態啟用和停用記錄，讓您在生產環境中執行詳細追蹤，而不需要重新啟動應用程式。</span><span class="sxs-lookup"><span data-stu-id="03031-149">With ETW, you can enable and disable logging dynamically, so that you can perform detailed tracing in a production environment without restarting your app.</span></span> <span data-ttu-id="03031-150">.NET Framework 提供對 ETW 事件的支援，而許多程式碼分析和效能工具會使用 ETW 來產生效能資料。</span><span class="sxs-lookup"><span data-stu-id="03031-150">The .NET Framework offers support for ETW events, and ETW is used by many profiling and performance tools to generate performance data.</span></span> <span data-ttu-id="03031-151">這些工具通常會啟用和停用 ETW 事件，因此熟悉這些事件會很有幫助。</span><span class="sxs-lookup"><span data-stu-id="03031-151">These tools often enable and disable ETW events, so familiarity with them is helpful.</span></span> <span data-ttu-id="03031-152">您可以使用特定 ETW 事件收集有關您的應用程式特定元件的效能資訊。</span><span class="sxs-lookup"><span data-stu-id="03031-152">You can use specific ETW events to collect performance information about particular components of your app.</span></span> <span data-ttu-id="03031-153">如需 .NET Framework 中 ETW 支援的詳細資訊，請參閱[通用語言執行平台中的 ETW 事件](etw-events-in-the-common-language-runtime.md)和[工作平行程式庫和 PLINQ 中的 ETW 事件](etw-events-in-task-parallel-library-and-plinq.md)。</span><span class="sxs-lookup"><span data-stu-id="03031-153">For more information about ETW support in the .NET Framework, see [ETW Events in the Common Language Runtime](etw-events-in-the-common-language-runtime.md) and [ETW Events in Task Parallel Library and PLINQ](etw-events-in-task-parallel-library-and-plinq.md).</span></span>  
  
## <a name="performance-by-app-type"></a><span data-ttu-id="03031-154">依應用程式類型的效能</span><span class="sxs-lookup"><span data-stu-id="03031-154">Performance by app type</span></span>  

 <span data-ttu-id="03031-155">每一種類型的 .NET Framework 應用程式都有自己用於評估效能的最佳做法、考量和工具。</span><span class="sxs-lookup"><span data-stu-id="03031-155">Each type of .NET Framework app has its own best practices, considerations, and tools for evaluating performance.</span></span> <span data-ttu-id="03031-156">下表連結至特定 .NET Framework 應用程式類型的效能主題。</span><span class="sxs-lookup"><span data-stu-id="03031-156">The following table links to performance topics for specific .NET Framework app types.</span></span>  
  
|<span data-ttu-id="03031-157">應用程式類型</span><span class="sxs-lookup"><span data-stu-id="03031-157">App type</span></span>|<span data-ttu-id="03031-158">請參閱</span><span class="sxs-lookup"><span data-stu-id="03031-158">See</span></span>|  
|--------------|---------|  
|<span data-ttu-id="03031-159">所有平台的 .NET 應用程式</span><span class="sxs-lookup"><span data-stu-id="03031-159">.NET Framework apps for all platforms</span></span>|[<span data-ttu-id="03031-160">Garbage Collection and Performance (記憶體回收與效能)</span><span class="sxs-lookup"><span data-stu-id="03031-160">Garbage Collection and Performance</span></span>](../../standard/garbage-collection/performance.md)<br /><br /> [<span data-ttu-id="03031-161">效能祕訣</span><span class="sxs-lookup"><span data-stu-id="03031-161">Performance Tips</span></span>](performance-tips.md)|  
|<span data-ttu-id="03031-162">Windows 8. x 儲存以 c + +、c # 和 Visual Basic 撰寫的應用程式</span><span class="sxs-lookup"><span data-stu-id="03031-162">Windows 8.x Store apps written in C++, C#, and Visual Basic</span></span>|<span data-ttu-id="03031-163">[使用 C++、C# 及 Visual Basic 的 Windows 市集應用程式的效能最佳做法](/previous-versions/windows/apps/hh750313(v=win.10))</span><span class="sxs-lookup"><span data-stu-id="03031-163">[Performance best practices for Windows Store apps using C++, C#, and Visual Basic](/previous-versions/windows/apps/hh750313(v=win.10))</span></span>|  
|<span data-ttu-id="03031-164">Windows Presentation Foundation (WPF)</span><span class="sxs-lookup"><span data-stu-id="03031-164">Windows Presentation Foundation (WPF)</span></span>|<span data-ttu-id="03031-165">[WPF 效能套件](/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="03031-165">[WPF Performance Suite](/previous-versions/dotnet/netframework-4.0/aa969767(v=vs.100))</span></span>|  
|<span data-ttu-id="03031-166">ASP.NET</span><span class="sxs-lookup"><span data-stu-id="03031-166">ASP.NET</span></span>|<span data-ttu-id="03031-167">[ASP.NET 效能概觀](/previous-versions/aspnet/cc668225(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="03031-167">[ASP.NET Performance Overview](/previous-versions/aspnet/cc668225(v=vs.100))</span></span>|  
  
## <a name="related-topics"></a><span data-ttu-id="03031-168">相關主題</span><span class="sxs-lookup"><span data-stu-id="03031-168">Related Topics</span></span>  
  
|<span data-ttu-id="03031-169">標題</span><span class="sxs-lookup"><span data-stu-id="03031-169">Title</span></span>|<span data-ttu-id="03031-170">描述</span><span class="sxs-lookup"><span data-stu-id="03031-170">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="03031-171">.NET Framework 應用程式中的快取</span><span class="sxs-lookup"><span data-stu-id="03031-171">Caching in .NET Framework Applications</span></span>](caching-in-net-framework-applications.md)|<span data-ttu-id="03031-172">描述用於提升應用程式效能的快取資料技術。</span><span class="sxs-lookup"><span data-stu-id="03031-172">Describes techniques for caching data to improve performance in your app.</span></span>|  
|[<span data-ttu-id="03031-173">延遲初始設定</span><span class="sxs-lookup"><span data-stu-id="03031-173">Lazy Initialization</span></span>](lazy-initialization.md)|<span data-ttu-id="03031-174">描述如何視需要初始化物件以提升效能，特別是在應用程式啟動時。</span><span class="sxs-lookup"><span data-stu-id="03031-174">Describes how to initialize objects as-needed to improve performance, particularly at app startup.</span></span>|  
|[<span data-ttu-id="03031-175">可靠性</span><span class="sxs-lookup"><span data-stu-id="03031-175">Reliability</span></span>](reliability.md)|<span data-ttu-id="03031-176">提供有關防止伺服器環境中發生非同步例外狀況的資訊。</span><span class="sxs-lookup"><span data-stu-id="03031-176">Provides information about preventing asynchronous exceptions in a server environment.</span></span>|  
|[<span data-ttu-id="03031-177">撰寫大型、可回應的 .NET Framework 應用程式</span><span class="sxs-lookup"><span data-stu-id="03031-177">Writing Large, Responsive .NET Framework Apps</span></span>](writing-large-responsive-apps.md)|<span data-ttu-id="03031-178">提供從以 Managed 程式碼重寫 C# 和 Visual Basic 編譯器蒐集的效能提示，包含數個 C# 編譯器的實際範例。</span><span class="sxs-lookup"><span data-stu-id="03031-178">Provides performance tips gathered from rewriting the C# and Visual Basic compilers in managed code, and includes several real examples from the C# compiler.</span></span>|
