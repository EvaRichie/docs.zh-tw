---
ms.openlocfilehash: 53840ddd59ae3463bae2930fd0151ab2cd2d65cb
ms.sourcegitcommit: e301979e3049ce412d19b094c60ed95b316a8f8c
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/16/2020
ms.locfileid: "97593317"
---
### <a name="design-time-builds-only-return-top-level-package-references"></a><span data-ttu-id="77838-101">設計階段組建只會傳回最上層的封裝參考</span><span class="sxs-lookup"><span data-stu-id="77838-101">Design-time builds only return top-level package references</span></span>

<span data-ttu-id="77838-102">從 .NET Core SDK 3.1.400 開始，目標只會傳回最上層的封裝參考 `RunResolvePackageDependencies` 。</span><span class="sxs-lookup"><span data-stu-id="77838-102">Starting in .NET Core SDK 3.1.400, only top-level package references are returned by the `RunResolvePackageDependencies` target.</span></span>

#### <a name="version-introduced"></a><span data-ttu-id="77838-103">引進的版本</span><span class="sxs-lookup"><span data-stu-id="77838-103">Version introduced</span></span>

<span data-ttu-id="77838-104">.NET Core SDK 3.1.400</span><span class="sxs-lookup"><span data-stu-id="77838-104">.NET Core SDK 3.1.400</span></span>

#### <a name="change-description"></a><span data-ttu-id="77838-105">變更描述</span><span class="sxs-lookup"><span data-stu-id="77838-105">Change description</span></span>

<span data-ttu-id="77838-106">在舊版的 .NET Core SDK 中， `RunResolvePackageDependencies` 目標會建立下列 MSBuild 專案，其中包含 NuGet 資產檔案中的資訊：</span><span class="sxs-lookup"><span data-stu-id="77838-106">In previous versions of the .NET Core SDK, the `RunResolvePackageDependencies` target created the following MSBuild items that contained information from the NuGet assets file:</span></span>

- `PackageDefinitions`
- `PackageDependencies`
- `TargetDefinitions`
- `FileDefinitions`
- `FileDependencies`

<span data-ttu-id="77838-107">Visual Studio 會使用這項資料來填入方案總管中的相依性節點。</span><span class="sxs-lookup"><span data-stu-id="77838-107">This data is used by Visual Studio to populate the Dependencies node in Solution Explorer.</span></span> <span data-ttu-id="77838-108">不過，它可以是大量資料，除非展開相依性節點，否則不需要資料。</span><span class="sxs-lookup"><span data-stu-id="77838-108">However, it can be a large amount of data, and the data isn't needed unless the Dependencies node is expanded.</span></span>

<span data-ttu-id="77838-109">從 .NET Core SDK 版本3.1.400 開始，預設不會產生大部分的專案。</span><span class="sxs-lookup"><span data-stu-id="77838-109">Starting in the .NET Core SDK version 3.1.400, most of these items aren't generated by default.</span></span> <span data-ttu-id="77838-110">只會傳回型別的專案 `Package` 。</span><span class="sxs-lookup"><span data-stu-id="77838-110">Only items of type `Package` are returned.</span></span> <span data-ttu-id="77838-111">如果 Visual Studio 需要專案來填入相依性節點，它會直接從資產檔案讀取資訊。</span><span class="sxs-lookup"><span data-stu-id="77838-111">If Visual Studio needs the items to populate the Dependencies node, it reads the information directly from the assets file.</span></span>

#### <a name="reason-for-change"></a><span data-ttu-id="77838-112">變更的原因</span><span class="sxs-lookup"><span data-stu-id="77838-112">Reason for change</span></span>

<span data-ttu-id="77838-113">這項變更是為了改善 Visual Studio 內的解決方案載入效能而引進的。</span><span class="sxs-lookup"><span data-stu-id="77838-113">This changed was introduced to improve solution-load performance inside of Visual Studio.</span></span> <span data-ttu-id="77838-114">先前會載入所有的封裝參考，其中牽涉到載入大部分使用者永遠不會看到的許多參考。</span><span class="sxs-lookup"><span data-stu-id="77838-114">Previously, all package references would be loaded, which involved loading many references that most users would never view.</span></span>

#### <a name="recommended-action"></a><span data-ttu-id="77838-115">建議的動作</span><span class="sxs-lookup"><span data-stu-id="77838-115">Recommended action</span></span>

<span data-ttu-id="77838-116">如果您的 MSBuild 邏輯相依于這些建立的專案，請 `EmitLegacyAssetsFileItems` 在您的專案檔中將屬性設為 `true` 。</span><span class="sxs-lookup"><span data-stu-id="77838-116">If you have MSBuild logic that depends on these items being created, set the `EmitLegacyAssetsFileItems` property to `true` in your project file.</span></span> <span data-ttu-id="77838-117">這項設定會啟用先前的行為，其中會建立所有專案。</span><span class="sxs-lookup"><span data-stu-id="77838-117">This setting enables the previous behavior where all the items are created.</span></span>

#### <a name="category"></a><span data-ttu-id="77838-118">類別</span><span class="sxs-lookup"><span data-stu-id="77838-118">Category</span></span>

<span data-ttu-id="77838-119">MSBuild</span><span class="sxs-lookup"><span data-stu-id="77838-119">MSBuild</span></span>

#### <a name="affected-apis"></a><span data-ttu-id="77838-120">受影響的 API</span><span class="sxs-lookup"><span data-stu-id="77838-120">Affected APIs</span></span>

<span data-ttu-id="77838-121">N/A</span><span class="sxs-lookup"><span data-stu-id="77838-121">N/A</span></span>
